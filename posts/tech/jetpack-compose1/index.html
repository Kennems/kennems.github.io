<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Jetpack Compose(1) | Kennem&#39;s Blog</title>
<meta name="keywords" content="Android">
<meta name="description" content="Android学习笔记">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/jetpack-compose1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1a7bc7e6d01b82c8ca2b2e53cfcf7e33d2fd9058f6b28245f94da0d91447c6a0.css" integrity="sha256-GnvH5tAbgsjKKy5Tz89&#43;M9L9kFj2soJF&#43;U2g2RRHxqA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/jetpack-compose1/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

<meta property="og:url" content="https://kennems.github.io/posts/tech/jetpack-compose1/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="Jetpack Compose(1)">
  <meta property="og:description" content="Android学习笔记">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-02-15T22:30:13+08:00">
    <meta property="article:modified_time" content="2024-02-15T22:20:13+08:00">
    <meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jetpack Compose(1)">
<meta name="twitter:description" content="Android学习笔记">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Jetpack Compose(1)",
      "item": "https://kennems.github.io/posts/tech/jetpack-compose1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Jetpack Compose(1)",
  "name": "Jetpack Compose(1)",
  "description": "Android学习笔记",
  "keywords": [
    "Android"
  ],
  "articleBody": "Jetpack Compose(1) Jetpack Compose是用于构建原生Android界面的新工具包。它可简化并加快Android上的界面开发，帮助使用更少的代码、强大的工具和只管的Kotlin API，快速打造生动而精彩的应用。 Compose的优势 更少的代码 使用更少的代码实现更多的功能，并且可以避免各种bug，从而使代码简洁且易于维护 直观 只需要描述界面，Compose会负责处理剩余的工作。应用状态变化时，界面会自动更新 加快应用开发 兼容现有的所有代码，方便随时随地使用。借助实时预览和全面的Android Studio支持，实现快速迭代。 功能强大 凭借对Android平台API的直接访问和对于Material Design，深色主题、动画等的内置支持，创建精美的应用。 可组合函数 Jetpack Compose 是围绕可组合函数构建的。这些函数可以让你以程序化定义应用的界面，只需描述应用界面的外观并提供数据项，而不必关注界面的构建过程（初始化元素，将其附加到父项等）。如需创建可组合函数，只需将@Composable注解添加到函数名称中即可。\n第一个Compose class MainActivity : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) enableEdgeToEdge() setContent { MessageCard(Message(\"Kotlin\", \"kkk\")) } } @Composable fun MessageCard(message: Message) { Text(text = \"Hello ${message.author}!\") } @Preview @Composable fun PreviewMessageCard() { MessageCard(Message(\"Kotlin\", \"kkk\")) } } data class Message(val author: String, val body: String) Column \u0026 Row 使用Column垂直排列元素，使用Row水平排列项，使用Box堆叠元素。\nclass MainActivity : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) enableEdgeToEdge() setContent { MessageCard(Message(\"Kotlin\", \"kkk\")) } } @Composable fun MessageCard(message: Message) { Row { Image(painter = painterResource(id = R.drawable.prayer), contentDescription = null) Column { Text(text = \"Hello ${message.author}!\") Text(text = message.body) } } } @Preview @Composable fun PreviewMessageCard() { MessageCard(Message(\"Kotlin\", \"kkk\")) } data class Message(val author: String, val body: String) 配置布局 为了装饰或配置可组合项，Compose使用了修饰符。\nclass MainActivity2 : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) enableEdgeToEdge() setContent { MessageCard(Message(\"Kotlin\", \"kkk\")) } } @Composable fun MessageCard(message: Message) { Row(modifier = Modifier.padding(all = 8.dp)) { Image( painter = painterResource(id = R.drawable.boat), contentDescription = null, modifier = Modifier .size(40.dp) .clip(CircleShape) ) Column { Text(text = \"Hello ${message.author}!\") Text(text = message.body) } } } @Preview @Composable fun PreviewMessageCard() { MessageCard(Message(\"Kotlin\", \"kkk\")) } data class Message(val author: String, val body: String) } Material Design Compose 旨在支持Material Design原则。它的许多界面元素都原生支持Material Design. Material Design是围绕三大要素构建的：颜色、排版、形状。 列表和动画 Compose可以轻松创建列表并添加有趣的动画效果\n创建消息列表 在展开消息时显示动画效果 class MainActivity4 : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) enableEdgeToEdge() setContent { ComPoseLearnTheme() { val sampleMessages = listOf( Message(\"Alice\", \"Hey there! Just finished an amazing project at work and feeling really excited about the potential impact. Can't wait to share more details with you soon!\"), Message(\"Bob\", \"I've been exploring some new hiking trails in the mountain region. The landscapes are absolutely breathtaking, and the natural beauty is just incredible. Thinking of planning a longer trek next month.\"), Message(\"Charlie\", \"Programming is such an interesting field! I've been diving deep into Kotlin and Jetpack Compose, and I'm constantly amazed by how elegant and powerful the language and framework are.\"), Message(\"David\", \"Tried out a new recipe for homemade pizza last night. Spent hours perfecting the dough and experimenting with different toppings. It turned out better than any restaurant pizza I've had!\"), Message(\"Emma\", \"Just got back from an incredible conference about artificial intelligence and machine learning. The keynote speakers were mind-blowing, and I learned so many cutting-edge techniques.\"), Message(\"Frank\", \"Thinking about starting a side project that combines my passion for photography and mobile app development. Any suggestions on interesting app ideas that could showcase visual creativity?\"), Message(\"Grace\", \"Reading an fascinating book about the history of technology innovation. It's fascinating how small ideas can transform entire industries and change the way we live and work.\"), Message(\"Henry\", \"Spent the weekend learning advanced Kotlin coroutines and concurrent programming. The complexity is challenging, but also incredibly rewarding when you start understanding the concepts.\"), Message(\"Isabella\", \"Planning a cross-country road trip and researching the best routes, attractions, and hidden gems along the way. Travel is such an amazing way to broaden one's perspective.\"), Message(\"Jack\", \"Just completed a marathon coding session developing a complex Android application using Jetpack Compose. The declarative UI approach is a game-changer!\") ) ComPoseLearnTheme { Conversation(messages = sampleMessages) } } } } @Composable fun Conversation(messages: List) { LazyColumn { items(messages.size) { messageIndex -\u003e MessageCard(messages.get(messageIndex)) } } } @Composable fun MessageCard(message: Message) { Row( modifier = Modifier .fillMaxWidth() .padding(all = 8.dp) .background(MaterialTheme.colorScheme.background), verticalAlignment = Alignment.CenterVertically, // Row 内部垂直居中 // horizontalArrangement = Arrangement.Center // Row 内部水平居中 ) { Image( painter = painterResource(id = R.drawable.boat), contentDescription = \"boat\", modifier = Modifier .size(60.dp) .clip(CircleShape), contentScale = ContentScale.Crop // 确保图片填充整个圆形区域 ) Spacer(modifier = Modifier.width(8.dp)) var isExpanded by remember { mutableStateOf(false) } Column( modifier = Modifier.clickable { isExpanded = !isExpanded }, // 图片和文字间添加间距 verticalArrangement = Arrangement.Center, // Column 内部垂直居中 horizontalAlignment = Alignment.Start // Column 内文字水平对齐方式 ) { Text( text = \"Hello ${message.author}!\", color = MaterialTheme.colorScheme.onBackground )// 使用主题提供的颜色 Text( text = message.body, color = MaterialTheme.colorScheme.onBackground, style = MaterialTheme.typography.bodySmall, maxLines = if (isExpanded) Int.MAX_VALUE else 1, )// 使用主题提供的颜色 } } } @Preview(showBackground = true) @Composable fun PreviewConversation() { val sampleMessages = listOf( Message(\"Alice\", \"Hey there! Just finished an amazing project at work and feeling really excited about the potential impact. Can't wait to share more details with you soon!\"), Message(\"Bob\", \"I've been exploring some new hiking trails in the mountain region. The landscapes are absolutely breathtaking, and the natural beauty is just incredible. Thinking of planning a longer trek next month.\"), Message(\"Charlie\", \"Programming is such an interesting field! I've been diving deep into Kotlin and Jetpack Compose, and I'm constantly amazed by how elegant and powerful the language and framework are.\"), Message(\"David\", \"Tried out a new recipe for homemade pizza last night. Spent hours perfecting the dough and experimenting with different toppings. It turned out better than any restaurant pizza I've had!\"), Message(\"Emma\", \"Just got back from an incredible conference about artificial intelligence and machine learning. The keynote speakers were mind-blowing, and I learned so many cutting-edge techniques.\"), Message(\"Frank\", \"Thinking about starting a side project that combines my passion for photography and mobile app development. Any suggestions on interesting app ideas that could showcase visual creativity?\"), Message(\"Grace\", \"Reading an fascinating book about the history of technology innovation. It's fascinating how small ideas can transform entire industries and change the way we live and work.\"), Message(\"Henry\", \"Spent the weekend learning advanced Kotlin coroutines and concurrent programming. The complexity is challenging, but also incredibly rewarding when you start understanding the concepts.\"), Message(\"Isabella\", \"Planning a cross-country road trip and researching the best routes, attractions, and hidden gems along the way. Travel is such an amazing way to broaden one's perspective.\"), Message(\"Jack\", \"Just completed a marathon coding session developing a complex Android application using Jetpack Compose. The declarative UI approach is a game-changer!\") ) ComPoseLearnTheme { Conversation(messages = sampleMessages) } } data class Message(val author: String, val body: String) } Compose需要解决的问题 在编写可维护的软件时，目标是最大程度地减少耦合增加内聚 尽可能的将相关的代码组合在一起，以便我们可以轻松地维护它们，并方便随着应用规模的增长而扩展我们的代码，这个称之为关注点分离 视图模型会使用像Kotlin这样的编程语言进行定义，而布局模型则使用XML。由于这两种语言的差异，使得它们之间存在一条强制的分割线。然而即使存在这种情况，视图模型和布局XML还是可以关联得十分紧密。 由于可以使用相同的语言，一些以往隐式的依赖关系可能会变得更加明显。我们也可以重构代码并将其移动至那些可以使它们减少耦合和增加内聚的位置。\nComposable 函数剖析 AppData可以接受数据作为参数。\n可以使用任何Kotlin代码来获取这一数据，并利用它来描述的我们的层级结构，例如Header()与Body()调用。\n@Composable fun App(appData : AppData){ val deliverData = compute(appData) Header() if(appData.isOwner){ EditButton() } Body{ for (item in deliverData.items){ Item(item) } } } 声明式UI 编写代码来按照我们的想法描述UI，而不是如何转换到对应的状态。\n组合 vs 继承 Composition（组合）指的是多个简单的代码单元如何结合到一起，从而构成更为复杂的代码单元。\n// 定义一个接口表示点击行为 interface Clickable { fun onClick() } // 定义一个接口表示聚焦行为 interface Focusable { fun onFocus() } // 一个组件通过组合来实现这些行为 class ButtonComponent( private val clickable: Clickable, private val focusable: Focusable ) { @Composable fun Render(modifier: Modifier = Modifier) { Box( modifier = modifier .clip(RoundedCornerShape(10.dp)) .background(Color.Blue) .clickable { clickable.onClick() } .focusable(enabled = true) .pointerInput(Unit) { focusable.onFocus() } ) { BasicText( text = \"Click Me\", style = TextStyle(color = Color.White, fontSize = 16.sp) ) } } } // 实现接口行为 class MyClickable : Clickable { override fun onClick() { println(\"Button clicked!\") } } class MyFocusable : Focusable { override fun onFocus() { println(\"Button focused!\") } } // 在Composable函数中使用 @Composable fun AppScreen() { val myClickable = MyClickable() val myFocusable = MyFocusable() val button = ButtonComponent(myClickable, myFocusable) button.Render( modifier = Modifier .background(Color.Gray) .clip(RoundedCornerShape(8.dp)) ) } 装饰类型的抽象 FancyBox是一个用于装饰其他视图的视图，本例中将用来装饰Story和EditFrom。\nFancyBox 介绍: FancyBox 是一个用于装饰其他视觉元素的组件。 主要用在 FancyStory 和 EditForm 中。 需求: 希望结合 FancyStory 和 FancyEditForm，但不确定如何实现。 讨论是否继续使用 FancyBox 或者选择 Story。 Composable 结构: Composable 可以处理子组件。 通过 Composable lambda，FancyStory 和 FancyEditForm 可以灵活组合。 示例代码展示了如何在 Composable 中使用 FancyBox 以及其与其他组件的交互。 @Composable fun FancyBox(children: @Composable () -\u003e Unit) { // FancyBox 的实现 Box(modifier = Modifier.padding(16.dp).background(Color.Gray)) { children() } } @Composable fun Story() { // Story 的实现 Text(text = \"This is a story\", style = MaterialTheme.typography.h6) } @Composable fun FancyStory() { FancyBox { Story() } } @Composable fun EditForm() { // EditForm 的实现 TextField(value = \"\", onValueChange = {}, label = { Text(\"Edit here\") }) } @Composable fun FancyEditForm() { FancyBox { EditForm() } } @Composable fun MainScreen() { Column { FancyStory() FancyEditForm() } } 重组 重组指任何Composable函数在任何时候都可以被重新调用。\n使用 Compose: @Composable 注解用于标记可以被 Compose 框架管理的函数。 LiveData 与 State: LiveData 是 Android 的一种数据持有者，可用于观察数据变化。 observeAsState 方法用于将 LiveData 转换为 Compose 的状态，方便在 UI 中使用。 示例代码: fun bind(liveMsgs: LiveData) { liveMsgs.beserve(this) { msgs -\u003e updateBody(msgs) } } @Composable fun Messages(liveMsgs: LiveData) { val msgs = liveMsgs.observeAsState() for (msg in msgs.value) { Message(msg) } } 该示例展示了如何在 Messages 函数中使用 LiveData，并通过 observeAsState 获取状态。 LifecycleAware: LiveData 会根据生命周期自动处理数据的观察，避免内存泄漏。 关键点 Compose UI 更新: 通过观察 LiveData，可以自动更新 Compose UI。 状态管理: State 在 Compose 中用于管理和响应数据变化，简化了 UI 更新的过程。 使用列表 自定义布局 在Compose中，界面元素由可组合函数表示，此类函数在被调用之后会发出一部分界面，这部分界面随后会被添加到呈现在屏幕上的界面树中。每个界面元素都有一个父元素，还可能有多个子元素。此外，每个元素在其父元素中都有一个位置，指定为（x, y）位置，也都有一个尺寸，指定为width和height。\n使用布局修饰符 可以使用layout修饰符来修改元素的测量和布局方式。Layout是一个lambda；它的参数包括可以测量的元素（以measureable的形式传递）以及该可组合项的传入约束条件（以constraints的形式传递）\n",
  "wordCount" : "3083",
  "inLanguage": "zh",
  "datePublished": "2025-02-15T22:30:13+08:00",
  "dateModified": "2024-02-15T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/jetpack-compose1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="🗂️分类">
                    <span>🗂️分类</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/tech/">💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      Jetpack Compose(1)
    </h1>
    <div class="post-description">
      Android学习笔记
    </div>
    <div class="post-meta"><span title='2025-02-15 22:30:13 +0800 CST'>2025-02-15</span>&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;3083 字&nbsp;·&nbsp;updated:&nbsp;2024-02-15&nbsp;·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#jetpack-compose1" aria-label="Jetpack Compose(1)">Jetpack Compose(1)</a><ul>
                            
                    <li>
                        <a href="#compose%e7%9a%84%e4%bc%98%e5%8a%bf" aria-label="Compose的优势">Compose的优势</a></li>
                    <li>
                        <a href="#%e5%8f%af%e7%bb%84%e5%90%88%e5%87%bd%e6%95%b0" aria-label="可组合函数">可组合函数</a></li>
                    <li>
                        <a href="#%e7%ac%ac%e4%b8%80%e4%b8%aacompose" aria-label="第一个Compose">第一个Compose</a></li>
                    <li>
                        <a href="#column--row" aria-label="Column &amp; Row">Column &amp; Row</a></li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae%e5%b8%83%e5%b1%80" aria-label="配置布局">配置布局</a></li>
                    <li>
                        <a href="#material-design" aria-label="Material Design">Material Design</a></li>
                    <li>
                        <a href="#%e5%88%97%e8%a1%a8%e5%92%8c%e5%8a%a8%e7%94%bb" aria-label="列表和动画">列表和动画</a></li>
                    <li>
                        <a href="#compose%e9%9c%80%e8%a6%81%e8%a7%a3%e5%86%b3%e7%9a%84%e9%97%ae%e9%a2%98" aria-label="Compose需要解决的问题">Compose需要解决的问题</a></li>
                    <li>
                        <a href="#composable-%e5%87%bd%e6%95%b0%e5%89%96%e6%9e%90" aria-label="Composable 函数剖析">Composable 函数剖析</a></li>
                    <li>
                        <a href="#%e5%a3%b0%e6%98%8e%e5%bc%8fui" aria-label="声明式UI">声明式UI</a></li>
                    <li>
                        <a href="#%e7%bb%84%e5%90%88-vs-%e7%bb%a7%e6%89%bf" aria-label="组合 vs 继承">组合 vs 继承</a></li>
                    <li>
                        <a href="#%e8%a3%85%e9%a5%b0%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%8a%bd%e8%b1%a1" aria-label="装饰类型的抽象">装饰类型的抽象</a></li>
                    <li>
                        <a href="#%e9%87%8d%e7%bb%84" aria-label="重组">重组</a><ul>
                            
                    <li>
                        <a href="#%e5%85%b3%e9%94%ae%e7%82%b9" aria-label="关键点">关键点</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e5%88%97%e8%a1%a8" aria-label="使用列表">使用列表</a></li>
                    <li>
                        <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b8%83%e5%b1%80" aria-label="自定义布局">自定义布局</a><ul>
                            
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e5%b8%83%e5%b1%80%e4%bf%ae%e9%a5%b0%e7%ac%a6" aria-label="使用布局修饰符">使用布局修饰符</a>
                    </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="jetpack-compose1">Jetpack Compose(1)<a hidden class="anchor" aria-hidden="true" href="#jetpack-compose1">#</a></h1>
<ul>
<li>Jetpack Compose是用于构建原生Android界面的新工具包。它可简化并加快Android上的界面开发，帮助使用更少的代码、强大的工具和只管的Kotlin API，快速打造生动而精彩的应用。</li>
</ul>
<h2 id="compose的优势">Compose的优势<a hidden class="anchor" aria-hidden="true" href="#compose的优势">#</a></h2>
<ul>
<li>更少的代码
<ul>
<li>使用更少的代码实现更多的功能，并且可以避免各种bug，从而使代码简洁且易于维护</li>
</ul>
</li>
<li>直观
<ul>
<li>只需要描述界面，Compose会负责处理剩余的工作。应用状态变化时，界面会自动更新</li>
</ul>
</li>
<li>加快应用开发
<ul>
<li>兼容现有的所有代码，方便随时随地使用。借助实时预览和全面的Android Studio支持，实现快速迭代。</li>
</ul>
</li>
<li>功能强大
<ul>
<li>凭借对Android平台API的直接访问和对于Material Design，深色主题、动画等的内置支持，创建精美的应用。</li>
</ul>
</li>
</ul>
<h2 id="可组合函数">可组合函数<a hidden class="anchor" aria-hidden="true" href="#可组合函数">#</a></h2>
<p>Jetpack Compose 是围绕可组合函数构建的。这些函数可以让你以程序化定义应用的界面，只需描述应用界面的外观并提供数据项，而不必关注界面的构建过程（初始化元素，将其附加到父项等）。如需创建可组合函数，只需将<code>@Composable</code>注解添加到函数名称中即可。</p>
<h2 id="第一个compose">第一个Compose<a hidden class="anchor" aria-hidden="true" href="#第一个compose">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : ComponentActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        enableEdgeToEdge()
</span></span><span style="display:flex;"><span>        setContent {
</span></span><span style="display:flex;"><span>            MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MessageCard</span>(message: Message) {
</span></span><span style="display:flex;"><span>        Text(text = <span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">${message.author}</span><span style="color:#e6db74">!&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Preview</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">PreviewMessageCard</span>() {
</span></span><span style="display:flex;"><span>        MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span>(<span style="color:#66d9ef">val</span> author: String, <span style="color:#66d9ef">val</span> body: String)
</span></span></code></pre></div><p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170216112.png">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170216112.png" alt="image-20250215170216112"  />
        </a>
    </div>
</p>
<h2 id="column--row">Column &amp; Row<a hidden class="anchor" aria-hidden="true" href="#column--row">#</a></h2>
<p>使用Column垂直排列元素，使用Row水平排列项，使用Box堆叠元素。</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170226532.png">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170226532.png" alt="image-20250215170226532"  />
        </a>
    </div>
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : ComponentActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        enableEdgeToEdge()
</span></span><span style="display:flex;"><span>        setContent {
</span></span><span style="display:flex;"><span>            MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MessageCard</span>(message: Message) {
</span></span><span style="display:flex;"><span>        Row {
</span></span><span style="display:flex;"><span>            Image(painter = painterResource(id = <span style="color:#a6e22e">R</span>.drawable.prayer),
</span></span><span style="display:flex;"><span>                contentDescription = <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            Column {
</span></span><span style="display:flex;"><span>                Text(text = <span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">${message.author}</span><span style="color:#e6db74">!&#34;</span>)
</span></span><span style="display:flex;"><span>                Text(text = message.body)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Preview</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">PreviewMessageCard</span>() {
</span></span><span style="display:flex;"><span>        MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span>(<span style="color:#66d9ef">val</span> author: String, <span style="color:#66d9ef">val</span> body: String)
</span></span></code></pre></div><h2 id="配置布局">配置布局<a hidden class="anchor" aria-hidden="true" href="#配置布局">#</a></h2>
<p>为了装饰或配置可组合项，Compose使用了修饰符。</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170239209.png">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170239209.png" alt="image-20250215170239209"  />
        </a>
    </div>
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity2</span> : ComponentActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        enableEdgeToEdge()
</span></span><span style="display:flex;"><span>        setContent {
</span></span><span style="display:flex;"><span>            MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MessageCard</span>(message: Message) {
</span></span><span style="display:flex;"><span>        Row(modifier = <span style="color:#a6e22e">Modifier</span>.padding(all = <span style="color:#ae81ff">8.</span>dp)) {
</span></span><span style="display:flex;"><span>            Image(
</span></span><span style="display:flex;"><span>                painter = painterResource(id = <span style="color:#a6e22e">R</span>.drawable.boat),
</span></span><span style="display:flex;"><span>                contentDescription = <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>                modifier = Modifier
</span></span><span style="display:flex;"><span>                    .size(<span style="color:#ae81ff">40.</span>dp)
</span></span><span style="display:flex;"><span>                    .clip(CircleShape)
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>            Column {
</span></span><span style="display:flex;"><span>                Text(text = <span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">${message.author}</span><span style="color:#e6db74">!&#34;</span>)
</span></span><span style="display:flex;"><span>                Text(text = message.body)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Preview</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">PreviewMessageCard</span>() {
</span></span><span style="display:flex;"><span>        MessageCard(Message(<span style="color:#e6db74">&#34;Kotlin&#34;</span>, <span style="color:#e6db74">&#34;kkk&#34;</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span>(<span style="color:#66d9ef">val</span> author: String, <span style="color:#66d9ef">val</span> body: String)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="material-design">Material Design<a hidden class="anchor" aria-hidden="true" href="#material-design">#</a></h2>
<ul>
<li>Compose 旨在支持Material Design原则。它的许多界面元素都原生支持Material Design. Material Design是围绕三大要素构建的：颜色、排版、形状。</li>
</ul>
<h2 id="列表和动画">列表和动画<a hidden class="anchor" aria-hidden="true" href="#列表和动画">#</a></h2>
<p>Compose可以轻松创建列表并添加有趣的动画效果</p>
<ul>
<li>创建消息列表</li>
<li>在展开消息时显示动画效果</li>
</ul>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/composeList.gif">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/composeList.gif" alt="composeList"  />
        </a>
    </div>
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity4</span> : ComponentActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        enableEdgeToEdge()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        setContent {
</span></span><span style="display:flex;"><span>            ComPoseLearnTheme() {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">val</span> sampleMessages = listOf(
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Alice&#34;</span>, <span style="color:#e6db74">&#34;Hey there! Just finished an amazing project at work and feeling really excited about the potential impact. Can&#39;t wait to share more details with you soon!&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Bob&#34;</span>, <span style="color:#e6db74">&#34;I&#39;ve been exploring some new hiking trails in the mountain region. The landscapes are absolutely breathtaking, and the natural beauty is just incredible. Thinking of planning a longer trek next month.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Charlie&#34;</span>, <span style="color:#e6db74">&#34;Programming is such an interesting field! I&#39;ve been diving deep into Kotlin and Jetpack Compose, and I&#39;m constantly amazed by how elegant and powerful the language and framework are.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;David&#34;</span>, <span style="color:#e6db74">&#34;Tried out a new recipe for homemade pizza last night. Spent hours perfecting the dough and experimenting with different toppings. It turned out better than any restaurant pizza I&#39;ve had!&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Emma&#34;</span>, <span style="color:#e6db74">&#34;Just got back from an incredible conference about artificial intelligence and machine learning. The keynote speakers were mind-blowing, and I learned so many cutting-edge techniques.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Frank&#34;</span>, <span style="color:#e6db74">&#34;Thinking about starting a side project that combines my passion for photography and mobile app development. Any suggestions on interesting app ideas that could showcase visual creativity?&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Grace&#34;</span>, <span style="color:#e6db74">&#34;Reading an fascinating book about the history of technology innovation. It&#39;s fascinating how small ideas can transform entire industries and change the way we live and work.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Henry&#34;</span>, <span style="color:#e6db74">&#34;Spent the weekend learning advanced Kotlin coroutines and concurrent programming. The complexity is challenging, but also incredibly rewarding when you start understanding the concepts.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Isabella&#34;</span>, <span style="color:#e6db74">&#34;Planning a cross-country road trip and researching the best routes, attractions, and hidden gems along the way. Travel is such an amazing way to broaden one&#39;s perspective.&#34;</span>),
</span></span><span style="display:flex;"><span>                    Message(<span style="color:#e6db74">&#34;Jack&#34;</span>, <span style="color:#e6db74">&#34;Just completed a marathon coding session developing a complex Android application using Jetpack Compose. The declarative UI approach is a game-changer!&#34;</span>)
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                ComPoseLearnTheme {
</span></span><span style="display:flex;"><span>                    Conversation(messages = sampleMessages)
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Conversation</span>(messages: List&lt;Message&gt;) {
</span></span><span style="display:flex;"><span>        LazyColumn {
</span></span><span style="display:flex;"><span>            items(messages.size) { messageIndex <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>                MessageCard(messages.<span style="color:#66d9ef">get</span>(messageIndex))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MessageCard</span>(message: Message) {
</span></span><span style="display:flex;"><span>        Row(
</span></span><span style="display:flex;"><span>            modifier = Modifier
</span></span><span style="display:flex;"><span>                .fillMaxWidth()
</span></span><span style="display:flex;"><span>                .padding(all = <span style="color:#ae81ff">8.</span>dp)
</span></span><span style="display:flex;"><span>                .background(<span style="color:#a6e22e">MaterialTheme</span>.colorScheme.background),
</span></span><span style="display:flex;"><span>            verticalAlignment = <span style="color:#a6e22e">Alignment</span>.CenterVertically, <span style="color:#75715e">// Row 内部垂直居中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//            horizontalArrangement = Arrangement.Center // Row 内部水平居中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ) {
</span></span><span style="display:flex;"><span>            Image(
</span></span><span style="display:flex;"><span>                painter = painterResource(id = <span style="color:#a6e22e">R</span>.drawable.boat),
</span></span><span style="display:flex;"><span>                contentDescription = <span style="color:#e6db74">&#34;boat&#34;</span>,
</span></span><span style="display:flex;"><span>                modifier = Modifier
</span></span><span style="display:flex;"><span>                    .size(<span style="color:#ae81ff">60.</span>dp)
</span></span><span style="display:flex;"><span>                    .clip(CircleShape),
</span></span><span style="display:flex;"><span>                contentScale = <span style="color:#a6e22e">ContentScale</span>.Crop <span style="color:#75715e">// 确保图片填充整个圆形区域
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            Spacer(modifier = <span style="color:#a6e22e">Modifier</span>.width(<span style="color:#ae81ff">8.</span>dp))
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> isExpanded <span style="color:#66d9ef">by</span> remember { mutableStateOf(<span style="color:#66d9ef">false</span>) }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            Column(
</span></span><span style="display:flex;"><span>                modifier = <span style="color:#a6e22e">Modifier</span>.clickable { isExpanded = <span style="color:#f92672">!is</span>Expanded }, <span style="color:#75715e">// 图片和文字间添加间距
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                verticalArrangement = <span style="color:#a6e22e">Arrangement</span>.Center, <span style="color:#75715e">// Column 内部垂直居中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                horizontalAlignment = <span style="color:#a6e22e">Alignment</span>.Start <span style="color:#75715e">// Column 内文字水平对齐方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            ) {
</span></span><span style="display:flex;"><span>                Text(
</span></span><span style="display:flex;"><span>                    text = <span style="color:#e6db74">&#34;Hello </span><span style="color:#e6db74">${message.author}</span><span style="color:#e6db74">!&#34;</span>,
</span></span><span style="display:flex;"><span>                    color = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.onBackground
</span></span><span style="display:flex;"><span>                )<span style="color:#75715e">// 使用主题提供的颜色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                Text(
</span></span><span style="display:flex;"><span>                    text = message.body,
</span></span><span style="display:flex;"><span>                    color = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.onBackground,
</span></span><span style="display:flex;"><span>                    style = <span style="color:#a6e22e">MaterialTheme</span>.typography.bodySmall,
</span></span><span style="display:flex;"><span>                    maxLines = <span style="color:#66d9ef">if</span> (isExpanded) <span style="color:#a6e22e">Int</span>.MAX_VALUE <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                )<span style="color:#75715e">// 使用主题提供的颜色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Preview</span>(showBackground = <span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">PreviewConversation</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> sampleMessages = listOf(
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Alice&#34;</span>, <span style="color:#e6db74">&#34;Hey there! Just finished an amazing project at work and feeling really excited about the potential impact. Can&#39;t wait to share more details with you soon!&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Bob&#34;</span>, <span style="color:#e6db74">&#34;I&#39;ve been exploring some new hiking trails in the mountain region. The landscapes are absolutely breathtaking, and the natural beauty is just incredible. Thinking of planning a longer trek next month.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Charlie&#34;</span>, <span style="color:#e6db74">&#34;Programming is such an interesting field! I&#39;ve been diving deep into Kotlin and Jetpack Compose, and I&#39;m constantly amazed by how elegant and powerful the language and framework are.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;David&#34;</span>, <span style="color:#e6db74">&#34;Tried out a new recipe for homemade pizza last night. Spent hours perfecting the dough and experimenting with different toppings. It turned out better than any restaurant pizza I&#39;ve had!&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Emma&#34;</span>, <span style="color:#e6db74">&#34;Just got back from an incredible conference about artificial intelligence and machine learning. The keynote speakers were mind-blowing, and I learned so many cutting-edge techniques.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Frank&#34;</span>, <span style="color:#e6db74">&#34;Thinking about starting a side project that combines my passion for photography and mobile app development. Any suggestions on interesting app ideas that could showcase visual creativity?&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Grace&#34;</span>, <span style="color:#e6db74">&#34;Reading an fascinating book about the history of technology innovation. It&#39;s fascinating how small ideas can transform entire industries and change the way we live and work.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Henry&#34;</span>, <span style="color:#e6db74">&#34;Spent the weekend learning advanced Kotlin coroutines and concurrent programming. The complexity is challenging, but also incredibly rewarding when you start understanding the concepts.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Isabella&#34;</span>, <span style="color:#e6db74">&#34;Planning a cross-country road trip and researching the best routes, attractions, and hidden gems along the way. Travel is such an amazing way to broaden one&#39;s perspective.&#34;</span>),
</span></span><span style="display:flex;"><span>            Message(<span style="color:#e6db74">&#34;Jack&#34;</span>, <span style="color:#e6db74">&#34;Just completed a marathon coding session developing a complex Android application using Jetpack Compose. The declarative UI approach is a game-changer!&#34;</span>)
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ComPoseLearnTheme {
</span></span><span style="display:flex;"><span>            Conversation(messages = sampleMessages)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span>(<span style="color:#66d9ef">val</span> author: String, <span style="color:#66d9ef">val</span> body: String)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170137213.png">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/image-20250215170137213.png" alt="image-20250215170137213"  />
        </a>
    </div>
</p>
<h2 id="compose需要解决的问题">Compose需要解决的问题<a hidden class="anchor" aria-hidden="true" href="#compose需要解决的问题">#</a></h2>
<ul>
<li>在编写可维护的软件时，目标是最大程度地<strong>减少耦合增加内聚</strong></li>
<li>尽可能的将相关的代码组合在一起，以便我们可以轻松地维护它们，并方便随着应用规模的增长而扩展我们的代码，这个称之为关注点分离</li>
<li>视图模型会使用像Kotlin这样的编程语言进行定义，而布局模型则使用XML。由于这两种语言的差异，使得它们之间存在一条强制的分割线。然而即使存在这种情况，视图模型和布局XML还是可以关联得十分紧密。</li>
</ul>
<p>由于可以使用相同的语言，一些以往隐式的依赖关系可能会变得更加明显。我们也可以重构代码并将其移动至那些可以使它们减少耦合和增加内聚的位置。</p>
<h2 id="composable-函数剖析">Composable 函数剖析<a hidden class="anchor" aria-hidden="true" href="#composable-函数剖析">#</a></h2>
<p>AppData可以接受数据作为参数。</p>
<p>可以使用任何Kotlin代码来获取这一数据，并利用它来描述的我们的层级结构，例如Header()与Body()调用。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">App</span>(appData : AppData){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> deliverData = compute(appData)
</span></span><span style="display:flex;"><span>        Header()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(appData.isOwner){
</span></span><span style="display:flex;"><span>            EditButton()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        Body{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (item <span style="color:#66d9ef">in</span> deliverData.items){
</span></span><span style="display:flex;"><span>                Item(item)
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="声明式ui">声明式UI<a hidden class="anchor" aria-hidden="true" href="#声明式ui">#</a></h2>
<p>编写代码来按照我们的想法描述UI，而不是如何转换到对应的状态。</p>
<h2 id="组合-vs-继承">组合 vs 继承<a hidden class="anchor" aria-hidden="true" href="#组合-vs-继承">#</a></h2>
<p>Composition（组合）指的是多个简单的代码单元如何结合到一起，从而构成更为复杂的代码单元。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// 定义一个接口表示点击行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Clickable</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onClick</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 定义一个接口表示聚焦行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Focusable</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onFocus</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 一个组件通过组合来实现这些行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ButtonComponent</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> clickable: Clickable,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> focusable: Focusable
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Render</span>(modifier: Modifier = Modifier) {
</span></span><span style="display:flex;"><span>        Box(
</span></span><span style="display:flex;"><span>            modifier = modifier
</span></span><span style="display:flex;"><span>                .clip(RoundedCornerShape(<span style="color:#ae81ff">10.</span>dp))
</span></span><span style="display:flex;"><span>                .background(<span style="color:#a6e22e">Color</span>.Blue)
</span></span><span style="display:flex;"><span>                .clickable { clickable.onClick() }
</span></span><span style="display:flex;"><span>                .focusable(enabled = <span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>                .pointerInput(Unit) {
</span></span><span style="display:flex;"><span>                    focusable.onFocus()
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            BasicText(
</span></span><span style="display:flex;"><span>                text = <span style="color:#e6db74">&#34;Click Me&#34;</span>,
</span></span><span style="display:flex;"><span>                style = TextStyle(color = <span style="color:#a6e22e">Color</span>.White, fontSize = <span style="color:#ae81ff">16.</span>sp)
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 实现接口行为
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyClickable</span> : Clickable {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onClick</span>() {
</span></span><span style="display:flex;"><span>        println(<span style="color:#e6db74">&#34;Button clicked!&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyFocusable</span> : Focusable {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onFocus</span>() {
</span></span><span style="display:flex;"><span>        println(<span style="color:#e6db74">&#34;Button focused!&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 在Composable函数中使用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">AppScreen</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> myClickable = MyClickable()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> myFocusable = MyFocusable()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> button = ButtonComponent(myClickable, myFocusable)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    button.Render(
</span></span><span style="display:flex;"><span>        modifier = Modifier
</span></span><span style="display:flex;"><span>            .background(<span style="color:#a6e22e">Color</span>.Gray)
</span></span><span style="display:flex;"><span>            .clip(RoundedCornerShape(<span style="color:#ae81ff">8.</span>dp))
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="装饰类型的抽象">装饰类型的抽象<a hidden class="anchor" aria-hidden="true" href="#装饰类型的抽象">#</a></h2>
<p>FancyBox是一个用于装饰其他视图的视图，本例中将用来装饰Story和EditFrom。</p>
<ol>
<li>FancyBox 介绍:
<ul>
<li>FancyBox 是一个用于装饰其他视觉元素的组件。</li>
<li>主要用在 FancyStory 和 EditForm 中。</li>
</ul>
</li>
<li>需求:
<ul>
<li>希望结合 FancyStory 和 FancyEditForm，但不确定如何实现。</li>
<li>讨论是否继续使用 FancyBox 或者选择 Story。</li>
</ul>
</li>
<li>Composable 结构:
<ul>
<li>Composable 可以处理子组件。</li>
<li>通过 Composable lambda，FancyStory 和 FancyEditForm 可以灵活组合。</li>
<li>示例代码展示了如何在 Composable 中使用 FancyBox 以及其与其他组件的交互。</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">FancyBox</span>(children: <span style="color:#a6e22e">@Composable</span> () <span style="color:#f92672">-&gt;</span> Unit) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// FancyBox 的实现
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Box(modifier = <span style="color:#a6e22e">Modifier</span>.padding(<span style="color:#ae81ff">16.</span>dp).background(<span style="color:#a6e22e">Color</span>.Gray)) {
</span></span><span style="display:flex;"><span>        children()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Story</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Story 的实现
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Text(text = <span style="color:#e6db74">&#34;This is a story&#34;</span>, style = <span style="color:#a6e22e">MaterialTheme</span>.typography.h6)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">FancyStory</span>() {
</span></span><span style="display:flex;"><span>    FancyBox {
</span></span><span style="display:flex;"><span>        Story()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">EditForm</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// EditForm 的实现
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    TextField(<span style="color:#66d9ef">value</span> = <span style="color:#e6db74">&#34;&#34;</span>, onValueChange = {}, label = { Text(<span style="color:#e6db74">&#34;Edit here&#34;</span>) })
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">FancyEditForm</span>() {
</span></span><span style="display:flex;"><span>    FancyBox {
</span></span><span style="display:flex;"><span>        EditForm()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MainScreen</span>() {
</span></span><span style="display:flex;"><span>    Column {
</span></span><span style="display:flex;"><span>        FancyStory()
</span></span><span style="display:flex;"><span>        FancyEditForm()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="重组">重组<a hidden class="anchor" aria-hidden="true" href="#重组">#</a></h2>
<p>重组指任何Composable函数在任何时候都可以被重新调用。</p>
<ol>
<li>使用 Compose:
<ul>
<li><code>@Composable</code> 注解用于标记可以被 Compose 框架管理的函数。</li>
</ul>
</li>
<li>LiveData 与 State:
<ul>
<li><code>LiveData</code> 是 Android 的一种数据持有者，可用于观察数据变化。</li>
<li><code>observeAsState</code> 方法用于将 <code>LiveData</code> 转换为 Compose 的状态，方便在 UI 中使用。</li>
</ul>
</li>
<li><strong>示例代码</strong>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">bind</span>(liveMsgs: LiveData&lt;MessageData&gt;) {
</span></span><span style="display:flex;"><span>	liveMsgs.beserve(<span style="color:#66d9ef">this</span>) { msgs <span style="color:#f92672">-&gt;</span> 
</span></span><span style="display:flex;"><span>		updateBody(msgs)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Messages</span>(liveMsgs: LiveData&lt;MessageState&gt;) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> msgs = liveMsgs.observeAsState()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (msg <span style="color:#66d9ef">in</span> msgs.<span style="color:#66d9ef">value</span>) {
</span></span><span style="display:flex;"><span>        Message(msg)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>该示例展示了如何在 <code>Messages</code> 函数中使用 <code>LiveData</code>，并通过 <code>observeAsState</code> 获取状态。</li>
</ul>
<ol>
<li>LifecycleAware:
<ul>
<li><code>LiveData</code> 会根据生命周期自动处理数据的观察，避免内存泄漏。</li>
</ul>
</li>
</ol>
<h3 id="关键点">关键点<a hidden class="anchor" aria-hidden="true" href="#关键点">#</a></h3>
<ul>
<li><strong>Compose UI 更新</strong>: 通过观察 <code>LiveData</code>，可以自动更新 Compose UI。</li>
<li><strong>状态管理</strong>: <code>State</code> 在 Compose 中用于管理和响应数据变化，简化了 UI 更新的过程。</li>
</ul>
<h2 id="使用列表">使用列表<a hidden class="anchor" aria-hidden="true" href="#使用列表">#</a></h2>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://raw.githubusercontent.com/Kennems/blog-image/main/composeList%20%281%29.gif">
            <img src="https://raw.githubusercontent.com/Kennems/blog-image/main/composeList%20%281%29.gif" alt="composeList (1)"  />
        </a>
    </div>
</p>
<h2 id="自定义布局">自定义布局<a hidden class="anchor" aria-hidden="true" href="#自定义布局">#</a></h2>
<p>在Compose中，界面元素由可组合函数表示，此类函数在被调用之后会发出一部分界面，这部分界面随后会被添加到呈现在屏幕上的界面树中。每个界面元素都有一个父元素，还可能有多个子元素。此外，每个元素在其父元素中都有一个位置，指定为（x, y）位置，也都有一个尺寸，指定为width和height。</p>
<h3 id="使用布局修饰符">使用布局修饰符<a hidden class="anchor" aria-hidden="true" href="#使用布局修饰符">#</a></h3>
<p>可以使用layout修饰符来修改元素的测量和布局方式。Layout是一个lambda；它的参数包括可以测量的元素（以measureable的形式传递）以及该可组合项的传入约束条件（以constraints的形式传递）</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/android/">Android</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Android学习笔记</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/android7/">
    <span class="title">« 上一页</span>
    <br>
    <span>Android（7）</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/jetpack-compose2/">
    <span class="title">下一页 »</span>
    <br>
    <span>Jetpack Compose(2)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
