<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Docker | Kennem&#39;s Blog</title>
<meta name="keywords" content="Docker">
<meta name="description" content="Docker">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/docker/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b0b75e963d4643f817dc4da6eda116517a285285a07b77f8da8234e4fa6e6f57.css" integrity="sha256-sLdelj1GQ/gX3E2m7aEWUXooUoWge3f42oI05Ppub1c=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/docker/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet">
                
  

<meta property="og:title" content="Docker" />
<meta property="og:description" content="Docker" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kennems.github.io/posts/tech/docker/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-10-12T22:30:13+08:00" />
<meta property="article:modified_time" content="2024-10-12T22:20:13+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker"/>
<meta name="twitter:description" content="Docker"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Docker",
      "item": "https://kennems.github.io/posts/tech/docker/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker",
  "name": "Docker",
  "description": "Docker",
  "keywords": [
    "Docker"
  ],
  "articleBody": "Docker 快速构建、运行、管理应用的工具\nDocker打印所有容器（包括关闭的）\ndocker ps -a 正在运行的\ndocker ps 删除容器\ndocker rm 启动已有的容器\ndocker start \u003c容器ID或名称\u003e 启动容器并进入其交互式终端\ndocker start -i \u003c容器ID或名称\u003e 启动后直接进入容器的 bash 终端\ndocker exec -it \u003c容器ID或名称\u003e /bin/bash 停止容器\ndocker stop docker run -d \\ --name mysql \\ -p 3306:3306 \\ -e TZ=Asia/Shanghai \\ -e MYSQL_ROOT_PASSWORD=123 \\ mysql Docker基础知识 Docker 数据卷 作用：宿主机目录和docker容器内目录做一个关联\nMySql容器的数据挂载 docker run -d \\ --name mysql \\ -p 3307:3306 \\ -e TZ=Asia/Shanghai \\ -e MYSQL_ROOT_PASSWORD=123 \\ -v /root/mysql/data:/var/lib/mysql \\ -v /root/mysql/init:/docker-entrypoint-initdb.d \\ -v /root/mysql/conf:/etc/mysql/conf.d \\ mysql 自定义镜像 DokerFile DockerFile就是一个文本文件， 其中包括一个个的指令（Instruction），用指令来说明要执行什么操作来构建镜像。将来Docker可以根据DockerFile帮我们构建镜像。\n网络 加入自定义网络的容器才可以通过容器互相访问， Docker的网络操作命令如下：\n命令 说明 docker network ls 列出所有 Docker 网络 docker network inspect 显示指定网络的详细信息 docker network create 创建一个新的 Docker 网络 docker network rm 删除指定的 Docker 网络 docker network connect 将容器连接到指定的网络 docker network disconnect 将容器从指定的网络断开 docker network prune 删除所有未使用的 Docker 网络 docker run --network 运行容器并指定使用的网络 docker network create --driver 使用指定的驱动程序创建网络（bridge, overlay, host等） docker network inspect --format 以自定义格式显示网络的详细信息 docker network connect --ip 将容器连接到指定网络并分配静态 IP docker network create --subnet 指定子网和 IP 范围创建网络（例：–subnet=192.168.1.0/24） docker network create --gateway 创建网络时指定网关 IP docker network disconnect -f 强制将容器从指定的网络断开 docker network connect --alias 将网络中的容器添加别名（便于服务发现） 部署流程 部署Java应用\n部署nginx\ndocker run -d \\ --name nginx \\ -p 18080:18080 \\ -p 18081:18081 \\ -v /root/nginx/html:/usr/share/nginx/html \\ -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf \\ --network kennem \\ nginx DockerCompose DockerCompose通过一个单独的docker-compose.yml模板文件（YAML格式）来定义一组相关联的应用容器， 帮助我们实现多个相互关联的Docker容器的快速部署。\nversion: \"3.8\" services: mysql: image: mysql container_name: mysql ports: - \"3306:3306\" environment: TZ: Asia/Shanghai MYSQL_ROOT_PASSWORD: 123 volumes: - \"./mysql/conf:/etc/mysql/conf.d\" - \"./mysql/data:/var/lib/mysql\" - \"./mysql/init:/docker-entrypoint-initdb.d\" networks: - hm-net hmall: build: context: . dockerfile: Dockerfile container_name: hmall ports: - \"8080:8080\" networks: - hm-net depends_on: - mysql nginx: image: nginx container_name: nginx ports: - \"18080:18080\" - \"18081:18081\" volumes: - \"./nginx/nginx.conf:/etc/nginx/nginx.conf\" - \"./nginx/html:/usr/share/nginx/html\" depends_on: - hmall networks: - hm-net networks: hm-net: name: hmall ",
  "wordCount" : "886",
  "inLanguage": "zh",
  "datePublished": "2024-10-12T22:30:13+08:00",
  "dateModified": "2024-10-12T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/docker/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="🗂️分类">
                    <span>🗂️分类</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/tech/">💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      Docker
    </h1>
    <div class="post-description">
      Docker
    </div>
    <div class="post-meta"><span title='2024-10-12 22:30:13 +0800 CST'>2024-10-12</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;886 字&nbsp;·&nbsp;updated:&nbsp;2024-10-12&nbsp;·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#docker" aria-label="Docker">Docker</a><ul>
                            
                    <li>
                        <a href="#docker%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86" aria-label="Docker基础知识">Docker基础知识</a></li>
                    <li>
                        <a href="#docker-%e6%95%b0%e6%8d%ae%e5%8d%b7" aria-label="Docker 数据卷">Docker 数据卷</a></li>
                    <li>
                        <a href="#mysql%e5%ae%b9%e5%99%a8%e7%9a%84%e6%95%b0%e6%8d%ae%e6%8c%82%e8%bd%bd" aria-label="MySql容器的数据挂载">MySql容器的数据挂载</a></li>
                    <li>
                        <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e9%95%9c%e5%83%8f" aria-label="自定义镜像">自定义镜像</a><ul>
                            
                    <li>
                        <a href="#dokerfile" aria-label="DokerFile">DokerFile</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%bd%91%e7%bb%9c" aria-label="网络">网络</a></li>
                    <li>
                        <a href="#%e9%83%a8%e7%bd%b2%e6%b5%81%e7%a8%8b" aria-label="部署流程">部署流程</a></li>
                    <li>
                        <a href="#dockercompose" aria-label="DockerCompose">DockerCompose</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="docker">Docker<a hidden class="anchor" aria-hidden="true" href="#docker">#</a></h1>
<p>快速构建、运行、管理应用的工具</p>
<p>Docker打印所有容器（包括关闭的）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker ps -a
</span></span></code></pre></div><p>正在运行的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker ps
</span></span></code></pre></div><p>删除容器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker rm &lt;container_id&gt;
</span></span></code></pre></div><p>启动已有的容器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker start &lt;容器ID或名称&gt;
</span></span></code></pre></div><p>启动容器并进入其交互式终端</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker start -i &lt;容器ID或名称&gt;
</span></span></code></pre></div><p>启动后直接进入容器的 bash 终端</p>
<pre tabindex="0"><code>docker exec -it &lt;容器ID或名称&gt; /bin/bash
</code></pre><p>停止容器</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker stop &lt;container_id&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-p 3306:3306 <span style="color:#ae81ff">\ </span>
</span></span><span style="display:flex;"><span>-e TZ<span style="color:#f92672">=</span>Asia/Shanghai <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>mysql
</span></span></code></pre></div><h2 id="docker基础知识">Docker基础知识<a hidden class="anchor" aria-hidden="true" href="#docker基础知识">#</a></h2>
<p>

    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240723192837909.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240723192837909.png" alt="image-20240723192837909"  />
        </a>
    </div>

</p>
<h2 id="docker-数据卷">Docker 数据卷<a hidden class="anchor" aria-hidden="true" href="#docker-数据卷">#</a></h2>
<p>作用：宿主机目录和docker容器内目录做一个关联</p>
<h2 id="mysql容器的数据挂载">MySql容器的数据挂载<a hidden class="anchor" aria-hidden="true" href="#mysql容器的数据挂载">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-p 3307:3306 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-e TZ<span style="color:#f92672">=</span>Asia/Shanghai <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-e MYSQL_ROOT_PASSWORD<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/mysql/data:/var/lib/mysql <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/mysql/init:/docker-entrypoint-initdb.d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/mysql/conf:/etc/mysql/conf.d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>mysql
</span></span></code></pre></div><h2 id="自定义镜像">自定义镜像<a hidden class="anchor" aria-hidden="true" href="#自定义镜像">#</a></h2>
<h3 id="dokerfile">DokerFile<a hidden class="anchor" aria-hidden="true" href="#dokerfile">#</a></h3>
<p>DockerFile就是一个文本文件， 其中包括一个个的指令（Instruction），用指令来说明要执行什么操作来构建镜像。将来Docker可以根据DockerFile帮我们构建镜像。</p>
<p>

    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240724145130585.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240724145130585.png" alt="image-20240724145130585"  />
        </a>
    </div>

</p>
<h2 id="网络">网络<a hidden class="anchor" aria-hidden="true" href="#网络">#</a></h2>
<p>加入自定义网络的容器才可以通过容器互相访问， Docker的网络操作命令如下：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker network ls</code></td>
<td>列出所有 Docker 网络</td>
</tr>
<tr>
<td><code>docker network inspect &lt;network&gt;</code></td>
<td>显示指定网络的详细信息</td>
</tr>
<tr>
<td><code>docker network create &lt;network&gt;</code></td>
<td>创建一个新的 Docker 网络</td>
</tr>
<tr>
<td><code>docker network rm &lt;network&gt;</code></td>
<td>删除指定的 Docker 网络</td>
</tr>
<tr>
<td><code>docker network connect &lt;network&gt; &lt;container&gt;</code></td>
<td>将容器连接到指定的网络</td>
</tr>
<tr>
<td><code>docker network disconnect &lt;network&gt; &lt;container&gt;</code></td>
<td>将容器从指定的网络断开</td>
</tr>
<tr>
<td><code>docker network prune</code></td>
<td>删除所有未使用的 Docker 网络</td>
</tr>
<tr>
<td><code>docker run --network &lt;network&gt; &lt;image&gt;</code></td>
<td>运行容器并指定使用的网络</td>
</tr>
<tr>
<td><code>docker network create --driver &lt;driver&gt; &lt;network&gt;</code></td>
<td>使用指定的驱动程序创建网络（bridge, overlay, host等）</td>
</tr>
<tr>
<td><code>docker network inspect --format &lt;template&gt; &lt;network&gt;</code></td>
<td>以自定义格式显示网络的详细信息</td>
</tr>
<tr>
<td><code>docker network connect --ip &lt;ip&gt; &lt;network&gt; &lt;container&gt;</code></td>
<td>将容器连接到指定网络并分配静态 IP</td>
</tr>
<tr>
<td><code>docker network create --subnet &lt;subnet&gt; &lt;network&gt;</code></td>
<td>指定子网和 IP 范围创建网络（例：&ndash;subnet=192.168.1.0/24）</td>
</tr>
<tr>
<td><code>docker network create --gateway &lt;gateway&gt; &lt;network&gt;</code></td>
<td>创建网络时指定网关 IP</td>
</tr>
<tr>
<td><code>docker network disconnect -f &lt;network&gt; &lt;container&gt;</code></td>
<td>强制将容器从指定的网络断开</td>
</tr>
<tr>
<td><code>docker network connect --alias &lt;alias&gt; &lt;network&gt; &lt;container&gt;</code></td>
<td>将网络中的容器添加别名（便于服务发现）</td>
</tr>
</tbody>
</table>
<h2 id="部署流程">部署流程<a hidden class="anchor" aria-hidden="true" href="#部署流程">#</a></h2>
<ol>
<li>
<p>部署Java应用</p>
</li>
<li>
<p>部署nginx</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --name nginx <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -p 18080:18080 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -p 18081:18081 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -v /root/nginx/html:/usr/share/nginx/html <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    --network kennem <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    nginx
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h2 id="dockercompose">DockerCompose<a hidden class="anchor" aria-hidden="true" href="#dockercompose">#</a></h2>
<p>

    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240726213413347.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240726213413347.png" alt="image-20240726213413347"  />
        </a>
    </div>

</p>
<p><code>DockerCompose</code>通过一个单独的<code>docker-compose.yml</code>模板文件（YAML格式）来定义一组相关联的应用容器， 帮助我们实现多个相互关联的Docker容器的快速部署。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#34;3.8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">mysql</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">mysql</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">mysql</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;3306:3306&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">TZ</span>: <span style="color:#ae81ff">Asia/Shanghai</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">MYSQL_ROOT_PASSWORD</span>: <span style="color:#ae81ff">123</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;./mysql/conf:/etc/mysql/conf.d&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;./mysql/data:/var/lib/mysql&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;./mysql/init:/docker-entrypoint-initdb.d&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">hm-net</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hmall</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: 
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">context</span>: <span style="color:#ae81ff">.</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dockerfile</span>: <span style="color:#ae81ff">Dockerfile</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">hmall</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;8080:8080&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">hm-net</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">mysql</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nginx</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;18080:18080&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;18081:18081&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;./nginx/nginx.conf:/etc/nginx/nginx.conf&#34;</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;./nginx/html:/usr/share/nginx/html&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">hmall</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">hm-net</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hm-net</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">hmall</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/docker/">Docker</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/docker">Docker</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91day2/">
    <span class="title">« 上一页</span>
    <br>
    <span>苍穹外卖后端开发(Day2)</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91day1/">
    <span class="title">下一页 »</span>
    <br>
    <span>苍穹外卖后端开发(Day1)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
