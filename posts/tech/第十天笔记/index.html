<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>训练营第十天笔记 | Kennem&#39;s Blog</title>
<meta name="keywords" content="Android">
<meta name="description" content="Android学习笔记">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E5%A4%A9%E7%AC%94%E8%AE%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7ece5dee2e9c2f3909ba80bd9cc5d12a24937f53102df8673d9ebfabc7dc4756.css" integrity="sha256-fs5d7i6cLzkJuoC9nMXRKiSTf1MQLfhnPZ6/q8fcR1Y=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E5%A4%A9%E7%AC%94%E8%AE%B0/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

<meta property="og:url" content="https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E5%A4%A9%E7%AC%94%E8%AE%B0/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="训练营第十天笔记">
  <meta property="og:description" content="Android学习笔记">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-15T22:30:13+08:00">
    <meta property="article:modified_time" content="2024-07-15T22:20:13+08:00">
    <meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="训练营第十天笔记">
<meta name="twitter:description" content="Android学习笔记">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "训练营第十天笔记",
      "item": "https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E5%A4%A9%E7%AC%94%E8%AE%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "训练营第十天笔记",
  "name": "训练营第十天笔记",
  "description": "Android学习笔记",
  "keywords": [
    "Android"
  ],
  "articleBody": "第十天笔记 内存泄漏 1. Java垃圾回收机制 1.1 什么是垃圾回收 垃圾回收（GC）是由Java虚拟机（JVM）垃圾回收器提供的一种内存回收机制。 当内存空间或内存占用过高时，系统会回收那些没有引用的对象。 JVM内存模型 运行时数据区域：包括方法区、堆、栈、本地方法栈和程序计数器等。 堆内存： 新生代（Young Generation）：分为Eden区和两个Survivor区（S0、S1）。 老年代（Old Generation）。 方法区（MetaSpace）：存储类元数据、方法信息等。 1.2 判断对象是否是垃圾的算法 1.2.1 引用计数算法 对象被创建后，系统为其初始化引用计数器。 每当对象被引用时，计数器加1，引用失效时，计数器减1。 当计数器为0时，对象不再被引用，可以进行回收。 优点：判断简单，效率高。 缺点：无法避免循环引用。 1.2.2 可达性分析法 从GC Roots出发，逐步遍历到所有可达的对象。 这些对象称为可达对象，不可达的对象则被标记为垃圾，需要回收。 GC Roots包括的对象： 虚拟机栈中引用的对象（栈帧中的本地变量表）。 方法区中类静态属性引用的对象。 方法区中常量引用的对象。 本地方法栈中JNI（Native方法）引用的对象。 Java中的对象引用 Java中的对象引用主要分为四种类型：\n1. 强引用 (Strong Reference) 定义: 例如 Object obj = new Object()，这是Java程序中最常见的引用类型。 特点: 强引用是不可回收的资源，垃圾回收器不会回收它。当内存空间不足时，JVM宁愿抛出 OutOfMemoryError 错误，也不会回收强引用的对象。 2. 软引用 (Soft Reference) 定义: 软引用是一种相对强引用有所弱化的引用。 特点: 可以让对象避免一些垃圾收集。只有当JVM认为内存不足时，才会尝试回收软引用指向的对象。在抛出 OutOfMemoryError 之前，JVM会确保回收软引用的对象。软引用通常用于实现内存敏感的缓存，如果有足够内存，软引用对象会被保留。 3. 弱引用 (Weak Reference) 定义: 弱引用的强度比软引用更弱。 特点: 无论内存是否充足，当JVM进行垃圾回收时，都会回收被弱引用关联的对象。 4. 虚引用 (Phantom Reference) 定义: 虚引用也称为幽灵引用或幻象引用，是最弱的一种引用关系。 特点: 虚引用的存在不会对对象的生命周期构成影响，无法通过虚引用获得对象实例。唯一的目的是在对象被垃圾回收器回收时收到系统通知。 图示总结 强引用: 只有在没有空闲内存时才会被回收。 软引用: 在内存不足时会被回收。 弱引用: 在垃圾回收检测时立即回收。 虚引用: 不会直接影响对象生命周期，但能在对象被回收时收到通知。 这个图示展示了不同引用类型如何与垃圾回收器交互，以及在垃圾回收后的结果。\n初识ANR 主线程执行耗时操作 当主线程执行耗时操作（如大量计算、循环、递归、IO操作等）会导致ANR。\n示例代码:\nmBind.textView.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { while (true) { Log.i(\"TAG\", \"主线程执行耗时操作\"); try { // 执行耗时操作 Thread.sleep(500); } catch (Exception e) { e.printStackTrace(); } } } }); 死锁 当对象锁被其他线程持有，主线程长时间无法获取当前对象锁，会导致ANR。\n示例代码:\npublic class MainThreadAnrActivity extends BaseActivity\u003cActivityHandlerBinding\u003e { private final Object object = new Object(); private final String TAG = MainThreadAnrActivity.class.getSimpleName(); private boolean taskComplete = false; @Override protected void bindListener() { super.bindListener(); mBind.textView.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { // 需要使用子线程执行的结果 synchronized (object) { Log.i(TAG, \"死锁导致ANR \" + taskComplete); } } }); new Thread(new Runnable() { @Override public void run() { synchronized (object) { try { Thread.sleep(30 * 1000); taskComplete = true; } catch (Exception e) { e.printStackTrace(); } } } }).start(); } } 解决方法 使用ReentrantLock代替synchronized，同时tryLock()增加最大等待时间，超过最大等待时间主动释放锁，避免出现ANR。 示例代码:\nReentrantLock lock = new ReentrantLock(); lock.tryLock(3000, TimeUnit.MICROSECONDS); android长生命周期：application， service content provider\n作业 ",
  "wordCount" : "1411",
  "inLanguage": "zh",
  "datePublished": "2024-07-15T22:30:13+08:00",
  "dateModified": "2024-07-15T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E5%A4%A9%E7%AC%94%E8%AE%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="🗂️分类">
                    <span>🗂️分类</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/tech/">💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      训练营第十天笔记
    </h1>
    <div class="post-description">
      Android学习笔记
    </div>
    <div class="post-meta"><span title='2024-07-15 22:30:13 +0800 CST'>2024-07-15</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1411 字&nbsp;·&nbsp;updated:&nbsp;2024-07-15&nbsp;·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e7%ac%ac%e5%8d%81%e5%a4%a9%e7%ac%94%e8%ae%b0" aria-label="第十天笔记">第十天笔记</a><ul>
                            <ul>
                            <ul>
                            
                    <li>
                        <a href="#%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f" aria-label="内存泄漏">内存泄漏</a></li>
                    <li>
                        <a href="#1-java%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%e6%9c%ba%e5%88%b6" aria-label="1. Java垃圾回收机制">1. Java垃圾回收机制</a><ul>
                            
                    <li>
                        <a href="#11-%e4%bb%80%e4%b9%88%e6%98%af%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6" aria-label="1.1 什么是垃圾回收">1.1 什么是垃圾回收</a></li>
                    <li>
                        <a href="#jvm%e5%86%85%e5%ad%98%e6%a8%a1%e5%9e%8b" aria-label="JVM内存模型">JVM内存模型</a></li></ul>
                    </li>
                    <li>
                        <a href="#12-%e5%88%a4%e6%96%ad%e5%af%b9%e8%b1%a1%e6%98%af%e5%90%a6%e6%98%af%e5%9e%83%e5%9c%be%e7%9a%84%e7%ae%97%e6%b3%95" aria-label="1.2 判断对象是否是垃圾的算法">1.2 判断对象是否是垃圾的算法</a><ul>
                            
                    <li>
                        <a href="#121-%e5%bc%95%e7%94%a8%e8%ae%a1%e6%95%b0%e7%ae%97%e6%b3%95" aria-label="1.2.1 引用计数算法">1.2.1 引用计数算法</a></li>
                    <li>
                        <a href="#122-%e5%8f%af%e8%be%be%e6%80%a7%e5%88%86%e6%9e%90%e6%b3%95" aria-label="1.2.2 可达性分析法">1.2.2 可达性分析法</a><ul>
                            
                    <li>
                        <a href="#gc-roots%e5%8c%85%e6%8b%ac%e7%9a%84%e5%af%b9%e8%b1%a1" aria-label="GC Roots包括的对象：">GC Roots包括的对象：</a></li></ul>
                    </li></ul>
                    </li></ul>
                        
                    <li>
                        <a href="#java%e4%b8%ad%e7%9a%84%e5%af%b9%e8%b1%a1%e5%bc%95%e7%94%a8" aria-label="Java中的对象引用">Java中的对象引用</a><ul>
                            
                    <li>
                        <a href="#1-%e5%bc%ba%e5%bc%95%e7%94%a8-strong-reference" aria-label="1. 强引用 (Strong Reference)">1. 强引用 (Strong Reference)</a></li>
                    <li>
                        <a href="#2-%e8%bd%af%e5%bc%95%e7%94%a8-soft-reference" aria-label="2. 软引用 (Soft Reference)">2. 软引用 (Soft Reference)</a></li>
                    <li>
                        <a href="#3-%e5%bc%b1%e5%bc%95%e7%94%a8-weak-reference" aria-label="3. 弱引用 (Weak Reference)">3. 弱引用 (Weak Reference)</a></li>
                    <li>
                        <a href="#4-%e8%99%9a%e5%bc%95%e7%94%a8-phantom-reference" aria-label="4. 虚引用 (Phantom Reference)">4. 虚引用 (Phantom Reference)</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%9b%be%e7%a4%ba%e6%80%bb%e7%bb%93" aria-label="图示总结">图示总结</a></li>
                    <li>
                        <a href="#%e5%88%9d%e8%af%86anr" aria-label="初识ANR">初识ANR</a><ul>
                            
                    <li>
                        <a href="#%e4%b8%bb%e7%ba%bf%e7%a8%8b%e6%89%a7%e8%a1%8c%e8%80%97%e6%97%b6%e6%93%8d%e4%bd%9c" aria-label="主线程执行耗时操作">主线程执行耗时操作</a></li>
                    <li>
                        <a href="#%e6%ad%bb%e9%94%81" aria-label="死锁">死锁</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95" aria-label="解决方法">解决方法</a></li></ul>
                        
                    <li>
                        <a href="#%e4%bd%9c%e4%b8%9a" aria-label="作业">作业</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="第十天笔记">第十天笔记<a hidden class="anchor" aria-hidden="true" href="#第十天笔记">#</a></h1>
<h4 id="内存泄漏">内存泄漏<a hidden class="anchor" aria-hidden="true" href="#内存泄漏">#</a></h4>
<h4 id="1-java垃圾回收机制">1. Java垃圾回收机制<a hidden class="anchor" aria-hidden="true" href="#1-java垃圾回收机制">#</a></h4>
<h5 id="11-什么是垃圾回收">1.1 什么是垃圾回收<a hidden class="anchor" aria-hidden="true" href="#11-什么是垃圾回收">#</a></h5>
<ul>
<li>垃圾回收（<code>GC</code>）是由Java虚拟机（<code>JVM</code>）垃圾回收器提供的一种内存回收机制。</li>
<li>当内存空间或内存占用过高时，系统会回收那些没有引用的对象。</li>
</ul>
<h5 id="jvm内存模型">JVM内存模型<a hidden class="anchor" aria-hidden="true" href="#jvm内存模型">#</a></h5>
<ul>
<li><strong>运行时数据区域</strong>：包括方法区、堆、栈、本地方法栈和程序计数器等。</li>
<li>堆内存：
<ul>
<li>新生代（<code>Young Generation</code>）：分为Eden区和两个<code>Survivor</code>区（S0、S1）。</li>
<li>老年代（<code>Old Generation</code>）。</li>
</ul>
</li>
<li><strong>方法区</strong>（<code>MetaSpace</code>）：存储类元数据、方法信息等。</li>
</ul>
<h4 id="12-判断对象是否是垃圾的算法">1.2 判断对象是否是垃圾的算法<a hidden class="anchor" aria-hidden="true" href="#12-判断对象是否是垃圾的算法">#</a></h4>
<h5 id="121-引用计数算法">1.2.1 引用计数算法<a hidden class="anchor" aria-hidden="true" href="#121-引用计数算法">#</a></h5>
<ul>
<li>对象被创建后，系统为其初始化引用计数器。</li>
<li>每当对象被引用时，计数器加1，引用失效时，计数器减1。</li>
<li>当计数器为0时，对象不再被引用，可以进行回收。</li>
<li><strong>优点</strong>：判断简单，效率高。</li>
<li><strong>缺点</strong>：无法避免循环引用。</li>
</ul>
<h5 id="122-可达性分析法">1.2.2 可达性分析法<a hidden class="anchor" aria-hidden="true" href="#122-可达性分析法">#</a></h5>
<ul>
<li>从GC Roots出发，逐步遍历到所有可达的对象。</li>
<li>这些对象称为可达对象，不可达的对象则被标记为垃圾，需要回收。</li>
</ul>
<h6 id="gc-roots包括的对象">GC Roots包括的对象：<a hidden class="anchor" aria-hidden="true" href="#gc-roots包括的对象">#</a></h6>
<ol>
<li>虚拟机栈中引用的对象（栈帧中的本地变量表）。</li>
<li>方法区中类静态属性引用的对象。</li>
<li>方法区中常量引用的对象。</li>
<li>本地方法栈中<code>JNI</code>（<code>Native</code>方法）引用的对象。</li>
</ol>
<h3 id="java中的对象引用">Java中的对象引用<a hidden class="anchor" aria-hidden="true" href="#java中的对象引用">#</a></h3>
<p>Java中的对象引用主要分为四种类型：</p>
<h4 id="1-强引用-strong-reference">1. 强引用 (Strong Reference)<a hidden class="anchor" aria-hidden="true" href="#1-强引用-strong-reference">#</a></h4>
<ul>
<li><strong>定义</strong>: 例如 <code>Object obj = new Object()</code>，这是Java程序中最常见的引用类型。</li>
<li><strong>特点</strong>: 强引用是不可回收的资源，垃圾回收器不会回收它。当内存空间不足时，JVM宁愿抛出 <code>OutOfMemoryError</code> 错误，也不会回收强引用的对象。</li>
</ul>
<h4 id="2-软引用-soft-reference">2. 软引用 (Soft Reference)<a hidden class="anchor" aria-hidden="true" href="#2-软引用-soft-reference">#</a></h4>
<ul>
<li><strong>定义</strong>: 软引用是一种相对强引用有所弱化的引用。</li>
<li><strong>特点</strong>: 可以让对象避免一些垃圾收集。只有当JVM认为内存不足时，才会尝试回收软引用指向的对象。在抛出 <code>OutOfMemoryError</code> 之前，JVM会确保回收软引用的对象。软引用通常用于实现内存敏感的缓存，如果有足够内存，软引用对象会被保留。</li>
</ul>
<h4 id="3-弱引用-weak-reference">3. 弱引用 (Weak Reference)<a hidden class="anchor" aria-hidden="true" href="#3-弱引用-weak-reference">#</a></h4>
<ul>
<li><strong>定义</strong>: 弱引用的强度比软引用更弱。</li>
<li><strong>特点</strong>: 无论内存是否充足，当JVM进行垃圾回收时，都会回收被弱引用关联的对象。</li>
</ul>
<h4 id="4-虚引用-phantom-reference">4. 虚引用 (Phantom Reference)<a hidden class="anchor" aria-hidden="true" href="#4-虚引用-phantom-reference">#</a></h4>
<ul>
<li><strong>定义</strong>: 虚引用也称为幽灵引用或幻象引用，是最弱的一种引用关系。</li>
<li><strong>特点</strong>: 虚引用的存在不会对对象的生命周期构成影响，无法通过虚引用获得对象实例。唯一的目的是在对象被垃圾回收器回收时收到系统通知。</li>
</ul>
<h3 id="图示总结">图示总结<a hidden class="anchor" aria-hidden="true" href="#图示总结">#</a></h3>
<ul>
<li><strong>强引用</strong>: 只有在没有空闲内存时才会被回收。</li>
<li><strong>软引用</strong>: 在内存不足时会被回收。</li>
<li><strong>弱引用</strong>: 在垃圾回收检测时立即回收。</li>
<li><strong>虚引用</strong>: 不会直接影响对象生命周期，但能在对象被回收时收到通知。</li>
</ul>
<p>这个图示展示了不同引用类型如何与垃圾回收器交互，以及在垃圾回收后的结果。</p>
<h3 id="初识anr">初识ANR<a hidden class="anchor" aria-hidden="true" href="#初识anr">#</a></h3>
<h4 id="主线程执行耗时操作">主线程执行耗时操作<a hidden class="anchor" aria-hidden="true" href="#主线程执行耗时操作">#</a></h4>
<p>当主线程执行耗时操作（如大量计算、循环、递归、IO操作等）会导致ANR。</p>
<p><strong>示例代码</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>mBind.<span style="color:#a6e22e">textView</span>.<span style="color:#a6e22e">setOnClickListener</span>(<span style="color:#66d9ef">new</span> View.<span style="color:#a6e22e">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span>(View v) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>            Log.<span style="color:#a6e22e">i</span>(<span style="color:#e6db74">&#34;TAG&#34;</span>, <span style="color:#e6db74">&#34;主线程执行耗时操作&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 执行耗时操作</span>
</span></span><span style="display:flex;"><span>                Thread.<span style="color:#a6e22e">sleep</span>(500);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="死锁">死锁<a hidden class="anchor" aria-hidden="true" href="#死锁">#</a></h4>
<p>当对象锁被其他线程持有，主线程长时间无法获取当前对象锁，会导致ANR。</p>
<p><strong>示例代码</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainThreadAnrActivity</span> <span style="color:#66d9ef">extends</span> BaseActivity<span style="color:#f92672">&lt;</span>ActivityHandlerBinding<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Object object <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> String TAG <span style="color:#f92672">=</span> MainThreadAnrActivity.<span style="color:#a6e22e">class</span>.<span style="color:#a6e22e">getSimpleName</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> taskComplete <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">bindListener</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">bindListener</span>();
</span></span><span style="display:flex;"><span>        mBind.<span style="color:#a6e22e">textView</span>.<span style="color:#a6e22e">setOnClickListener</span>(<span style="color:#66d9ef">new</span> View.<span style="color:#a6e22e">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span>(View v) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 需要使用子线程执行的结果</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">synchronized</span> (object) {
</span></span><span style="display:flex;"><span>                    Log.<span style="color:#a6e22e">i</span>(TAG, <span style="color:#e6db74">&#34;死锁导致ANR &#34;</span> <span style="color:#f92672">+</span> taskComplete);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(<span style="color:#66d9ef">new</span> Runnable() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">synchronized</span> (object) {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                        Thread.<span style="color:#a6e22e">sleep</span>(30 <span style="color:#f92672">*</span> 1000);
</span></span><span style="display:flex;"><span>                        taskComplete <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>                    } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>                        e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="解决方法">解决方法<a hidden class="anchor" aria-hidden="true" href="#解决方法">#</a></h3>
<ol>
<li>使用<code>ReentrantLock</code>代替<code>synchronized</code>，同时<code>tryLock()</code>增加最大等待时间，超过最大等待时间主动释放锁，避免出现ANR。</li>
</ol>
<p><strong>示例代码</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ReentrantLock lock <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock();
</span></span><span style="display:flex;"><span>lock.<span style="color:#a6e22e">tryLock</span>(3000, TimeUnit.<span style="color:#a6e22e">MICROSECONDS</span>);
</span></span></code></pre></div><p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715083201068.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715083201068.png" alt="image-20240715083201068"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715084113793.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715084113793.png" alt="image-20240715084113793"  />
        </a>
    </div>
</p>
<p><code>android</code>长生命周期：<code>application</code>， <code>service </code> <code>content provider</code></p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715085520414.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715085520414.png" alt="image-20240715085520414"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094056874.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094056874.png" alt="image-20240715094056874"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094326344.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094326344.png" alt="image-20240715094326344"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094307652.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094307652.png" alt="image-20240715094307652"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094621823.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094621823.png" alt="image-20240715094621823"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094739966.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094739966.png" alt="image-20240715094739966"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094754660.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094754660.png" alt="image-20240715094754660"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094821284.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094821284.png" alt="image-20240715094821284"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094907423.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715094907423.png" alt="image-20240715094907423"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715101802654.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715101802654.png" alt="image-20240715101802654"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102028158.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102028158.png" alt="image-20240715102028158"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102219786.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102219786.png" alt="image-20240715102219786"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102359671.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102359671.png" alt="image-20240715102359671"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102417686.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715102417686.png" alt="image-20240715102417686"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134402970.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134402970.png" alt="image-20240715134402970"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134417291.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134417291.png" alt="image-20240715134417291"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134747200.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134747200.png" alt="image-20240715134747200"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715160811536.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715160811536.png" alt="image-20240715160811536"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134853218.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715134853218.png" alt="image-20240715134853218"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161430073.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161430073.png" alt="image-20240715161430073"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140819084.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140819084.png" alt="image-20240715140819084"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140753591.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140753591.png" alt="image-20240715140753591"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135402440.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135402440.png" alt="image-20240715135402440"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135608017.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135608017.png" alt="image-20240715135608017"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135706092.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135706092.png" alt="image-20240715135706092"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135751337.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135751337.png" alt="image-20240715135751337"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135905966.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135905966.png" alt="image-20240715135905966"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135916678.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715135916678.png" alt="image-20240715135916678"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140205655.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140205655.png" alt="image-20240715140205655"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140336310.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140336310.png" alt="image-20240715140336310"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140452449.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140452449.png" alt="image-20240715140452449"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140628406.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715140628406.png" alt="image-20240715140628406"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161746937.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161746937.png" alt="image-20240715161746937"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161948527.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161948527.png" alt="image-20240715161948527"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161956264.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715161956264.png" alt="image-20240715161956264"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162232386.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162232386.png" alt="image-20240715162232386"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162337388.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162337388.png" alt="image-20240715162337388"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162354936.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715162354936.png" alt="image-20240715162354936"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164936107.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164936107.png" alt="image-20240715164936107"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164939280.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164939280.png" alt="image-20240715164939280"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164954918.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715164954918.png" alt="image-20240715164954918"  />
        </a>
    </div>
</p>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715165014067.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715165014067.png" alt="image-20240715165014067"  />
        </a>
    </div>
</p>
<h2 id="作业">作业<a hidden class="anchor" aria-hidden="true" href="#作业">#</a></h2>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715165146498.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240715165146498.png" alt="image-20240715165146498"  />
        </a>
    </div>
</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/android/">Android</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Android学习笔记</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/%E7%AC%AC%E5%8D%81%E4%B8%80%E5%A4%A9%E7%AC%94%E8%AE%B0/">
    <span class="title">« 上一页</span>
    <br>
    <span>训练营第十一天笔记</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/%E7%AC%AC%E4%B9%9D%E5%A4%A9%E7%AC%94%E8%AE%B0/">
    <span class="title">下一页 »</span>
    <br>
    <span>训练营第九天笔记</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
