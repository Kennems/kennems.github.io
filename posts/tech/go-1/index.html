<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Goè¯­è¨€åŸºç¡€ | Kennem&#39;s Blog</title>
<meta name="keywords" content="GoLang">
<meta name="description" content="Goè¯­è¨€åŸºç¡€">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/go-1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1a7bc7e6d01b82c8ca2b2e53cfcf7e33d2fd9058f6b28245f94da0d91447c6a0.css" integrity="sha256-GnvH5tAbgsjKKy5Tz89&#43;M9L9kFj2soJF&#43;U2g2RRHxqA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/go-1/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

<meta property="og:url" content="https://kennems.github.io/posts/tech/go-1/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="Goè¯­è¨€åŸºç¡€">
  <meta property="og:description" content="Goè¯­è¨€åŸºç¡€">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-25T15:37:01+08:00">
    <meta property="article:modified_time" content="2025-01-25T15:37:01+08:00">
    <meta property="article:tag" content="GoLang">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Goè¯­è¨€åŸºç¡€">
<meta name="twitter:description" content="Goè¯­è¨€åŸºç¡€">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ğŸ“šæ–‡ç« ",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ’»æŠ€æœ¯",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Goè¯­è¨€åŸºç¡€",
      "item": "https://kennems.github.io/posts/tech/go-1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Goè¯­è¨€åŸºç¡€",
  "name": "Goè¯­è¨€åŸºç¡€",
  "description": "Goè¯­è¨€åŸºç¡€",
  "keywords": [
    "GoLang"
  ],
  "articleBody": "Goè¯­è¨€åŸºç¡€ 1. Goè¯­è¨€æ¦‚è¿° é«˜æ€§èƒ½ï¼šé€‚åˆå¹¶å‘ç¼–ç¨‹ï¼Œæ”¯æŒé«˜å¹¶å‘ã€é«˜æ€§èƒ½åœºæ™¯ã€‚ ç®€æ´è¯­æ³•ï¼šGoçš„è¯­æ³•ç®€æ´ï¼Œå¿«é€Ÿä¸Šæ‰‹ï¼Œå»é™¤äº†å¤æ‚çš„é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œä¿ç•™äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›ä¼˜åŠ¿ã€‚ ä¸°å¯Œæ ‡å‡†åº“ï¼šå†…å»ºå¼ºå¤§çš„æ ‡å‡†åº“ï¼Œæ”¯æŒç½‘ç»œã€æ–‡ä»¶æ“ä½œã€å¹¶å‘ç­‰ã€‚ é™æ€é“¾æ¥ï¼šç”Ÿæˆç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨åº“ï¼Œç®€åŒ–éƒ¨ç½²ã€‚ è·¨å¹³å°ï¼šæ”¯æŒLinuxã€Windowsã€macOSç­‰å¤šä¸ªå¹³å°ã€‚ åƒåœ¾å›æ”¶ï¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå‡å°‘å¼€å‘äººå‘˜çš„è´Ÿæ‹…ã€‚ 2. ç¯å¢ƒæ­å»º Goå®‰è£…ï¼šå®˜æ–¹å®‰è£…æŒ‡å— æ¨èIDEï¼šVSCodeã€GoLandï¼Œæˆ–è€…Gitpodç­‰äº‘å¼€å‘ç¯å¢ƒã€‚ Go Module go.modï¼šç”¨äºç®¡ç† Go é¡¹ç›®çš„ä¾èµ–ï¼Œè®°å½•æ¨¡å—è·¯å¾„ã€Go ç‰ˆæœ¬å’Œæ‰€ä¾èµ–çš„åŒ…åŠå…¶ç‰ˆæœ¬ã€‚\ngo.sumï¼šç”¨äºè®°å½•æ¯ä¸ªä¾èµ–åŒ…çš„æ ¡éªŒå’Œï¼Œç¡®ä¿ä¾èµ–åŒ…çš„å®Œæ•´æ€§ä¸å®‰å…¨æ€§ã€‚\nå‘½ä»¤è¡Œå·¥å…· 1ã€go run æ— éœ€ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€‚åˆç”¨äºå¿«é€Ÿæµ‹è¯•å’Œè°ƒè¯•\n1 go run [arguments] å¯ä»¥ä¼ é€’å¤šä¸ªæ–‡ä»¶åæ¥è¿è¡Œå¤šä¸ªGoæºæ–‡ä»¶\n1 go run file1.go file2.go 2ã€go build ç¼–è¯‘ä»£ç ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·ï¼Œç¼–è¯‘åŸä»£ç å¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥åœ¨æ²¡æœ‰Goç¯å¢ƒçš„æœºå™¨ä¸Šè¿è¡Œ\n1 go build è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å 1 go build -o myapp main.go 1 go build file1.go file2.go æ„å»ºä¸€ä¸ªåŒ… 1 go build 3ã€go install ä¸ go build ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº go install ä¼šå°†ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…åˆ°Goçš„GOPATHä¸‹ï¼ˆæˆ–è€…æ¨¡å—æ¨¡å¼ä¸‹ä¼šå®‰è£…åˆ°GOBIN)ã€‚å®ƒé€šå¸¸ç”¨äºå°†ç¼–è¯‘åçš„å·¥å…·æˆ–åº”ç”¨ç¨‹åºå®‰è£…åˆ°ç³»ç»Ÿä¸­ã€‚\n1 go install ç¤ºä¾‹ï¼š ä½ å¯ä»¥ä½¿ç”¨ go install å®‰è£…ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼š\n1 go install github.com/spf13/cobra@latest ä¼šå°† cobra å®‰è£…åˆ°ä½ çš„ GOBIN ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ä½ åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚\n4ã€go test go test æ˜¯ Go æä¾›çš„æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–è¿è¡ŒGoçš„å•å…ƒæµ‹è¯•ã€‚\n1 go test å‡è®¾ä½ æœ‰ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ main_test.goï¼š\n1 2 3 4 5 6 7 8 9 10 package main import \"testing\" func TestAdd(t *testing.T) { result := 1 + 2 if result != 3 { t.Errorf(\"æœŸæœ› 3ï¼Œå®é™…æ˜¯ %d\", result) } } ä½ å¯ä»¥è¿è¡Œ go test æ¥è¿è¡Œè¿™ä¸ªæµ‹è¯•ï¼š\n1 go test æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡ºï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œgo test ä¼šéšè—è¯¦ç»†è¾“å‡ºã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ -v å‚æ•°ï¼š\n1 go test -v è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼š å¦‚æœä½ åªæƒ³è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ -run å‚æ•°ï¼š\n1 go test -run TestAdd 5ã€go get go get ç”¨äºå®‰è£…å’Œæ›´æ–° Go åŒ…ã€‚å¦‚æœä½ éœ€è¦ä¸‹è½½ç¬¬ä¸‰æ–¹åº“æˆ–è€…å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ go getã€‚\n1 go get ç¤ºä¾‹ï¼š ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªåŒ…ï¼š\n1 go get github.com/spf13/cobra å¦‚æœä½ åœ¨æ¨¡å—æ¨¡å¼ä¸‹ï¼Œgo get ä¼šè‡ªåŠ¨æ›´æ–° go.mod æ–‡ä»¶ã€‚\nè·å–æœ€æ–°ç‰ˆæœ¬ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œgo get ä¼šä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚å¦‚æœä½ éœ€è¦è·å–ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\n1 go get github.com/spf13/cobra@v1.2.3 6ã€go mod Go 1.11 ä»¥åå¼•å…¥äº†æ¨¡å—åŒ–ï¼ˆModuleï¼‰ç³»ç»Ÿï¼Œgo mod æ˜¯ Go è¯­è¨€ä¸­ç”¨äºç®¡ç†ä¾èµ–çš„å·¥å…·ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„ go mod å‘½ä»¤ï¼š\n6.1 go mod init åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Go æ¨¡å—ï¼Œåœ¨å½“å‰ç›®å½•åˆ›å»º go.mod æ–‡ä»¶ï¼š\n1 go mod init 6.2 go mod tidy æ¸…ç†æ¨¡å—æ–‡ä»¶ï¼Œåˆ é™¤æœªä½¿ç”¨çš„ä¾èµ–ï¼Œå¹¶ä¸”ç¡®ä¿æ‰€æœ‰éœ€è¦çš„ä¾èµ–éƒ½åœ¨ go.mod å’Œ go.sum æ–‡ä»¶ä¸­ï¼š\n1 go mod tidy 6.3 go mod vendor å°†æ‰€æœ‰ä¾èµ–å¤åˆ¶åˆ°æœ¬åœ° vendor ç›®å½•ä¸­ï¼Œè¿™å¯¹äºæŸäº›éœ€è¦ç¦»çº¿æ„å»ºçš„æƒ…å†µå¾ˆæœ‰ç”¨ï¼š\n1 go mod vendor 7ã€go fmt ä¸ä»£ç æ ¼å¼åŒ– go fmt æ˜¯ Go çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è°ƒæ•´ Go æºä»£ç çš„æ ¼å¼ï¼Œä½¿å…¶ç¬¦åˆ Go çš„ä»£ç é£æ ¼ã€‚é€šå¸¸åœ¨æäº¤ä»£ç å‰è¿è¡Œï¼Œä»¥ä¿æŒä»£ç é£æ ¼ä¸€è‡´ã€‚\nåŸºæœ¬è¯­æ³•ï¼š 1 go fmt æ ¼å¼åŒ–æ•´ä¸ªåŒ…ï¼š 1 go fmt ./... 3. GoåŸºç¡€è¯­æ³• 3.1 Hello World 1 2 3 4 5 6 7 8 package main // å®šä¹‰åŒ…åï¼ŒmainåŒ…æ˜¯Goç¨‹åºçš„å…¥å£ import \"fmt\" // å¼•å…¥fmtåŒ…ï¼Œç”¨äºæ ¼å¼åŒ–è¾“å…¥è¾“å‡º // mainå‡½æ•°æ˜¯Goç¨‹åºçš„å…¥å£ func main() { fmt.Println(\"Hello, World!\") // è¾“å‡ºHello, World! } 3.2 å˜é‡å£°æ˜ä¸åˆå§‹åŒ– 3.2.1 å¸¸è§„å£°æ˜ 1 2 3 var a = \"initial\" // å£°æ˜å˜é‡aï¼Œå¹¶åˆå§‹åŒ–ä¸º\"initial\" var b, c int = 1, 2 // åŒæ—¶å£°æ˜bå’Œcå¹¶åˆå§‹åŒ– var d = true // è‡ªåŠ¨æ¨æ–­dçš„ç±»å‹ä¸ºbool 3.2.2 ä½¿ç”¨:=ç®€æ´å£°æ˜ 1 e := 3.14 // :=ç”¨äºå£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ï¼Œç±»å‹ç”±ç¼–è¯‘å™¨æ¨æ–­ 3.2.3 ç©ºç™½æ ‡è¯†ç¬¦ 1 2 var x, y int _, err := os.Open(\"file.txt\") // é€šè¿‡ç©ºç™½æ ‡è¯†ç¬¦å¿½ç•¥æŸä¸ªè¿”å›å€¼ 3.3 æ§åˆ¶ç»“æ„ 3.3.1 if-elseè¯­å¥ 1 2 3 4 5 6 7 8 num := 9 if num \u003c 0 { fmt.Println(num, \"is negative\") // å¦‚æœnumå°äº0ï¼Œè¾“å‡ºè´Ÿæ•° } else if num \u003c 10 { fmt.Println(num, \"has 1 digit\") // å¦‚æœnumå°äº10ï¼Œè¾“å‡º1ä½æ•° } else { fmt.Println(num, \"has multiple digits\") // å¦åˆ™è¾“å‡ºå¤šä½æ•° } 3.3.2 switchè¯­å¥ 1 2 3 4 5 6 7 8 switch day := \"Monday\"; day { case \"Monday\": fmt.Println(\"Start of the week\") case \"Friday\": fmt.Println(\"End of the week\") default: fmt.Println(\"Midweek\") // é»˜è®¤æƒ…å†µ } 3.3.3 forå¾ªç¯ 1 2 3 4 // Goåªæœ‰ä¸€ä¸ªå¾ªç¯ç»“æ„forï¼Œå…¶ä»–çš„å¦‚whileéƒ½å¯ä»¥é€šè¿‡forå®ç° for i := 0; i \u003c 3; i++ { // ä»0åˆ°2çš„å¾ªç¯ fmt.Println(i) // è¾“å‡ºå¾ªç¯çš„æ¯ä¸ªå€¼ } 3.4 æ•°ç»„ä¸åˆ‡ç‰‡ 3.4.1 æ•°ç»„ 1 2 3 var arr [5]int // å®šä¹‰ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º5çš„æ•°ç»„ arr[0] = 10 // ç»™æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ fmt.Println(arr) // è¾“å‡ºæ•´ä¸ªæ•°ç»„ 3.4.2 åˆ‡ç‰‡ 1 2 3 4 // åˆ‡ç‰‡æ˜¯Goçš„ä¸€ä¸ªçµæ´»æ•°æ®ç»“æ„ï¼Œä¸åƒæ•°ç»„å¤§å°å›ºå®š s := []string{\"a\", \"b\", \"c\"} s = append(s, \"d\") // appendå‡½æ•°åŠ¨æ€æ‰©å±•åˆ‡ç‰‡ fmt.Println(s) // è¾“å‡ºåˆ‡ç‰‡ 3.4.3 åˆ‡ç‰‡çš„åˆ›å»º 1 2 s := make([]int, 5) // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º5çš„åˆ‡ç‰‡ fmt.Println(s) // è¾“å‡º: [0 0 0 0 0] 3.5 å‡½æ•° 3.5.1 åŸºæœ¬å‡½æ•° 1 2 3 4 5 func add(a int, b int) int { // å‡½æ•°å£°æ˜ï¼Œè¿”å›a+bçš„ç»“æœ return a + b } fmt.Println(add(1, 2)) // è°ƒç”¨å‡½æ•°å¹¶æ‰“å°è¿”å›å€¼ 3.5.2 å¤šè¿”å›å€¼ 1 2 3 4 5 6 func divide(a, b int) (int, int) { return a / b, a % b // è¿”å›å•†å’Œä½™æ•° } quotient, remainder := divide(10, 3) // è§£æ„è¿”å›å€¼ fmt.Println(quotient, remainder) 3.5.3 å¯å˜å‚æ•° 1 2 3 4 5 6 7 8 func sum(nums ...int) int { // numsæ˜¯ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡ total := 0 for _, num := range nums { total += num } return total } fmt.Println(sum(1, 2, 3, 4)) // ä¼ å…¥å¤šä¸ªå‚æ•° 3.6 ç»“æ„ä½“ä¸æ–¹æ³• 3.6.1 ç»“æ„ä½“ 1 2 3 4 5 6 7 type User struct { Name string Password string } u := User{\"wang\", \"password123\"} // åˆå§‹åŒ–ç»“æ„ä½“ fmt.Println(u) 3.6.2 æ–¹æ³• 1 2 3 4 5 6 7 // ä¸ºUserç±»å‹å®šä¹‰ä¸€ä¸ªæ–¹æ³• func (u *User) ResetPassword(password string) { u.Password = password // ä¿®æ”¹ç»“æ„ä½“å®ä¾‹çš„å­—æ®µ } u.ResetPassword(\"newpassword\") // è°ƒç”¨æ–¹æ³•ä¿®æ”¹Passwordå­—æ®µ fmt.Println(u.Password) 3.7 é”™è¯¯å¤„ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 func findUser(users []User, name string) (*User, error) { for _, u := range users { if u.Name == name { return \u0026u, nil // æ‰¾åˆ°ç”¨æˆ·ï¼Œè¿”å›æŒ‡é’ˆå’Œnilé”™è¯¯ } } return nil, fmt.Errorf(\"user not found\") // æ²¡æ‰¾åˆ°ï¼Œè¿”å›é”™è¯¯ } u, err := findUser([]User{{\"wang\", \"1024\"}}, \"wang\") if err != nil { fmt.Println(err) // æ‰“å°é”™è¯¯ return } fmt.Println(u.Name) // å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæ‰“å°ç”¨æˆ·ä¿¡æ¯ 3.8 å­—ç¬¦ä¸²æ“ä½œ 3.8.1 å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•° 1 2 3 4 5 6 import \"strings\" str := \"Hello, World!\" fmt.Println(strings.Contains(str, \"World\")) // æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«\"World\" fmt.Println(strings.ToUpper(str)) // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ fmt.Println(strings.Split(str, \", \")) // æŒ‰æŒ‡å®šåˆ†éš”ç¬¦åˆ‡å‰²å­—ç¬¦ä¸² 3.9 JSONå¤„ç† 3.9.1 ç¼–ç ä¸è§£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import \"encoding/json\" type UserInfo struct { Name string `json:\"name\"` Age int `json:\"age\"` } a := UserInfo{Name: \"wang\", Age: 18} buf, err := json.Marshal(a) // å°†ç»“æ„ä½“ç¼–ç ä¸ºJSON if err != nil { fmt.Println(\"Error encoding JSON:\", err) } fmt.Println(string(buf)) // è¾“å‡ºJSONå­—ç¬¦ä¸² var b UserInfo err = json.Unmarshal(buf, \u0026b) // å°†JSONå­—ç¬¦ä¸²è§£ç ä¸ºç»“æ„ä½“ if err != nil { fmt.Println(\"Error decoding JSON:\", err) } fmt.Println(b) 3.10 æ—¶é—´ä¸æ•°å­—è§£æ 3.10.1 æ—¶é—´æ“ä½œ 1 2 3 4 import \"time\" t := time.Now() // è·å–å½“å‰æ—¶é—´ fmt.Println(t.Format(\"2006-01-02 15:04:05\")) // æ ¼å¼åŒ–æ—¶é—´ 3.10.2 å­—ç¬¦ä¸²è½¬æ•°å­— 1 2 3 4 5 6 7 8 import \"strconv\" str := \"123\" n, err := strconv.Atoi(str) // å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•° if err != nil { fmt.Println(\"Error converting string to number:\", err) } fmt.Println(n) // è¾“å‡º123 4. Goå·¥ç¨‹å®è·µ 4.1 çŒœæ•°å­—æ¸¸æˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import ( \"fmt\" \"math/rand\" \"time\" ) func main() { rand.Seed(time.Now().UnixNano()) // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºéšæœºæ•°ç§å­ secretNumber := rand.Intn(100) // ç”Ÿæˆä¸€ä¸ª0åˆ°99ä¹‹é—´çš„éšæœºæ•° fmt.Println(\"Guess the secret number between 0 and 100!\") var guess int for { fmt.Print(\"Enter your guess: \") fmt.Scan(\u0026guess) // è¯»å–ç”¨æˆ·è¾“å…¥çš„çŒœæµ‹å€¼ if guess \u003c secretNumber { fmt.Println(\"Too low!\") } else if guess \u003e secretNumber { fmt.Println(\"Too high!\") } else { fmt.Println(\"You guessed it!\") break } } } 4.2 åœ¨çº¿è¯å…¸ 1 2 3 4 5 6 7 8 import ( \"encoding/json\" \"fmt\" \"net/http\" ) func getDefinition(word string) { url := \"https://api.dictionaryapi.dev å¥½çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¸ºä½ å‡†å¤‡çš„å…³äº SOCKS5 ä»£ç†æœåŠ¡å™¨ çš„ Go è¯­è¨€ä»£ç çš„è¯¦ç»†æ³¨é‡Šç‰ˆï¼ŒåŠ›æ±‚ä¿æŒä»£ç çš„å®Œæ•´æ€§å¹¶åŠ ä¸Šè¯¦ç»†çš„è§£é‡Šã€‚\nSOCKS5 ä»£ç†æœåŠ¡å™¨ä»£ç å®ç° 1. SOCKS5 åè®®æ¦‚è¿° 1.1 SOCKS5 ä»£ç†åŸç† SOCKS5 æ˜¯ä¸€ç§ä»£ç†åè®®ï¼Œåœ¨ç½‘ç»œä¸­å……å½“å®¢æˆ·ç«¯ä¸ç›®æ ‡æœåŠ¡å™¨ä¹‹é—´çš„ä¸­ä»‹ï¼Œå…è®¸å®¢æˆ·ç«¯é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®è¿œç¨‹èµ„æºï¼Œé€šå¸¸ç”¨äºè§„é¿é˜²ç«å¢™ã€æé«˜å®‰å…¨æ€§ç­‰ã€‚\nä»£ç†æµç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š\næ¡æ‰‹é˜¶æ®µï¼šå®¢æˆ·ç«¯å‘ SOCKS5 ä»£ç†å‘é€åè®®ç‰ˆæœ¬å·åŠè®¤è¯æ–¹å¼ã€‚ è®¤è¯é˜¶æ®µï¼šæ ¹æ®ä»£ç†æœåŠ¡å™¨çš„è¿”å›ï¼Œè¿›è¡Œç›¸åº”çš„èº«ä»½éªŒè¯ã€‚ è¯·æ±‚é˜¶æ®µï¼šè®¤è¯é€šè¿‡åï¼Œå®¢æˆ·ç«¯å‘ SOCKS5 ä»£ç†å‘é€è¯·æ±‚ï¼Œè¦æ±‚å»ºç«‹ä¸ç›®æ ‡æœåŠ¡å™¨çš„è¿æ¥ã€‚ ä¸­ç»§é˜¶æ®µï¼šä»£ç†æœåŠ¡å™¨è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚å’Œç›®æ ‡æœåŠ¡å™¨çš„å“åº”ï¼Œå®Œæˆæ•°æ®ä¼ è¾“ã€‚ 2. TCP Echo æœåŠ¡å™¨ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„ TCP Echo æœåŠ¡å™¨ï¼Œå¤„ç†ä»å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œå¹¶è¿”å›ç›¸åŒçš„æ•°æ®ã€‚\n2.1 TCP Echo æœåŠ¡å™¨ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 package main import ( \"bufio\" \"fmt\" \"log\" \"net\" ) func main() { server, err := net.Listen(\"tcp\", \"127.0.0.1:1080\") // ç›‘å¬æœ¬åœ°1080ç«¯å£ if err != nil { panic(err) // å¦‚æœç›‘å¬å¤±è´¥ï¼Œåˆ™ç¨‹åºå´©æºƒ } for { client, err := server.Accept() // æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ if err != nil { log.Printf(\"Accept failed %v\", err) continue } go process(client) // å¯åŠ¨ä¸€ä¸ªæ–°çš„goroutineå¤„ç†è¯¥è¿æ¥ } } // å¤„ç†è¿æ¥çš„å‡½æ•° func process(conn net.Conn) { defer conn.Close() // å‡½æ•°é€€å‡ºæ—¶å…³é—­è¿æ¥ï¼Œé¿å…èµ„æºæ³„æ¼ reader := bufio.NewReader(conn) // åˆ›å»ºä¸€ä¸ªç¼“å†²è¯»å–å™¨ï¼Œä¼˜åŒ–æ€§èƒ½ for { b, err := reader.ReadByte() // è¯»å–å•ä¸ªå­—èŠ‚ if err != nil { break // å¦‚æœè¯»å–é”™è¯¯ï¼Œåˆ™é€€å‡ºå¾ªç¯ } _, err = conn.Write([]byte{b}) // å°†å­—èŠ‚å†™å›å®¢æˆ·ç«¯ if err != nil { break // å¦‚æœå†™å…¥é”™è¯¯ï¼Œåˆ™é€€å‡ºå¾ªç¯ } } } 2.2 ä»£ç è¯´æ˜ï¼š net.Listenï¼šåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç›‘å¬æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨ï¼ˆè¿™é‡Œæ˜¯ 127.0.0.1:1080ï¼‰ã€‚ Acceptï¼šæ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚å¹¶è¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡ã€‚ processï¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ goroutine æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚bufio.NewReader ç”¨äºæé«˜ä»ç½‘ç»œè¿æ¥è¯»å–æ•°æ®çš„æ•ˆç‡ã€‚ conn.Writeï¼šå°†å®¢æˆ·ç«¯è¾“å…¥çš„å­—èŠ‚æ•°æ®å‘é€å›å»ï¼Œå½¢æˆâ€œechoâ€å“åº”ã€‚ 2.3 æµ‹è¯•æ–¹æ³•ï¼š å¯ä»¥ä½¿ç”¨ ncï¼ˆnetcatï¼‰å·¥å…·æ¥æµ‹è¯•ï¼š\n1 nc 127.0.0.1 1080 åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»»æ„å­—ç¬¦ï¼ŒTCP Echo æœåŠ¡å™¨å°†è¿”å›ç›¸åŒçš„å­—ç¬¦ã€‚\n3. SOCKS5 ä»£ç†è®¤è¯å®ç° 3.1 å®šä¹‰å¸¸é‡ 1 2 3 4 5 const socks5Ver = 0x05 // SOCKS5 åè®®ç‰ˆæœ¬ const cmdBind = 0x01 // ç»‘å®šå‘½ä»¤ const atypIPV4 = 0x01 // IPv4 åœ°å€ç±»å‹ const atypeHOST = 0x03 // ä¸»æœºåç±»å‹ const atypeIPV6 = 0x04 // IPv6 åœ°å€ç±»å‹ 3.2 è®¤è¯å‡½æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 func auth(reader *bufio.Reader, conn net.Conn) (err error) { // è¯»å– SOCKS5 åè®®ç‰ˆæœ¬ ver, err := reader.ReadByte() if err != nil { return fmt.Errorf(\"read ver failed:%w\", err) } if ver != socks5Ver { return fmt.Errorf(\"not supported ver: %v\", ver) } // è¯»å–è®¤è¯æ–¹æ³•çš„æ•°é‡ methodSize, err := reader.ReadByte() if err != nil { return fmt.Errorf(\"read methodSize failed:%w\", err) } // è¯»å–æ‰€æœ‰è®¤è¯æ–¹æ³• method := make([]byte, methodSize) _, err = io.ReadFull(reader, method) if err != nil { return fmt.Errorf(\"read method failed:%w\", err) } // æ‰“å°åè®®ç‰ˆæœ¬ä¸è®¤è¯æ–¹æ³• log.Panicln(\"ver\", ver, \"method\", method) // è¿”å›ä¸éœ€è¦è®¤è¯çš„å“åº” _, err = conn.Write([]byte{socks5Ver, 0x00}) // 0x00 è¡¨ç¤ºæ— éœ€è®¤è¯ if err != nil { return fmt.Errorf(\"write failed:%w\", err) } return nil } 3.3 ä»£ç è¯´æ˜ï¼š ReadByteï¼šé€å­—èŠ‚è¯»å–åè®®ä¸­çš„æ•°æ®ï¼Œä¾‹å¦‚ç‰ˆæœ¬å·å’Œè®¤è¯æ–¹æ³•çš„æ•°é‡ã€‚ io.ReadFullï¼šç¡®ä¿å°†æŒ‡å®šé•¿åº¦çš„æ•°æ®å®Œå…¨è¯»å–ã€‚ conn.Writeï¼šå‘å®¢æˆ·ç«¯è¿”å›å“åº”ï¼Œè¡¨ç¤ºè®¤è¯æˆåŠŸã€‚ 4. SOCKS5 è¯·æ±‚é˜¶æ®µ åœ¨è¯·æ±‚é˜¶æ®µï¼Œä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶è§£æå…¶ä¸­çš„ç›®æ ‡åœ°å€å’Œç«¯å£ä¿¡æ¯ã€‚\n4.1 è¿æ¥è¯·æ±‚è§£æ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 func connect(reader *bufio.Reader, conn net.Conn) (err error) { ver, err := reader.ReadByte() // è¯»å–ç‰ˆæœ¬å· if err != nil { return fmt.Errorf(\"read ver failed:%w\", err) } cmd, err := reader.ReadByte() // è¯»å–å‘½ä»¤ç±»å‹ if err != nil { return fmt.Errorf(\"read cmd failed:%w\", err) } rsv, err := reader.ReadByte() // ä¿ç•™å­—æ®µï¼Œå¿½ç•¥ if err != nil { return fmt.Errorf(\"read rsv failed:%w\", err) } atyp, err := reader.ReadByte() // åœ°å€ç±»å‹ if err != nil { return fmt.Errorf(\"read atyp failed:%w\", err) } var addr string switch atyp { case atypIPV4: addr = readIPV4(reader) // è¯»å–IPv4åœ°å€ case atypeHOST: addr = readHost(reader) // è¯»å–ä¸»æœºå case atypeIPV6: addr = readIPV6(reader) // è¯»å–IPv6åœ°å€ } // è¯»å–ç«¯å£ port := readPort(reader) log.Printf(\"Connecting to %s:%d\", addr, port) // æ‰“å°ç›®æ ‡åœ°å€å’Œç«¯å£ return nil } 4.2 ä»£ç è¯´æ˜ï¼š cmdï¼šæ£€æŸ¥è¯·æ±‚ç±»å‹ï¼ŒSOCKS5 ä»£ç†æœåŠ¡å™¨é€šå¸¸åªå¤„ç† CONNECT è¯·æ±‚ã€‚ atypï¼šæ ¹æ®ç›®æ ‡åœ°å€ç±»å‹ï¼ˆIPv4ã€ä¸»æœºåã€IPv6ï¼‰åˆ†åˆ«å¤„ç†ã€‚ readIPV4/readHost/readIPV6/readPortï¼šè¯»å–ä¸åŒåœ°å€ç±»å‹çš„æ•°æ®ã€‚ 5. SOCKS5 ä¸­ç»§é˜¶æ®µ åœ¨ä¸­ç»§é˜¶æ®µï¼Œä»£ç†æœåŠ¡å™¨é€šè¿‡åŒå‘æ•°æ®è½¬å‘æ¥å®ç°ä»£ç†æœåŠ¡ï¼Œç›´åˆ°æ•°æ®ä¼ è¾“ç»“æŸæˆ–å‘ç”Ÿé”™è¯¯ã€‚\n5.1 æ•°æ®è½¬å‘ 1 2 3 4 5 6 func relay(reader *bufio.Reader, conn net.Conn, targetConn net.Conn, ctx context.Context) { go io.Copy(targetConn, conn) // ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®å¹¶å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨ go io.Copy(conn, targetConn) // ä»ç›®æ ‡æœåŠ¡å™¨è¯»å–æ•°æ®å¹¶å‘é€åˆ°å®¢æˆ·ç«¯ \u003c-ctx.Done() // ç­‰å¾…ä»»æ„ä¸€ä¸ªæ•°æ®è½¬å‘å®Œæˆæˆ–å‘ç”Ÿé”™è¯¯ } 5.2 ä»£ç è¯´æ˜ï¼š io.Copyï¼šæ ‡å‡†åº“æä¾›çš„ç”¨äºæ•°æ®è½¬å‘çš„å‡½æ•°ã€‚ ctx.Done()ï¼šä½¿ç”¨ context æ¥æ§åˆ¶æ•°æ®ä¼ è¾“çš„ç»ˆæ­¢æ¡ä»¶ã€‚å½“ context è¢«å–æ¶ˆæ—¶ï¼Œæ•°æ®ä¼ è¾“ç»ˆæ­¢ã€‚ 6. æœ€ç»ˆæµ‹è¯• æµ‹è¯•æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è®¾ç½® SOCKS5 ä»£ç†ï¼Œæˆ–è€…ä½¿ç”¨ curl å‘½ä»¤æ¥è¿›è¡Œè¯·æ±‚ï¼š\n1 curl --socks5 127.0.0.1:1080 http://example.com åœ¨æµ‹è¯•æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å°†è½¬å‘è¯·æ±‚ï¼Œæœ€ç»ˆæµè§ˆå™¨æˆ–å·¥å…·å¯ä»¥é€šè¿‡ SOCKS5 ä»£ç†æˆåŠŸè®¿é—®ç›®æ ‡æœåŠ¡å™¨ã€‚\n",
  "wordCount" : "4450",
  "inLanguage": "zh",
  "datePublished": "2025-01-25T15:37:01+08:00",
  "dateModified": "2025-01-25T15:37:01+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/go-1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="ğŸ—‚ï¸åˆ†ç±»">
                    <span>ğŸ—‚ï¸åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/">ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/tech/">ğŸ’»æŠ€æœ¯</a></div>
    <h1 class="post-title entry-hint-parent">
      Goè¯­è¨€åŸºç¡€
    </h1>
    <div class="post-description">
      Goè¯­è¨€åŸºç¡€
    </div>
    <div class="post-meta"><span title='2025-01-25 15:37:01 +0800 CST'>2025-01-25</span>&nbsp;Â·&nbsp;9 åˆ†é’Ÿ&nbsp;Â·&nbsp;4450 å­—&nbsp;Â·&nbsp;updated:&nbsp;2025-01-25&nbsp;Â·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#go%e8%af%ad%e8%a8%80%e5%9f%ba%e7%a1%80" aria-label="Goè¯­è¨€åŸºç¡€">Goè¯­è¨€åŸºç¡€</a><ul>
                            
                    <li>
                        <a href="#1-go%e8%af%ad%e8%a8%80%e6%a6%82%e8%bf%b0" aria-label="1. Goè¯­è¨€æ¦‚è¿°">1. Goè¯­è¨€æ¦‚è¿°</a></li>
                    <li>
                        <a href="#2-%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" aria-label="2. ç¯å¢ƒæ­å»º">2. ç¯å¢ƒæ­å»º</a><ul>
                            
                    <li>
                        <a href="#go-module" aria-label="Go Module">Go Module</a></li>
                    <li>
                        <a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%b7%a5%e5%85%b7" aria-label="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·</a></li>
                    <li>
                        <a href="#1go-run" aria-label="1ã€go run">1ã€<code>go run</code></a></li>
                    <li>
                        <a href="#2go-build" aria-label="2ã€go build">2ã€<code>go build</code></a><ul>
                            
                    <li>
                        <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%e5%90%8d" aria-label="è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å">è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å</a></li>
                    <li>
                        <a href="#%e6%9e%84%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%8c%85" aria-label="æ„å»ºä¸€ä¸ªåŒ…">æ„å»ºä¸€ä¸ªåŒ…</a></li></ul>
                    </li>
                    <li>
                        <a href="#3go-install" aria-label="3ã€go install">3ã€<code>go install</code></a><ul>
                            
                    <li>
                        <a href="#%e7%a4%ba%e4%be%8b" aria-label="ç¤ºä¾‹ï¼š">ç¤ºä¾‹ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#4go-test" aria-label="4ã€go test">4ã€<code>go test</code></a><ul>
                            
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e6%b5%8b%e8%af%95%e8%af%a6%e7%bb%86%e8%be%93%e5%87%ba" aria-label="æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡ºï¼š">æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡ºï¼š</a></li>
                    <li>
                        <a href="#%e8%bf%90%e8%a1%8c%e7%89%b9%e5%ae%9a%e7%9a%84%e6%b5%8b%e8%af%95%e5%87%bd%e6%95%b0" aria-label="è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼š">è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#5go-get" aria-label="5ã€go get">5ã€<code>go get</code></a><ul>
                            
                    <li>
                        <a href="#%e7%a4%ba%e4%be%8b-1" aria-label="ç¤ºä¾‹ï¼š">ç¤ºä¾‹ï¼š</a></li>
                    <li>
                        <a href="#%e8%8e%b7%e5%8f%96%e6%9c%80%e6%96%b0%e7%89%88%e6%9c%ac" aria-label="è·å–æœ€æ–°ç‰ˆæœ¬ï¼š">è·å–æœ€æ–°ç‰ˆæœ¬ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#6go-mod" aria-label="6ã€go mod">6ã€<code>go mod</code></a><ul>
                            
                    <li>
                        <a href="#61-go-mod-init" aria-label="6.1 go mod init">6.1 <code>go mod init</code></a></li>
                    <li>
                        <a href="#62-go-mod-tidy" aria-label="6.2 go mod tidy">6.2 <code>go mod tidy</code></a></li>
                    <li>
                        <a href="#63-go-mod-vendor" aria-label="6.3 go mod vendor">6.3 <code>go mod vendor</code></a></li></ul>
                    </li>
                    <li>
                        <a href="#7go-fmt-%e4%b8%8e%e4%bb%a3%e7%a0%81%e6%a0%bc%e5%bc%8f%e5%8c%96" aria-label="7ã€go fmt ä¸ä»£ç æ ¼å¼åŒ–">7ã€<code>go fmt</code> ä¸ä»£ç æ ¼å¼åŒ–</a><ul>
                            
                    <li>
                        <a href="#%e5%9f%ba%e6%9c%ac%e8%af%ad%e6%b3%95" aria-label="åŸºæœ¬è¯­æ³•ï¼š">åŸºæœ¬è¯­æ³•ï¼š</a></li>
                    <li>
                        <a href="#%e6%a0%bc%e5%bc%8f%e5%8c%96%e6%95%b4%e4%b8%aa%e5%8c%85" aria-label="æ ¼å¼åŒ–æ•´ä¸ªåŒ…ï¼š">æ ¼å¼åŒ–æ•´ä¸ªåŒ…ï¼š</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#3-go%e5%9f%ba%e7%a1%80%e8%af%ad%e6%b3%95" aria-label="3. GoåŸºç¡€è¯­æ³•">3. GoåŸºç¡€è¯­æ³•</a><ul>
                            
                    <li>
                        <a href="#31-hello-world" aria-label="3.1 Hello World">3.1 Hello World</a></li>
                    <li>
                        <a href="#32-%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e%e4%b8%8e%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="3.2 å˜é‡å£°æ˜ä¸åˆå§‹åŒ–">3.2 å˜é‡å£°æ˜ä¸åˆå§‹åŒ–</a><ul>
                            
                    <li>
                        <a href="#321-%e5%b8%b8%e8%a7%84%e5%a3%b0%e6%98%8e" aria-label="3.2.1 å¸¸è§„å£°æ˜">3.2.1 å¸¸è§„å£°æ˜</a></li>
                    <li>
                        <a href="#322-%e4%bd%bf%e7%94%a8%e7%ae%80%e6%b4%81%e5%a3%b0%e6%98%8e" aria-label="3.2.2 ä½¿ç”¨:=ç®€æ´å£°æ˜">3.2.2 ä½¿ç”¨<code>:=</code>ç®€æ´å£°æ˜</a></li>
                    <li>
                        <a href="#323-%e7%a9%ba%e7%99%bd%e6%a0%87%e8%af%86%e7%ac%a6" aria-label="3.2.3 ç©ºç™½æ ‡è¯†ç¬¦">3.2.3 ç©ºç™½æ ‡è¯†ç¬¦</a></li></ul>
                    </li>
                    <li>
                        <a href="#33-%e6%8e%a7%e5%88%b6%e7%bb%93%e6%9e%84" aria-label="3.3 æ§åˆ¶ç»“æ„">3.3 æ§åˆ¶ç»“æ„</a><ul>
                            
                    <li>
                        <a href="#331-if-else%e8%af%ad%e5%8f%a5" aria-label="3.3.1 if-elseè¯­å¥">3.3.1 if-elseè¯­å¥</a></li>
                    <li>
                        <a href="#332-switch%e8%af%ad%e5%8f%a5" aria-label="3.3.2 switchè¯­å¥">3.3.2 switchè¯­å¥</a></li>
                    <li>
                        <a href="#333-for%e5%be%aa%e7%8e%af" aria-label="3.3.3 forå¾ªç¯">3.3.3 forå¾ªç¯</a></li></ul>
                    </li>
                    <li>
                        <a href="#34-%e6%95%b0%e7%bb%84%e4%b8%8e%e5%88%87%e7%89%87" aria-label="3.4 æ•°ç»„ä¸åˆ‡ç‰‡">3.4 æ•°ç»„ä¸åˆ‡ç‰‡</a><ul>
                            
                    <li>
                        <a href="#341-%e6%95%b0%e7%bb%84" aria-label="3.4.1 æ•°ç»„">3.4.1 æ•°ç»„</a></li>
                    <li>
                        <a href="#342-%e5%88%87%e7%89%87" aria-label="3.4.2 åˆ‡ç‰‡">3.4.2 åˆ‡ç‰‡</a></li>
                    <li>
                        <a href="#343-%e5%88%87%e7%89%87%e7%9a%84%e5%88%9b%e5%bb%ba" aria-label="3.4.3 åˆ‡ç‰‡çš„åˆ›å»º">3.4.3 åˆ‡ç‰‡çš„åˆ›å»º</a></li></ul>
                    </li>
                    <li>
                        <a href="#35-%e5%87%bd%e6%95%b0" aria-label="3.5 å‡½æ•°">3.5 å‡½æ•°</a><ul>
                            
                    <li>
                        <a href="#351-%e5%9f%ba%e6%9c%ac%e5%87%bd%e6%95%b0" aria-label="3.5.1 åŸºæœ¬å‡½æ•°">3.5.1 åŸºæœ¬å‡½æ•°</a></li>
                    <li>
                        <a href="#352-%e5%a4%9a%e8%bf%94%e5%9b%9e%e5%80%bc" aria-label="3.5.2 å¤šè¿”å›å€¼">3.5.2 å¤šè¿”å›å€¼</a></li>
                    <li>
                        <a href="#353-%e5%8f%af%e5%8f%98%e5%8f%82%e6%95%b0" aria-label="3.5.3 å¯å˜å‚æ•°">3.5.3 å¯å˜å‚æ•°</a></li></ul>
                    </li>
                    <li>
                        <a href="#36-%e7%bb%93%e6%9e%84%e4%bd%93%e4%b8%8e%e6%96%b9%e6%b3%95" aria-label="3.6 ç»“æ„ä½“ä¸æ–¹æ³•">3.6 ç»“æ„ä½“ä¸æ–¹æ³•</a><ul>
                            
                    <li>
                        <a href="#361-%e7%bb%93%e6%9e%84%e4%bd%93" aria-label="3.6.1 ç»“æ„ä½“">3.6.1 ç»“æ„ä½“</a></li>
                    <li>
                        <a href="#362-%e6%96%b9%e6%b3%95" aria-label="3.6.2 æ–¹æ³•">3.6.2 æ–¹æ³•</a></li></ul>
                    </li>
                    <li>
                        <a href="#37-%e9%94%99%e8%af%af%e5%a4%84%e7%90%86" aria-label="3.7 é”™è¯¯å¤„ç†">3.7 é”™è¯¯å¤„ç†</a></li>
                    <li>
                        <a href="#38-%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%93%8d%e4%bd%9c" aria-label="3.8 å­—ç¬¦ä¸²æ“ä½œ">3.8 å­—ç¬¦ä¸²æ“ä½œ</a><ul>
                            
                    <li>
                        <a href="#381-%e5%b8%b8%e7%94%a8%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%87%bd%e6%95%b0" aria-label="3.8.1 å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°">3.8.1 å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°</a></li></ul>
                    </li>
                    <li>
                        <a href="#39-json%e5%a4%84%e7%90%86" aria-label="3.9 JSONå¤„ç†">3.9 JSONå¤„ç†</a><ul>
                            
                    <li>
                        <a href="#391-%e7%bc%96%e7%a0%81%e4%b8%8e%e8%a7%a3%e7%a0%81" aria-label="3.9.1 ç¼–ç ä¸è§£ç ">3.9.1 ç¼–ç ä¸è§£ç </a></li></ul>
                    </li>
                    <li>
                        <a href="#310-%e6%97%b6%e9%97%b4%e4%b8%8e%e6%95%b0%e5%ad%97%e8%a7%a3%e6%9e%90" aria-label="3.10 æ—¶é—´ä¸æ•°å­—è§£æ">3.10 æ—¶é—´ä¸æ•°å­—è§£æ</a><ul>
                            
                    <li>
                        <a href="#3101-%e6%97%b6%e9%97%b4%e6%93%8d%e4%bd%9c" aria-label="3.10.1 æ—¶é—´æ“ä½œ">3.10.1 æ—¶é—´æ“ä½œ</a></li>
                    <li>
                        <a href="#3102-%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bd%ac%e6%95%b0%e5%ad%97" aria-label="3.10.2 å­—ç¬¦ä¸²è½¬æ•°å­—">3.10.2 å­—ç¬¦ä¸²è½¬æ•°å­—</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#4-go%e5%b7%a5%e7%a8%8b%e5%ae%9e%e8%b7%b5" aria-label="4. Goå·¥ç¨‹å®è·µ">4. Goå·¥ç¨‹å®è·µ</a><ul>
                            
                    <li>
                        <a href="#41-%e7%8c%9c%e6%95%b0%e5%ad%97%e6%b8%b8%e6%88%8f" aria-label="4.1 çŒœæ•°å­—æ¸¸æˆ">4.1 çŒœæ•°å­—æ¸¸æˆ</a></li>
                    <li>
                        <a href="#42-%e5%9c%a8%e7%ba%bf%e8%af%8d%e5%85%b8" aria-label="4.2 åœ¨çº¿è¯å…¸">4.2 åœ¨çº¿è¯å…¸</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#socks5-%e4%bb%a3%e7%90%86%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0" aria-label="SOCKS5 ä»£ç†æœåŠ¡å™¨ä»£ç å®ç°">SOCKS5 ä»£ç†æœåŠ¡å™¨ä»£ç å®ç°</a><ul>
                            
                    <li>
                        <a href="#1-socks5-%e5%8d%8f%e8%ae%ae%e6%a6%82%e8%bf%b0" aria-label="1. SOCKS5 åè®®æ¦‚è¿°">1. SOCKS5 åè®®æ¦‚è¿°</a><ul>
                            
                    <li>
                        <a href="#11-socks5-%e4%bb%a3%e7%90%86%e5%8e%9f%e7%90%86" aria-label="1.1 SOCKS5 ä»£ç†åŸç†">1.1 SOCKS5 ä»£ç†åŸç†</a></li></ul>
                    </li>
                    <li>
                        <a href="#2-tcp-echo-%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="2. TCP Echo æœåŠ¡å™¨">2. TCP Echo æœåŠ¡å™¨</a><ul>
                            
                    <li>
                        <a href="#21-tcp-echo-%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bb%a3%e7%a0%81" aria-label="2.1 TCP Echo æœåŠ¡å™¨ä»£ç ">2.1 TCP Echo æœåŠ¡å™¨ä»£ç </a></li>
                    <li>
                        <a href="#22-%e4%bb%a3%e7%a0%81%e8%af%b4%e6%98%8e" aria-label="2.2 ä»£ç è¯´æ˜ï¼š">2.2 ä»£ç è¯´æ˜ï¼š</a></li>
                    <li>
                        <a href="#23-%e6%b5%8b%e8%af%95%e6%96%b9%e6%b3%95" aria-label="2.3 æµ‹è¯•æ–¹æ³•ï¼š">2.3 æµ‹è¯•æ–¹æ³•ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#3-socks5-%e4%bb%a3%e7%90%86%e8%ae%a4%e8%af%81%e5%ae%9e%e7%8e%b0" aria-label="3. SOCKS5 ä»£ç†è®¤è¯å®ç°">3. SOCKS5 ä»£ç†è®¤è¯å®ç°</a><ul>
                            
                    <li>
                        <a href="#31-%e5%ae%9a%e4%b9%89%e5%b8%b8%e9%87%8f" aria-label="3.1 å®šä¹‰å¸¸é‡">3.1 å®šä¹‰å¸¸é‡</a></li>
                    <li>
                        <a href="#32-%e8%ae%a4%e8%af%81%e5%87%bd%e6%95%b0" aria-label="3.2 è®¤è¯å‡½æ•°">3.2 è®¤è¯å‡½æ•°</a></li>
                    <li>
                        <a href="#33-%e4%bb%a3%e7%a0%81%e8%af%b4%e6%98%8e" aria-label="3.3 ä»£ç è¯´æ˜ï¼š">3.3 ä»£ç è¯´æ˜ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#4-socks5-%e8%af%b7%e6%b1%82%e9%98%b6%e6%ae%b5" aria-label="4. SOCKS5 è¯·æ±‚é˜¶æ®µ">4. SOCKS5 è¯·æ±‚é˜¶æ®µ</a><ul>
                            
                    <li>
                        <a href="#41-%e8%bf%9e%e6%8e%a5%e8%af%b7%e6%b1%82%e8%a7%a3%e6%9e%90" aria-label="4.1 è¿æ¥è¯·æ±‚è§£æ">4.1 è¿æ¥è¯·æ±‚è§£æ</a></li>
                    <li>
                        <a href="#42-%e4%bb%a3%e7%a0%81%e8%af%b4%e6%98%8e" aria-label="4.2 ä»£ç è¯´æ˜ï¼š">4.2 ä»£ç è¯´æ˜ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#5-socks5-%e4%b8%ad%e7%bb%a7%e9%98%b6%e6%ae%b5" aria-label="5. SOCKS5 ä¸­ç»§é˜¶æ®µ">5. SOCKS5 ä¸­ç»§é˜¶æ®µ</a><ul>
                            
                    <li>
                        <a href="#51-%e6%95%b0%e6%8d%ae%e8%bd%ac%e5%8f%91" aria-label="5.1 æ•°æ®è½¬å‘">5.1 æ•°æ®è½¬å‘</a></li>
                    <li>
                        <a href="#52-%e4%bb%a3%e7%a0%81%e8%af%b4%e6%98%8e" aria-label="5.2 ä»£ç è¯´æ˜ï¼š">5.2 ä»£ç è¯´æ˜ï¼š</a></li></ul>
                    </li>
                    <li>
                        <a href="#6-%e6%9c%80%e7%bb%88%e6%b5%8b%e8%af%95" aria-label="6. æœ€ç»ˆæµ‹è¯•">6. æœ€ç»ˆæµ‹è¯•</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="goè¯­è¨€åŸºç¡€">Goè¯­è¨€åŸºç¡€<a hidden class="anchor" aria-hidden="true" href="#goè¯­è¨€åŸºç¡€">#</a></h1>
<h2 id="1-goè¯­è¨€æ¦‚è¿°">1. Goè¯­è¨€æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#1-goè¯­è¨€æ¦‚è¿°">#</a></h2>
<ul>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šé€‚åˆå¹¶å‘ç¼–ç¨‹ï¼Œæ”¯æŒé«˜å¹¶å‘ã€é«˜æ€§èƒ½åœºæ™¯ã€‚</li>
<li><strong>ç®€æ´è¯­æ³•</strong>ï¼šGoçš„è¯­æ³•ç®€æ´ï¼Œå¿«é€Ÿä¸Šæ‰‹ï¼Œå»é™¤äº†å¤æ‚çš„é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œä¿ç•™äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›ä¼˜åŠ¿ã€‚</li>
<li><strong>ä¸°å¯Œæ ‡å‡†åº“</strong>ï¼šå†…å»ºå¼ºå¤§çš„æ ‡å‡†åº“ï¼Œæ”¯æŒç½‘ç»œã€æ–‡ä»¶æ“ä½œã€å¹¶å‘ç­‰ã€‚</li>
<li><strong>é™æ€é“¾æ¥</strong>ï¼šç”Ÿæˆç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€ä¾èµ–å¤–éƒ¨åº“ï¼Œç®€åŒ–éƒ¨ç½²ã€‚</li>
<li><strong>è·¨å¹³å°</strong>ï¼šæ”¯æŒLinuxã€Windowsã€macOSç­‰å¤šä¸ªå¹³å°ã€‚</li>
<li><strong>åƒåœ¾å›æ”¶</strong>ï¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå‡å°‘å¼€å‘äººå‘˜çš„è´Ÿæ‹…ã€‚</li>
</ul>
<h2 id="2-ç¯å¢ƒæ­å»º">2. ç¯å¢ƒæ­å»º<a hidden class="anchor" aria-hidden="true" href="#2-ç¯å¢ƒæ­å»º">#</a></h2>
<ul>
<li><strong>Goå®‰è£…</strong>ï¼š<a href="https://golang.org/doc/install">å®˜æ–¹å®‰è£…æŒ‡å—</a></li>
<li><strong>æ¨èIDE</strong>ï¼šVSCodeã€GoLandï¼Œæˆ–è€…Gitpodç­‰äº‘å¼€å‘ç¯å¢ƒã€‚</li>
</ul>
<h3 id="go-module">Go Module<a hidden class="anchor" aria-hidden="true" href="#go-module">#</a></h3>
<p><strong><code>go.mod</code></strong>ï¼šç”¨äºç®¡ç† Go é¡¹ç›®çš„ä¾èµ–ï¼Œè®°å½•æ¨¡å—è·¯å¾„ã€Go ç‰ˆæœ¬å’Œæ‰€ä¾èµ–çš„åŒ…åŠå…¶ç‰ˆæœ¬ã€‚</p>
<p><strong><code>go.sum</code></strong>ï¼šç”¨äºè®°å½•æ¯ä¸ªä¾èµ–åŒ…çš„æ ¡éªŒå’Œï¼Œç¡®ä¿ä¾èµ–åŒ…çš„å®Œæ•´æ€§ä¸å®‰å…¨æ€§ã€‚</p>
<h3 id="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·<a hidden class="anchor" aria-hidden="true" href="#å‘½ä»¤è¡Œå·¥å…·">#</a></h3>
<h3 id="1go-run">1ã€<code>go run</code><a hidden class="anchor" aria-hidden="true" href="#1go-run">#</a></h3>
<p>æ— éœ€ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€‚åˆç”¨äºå¿«é€Ÿæµ‹è¯•å’Œè°ƒè¯•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a class="lnlinks" href="#hl-0-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go run &lt;filename.go&gt; <span class="o">[</span>arguments<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥ä¼ é€’å¤šä¸ªæ–‡ä»¶åæ¥è¿è¡Œå¤šä¸ªGoæºæ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a class="lnlinks" href="#hl-1-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go run file1.go file2.go
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2go-build">2ã€<code>go build</code><a hidden class="anchor" aria-hidden="true" href="#2go-build">#</a></h3>
<p>ç¼–è¯‘ä»£ç ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·ï¼Œç¼–è¯‘åŸä»£ç å¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥åœ¨æ²¡æœ‰Goç¯å¢ƒçš„æœºå™¨ä¸Šè¿è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a class="lnlinks" href="#hl-2-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go build &lt;filename.go&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å">è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å<a hidden class="anchor" aria-hidden="true" href="#è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a class="lnlinks" href="#hl-3-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go build -o myapp main.go
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-4-1"><a class="lnlinks" href="#hl-4-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go build file1.go file2.go
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ„å»ºä¸€ä¸ªåŒ…">æ„å»ºä¸€ä¸ªåŒ…<a hidden class="anchor" aria-hidden="true" href="#æ„å»ºä¸€ä¸ªåŒ…">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-5-1"><a class="lnlinks" href="#hl-5-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go build
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3go-install">3ã€<code>go install</code><a hidden class="anchor" aria-hidden="true" href="#3go-install">#</a></h3>
<p>ä¸ <code>go build</code> ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº <code>go install</code> ä¼šå°†ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…åˆ°Goçš„<code>GOPATH</code>ä¸‹ï¼ˆæˆ–è€…æ¨¡å—æ¨¡å¼ä¸‹ä¼šå®‰è£…åˆ°<code>GOBIN</code>)ã€‚å®ƒé€šå¸¸ç”¨äºå°†ç¼–è¯‘åçš„å·¥å…·æˆ–åº”ç”¨ç¨‹åºå®‰è£…åˆ°ç³»ç»Ÿä¸­ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-6-1"><a class="lnlinks" href="#hl-6-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go install &lt;package&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹">ç¤ºä¾‹ï¼š<a hidden class="anchor" aria-hidden="true" href="#ç¤ºä¾‹">#</a></h4>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>go install</code> å®‰è£…ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-7-1"><a class="lnlinks" href="#hl-7-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go install github.com/spf13/cobra@latest
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼šå°† <code>cobra</code> å®‰è£…åˆ°ä½ çš„ <code>GOBIN</code> ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ä½ åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚</p>
<h3 id="4go-test">4ã€<code>go test</code><a hidden class="anchor" aria-hidden="true" href="#4go-test">#</a></h3>
<p><code>go test</code> æ˜¯ Go æä¾›çš„æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–è¿è¡ŒGoçš„å•å…ƒæµ‹è¯•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-8-1"><a class="lnlinks" href="#hl-8-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go <span class="nb">test</span> &lt;package&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ <code>main_test.go</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-9-1"><a class="lnlinks" href="#hl-9-1"> 1</a>
</span><span class="lnt" id="hl-9-2"><a class="lnlinks" href="#hl-9-2"> 2</a>
</span><span class="lnt" id="hl-9-3"><a class="lnlinks" href="#hl-9-3"> 3</a>
</span><span class="lnt" id="hl-9-4"><a class="lnlinks" href="#hl-9-4"> 4</a>
</span><span class="lnt" id="hl-9-5"><a class="lnlinks" href="#hl-9-5"> 5</a>
</span><span class="lnt" id="hl-9-6"><a class="lnlinks" href="#hl-9-6"> 6</a>
</span><span class="lnt" id="hl-9-7"><a class="lnlinks" href="#hl-9-7"> 7</a>
</span><span class="lnt" id="hl-9-8"><a class="lnlinks" href="#hl-9-8"> 8</a>
</span><span class="lnt" id="hl-9-9"><a class="lnlinks" href="#hl-9-9"> 9</a>
</span><span class="lnt" id="hl-9-10"><a class="lnlinks" href="#hl-9-10">10</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">package main
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import <span class="s2">&#34;testing&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">func TestAdd<span class="o">(</span>t *testing.T<span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    result :<span class="o">=</span> <span class="m">1</span> + <span class="m">2</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> result !<span class="o">=</span> <span class="m">3</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        t.Errorf<span class="o">(</span><span class="s2">&#34;æœŸæœ› 3ï¼Œå®é™…æ˜¯ %d&#34;</span>, result<span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½ å¯ä»¥è¿è¡Œ <code>go test</code> æ¥è¿è¡Œè¿™ä¸ªæµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-10-1"><a class="lnlinks" href="#hl-10-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go <span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡º">æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡ºï¼š<a hidden class="anchor" aria-hidden="true" href="#æŸ¥çœ‹æµ‹è¯•è¯¦ç»†è¾“å‡º">#</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>go test</code> ä¼šéšè—è¯¦ç»†è¾“å‡ºã€‚å¦‚æœä½ æƒ³æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>-v</code> å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-11-1"><a class="lnlinks" href="#hl-11-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go <span class="nb">test</span> -v
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°">è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼š<a hidden class="anchor" aria-hidden="true" href="#è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°">#</a></h4>
<p>å¦‚æœä½ åªæƒ³è¿è¡Œç‰¹å®šçš„æµ‹è¯•å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>-run</code> å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-12-1"><a class="lnlinks" href="#hl-12-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go <span class="nb">test</span> -run TestAdd
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="5go-get">5ã€<code>go get</code><a hidden class="anchor" aria-hidden="true" href="#5go-get">#</a></h3>
<p><code>go get</code> ç”¨äºå®‰è£…å’Œæ›´æ–° Go åŒ…ã€‚å¦‚æœä½ éœ€è¦ä¸‹è½½ç¬¬ä¸‰æ–¹åº“æˆ–è€…å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ <code>go get</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-13-1"><a class="lnlinks" href="#hl-13-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go get &lt;package&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-1">ç¤ºä¾‹ï¼š<a hidden class="anchor" aria-hidden="true" href="#ç¤ºä¾‹-1">#</a></h4>
<p>ä¸‹è½½å¹¶å®‰è£…ä¸€ä¸ªåŒ…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-14-1"><a class="lnlinks" href="#hl-14-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go get github.com/spf13/cobra
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ åœ¨æ¨¡å—æ¨¡å¼ä¸‹ï¼Œ<code>go get</code> ä¼šè‡ªåŠ¨æ›´æ–° <code>go.mod</code> æ–‡ä»¶ã€‚</p>
<h4 id="è·å–æœ€æ–°ç‰ˆæœ¬">è·å–æœ€æ–°ç‰ˆæœ¬ï¼š<a hidden class="anchor" aria-hidden="true" href="#è·å–æœ€æ–°ç‰ˆæœ¬">#</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>go get</code> ä¼šä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚å¦‚æœä½ éœ€è¦è·å–ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-15-1"><a class="lnlinks" href="#hl-15-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go get github.com/spf13/cobra@v1.2.3
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="6go-mod">6ã€<code>go mod</code><a hidden class="anchor" aria-hidden="true" href="#6go-mod">#</a></h3>
<p>Go 1.11 ä»¥åå¼•å…¥äº†æ¨¡å—åŒ–ï¼ˆModuleï¼‰ç³»ç»Ÿï¼Œ<code>go mod</code> æ˜¯ Go è¯­è¨€ä¸­ç”¨äºç®¡ç†ä¾èµ–çš„å·¥å…·ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„ <code>go mod</code> å‘½ä»¤ï¼š</p>
<h4 id="61-go-mod-init">6.1 <code>go mod init</code><a hidden class="anchor" aria-hidden="true" href="#61-go-mod-init">#</a></h4>
<p>åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Go æ¨¡å—ï¼Œåœ¨å½“å‰ç›®å½•åˆ›å»º <code>go.mod</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-16-1"><a class="lnlinks" href="#hl-16-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go mod init &lt;module-name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="62-go-mod-tidy">6.2 <code>go mod tidy</code><a hidden class="anchor" aria-hidden="true" href="#62-go-mod-tidy">#</a></h4>
<p>æ¸…ç†æ¨¡å—æ–‡ä»¶ï¼Œåˆ é™¤æœªä½¿ç”¨çš„ä¾èµ–ï¼Œå¹¶ä¸”ç¡®ä¿æ‰€æœ‰éœ€è¦çš„ä¾èµ–éƒ½åœ¨ <code>go.mod</code> å’Œ <code>go.sum</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-17-1"><a class="lnlinks" href="#hl-17-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go mod tidy
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="63-go-mod-vendor">6.3 <code>go mod vendor</code><a hidden class="anchor" aria-hidden="true" href="#63-go-mod-vendor">#</a></h4>
<p>å°†æ‰€æœ‰ä¾èµ–å¤åˆ¶åˆ°æœ¬åœ° <code>vendor</code> ç›®å½•ä¸­ï¼Œè¿™å¯¹äºæŸäº›éœ€è¦ç¦»çº¿æ„å»ºçš„æƒ…å†µå¾ˆæœ‰ç”¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-18-1"><a class="lnlinks" href="#hl-18-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">go mod vendor
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="7go-fmt-ä¸ä»£ç æ ¼å¼åŒ–">7ã€<code>go fmt</code> ä¸ä»£ç æ ¼å¼åŒ–<a hidden class="anchor" aria-hidden="true" href="#7go-fmt-ä¸ä»£ç æ ¼å¼åŒ–">#</a></h3>
<p><code>go fmt</code> æ˜¯ Go çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è°ƒæ•´ Go æºä»£ç çš„æ ¼å¼ï¼Œä½¿å…¶ç¬¦åˆ Go çš„ä»£ç é£æ ¼ã€‚é€šå¸¸åœ¨æäº¤ä»£ç å‰è¿è¡Œï¼Œä»¥ä¿æŒä»£ç é£æ ¼ä¸€è‡´ã€‚</p>
<h4 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•ï¼š<a hidden class="anchor" aria-hidden="true" href="#åŸºæœ¬è¯­æ³•">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-19-1"><a class="lnlinks" href="#hl-19-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go fmt &lt;filename.go&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ ¼å¼åŒ–æ•´ä¸ªåŒ…">æ ¼å¼åŒ–æ•´ä¸ªåŒ…ï¼š<a hidden class="anchor" aria-hidden="true" href="#æ ¼å¼åŒ–æ•´ä¸ªåŒ…">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-20-1"><a class="lnlinks" href="#hl-20-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go fmt ./...
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-goåŸºç¡€è¯­æ³•">3. GoåŸºç¡€è¯­æ³•<a hidden class="anchor" aria-hidden="true" href="#3-goåŸºç¡€è¯­æ³•">#</a></h2>
<h3 id="31-hello-world">3.1 Hello World<a hidden class="anchor" aria-hidden="true" href="#31-hello-world">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-21-1"><a class="lnlinks" href="#hl-21-1">1</a>
</span><span class="lnt" id="hl-21-2"><a class="lnlinks" href="#hl-21-2">2</a>
</span><span class="lnt" id="hl-21-3"><a class="lnlinks" href="#hl-21-3">3</a>
</span><span class="lnt" id="hl-21-4"><a class="lnlinks" href="#hl-21-4">4</a>
</span><span class="lnt" id="hl-21-5"><a class="lnlinks" href="#hl-21-5">5</a>
</span><span class="lnt" id="hl-21-6"><a class="lnlinks" href="#hl-21-6">6</a>
</span><span class="lnt" id="hl-21-7"><a class="lnlinks" href="#hl-21-7">7</a>
</span><span class="lnt" id="hl-21-8"><a class="lnlinks" href="#hl-21-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span> <span class="c1">// å®šä¹‰åŒ…åï¼ŒmainåŒ…æ˜¯Goç¨‹åºçš„å…¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;fmt&#34;</span> <span class="c1">// å¼•å…¥fmtåŒ…ï¼Œç”¨äºæ ¼å¼åŒ–è¾“å…¥è¾“å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// mainå‡½æ•°æ˜¯Goç¨‹åºçš„å…¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello, World!&#34;</span><span class="p">)</span> <span class="c1">// è¾“å‡ºHello, World!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-å˜é‡å£°æ˜ä¸åˆå§‹åŒ–">3.2 å˜é‡å£°æ˜ä¸åˆå§‹åŒ–<a hidden class="anchor" aria-hidden="true" href="#32-å˜é‡å£°æ˜ä¸åˆå§‹åŒ–">#</a></h3>
<h4 id="321-å¸¸è§„å£°æ˜">3.2.1 å¸¸è§„å£°æ˜<a hidden class="anchor" aria-hidden="true" href="#321-å¸¸è§„å£°æ˜">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-22-1"><a class="lnlinks" href="#hl-22-1">1</a>
</span><span class="lnt" id="hl-22-2"><a class="lnlinks" href="#hl-22-2">2</a>
</span><span class="lnt" id="hl-22-3"><a class="lnlinks" href="#hl-22-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="s">&#34;initial&#34;</span> <span class="c1">// å£°æ˜å˜é‡aï¼Œå¹¶åˆå§‹åŒ–ä¸º&#34;initial&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="c1">// åŒæ—¶å£°æ˜bå’Œcå¹¶åˆå§‹åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">d</span> <span class="p">=</span> <span class="kc">true</span> <span class="c1">// è‡ªåŠ¨æ¨æ–­dçš„ç±»å‹ä¸ºbool
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="322-ä½¿ç”¨ç®€æ´å£°æ˜">3.2.2 ä½¿ç”¨<code>:=</code>ç®€æ´å£°æ˜<a hidden class="anchor" aria-hidden="true" href="#322-ä½¿ç”¨ç®€æ´å£°æ˜">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-23-1"><a class="lnlinks" href="#hl-23-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">e</span> <span class="o">:=</span> <span class="mf">3.14</span> <span class="c1">// :=ç”¨äºå£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ï¼Œç±»å‹ç”±ç¼–è¯‘å™¨æ¨æ–­
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="323-ç©ºç™½æ ‡è¯†ç¬¦">3.2.3 ç©ºç™½æ ‡è¯†ç¬¦<a hidden class="anchor" aria-hidden="true" href="#323-ç©ºç™½æ ‡è¯†ç¬¦">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-24-1"><a class="lnlinks" href="#hl-24-1">1</a>
</span><span class="lnt" id="hl-24-2"><a class="lnlinks" href="#hl-24-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="s">&#34;file.txt&#34;</span><span class="p">)</span> <span class="c1">// é€šè¿‡ç©ºç™½æ ‡è¯†ç¬¦å¿½ç•¥æŸä¸ªè¿”å›å€¼
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-æ§åˆ¶ç»“æ„">3.3 æ§åˆ¶ç»“æ„<a hidden class="anchor" aria-hidden="true" href="#33-æ§åˆ¶ç»“æ„">#</a></h3>
<h4 id="331-if-elseè¯­å¥">3.3.1 if-elseè¯­å¥<a hidden class="anchor" aria-hidden="true" href="#331-if-elseè¯­å¥">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-25-1"><a class="lnlinks" href="#hl-25-1">1</a>
</span><span class="lnt" id="hl-25-2"><a class="lnlinks" href="#hl-25-2">2</a>
</span><span class="lnt" id="hl-25-3"><a class="lnlinks" href="#hl-25-3">3</a>
</span><span class="lnt" id="hl-25-4"><a class="lnlinks" href="#hl-25-4">4</a>
</span><span class="lnt" id="hl-25-5"><a class="lnlinks" href="#hl-25-5">5</a>
</span><span class="lnt" id="hl-25-6"><a class="lnlinks" href="#hl-25-6">6</a>
</span><span class="lnt" id="hl-25-7"><a class="lnlinks" href="#hl-25-7">7</a>
</span><span class="lnt" id="hl-25-8"><a class="lnlinks" href="#hl-25-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">num</span> <span class="o">:=</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">num</span> <span class="p">&lt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="s">&#34;is negative&#34;</span><span class="p">)</span> <span class="c1">// å¦‚æœnumå°äº0ï¼Œè¾“å‡ºè´Ÿæ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">num</span> <span class="p">&lt;</span> <span class="mi">10</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="s">&#34;has 1 digit&#34;</span><span class="p">)</span> <span class="c1">// å¦‚æœnumå°äº10ï¼Œè¾“å‡º1ä½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="s">&#34;has multiple digits&#34;</span><span class="p">)</span> <span class="c1">// å¦åˆ™è¾“å‡ºå¤šä½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="332-switchè¯­å¥">3.3.2 switchè¯­å¥<a hidden class="anchor" aria-hidden="true" href="#332-switchè¯­å¥">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-26-1"><a class="lnlinks" href="#hl-26-1">1</a>
</span><span class="lnt" id="hl-26-2"><a class="lnlinks" href="#hl-26-2">2</a>
</span><span class="lnt" id="hl-26-3"><a class="lnlinks" href="#hl-26-3">3</a>
</span><span class="lnt" id="hl-26-4"><a class="lnlinks" href="#hl-26-4">4</a>
</span><span class="lnt" id="hl-26-5"><a class="lnlinks" href="#hl-26-5">5</a>
</span><span class="lnt" id="hl-26-6"><a class="lnlinks" href="#hl-26-6">6</a>
</span><span class="lnt" id="hl-26-7"><a class="lnlinks" href="#hl-26-7">7</a>
</span><span class="lnt" id="hl-26-8"><a class="lnlinks" href="#hl-26-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">switch</span> <span class="nx">day</span> <span class="o">:=</span> <span class="s">&#34;Monday&#34;</span><span class="p">;</span> <span class="nx">day</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="s">&#34;Monday&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Start of the week&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="s">&#34;Friday&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;End of the week&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Midweek&#34;</span><span class="p">)</span> <span class="c1">// é»˜è®¤æƒ…å†µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="333-forå¾ªç¯">3.3.3 forå¾ªç¯<a hidden class="anchor" aria-hidden="true" href="#333-forå¾ªç¯">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-27-1"><a class="lnlinks" href="#hl-27-1">1</a>
</span><span class="lnt" id="hl-27-2"><a class="lnlinks" href="#hl-27-2">2</a>
</span><span class="lnt" id="hl-27-3"><a class="lnlinks" href="#hl-27-3">3</a>
</span><span class="lnt" id="hl-27-4"><a class="lnlinks" href="#hl-27-4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Goåªæœ‰ä¸€ä¸ªå¾ªç¯ç»“æ„forï¼Œå…¶ä»–çš„å¦‚whileéƒ½å¯ä»¥é€šè¿‡forå®ç°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span> <span class="c1">// ä»0åˆ°2çš„å¾ªç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="c1">// è¾“å‡ºå¾ªç¯çš„æ¯ä¸ªå€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34-æ•°ç»„ä¸åˆ‡ç‰‡">3.4 æ•°ç»„ä¸åˆ‡ç‰‡<a hidden class="anchor" aria-hidden="true" href="#34-æ•°ç»„ä¸åˆ‡ç‰‡">#</a></h3>
<h4 id="341-æ•°ç»„">3.4.1 æ•°ç»„<a hidden class="anchor" aria-hidden="true" href="#341-æ•°ç»„">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-28-1"><a class="lnlinks" href="#hl-28-1">1</a>
</span><span class="lnt" id="hl-28-2"><a class="lnlinks" href="#hl-28-2">2</a>
</span><span class="lnt" id="hl-28-3"><a class="lnlinks" href="#hl-28-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">arr</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span> <span class="c1">// å®šä¹‰ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º5çš„æ•°ç»„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">10</span>    <span class="c1">// ç»™æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="c1">// è¾“å‡ºæ•´ä¸ªæ•°ç»„
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="342-åˆ‡ç‰‡">3.4.2 åˆ‡ç‰‡<a hidden class="anchor" aria-hidden="true" href="#342-åˆ‡ç‰‡">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-29-1"><a class="lnlinks" href="#hl-29-1">1</a>
</span><span class="lnt" id="hl-29-2"><a class="lnlinks" href="#hl-29-2">2</a>
</span><span class="lnt" id="hl-29-3"><a class="lnlinks" href="#hl-29-3">3</a>
</span><span class="lnt" id="hl-29-4"><a class="lnlinks" href="#hl-29-4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// åˆ‡ç‰‡æ˜¯Goçš„ä¸€ä¸ªçµæ´»æ•°æ®ç»“æ„ï¼Œä¸åƒæ•°ç»„å¤§å°å›ºå®š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">s</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">,</span> <span class="s">&#34;c&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">s</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;d&#34;</span><span class="p">)</span> <span class="c1">// appendå‡½æ•°åŠ¨æ€æ‰©å±•åˆ‡ç‰‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="c1">// è¾“å‡ºåˆ‡ç‰‡
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="343-åˆ‡ç‰‡çš„åˆ›å»º">3.4.3 åˆ‡ç‰‡çš„åˆ›å»º<a hidden class="anchor" aria-hidden="true" href="#343-åˆ‡ç‰‡çš„åˆ›å»º">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-30-1"><a class="lnlinks" href="#hl-30-1">1</a>
</span><span class="lnt" id="hl-30-2"><a class="lnlinks" href="#hl-30-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">s</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º5çš„åˆ‡ç‰‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="c1">// è¾“å‡º: [0 0 0 0 0]
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="35-å‡½æ•°">3.5 å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#35-å‡½æ•°">#</a></h3>
<h4 id="351-åŸºæœ¬å‡½æ•°">3.5.1 åŸºæœ¬å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#351-åŸºæœ¬å‡½æ•°">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-31-1"><a class="lnlinks" href="#hl-31-1">1</a>
</span><span class="lnt" id="hl-31-2"><a class="lnlinks" href="#hl-31-2">2</a>
</span><span class="lnt" id="hl-31-3"><a class="lnlinks" href="#hl-31-3">3</a>
</span><span class="lnt" id="hl-31-4"><a class="lnlinks" href="#hl-31-4">4</a>
</span><span class="lnt" id="hl-31-5"><a class="lnlinks" href="#hl-31-5">5</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="nx">a</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span> <span class="c1">// å‡½æ•°å£°æ˜ï¼Œè¿”å›a+bçš„ç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">// è°ƒç”¨å‡½æ•°å¹¶æ‰“å°è¿”å›å€¼
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="352-å¤šè¿”å›å€¼">3.5.2 å¤šè¿”å›å€¼<a hidden class="anchor" aria-hidden="true" href="#352-å¤šè¿”å›å€¼">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-32-1"><a class="lnlinks" href="#hl-32-1">1</a>
</span><span class="lnt" id="hl-32-2"><a class="lnlinks" href="#hl-32-2">2</a>
</span><span class="lnt" id="hl-32-3"><a class="lnlinks" href="#hl-32-3">3</a>
</span><span class="lnt" id="hl-32-4"><a class="lnlinks" href="#hl-32-4">4</a>
</span><span class="lnt" id="hl-32-5"><a class="lnlinks" href="#hl-32-5">5</a>
</span><span class="lnt" id="hl-32-6"><a class="lnlinks" href="#hl-32-6">6</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">divide</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="o">%</span> <span class="nx">b</span> <span class="c1">// è¿”å›å•†å’Œä½™æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">quotient</span><span class="p">,</span> <span class="nx">remainder</span> <span class="o">:=</span> <span class="nf">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// è§£æ„è¿”å›å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">quotient</span><span class="p">,</span> <span class="nx">remainder</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="353-å¯å˜å‚æ•°">3.5.3 å¯å˜å‚æ•°<a hidden class="anchor" aria-hidden="true" href="#353-å¯å˜å‚æ•°">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-33-1"><a class="lnlinks" href="#hl-33-1">1</a>
</span><span class="lnt" id="hl-33-2"><a class="lnlinks" href="#hl-33-2">2</a>
</span><span class="lnt" id="hl-33-3"><a class="lnlinks" href="#hl-33-3">3</a>
</span><span class="lnt" id="hl-33-4"><a class="lnlinks" href="#hl-33-4">4</a>
</span><span class="lnt" id="hl-33-5"><a class="lnlinks" href="#hl-33-5">5</a>
</span><span class="lnt" id="hl-33-6"><a class="lnlinks" href="#hl-33-6">6</a>
</span><span class="lnt" id="hl-33-7"><a class="lnlinks" href="#hl-33-7">7</a>
</span><span class="lnt" id="hl-33-8"><a class="lnlinks" href="#hl-33-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">sum</span><span class="p">(</span><span class="nx">nums</span> <span class="o">...</span><span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span> <span class="c1">// numsæ˜¯ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">total</span> <span class="o">:=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">num</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">nums</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">total</span> <span class="o">+=</span> <span class="nx">num</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">total</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">// ä¼ å…¥å¤šä¸ªå‚æ•°
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="36-ç»“æ„ä½“ä¸æ–¹æ³•">3.6 ç»“æ„ä½“ä¸æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#36-ç»“æ„ä½“ä¸æ–¹æ³•">#</a></h3>
<h4 id="361-ç»“æ„ä½“">3.6.1 ç»“æ„ä½“<a hidden class="anchor" aria-hidden="true" href="#361-ç»“æ„ä½“">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-34-1"><a class="lnlinks" href="#hl-34-1">1</a>
</span><span class="lnt" id="hl-34-2"><a class="lnlinks" href="#hl-34-2">2</a>
</span><span class="lnt" id="hl-34-3"><a class="lnlinks" href="#hl-34-3">3</a>
</span><span class="lnt" id="hl-34-4"><a class="lnlinks" href="#hl-34-4">4</a>
</span><span class="lnt" id="hl-34-5"><a class="lnlinks" href="#hl-34-5">5</a>
</span><span class="lnt" id="hl-34-6"><a class="lnlinks" href="#hl-34-6">6</a>
</span><span class="lnt" id="hl-34-7"><a class="lnlinks" href="#hl-34-7">7</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Password</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">u</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span><span class="s">&#34;wang&#34;</span><span class="p">,</span> <span class="s">&#34;password123&#34;</span><span class="p">}</span> <span class="c1">// åˆå§‹åŒ–ç»“æ„ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="362-æ–¹æ³•">3.6.2 æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#362-æ–¹æ³•">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-35-1"><a class="lnlinks" href="#hl-35-1">1</a>
</span><span class="lnt" id="hl-35-2"><a class="lnlinks" href="#hl-35-2">2</a>
</span><span class="lnt" id="hl-35-3"><a class="lnlinks" href="#hl-35-3">3</a>
</span><span class="lnt" id="hl-35-4"><a class="lnlinks" href="#hl-35-4">4</a>
</span><span class="lnt" id="hl-35-5"><a class="lnlinks" href="#hl-35-5">5</a>
</span><span class="lnt" id="hl-35-6"><a class="lnlinks" href="#hl-35-6">6</a>
</span><span class="lnt" id="hl-35-7"><a class="lnlinks" href="#hl-35-7">7</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// ä¸ºUserç±»å‹å®šä¹‰ä¸€ä¸ªæ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="nf">ResetPassword</span><span class="p">(</span><span class="nx">password</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">u</span><span class="p">.</span><span class="nx">Password</span> <span class="p">=</span> <span class="nx">password</span> <span class="c1">// ä¿®æ”¹ç»“æ„ä½“å®ä¾‹çš„å­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">u</span><span class="p">.</span><span class="nf">ResetPassword</span><span class="p">(</span><span class="s">&#34;newpassword&#34;</span><span class="p">)</span> <span class="c1">// è°ƒç”¨æ–¹æ³•ä¿®æ”¹Passwordå­—æ®µ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nx">Password</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="37-é”™è¯¯å¤„ç†">3.7 é”™è¯¯å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#37-é”™è¯¯å¤„ç†">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-36-1"><a class="lnlinks" href="#hl-36-1"> 1</a>
</span><span class="lnt" id="hl-36-2"><a class="lnlinks" href="#hl-36-2"> 2</a>
</span><span class="lnt" id="hl-36-3"><a class="lnlinks" href="#hl-36-3"> 3</a>
</span><span class="lnt" id="hl-36-4"><a class="lnlinks" href="#hl-36-4"> 4</a>
</span><span class="lnt" id="hl-36-5"><a class="lnlinks" href="#hl-36-5"> 5</a>
</span><span class="lnt" id="hl-36-6"><a class="lnlinks" href="#hl-36-6"> 6</a>
</span><span class="lnt" id="hl-36-7"><a class="lnlinks" href="#hl-36-7"> 7</a>
</span><span class="lnt" id="hl-36-8"><a class="lnlinks" href="#hl-36-8"> 8</a>
</span><span class="lnt" id="hl-36-9"><a class="lnlinks" href="#hl-36-9"> 9</a>
</span><span class="lnt" id="hl-36-10"><a class="lnlinks" href="#hl-36-10">10</a>
</span><span class="lnt" id="hl-36-11"><a class="lnlinks" href="#hl-36-11">11</a>
</span><span class="lnt" id="hl-36-12"><a class="lnlinks" href="#hl-36-12">12</a>
</span><span class="lnt" id="hl-36-13"><a class="lnlinks" href="#hl-36-13">13</a>
</span><span class="lnt" id="hl-36-14"><a class="lnlinks" href="#hl-36-14">14</a>
</span><span class="lnt" id="hl-36-15"><a class="lnlinks" href="#hl-36-15">15</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">findUser</span><span class="p">(</span><span class="nx">users</span> <span class="p">[]</span><span class="nx">User</span><span class="p">,</span> <span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">u</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">users</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nx">u</span><span class="p">.</span><span class="nx">Name</span> <span class="o">==</span> <span class="nx">name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="o">&amp;</span><span class="nx">u</span><span class="p">,</span> <span class="kc">nil</span> <span class="c1">// æ‰¾åˆ°ç”¨æˆ·ï¼Œè¿”å›æŒ‡é’ˆå’Œnilé”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;user not found&#34;</span><span class="p">)</span> <span class="c1">// æ²¡æ‰¾åˆ°ï¼Œè¿”å›é”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">u</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">findUser</span><span class="p">([]</span><span class="nx">User</span><span class="p">{{</span><span class="s">&#34;wang&#34;</span><span class="p">,</span> <span class="s">&#34;1024&#34;</span><span class="p">}},</span> <span class="s">&#34;wang&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="c1">// æ‰“å°é”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">u</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span> <span class="c1">// å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæ‰“å°ç”¨æˆ·ä¿¡æ¯
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="38-å­—ç¬¦ä¸²æ“ä½œ">3.8 å­—ç¬¦ä¸²æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#38-å­—ç¬¦ä¸²æ“ä½œ">#</a></h3>
<h4 id="381-å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°">3.8.1 å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#381-å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-37-1"><a class="lnlinks" href="#hl-37-1">1</a>
</span><span class="lnt" id="hl-37-2"><a class="lnlinks" href="#hl-37-2">2</a>
</span><span class="lnt" id="hl-37-3"><a class="lnlinks" href="#hl-37-3">3</a>
</span><span class="lnt" id="hl-37-4"><a class="lnlinks" href="#hl-37-4">4</a>
</span><span class="lnt" id="hl-37-5"><a class="lnlinks" href="#hl-37-5">5</a>
</span><span class="lnt" id="hl-37-6"><a class="lnlinks" href="#hl-37-6">6</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;strings&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">str</span> <span class="o">:=</span> <span class="s">&#34;Hello, World!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="s">&#34;World&#34;</span><span class="p">))</span> <span class="c1">// æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«&#34;World&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">ToUpper</span><span class="p">(</span><span class="nx">str</span><span class="p">))</span> <span class="c1">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="s">&#34;, &#34;</span><span class="p">))</span> <span class="c1">// æŒ‰æŒ‡å®šåˆ†éš”ç¬¦åˆ‡å‰²å­—ç¬¦ä¸²
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="39-jsonå¤„ç†">3.9 JSONå¤„ç†<a hidden class="anchor" aria-hidden="true" href="#39-jsonå¤„ç†">#</a></h3>
<h4 id="391-ç¼–ç ä¸è§£ç ">3.9.1 ç¼–ç ä¸è§£ç <a hidden class="anchor" aria-hidden="true" href="#391-ç¼–ç ä¸è§£ç ">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-38-1"><a class="lnlinks" href="#hl-38-1"> 1</a>
</span><span class="lnt" id="hl-38-2"><a class="lnlinks" href="#hl-38-2"> 2</a>
</span><span class="lnt" id="hl-38-3"><a class="lnlinks" href="#hl-38-3"> 3</a>
</span><span class="lnt" id="hl-38-4"><a class="lnlinks" href="#hl-38-4"> 4</a>
</span><span class="lnt" id="hl-38-5"><a class="lnlinks" href="#hl-38-5"> 5</a>
</span><span class="lnt" id="hl-38-6"><a class="lnlinks" href="#hl-38-6"> 6</a>
</span><span class="lnt" id="hl-38-7"><a class="lnlinks" href="#hl-38-7"> 7</a>
</span><span class="lnt" id="hl-38-8"><a class="lnlinks" href="#hl-38-8"> 8</a>
</span><span class="lnt" id="hl-38-9"><a class="lnlinks" href="#hl-38-9"> 9</a>
</span><span class="lnt" id="hl-38-10"><a class="lnlinks" href="#hl-38-10">10</a>
</span><span class="lnt" id="hl-38-11"><a class="lnlinks" href="#hl-38-11">11</a>
</span><span class="lnt" id="hl-38-12"><a class="lnlinks" href="#hl-38-12">12</a>
</span><span class="lnt" id="hl-38-13"><a class="lnlinks" href="#hl-38-13">13</a>
</span><span class="lnt" id="hl-38-14"><a class="lnlinks" href="#hl-38-14">14</a>
</span><span class="lnt" id="hl-38-15"><a class="lnlinks" href="#hl-38-15">15</a>
</span><span class="lnt" id="hl-38-16"><a class="lnlinks" href="#hl-38-16">16</a>
</span><span class="lnt" id="hl-38-17"><a class="lnlinks" href="#hl-38-17">17</a>
</span><span class="lnt" id="hl-38-18"><a class="lnlinks" href="#hl-38-18">18</a>
</span><span class="lnt" id="hl-38-19"><a class="lnlinks" href="#hl-38-19">19</a>
</span><span class="lnt" id="hl-38-20"><a class="lnlinks" href="#hl-38-20">20</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">UserInfo</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span> <span class="kt">string</span> <span class="s">`json:&#34;name&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Age</span>  <span class="kt">int</span>    <span class="s">`json:&#34;age&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">a</span> <span class="o">:=</span> <span class="nx">UserInfo</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;wang&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">18</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">buf</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// å°†ç»“æ„ä½“ç¼–ç ä¸ºJSON
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Error encoding JSON:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">buf</span><span class="p">))</span> <span class="c1">// è¾“å‡ºJSONå­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="nx">UserInfo</span>
</span></span><span class="line"><span class="cl"><span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">buf</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">b</span><span class="p">)</span> <span class="c1">// å°†JSONå­—ç¬¦ä¸²è§£ç ä¸ºç»“æ„ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Error decoding JSON:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="310-æ—¶é—´ä¸æ•°å­—è§£æ">3.10 æ—¶é—´ä¸æ•°å­—è§£æ<a hidden class="anchor" aria-hidden="true" href="#310-æ—¶é—´ä¸æ•°å­—è§£æ">#</a></h3>
<h4 id="3101-æ—¶é—´æ“ä½œ">3.10.1 æ—¶é—´æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#3101-æ—¶é—´æ“ä½œ">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-39-1"><a class="lnlinks" href="#hl-39-1">1</a>
</span><span class="lnt" id="hl-39-2"><a class="lnlinks" href="#hl-39-2">2</a>
</span><span class="lnt" id="hl-39-3"><a class="lnlinks" href="#hl-39-3">3</a>
</span><span class="lnt" id="hl-39-4"><a class="lnlinks" href="#hl-39-4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">t</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">()</span> <span class="c1">// è·å–å½“å‰æ—¶é—´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">))</span> <span class="c1">// æ ¼å¼åŒ–æ—¶é—´
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3102-å­—ç¬¦ä¸²è½¬æ•°å­—">3.10.2 å­—ç¬¦ä¸²è½¬æ•°å­—<a hidden class="anchor" aria-hidden="true" href="#3102-å­—ç¬¦ä¸²è½¬æ•°å­—">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-40-1"><a class="lnlinks" href="#hl-40-1">1</a>
</span><span class="lnt" id="hl-40-2"><a class="lnlinks" href="#hl-40-2">2</a>
</span><span class="lnt" id="hl-40-3"><a class="lnlinks" href="#hl-40-3">3</a>
</span><span class="lnt" id="hl-40-4"><a class="lnlinks" href="#hl-40-4">4</a>
</span><span class="lnt" id="hl-40-5"><a class="lnlinks" href="#hl-40-5">5</a>
</span><span class="lnt" id="hl-40-6"><a class="lnlinks" href="#hl-40-6">6</a>
</span><span class="lnt" id="hl-40-7"><a class="lnlinks" href="#hl-40-7">7</a>
</span><span class="lnt" id="hl-40-8"><a class="lnlinks" href="#hl-40-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;strconv&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">str</span> <span class="o">:=</span> <span class="s">&#34;123&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">n</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="c1">// å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Error converting string to number:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="c1">// è¾“å‡º123
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-goå·¥ç¨‹å®è·µ">4. Goå·¥ç¨‹å®è·µ<a hidden class="anchor" aria-hidden="true" href="#4-goå·¥ç¨‹å®è·µ">#</a></h2>
<h3 id="41-çŒœæ•°å­—æ¸¸æˆ">4.1 çŒœæ•°å­—æ¸¸æˆ<a hidden class="anchor" aria-hidden="true" href="#41-çŒœæ•°å­—æ¸¸æˆ">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-41-1"><a class="lnlinks" href="#hl-41-1"> 1</a>
</span><span class="lnt" id="hl-41-2"><a class="lnlinks" href="#hl-41-2"> 2</a>
</span><span class="lnt" id="hl-41-3"><a class="lnlinks" href="#hl-41-3"> 3</a>
</span><span class="lnt" id="hl-41-4"><a class="lnlinks" href="#hl-41-4"> 4</a>
</span><span class="lnt" id="hl-41-5"><a class="lnlinks" href="#hl-41-5"> 5</a>
</span><span class="lnt" id="hl-41-6"><a class="lnlinks" href="#hl-41-6"> 6</a>
</span><span class="lnt" id="hl-41-7"><a class="lnlinks" href="#hl-41-7"> 7</a>
</span><span class="lnt" id="hl-41-8"><a class="lnlinks" href="#hl-41-8"> 8</a>
</span><span class="lnt" id="hl-41-9"><a class="lnlinks" href="#hl-41-9"> 9</a>
</span><span class="lnt" id="hl-41-10"><a class="lnlinks" href="#hl-41-10">10</a>
</span><span class="lnt" id="hl-41-11"><a class="lnlinks" href="#hl-41-11">11</a>
</span><span class="lnt" id="hl-41-12"><a class="lnlinks" href="#hl-41-12">12</a>
</span><span class="lnt" id="hl-41-13"><a class="lnlinks" href="#hl-41-13">13</a>
</span><span class="lnt" id="hl-41-14"><a class="lnlinks" href="#hl-41-14">14</a>
</span><span class="lnt" id="hl-41-15"><a class="lnlinks" href="#hl-41-15">15</a>
</span><span class="lnt" id="hl-41-16"><a class="lnlinks" href="#hl-41-16">16</a>
</span><span class="lnt" id="hl-41-17"><a class="lnlinks" href="#hl-41-17">17</a>
</span><span class="lnt" id="hl-41-18"><a class="lnlinks" href="#hl-41-18">18</a>
</span><span class="lnt" id="hl-41-19"><a class="lnlinks" href="#hl-41-19">19</a>
</span><span class="lnt" id="hl-41-20"><a class="lnlinks" href="#hl-41-20">20</a>
</span><span class="lnt" id="hl-41-21"><a class="lnlinks" href="#hl-41-21">21</a>
</span><span class="lnt" id="hl-41-22"><a class="lnlinks" href="#hl-41-22">22</a>
</span><span class="lnt" id="hl-41-23"><a class="lnlinks" href="#hl-41-23">23</a>
</span><span class="lnt" id="hl-41-24"><a class="lnlinks" href="#hl-41-24">24</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;math/rand&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rand</span><span class="p">.</span><span class="nf">Seed</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">UnixNano</span><span class="p">())</span> <span class="c1">// ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºéšæœºæ•°ç§å­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">secretNumber</span> <span class="o">:=</span> <span class="nx">rand</span><span class="p">.</span><span class="nf">Intn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  <span class="c1">// ç”Ÿæˆä¸€ä¸ª0åˆ°99ä¹‹é—´çš„éšæœºæ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Guess the secret number between 0 and 100!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">guess</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="s">&#34;Enter your guess: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">guess</span><span class="p">)</span> <span class="c1">// è¯»å–ç”¨æˆ·è¾“å…¥çš„çŒœæµ‹å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="nx">guess</span> <span class="p">&lt;</span> <span class="nx">secretNumber</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Too low!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">guess</span> <span class="p">&gt;</span> <span class="nx">secretNumber</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Too high!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;You guessed it!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-åœ¨çº¿è¯å…¸">4.2 åœ¨çº¿è¯å…¸<a hidden class="anchor" aria-hidden="true" href="#42-åœ¨çº¿è¯å…¸">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-42-1"><a class="lnlinks" href="#hl-42-1">1</a>
</span><span class="lnt" id="hl-42-2"><a class="lnlinks" href="#hl-42-2">2</a>
</span><span class="lnt" id="hl-42-3"><a class="lnlinks" href="#hl-42-3">3</a>
</span><span class="lnt" id="hl-42-4"><a class="lnlinks" href="#hl-42-4">4</a>
</span><span class="lnt" id="hl-42-5"><a class="lnlinks" href="#hl-42-5">5</a>
</span><span class="lnt" id="hl-42-6"><a class="lnlinks" href="#hl-42-6">6</a>
</span><span class="lnt" id="hl-42-7"><a class="lnlinks" href="#hl-42-7">7</a>
</span><span class="lnt" id="hl-42-8"><a class="lnlinks" href="#hl-42-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">getDefinition</span><span class="p">(</span><span class="nx">word</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span> <span class="o">:=</span> <span class="err">&#34;</span><span class="nx">https</span><span class="p">:</span><span class="c1">//api.dictionaryapi.dev
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¥½çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä¸ºä½ å‡†å¤‡çš„å…³äº <strong>SOCKS5 ä»£ç†æœåŠ¡å™¨</strong> çš„ Go è¯­è¨€ä»£ç çš„è¯¦ç»†æ³¨é‡Šç‰ˆï¼ŒåŠ›æ±‚ä¿æŒä»£ç çš„å®Œæ•´æ€§å¹¶åŠ ä¸Šè¯¦ç»†çš„è§£é‡Šã€‚</p>
<hr>
<h1 id="socks5-ä»£ç†æœåŠ¡å™¨ä»£ç å®ç°">SOCKS5 ä»£ç†æœåŠ¡å™¨ä»£ç å®ç°<a hidden class="anchor" aria-hidden="true" href="#socks5-ä»£ç†æœåŠ¡å™¨ä»£ç å®ç°">#</a></h1>
<h2 id="1-socks5-åè®®æ¦‚è¿°">1. SOCKS5 åè®®æ¦‚è¿°<a hidden class="anchor" aria-hidden="true" href="#1-socks5-åè®®æ¦‚è¿°">#</a></h2>
<h3 id="11-socks5-ä»£ç†åŸç†">1.1 SOCKS5 ä»£ç†åŸç†<a hidden class="anchor" aria-hidden="true" href="#11-socks5-ä»£ç†åŸç†">#</a></h3>
<p>SOCKS5 æ˜¯ä¸€ç§ä»£ç†åè®®ï¼Œåœ¨ç½‘ç»œä¸­å……å½“å®¢æˆ·ç«¯ä¸ç›®æ ‡æœåŠ¡å™¨ä¹‹é—´çš„ä¸­ä»‹ï¼Œå…è®¸å®¢æˆ·ç«¯é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®è¿œç¨‹èµ„æºï¼Œé€šå¸¸ç”¨äºè§„é¿é˜²ç«å¢™ã€æé«˜å®‰å…¨æ€§ç­‰ã€‚</p>
<p><strong>ä»£ç†æµç¨‹åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</strong></p>
<ol>
<li><strong>æ¡æ‰‹é˜¶æ®µ</strong>ï¼šå®¢æˆ·ç«¯å‘ SOCKS5 ä»£ç†å‘é€åè®®ç‰ˆæœ¬å·åŠè®¤è¯æ–¹å¼ã€‚</li>
<li><strong>è®¤è¯é˜¶æ®µ</strong>ï¼šæ ¹æ®ä»£ç†æœåŠ¡å™¨çš„è¿”å›ï¼Œè¿›è¡Œç›¸åº”çš„èº«ä»½éªŒè¯ã€‚</li>
<li><strong>è¯·æ±‚é˜¶æ®µ</strong>ï¼šè®¤è¯é€šè¿‡åï¼Œå®¢æˆ·ç«¯å‘ SOCKS5 ä»£ç†å‘é€è¯·æ±‚ï¼Œè¦æ±‚å»ºç«‹ä¸ç›®æ ‡æœåŠ¡å™¨çš„è¿æ¥ã€‚</li>
<li><strong>ä¸­ç»§é˜¶æ®µ</strong>ï¼šä»£ç†æœåŠ¡å™¨è½¬å‘å®¢æˆ·ç«¯è¯·æ±‚å’Œç›®æ ‡æœåŠ¡å™¨çš„å“åº”ï¼Œå®Œæˆæ•°æ®ä¼ è¾“ã€‚</li>
</ol>
<hr>
<h2 id="2-tcp-echo-æœåŠ¡å™¨">2. TCP Echo æœåŠ¡å™¨<a hidden class="anchor" aria-hidden="true" href="#2-tcp-echo-æœåŠ¡å™¨">#</a></h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„ TCP Echo æœåŠ¡å™¨ï¼Œå¤„ç†ä»å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œå¹¶è¿”å›ç›¸åŒçš„æ•°æ®ã€‚</p>
<h3 id="21-tcp-echo-æœåŠ¡å™¨ä»£ç ">2.1 TCP Echo æœåŠ¡å™¨ä»£ç <a hidden class="anchor" aria-hidden="true" href="#21-tcp-echo-æœåŠ¡å™¨ä»£ç ">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-43-1"><a class="lnlinks" href="#hl-43-1"> 1</a>
</span><span class="lnt" id="hl-43-2"><a class="lnlinks" href="#hl-43-2"> 2</a>
</span><span class="lnt" id="hl-43-3"><a class="lnlinks" href="#hl-43-3"> 3</a>
</span><span class="lnt" id="hl-43-4"><a class="lnlinks" href="#hl-43-4"> 4</a>
</span><span class="lnt" id="hl-43-5"><a class="lnlinks" href="#hl-43-5"> 5</a>
</span><span class="lnt" id="hl-43-6"><a class="lnlinks" href="#hl-43-6"> 6</a>
</span><span class="lnt" id="hl-43-7"><a class="lnlinks" href="#hl-43-7"> 7</a>
</span><span class="lnt" id="hl-43-8"><a class="lnlinks" href="#hl-43-8"> 8</a>
</span><span class="lnt" id="hl-43-9"><a class="lnlinks" href="#hl-43-9"> 9</a>
</span><span class="lnt" id="hl-43-10"><a class="lnlinks" href="#hl-43-10">10</a>
</span><span class="lnt" id="hl-43-11"><a class="lnlinks" href="#hl-43-11">11</a>
</span><span class="lnt" id="hl-43-12"><a class="lnlinks" href="#hl-43-12">12</a>
</span><span class="lnt" id="hl-43-13"><a class="lnlinks" href="#hl-43-13">13</a>
</span><span class="lnt" id="hl-43-14"><a class="lnlinks" href="#hl-43-14">14</a>
</span><span class="lnt" id="hl-43-15"><a class="lnlinks" href="#hl-43-15">15</a>
</span><span class="lnt" id="hl-43-16"><a class="lnlinks" href="#hl-43-16">16</a>
</span><span class="lnt" id="hl-43-17"><a class="lnlinks" href="#hl-43-17">17</a>
</span><span class="lnt" id="hl-43-18"><a class="lnlinks" href="#hl-43-18">18</a>
</span><span class="lnt" id="hl-43-19"><a class="lnlinks" href="#hl-43-19">19</a>
</span><span class="lnt" id="hl-43-20"><a class="lnlinks" href="#hl-43-20">20</a>
</span><span class="lnt" id="hl-43-21"><a class="lnlinks" href="#hl-43-21">21</a>
</span><span class="lnt" id="hl-43-22"><a class="lnlinks" href="#hl-43-22">22</a>
</span><span class="lnt" id="hl-43-23"><a class="lnlinks" href="#hl-43-23">23</a>
</span><span class="lnt" id="hl-43-24"><a class="lnlinks" href="#hl-43-24">24</a>
</span><span class="lnt" id="hl-43-25"><a class="lnlinks" href="#hl-43-25">25</a>
</span><span class="lnt" id="hl-43-26"><a class="lnlinks" href="#hl-43-26">26</a>
</span><span class="lnt" id="hl-43-27"><a class="lnlinks" href="#hl-43-27">27</a>
</span><span class="lnt" id="hl-43-28"><a class="lnlinks" href="#hl-43-28">28</a>
</span><span class="lnt" id="hl-43-29"><a class="lnlinks" href="#hl-43-29">29</a>
</span><span class="lnt" id="hl-43-30"><a class="lnlinks" href="#hl-43-30">30</a>
</span><span class="lnt" id="hl-43-31"><a class="lnlinks" href="#hl-43-31">31</a>
</span><span class="lnt" id="hl-43-32"><a class="lnlinks" href="#hl-43-32">32</a>
</span><span class="lnt" id="hl-43-33"><a class="lnlinks" href="#hl-43-33">33</a>
</span><span class="lnt" id="hl-43-34"><a class="lnlinks" href="#hl-43-34">34</a>
</span><span class="lnt" id="hl-43-35"><a class="lnlinks" href="#hl-43-35">35</a>
</span><span class="lnt" id="hl-43-36"><a class="lnlinks" href="#hl-43-36">36</a>
</span><span class="lnt" id="hl-43-37"><a class="lnlinks" href="#hl-43-37">37</a>
</span><span class="lnt" id="hl-43-38"><a class="lnlinks" href="#hl-43-38">38</a>
</span><span class="lnt" id="hl-43-39"><a class="lnlinks" href="#hl-43-39">39</a>
</span><span class="lnt" id="hl-43-40"><a class="lnlinks" href="#hl-43-40">40</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;bufio&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;net&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">server</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;127.0.0.1:1080&#34;</span><span class="p">)</span> <span class="c1">// ç›‘å¬æœ¬åœ°1080ç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="c1">// å¦‚æœç›‘å¬å¤±è´¥ï¼Œåˆ™ç¨‹åºå´©æºƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">client</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">server</span><span class="p">.</span><span class="nf">Accept</span><span class="p">()</span> <span class="c1">// æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Accept failed %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">go</span> <span class="nf">process</span><span class="p">(</span><span class="nx">client</span><span class="p">)</span> <span class="c1">// å¯åŠ¨ä¸€ä¸ªæ–°çš„goroutineå¤„ç†è¯¥è¿æ¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å¤„ç†è¿æ¥çš„å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">process</span><span class="p">(</span><span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>  <span class="c1">// å‡½æ•°é€€å‡ºæ—¶å…³é—­è¿æ¥ï¼Œé¿å…èµ„æºæ³„æ¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">reader</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span> <span class="c1">// åˆ›å»ºä¸€ä¸ªç¼“å†²è¯»å–å™¨ï¼Œä¼˜åŒ–æ€§èƒ½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">b</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span> <span class="c1">// è¯»å–å•ä¸ªå­—èŠ‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span> <span class="c1">// å¦‚æœè¯»å–é”™è¯¯ï¼Œåˆ™é€€å‡ºå¾ªç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="nx">b</span><span class="p">})</span> <span class="c1">// å°†å­—èŠ‚å†™å›å®¢æˆ·ç«¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span> <span class="c1">// å¦‚æœå†™å…¥é”™è¯¯ï¼Œåˆ™é€€å‡ºå¾ªç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22-ä»£ç è¯´æ˜">2.2 ä»£ç è¯´æ˜ï¼š<a hidden class="anchor" aria-hidden="true" href="#22-ä»£ç è¯´æ˜">#</a></h3>
<ul>
<li><strong>net.Listen</strong>ï¼šåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç›‘å¬æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨ï¼ˆè¿™é‡Œæ˜¯ <code>127.0.0.1:1080</code>ï¼‰ã€‚</li>
<li><strong>Accept</strong>ï¼šæ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚å¹¶è¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡ã€‚</li>
<li><strong>process</strong>ï¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ goroutine æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<code>bufio.NewReader</code> ç”¨äºæé«˜ä»ç½‘ç»œè¿æ¥è¯»å–æ•°æ®çš„æ•ˆç‡ã€‚</li>
<li><strong>conn.Write</strong>ï¼šå°†å®¢æˆ·ç«¯è¾“å…¥çš„å­—èŠ‚æ•°æ®å‘é€å›å»ï¼Œå½¢æˆâ€œechoâ€å“åº”ã€‚</li>
</ul>
<h3 id="23-æµ‹è¯•æ–¹æ³•">2.3 æµ‹è¯•æ–¹æ³•ï¼š<a hidden class="anchor" aria-hidden="true" href="#23-æµ‹è¯•æ–¹æ³•">#</a></h3>
<p>å¯ä»¥ä½¿ç”¨ <code>nc</code>ï¼ˆnetcatï¼‰å·¥å…·æ¥æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-44-1"><a class="lnlinks" href="#hl-44-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nc 127.0.0.1 <span class="m">1080</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»»æ„å­—ç¬¦ï¼ŒTCP Echo æœåŠ¡å™¨å°†è¿”å›ç›¸åŒçš„å­—ç¬¦ã€‚</p>
<hr>
<h2 id="3-socks5-ä»£ç†è®¤è¯å®ç°">3. SOCKS5 ä»£ç†è®¤è¯å®ç°<a hidden class="anchor" aria-hidden="true" href="#3-socks5-ä»£ç†è®¤è¯å®ç°">#</a></h2>
<h3 id="31-å®šä¹‰å¸¸é‡">3.1 å®šä¹‰å¸¸é‡<a hidden class="anchor" aria-hidden="true" href="#31-å®šä¹‰å¸¸é‡">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-45-1"><a class="lnlinks" href="#hl-45-1">1</a>
</span><span class="lnt" id="hl-45-2"><a class="lnlinks" href="#hl-45-2">2</a>
</span><span class="lnt" id="hl-45-3"><a class="lnlinks" href="#hl-45-3">3</a>
</span><span class="lnt" id="hl-45-4"><a class="lnlinks" href="#hl-45-4">4</a>
</span><span class="lnt" id="hl-45-5"><a class="lnlinks" href="#hl-45-5">5</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span> <span class="nx">socks5Ver</span> <span class="p">=</span> <span class="mh">0x05</span> <span class="c1">// SOCKS5 åè®®ç‰ˆæœ¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">cmdBind</span> <span class="p">=</span> <span class="mh">0x01</span>   <span class="c1">// ç»‘å®šå‘½ä»¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">atypIPV4</span> <span class="p">=</span> <span class="mh">0x01</span>  <span class="c1">// IPv4 åœ°å€ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">atypeHOST</span> <span class="p">=</span> <span class="mh">0x03</span> <span class="c1">// ä¸»æœºåç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span> <span class="nx">atypeIPV6</span> <span class="p">=</span> <span class="mh">0x04</span> <span class="c1">// IPv6 åœ°å€ç±»å‹
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-è®¤è¯å‡½æ•°">3.2 è®¤è¯å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#32-è®¤è¯å‡½æ•°">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-46-1"><a class="lnlinks" href="#hl-46-1"> 1</a>
</span><span class="lnt" id="hl-46-2"><a class="lnlinks" href="#hl-46-2"> 2</a>
</span><span class="lnt" id="hl-46-3"><a class="lnlinks" href="#hl-46-3"> 3</a>
</span><span class="lnt" id="hl-46-4"><a class="lnlinks" href="#hl-46-4"> 4</a>
</span><span class="lnt" id="hl-46-5"><a class="lnlinks" href="#hl-46-5"> 5</a>
</span><span class="lnt" id="hl-46-6"><a class="lnlinks" href="#hl-46-6"> 6</a>
</span><span class="lnt" id="hl-46-7"><a class="lnlinks" href="#hl-46-7"> 7</a>
</span><span class="lnt" id="hl-46-8"><a class="lnlinks" href="#hl-46-8"> 8</a>
</span><span class="lnt" id="hl-46-9"><a class="lnlinks" href="#hl-46-9"> 9</a>
</span><span class="lnt" id="hl-46-10"><a class="lnlinks" href="#hl-46-10">10</a>
</span><span class="lnt" id="hl-46-11"><a class="lnlinks" href="#hl-46-11">11</a>
</span><span class="lnt" id="hl-46-12"><a class="lnlinks" href="#hl-46-12">12</a>
</span><span class="lnt" id="hl-46-13"><a class="lnlinks" href="#hl-46-13">13</a>
</span><span class="lnt" id="hl-46-14"><a class="lnlinks" href="#hl-46-14">14</a>
</span><span class="lnt" id="hl-46-15"><a class="lnlinks" href="#hl-46-15">15</a>
</span><span class="lnt" id="hl-46-16"><a class="lnlinks" href="#hl-46-16">16</a>
</span><span class="lnt" id="hl-46-17"><a class="lnlinks" href="#hl-46-17">17</a>
</span><span class="lnt" id="hl-46-18"><a class="lnlinks" href="#hl-46-18">18</a>
</span><span class="lnt" id="hl-46-19"><a class="lnlinks" href="#hl-46-19">19</a>
</span><span class="lnt" id="hl-46-20"><a class="lnlinks" href="#hl-46-20">20</a>
</span><span class="lnt" id="hl-46-21"><a class="lnlinks" href="#hl-46-21">21</a>
</span><span class="lnt" id="hl-46-22"><a class="lnlinks" href="#hl-46-22">22</a>
</span><span class="lnt" id="hl-46-23"><a class="lnlinks" href="#hl-46-23">23</a>
</span><span class="lnt" id="hl-46-24"><a class="lnlinks" href="#hl-46-24">24</a>
</span><span class="lnt" id="hl-46-25"><a class="lnlinks" href="#hl-46-25">25</a>
</span><span class="lnt" id="hl-46-26"><a class="lnlinks" href="#hl-46-26">26</a>
</span><span class="lnt" id="hl-46-27"><a class="lnlinks" href="#hl-46-27">27</a>
</span><span class="lnt" id="hl-46-28"><a class="lnlinks" href="#hl-46-28">28</a>
</span><span class="lnt" id="hl-46-29"><a class="lnlinks" href="#hl-46-29">29</a>
</span><span class="lnt" id="hl-46-30"><a class="lnlinks" href="#hl-46-30">30</a>
</span><span class="lnt" id="hl-46-31"><a class="lnlinks" href="#hl-46-31">31</a>
</span><span class="lnt" id="hl-46-32"><a class="lnlinks" href="#hl-46-32">32</a>
</span><span class="lnt" id="hl-46-33"><a class="lnlinks" href="#hl-46-33">33</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">auth</span><span class="p">(</span><span class="nx">reader</span> <span class="o">*</span><span class="nx">bufio</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span> <span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯»å– SOCKS5 åè®®ç‰ˆæœ¬
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ver</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read ver failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">ver</span> <span class="o">!=</span> <span class="nx">socks5Ver</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;not supported ver: %v&#34;</span><span class="p">,</span> <span class="nx">ver</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯»å–è®¤è¯æ–¹æ³•çš„æ•°é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">methodSize</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read methodSize failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯»å–æ‰€æœ‰è®¤è¯æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">method</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">methodSize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">io</span><span class="p">.</span><span class="nf">ReadFull</span><span class="p">(</span><span class="nx">reader</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read method failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“å°åè®®ç‰ˆæœ¬ä¸è®¤è¯æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">log</span><span class="p">.</span><span class="nf">Panicln</span><span class="p">(</span><span class="s">&#34;ver&#34;</span><span class="p">,</span> <span class="nx">ver</span><span class="p">,</span> <span class="s">&#34;method&#34;</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è¿”å›ä¸éœ€è¦è®¤è¯çš„å“åº”
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="nx">socks5Ver</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">})</span> <span class="c1">// 0x00 è¡¨ç¤ºæ— éœ€è®¤è¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;write failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-ä»£ç è¯´æ˜">3.3 ä»£ç è¯´æ˜ï¼š<a hidden class="anchor" aria-hidden="true" href="#33-ä»£ç è¯´æ˜">#</a></h3>
<ul>
<li><strong>ReadByte</strong>ï¼šé€å­—èŠ‚è¯»å–åè®®ä¸­çš„æ•°æ®ï¼Œä¾‹å¦‚ç‰ˆæœ¬å·å’Œè®¤è¯æ–¹æ³•çš„æ•°é‡ã€‚</li>
<li><strong>io.ReadFull</strong>ï¼šç¡®ä¿å°†æŒ‡å®šé•¿åº¦çš„æ•°æ®å®Œå…¨è¯»å–ã€‚</li>
<li><strong>conn.Write</strong>ï¼šå‘å®¢æˆ·ç«¯è¿”å›å“åº”ï¼Œè¡¨ç¤ºè®¤è¯æˆåŠŸã€‚</li>
</ul>
<hr>
<h2 id="4-socks5-è¯·æ±‚é˜¶æ®µ">4. SOCKS5 è¯·æ±‚é˜¶æ®µ<a hidden class="anchor" aria-hidden="true" href="#4-socks5-è¯·æ±‚é˜¶æ®µ">#</a></h2>
<p>åœ¨è¯·æ±‚é˜¶æ®µï¼Œä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶è§£æå…¶ä¸­çš„ç›®æ ‡åœ°å€å’Œç«¯å£ä¿¡æ¯ã€‚</p>
<h3 id="41-è¿æ¥è¯·æ±‚è§£æ">4.1 è¿æ¥è¯·æ±‚è§£æ<a hidden class="anchor" aria-hidden="true" href="#41-è¿æ¥è¯·æ±‚è§£æ">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-47-1"><a class="lnlinks" href="#hl-47-1"> 1</a>
</span><span class="lnt" id="hl-47-2"><a class="lnlinks" href="#hl-47-2"> 2</a>
</span><span class="lnt" id="hl-47-3"><a class="lnlinks" href="#hl-47-3"> 3</a>
</span><span class="lnt" id="hl-47-4"><a class="lnlinks" href="#hl-47-4"> 4</a>
</span><span class="lnt" id="hl-47-5"><a class="lnlinks" href="#hl-47-5"> 5</a>
</span><span class="lnt" id="hl-47-6"><a class="lnlinks" href="#hl-47-6"> 6</a>
</span><span class="lnt" id="hl-47-7"><a class="lnlinks" href="#hl-47-7"> 7</a>
</span><span class="lnt" id="hl-47-8"><a class="lnlinks" href="#hl-47-8"> 8</a>
</span><span class="lnt" id="hl-47-9"><a class="lnlinks" href="#hl-47-9"> 9</a>
</span><span class="lnt" id="hl-47-10"><a class="lnlinks" href="#hl-47-10">10</a>
</span><span class="lnt" id="hl-47-11"><a class="lnlinks" href="#hl-47-11">11</a>
</span><span class="lnt" id="hl-47-12"><a class="lnlinks" href="#hl-47-12">12</a>
</span><span class="lnt" id="hl-47-13"><a class="lnlinks" href="#hl-47-13">13</a>
</span><span class="lnt" id="hl-47-14"><a class="lnlinks" href="#hl-47-14">14</a>
</span><span class="lnt" id="hl-47-15"><a class="lnlinks" href="#hl-47-15">15</a>
</span><span class="lnt" id="hl-47-16"><a class="lnlinks" href="#hl-47-16">16</a>
</span><span class="lnt" id="hl-47-17"><a class="lnlinks" href="#hl-47-17">17</a>
</span><span class="lnt" id="hl-47-18"><a class="lnlinks" href="#hl-47-18">18</a>
</span><span class="lnt" id="hl-47-19"><a class="lnlinks" href="#hl-47-19">19</a>
</span><span class="lnt" id="hl-47-20"><a class="lnlinks" href="#hl-47-20">20</a>
</span><span class="lnt" id="hl-47-21"><a class="lnlinks" href="#hl-47-21">21</a>
</span><span class="lnt" id="hl-47-22"><a class="lnlinks" href="#hl-47-22">22</a>
</span><span class="lnt" id="hl-47-23"><a class="lnlinks" href="#hl-47-23">23</a>
</span><span class="lnt" id="hl-47-24"><a class="lnlinks" href="#hl-47-24">24</a>
</span><span class="lnt" id="hl-47-25"><a class="lnlinks" href="#hl-47-25">25</a>
</span><span class="lnt" id="hl-47-26"><a class="lnlinks" href="#hl-47-26">26</a>
</span><span class="lnt" id="hl-47-27"><a class="lnlinks" href="#hl-47-27">27</a>
</span><span class="lnt" id="hl-47-28"><a class="lnlinks" href="#hl-47-28">28</a>
</span><span class="lnt" id="hl-47-29"><a class="lnlinks" href="#hl-47-29">29</a>
</span><span class="lnt" id="hl-47-30"><a class="lnlinks" href="#hl-47-30">30</a>
</span><span class="lnt" id="hl-47-31"><a class="lnlinks" href="#hl-47-31">31</a>
</span><span class="lnt" id="hl-47-32"><a class="lnlinks" href="#hl-47-32">32</a>
</span><span class="lnt" id="hl-47-33"><a class="lnlinks" href="#hl-47-33">33</a>
</span><span class="lnt" id="hl-47-34"><a class="lnlinks" href="#hl-47-34">34</a>
</span><span class="lnt" id="hl-47-35"><a class="lnlinks" href="#hl-47-35">35</a>
</span><span class="lnt" id="hl-47-36"><a class="lnlinks" href="#hl-47-36">36</a>
</span><span class="lnt" id="hl-47-37"><a class="lnlinks" href="#hl-47-37">37</a>
</span><span class="lnt" id="hl-47-38"><a class="lnlinks" href="#hl-47-38">38</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">connect</span><span class="p">(</span><span class="nx">reader</span> <span class="o">*</span><span class="nx">bufio</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span> <span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ver</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span> <span class="c1">// è¯»å–ç‰ˆæœ¬å·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read ver failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">cmd</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span> <span class="c1">// è¯»å–å‘½ä»¤ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read cmd failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">rsv</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span> <span class="c1">// ä¿ç•™å­—æ®µï¼Œå¿½ç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read rsv failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">atyp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">reader</span><span class="p">.</span><span class="nf">ReadByte</span><span class="p">()</span> <span class="c1">// åœ°å€ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;read atyp failed:%w&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">addr</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="nx">atyp</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nx">atypIPV4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">addr</span> <span class="p">=</span> <span class="nf">readIPV4</span><span class="p">(</span><span class="nx">reader</span><span class="p">)</span> <span class="c1">// è¯»å–IPv4åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">case</span> <span class="nx">atypeHOST</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">addr</span> <span class="p">=</span> <span class="nf">readHost</span><span class="p">(</span><span class="nx">reader</span><span class="p">)</span> <span class="c1">// è¯»å–ä¸»æœºå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">case</span> <span class="nx">atypeIPV6</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">addr</span> <span class="p">=</span> <span class="nf">readIPV6</span><span class="p">(</span><span class="nx">reader</span><span class="p">)</span> <span class="c1">// è¯»å–IPv6åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯»å–ç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">port</span> <span class="o">:=</span> <span class="nf">readPort</span><span class="p">(</span><span class="nx">reader</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Connecting to %s:%d&#34;</span><span class="p">,</span> <span class="nx">addr</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span> <span class="c1">// æ‰“å°ç›®æ ‡åœ°å€å’Œç«¯å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-ä»£ç è¯´æ˜">4.2 ä»£ç è¯´æ˜ï¼š<a hidden class="anchor" aria-hidden="true" href="#42-ä»£ç è¯´æ˜">#</a></h3>
<ul>
<li><strong>cmd</strong>ï¼šæ£€æŸ¥è¯·æ±‚ç±»å‹ï¼ŒSOCKS5 ä»£ç†æœåŠ¡å™¨é€šå¸¸åªå¤„ç† <code>CONNECT</code> è¯·æ±‚ã€‚</li>
<li><strong>atyp</strong>ï¼šæ ¹æ®ç›®æ ‡åœ°å€ç±»å‹ï¼ˆIPv4ã€ä¸»æœºåã€IPv6ï¼‰åˆ†åˆ«å¤„ç†ã€‚</li>
<li><strong>readIPV4/readHost/readIPV6/readPort</strong>ï¼šè¯»å–ä¸åŒåœ°å€ç±»å‹çš„æ•°æ®ã€‚</li>
</ul>
<hr>
<h2 id="5-socks5-ä¸­ç»§é˜¶æ®µ">5. SOCKS5 ä¸­ç»§é˜¶æ®µ<a hidden class="anchor" aria-hidden="true" href="#5-socks5-ä¸­ç»§é˜¶æ®µ">#</a></h2>
<p>åœ¨ä¸­ç»§é˜¶æ®µï¼Œä»£ç†æœåŠ¡å™¨é€šè¿‡åŒå‘æ•°æ®è½¬å‘æ¥å®ç°ä»£ç†æœåŠ¡ï¼Œç›´åˆ°æ•°æ®ä¼ è¾“ç»“æŸæˆ–å‘ç”Ÿé”™è¯¯ã€‚</p>
<h3 id="51-æ•°æ®è½¬å‘">5.1 æ•°æ®è½¬å‘<a hidden class="anchor" aria-hidden="true" href="#51-æ•°æ®è½¬å‘">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-48-1"><a class="lnlinks" href="#hl-48-1">1</a>
</span><span class="lnt" id="hl-48-2"><a class="lnlinks" href="#hl-48-2">2</a>
</span><span class="lnt" id="hl-48-3"><a class="lnlinks" href="#hl-48-3">3</a>
</span><span class="lnt" id="hl-48-4"><a class="lnlinks" href="#hl-48-4">4</a>
</span><span class="lnt" id="hl-48-5"><a class="lnlinks" href="#hl-48-5">5</a>
</span><span class="lnt" id="hl-48-6"><a class="lnlinks" href="#hl-48-6">6</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">relay</span><span class="p">(</span><span class="nx">reader</span> <span class="o">*</span><span class="nx">bufio</span><span class="p">.</span><span class="nx">Reader</span><span class="p">,</span> <span class="nx">conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">,</span> <span class="nx">targetConn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span><span class="p">,</span> <span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">go</span> <span class="nx">io</span><span class="p">.</span><span class="nf">Copy</span><span class="p">(</span><span class="nx">targetConn</span><span class="p">,</span> <span class="nx">conn</span><span class="p">)</span> <span class="c1">// ä»å®¢æˆ·ç«¯è¯»å–æ•°æ®å¹¶å‘é€åˆ°ç›®æ ‡æœåŠ¡å™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">go</span> <span class="nx">io</span><span class="p">.</span><span class="nf">Copy</span><span class="p">(</span><span class="nx">conn</span><span class="p">,</span> <span class="nx">targetConn</span><span class="p">)</span> <span class="c1">// ä»ç›®æ ‡æœåŠ¡å™¨è¯»å–æ•°æ®å¹¶å‘é€åˆ°å®¢æˆ·ç«¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span> <span class="c1">// ç­‰å¾…ä»»æ„ä¸€ä¸ªæ•°æ®è½¬å‘å®Œæˆæˆ–å‘ç”Ÿé”™è¯¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="52-ä»£ç è¯´æ˜">5.2 ä»£ç è¯´æ˜ï¼š<a hidden class="anchor" aria-hidden="true" href="#52-ä»£ç è¯´æ˜">#</a></h3>
<ul>
<li><strong>io.Copy</strong>ï¼šæ ‡å‡†åº“æä¾›çš„ç”¨äºæ•°æ®è½¬å‘çš„å‡½æ•°ã€‚</li>
<li><strong>ctx.Done()</strong>ï¼šä½¿ç”¨ <code>context</code> æ¥æ§åˆ¶æ•°æ®ä¼ è¾“çš„ç»ˆæ­¢æ¡ä»¶ã€‚å½“ <code>context</code> è¢«å–æ¶ˆæ—¶ï¼Œæ•°æ®ä¼ è¾“ç»ˆæ­¢ã€‚</li>
</ul>
<hr>
<h2 id="6-æœ€ç»ˆæµ‹è¯•">6. æœ€ç»ˆæµ‹è¯•<a hidden class="anchor" aria-hidden="true" href="#6-æœ€ç»ˆæµ‹è¯•">#</a></h2>
<p>æµ‹è¯•æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è®¾ç½® SOCKS5 ä»£ç†ï¼Œæˆ–è€…ä½¿ç”¨ <code>curl</code> å‘½ä»¤æ¥è¿›è¡Œè¯·æ±‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-49-1"><a class="lnlinks" href="#hl-49-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">curl --socks5 127.0.0.1:1080 http://example.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æµ‹è¯•æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å°†è½¬å‘è¯·æ±‚ï¼Œæœ€ç»ˆæµè§ˆå™¨æˆ–å·¥å…·å¯ä»¥é€šè¿‡ SOCKS5 ä»£ç†æˆåŠŸè®¿é—®ç›®æ ‡æœåŠ¡å™¨ã€‚</p>
<hr>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/golang/">GoLang</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/go">Go</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/go-4/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>Go å†…å­˜ç®¡ç†ä¸ç¼–è¯‘å™¨ä¼˜åŒ–</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/leetcode%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98202501/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>LeetCodeæ¯æ—¥ä¸€é¢˜ï¼ˆ202501ï¼‰</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
