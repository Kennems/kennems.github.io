<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Android（5） | Kennem&#39;s Blog</title>
<meta name="keywords" content="Android">
<meta name="description" content="Android学习笔记">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/android5/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.92e6d237fe179cc604a93575ea9ce4dbea8c09a9b1c7aa3449a9a0514c2b3ab5.css" integrity="sha256-kubSN/4XnMYEqTV16pzk2&#43;qMCamxx6o0SamgUUwrOrU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/android5/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet">
                <meta property="og:title" content="Android（5）" />
<meta property="og:description" content="Android学习笔记" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kennems.github.io/posts/tech/android5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-29T22:30:13+08:00" />
<meta property="article:modified_time" content="2024-06-29T22:20:13+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Android（5）"/>
<meta name="twitter:description" content="Android学习笔记"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Android（5）",
      "item": "https://kennems.github.io/posts/tech/android5/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Android（5）",
  "name": "Android（5）",
  "description": "Android学习笔记",
  "keywords": [
    "Android"
  ],
  "articleBody": "Android（5） 高级控件 SpinnerDialog + ArrayAdapter XML \u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e ",
  "wordCount" : "6251",
  "inLanguage": "zh",
  "datePublished": "2024-06-29T22:30:13+08:00",
  "dateModified": "2024-06-29T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/android5/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="🗂️分类">
                    <span>🗂️分类</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/tech/">💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      Android（5）
    </h1>
    <div class="post-description">
      Android学习笔记
    </div>
    <div class="post-meta"><span title='2024-06-29 22:30:13 +0800 CST'>2024-06-29</span>&nbsp;·&nbsp;13 分钟&nbsp;·&nbsp;6251 字&nbsp;·&nbsp;updated:&nbsp;2024-06-29&nbsp;·&nbsp;ShowGuan

</div>





	 <div class="post-password">
        
	 </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#android5" aria-label="Android（5）">Android（5）</a><ul>
                        
                <li>
                    <a href="#%e9%ab%98%e7%ba%a7%e6%8e%a7%e4%bb%b6" aria-label="高级控件">高级控件</a><ul>
                        
                <li>
                    <a href="#spinnerdialog--arrayadapter" aria-label="SpinnerDialog &#43; ArrayAdapter">SpinnerDialog + ArrayAdapter</a></li>
                <li>
                    <a href="#xml" aria-label="XML">XML</a></li>
                <li>
                    <a href="#item_selectxml" aria-label="item_select.xml">item_select.xml</a></li>
                <li>
                    <a href="#java" aria-label="Java">Java</a></li>
                <li>
                    <a href="#spinnerdropdown" aria-label="SpinnerDropdown">SpinnerDropdown</a></li>
                <li>
                    <a href="#xml-1" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-1" aria-label="Java">Java</a></li>
                <li>
                    <a href="#simpleadapter%e7%ae%80%e5%8d%95%e9%80%82%e9%85%8d%e5%99%a8" aria-label="SimpleAdapter简单适配器">SimpleAdapter简单适配器</a></li>
                <li>
                    <a href="#xml-2" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-2" aria-label="Java">Java</a></li></ul>
                </li>
                <li>
                    <a href="#baseadapter%e5%9f%ba%e6%9c%ac%e9%80%82%e9%85%8d%e5%99%a8" aria-label="BaseAdapter基本适配器">BaseAdapter基本适配器</a><ul>
                        
                <li>
                    <a href="#planetbaseadapterjava" aria-label="PlanetBaseAdapter.java">PlanetBaseAdapter.java</a></li>
                <li>
                    <a href="#item_basexml" aria-label="item_base.xml">item_base.xml</a></li>
                <li>
                    <a href="#baseadapteractivityjava" aria-label="BaseAdapterActivity.java">BaseAdapterActivity.java</a></li></ul>
                </li>
                <li>
                    <a href="#baseadapter%e4%bc%98%e5%8c%96" aria-label="BaseAdapter优化">BaseAdapter优化</a></li>
                <li>
                    <a href="#%e5%88%97%e8%a1%a8%e8%a7%86%e5%9b%belistview" aria-label="列表视图ListView">列表视图ListView</a><ul>
                        
                <li>
                    <a href="#xml-3" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-3" aria-label="Java">Java</a></li></ul>
                </li>
                <li>
                    <a href="#listview%e6%b3%a8%e6%84%8f%e7%82%b9" aria-label="ListView注意点">ListView注意点</a></li>
                <li>
                    <a href="#%e7%bd%91%e6%a0%bc%e8%a7%86%e5%9b%begridview" aria-label="网格视图GridView">网格视图GridView</a><ul>
                        
                <li>
                    <a href="#xml-4" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-4" aria-label="Java">Java</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8gridview%e9%87%8d%e6%9e%84%e8%b4%ad%e7%89%a9%e8%bd%a6" aria-label="使用GridView重构购物车">使用GridView重构购物车</a><ul>
                        
                <li>
                    <a href="#xml-5" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-5" aria-label="Java">Java</a><ul>
                        
                <li>
                    <a href="#goodsgridadapterjava" aria-label="GoodsGridAdapter.java">GoodsGridAdapter.java</a></li>
                <li>
                    <a href="#shoppingchannelactivityjava" aria-label="ShoppingChannelActivity.java">ShoppingChannelActivity.java</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#viewpager" aria-label="ViewPager">ViewPager</a><ul>
                        
                <li>
                    <a href="#xml-6" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-6" aria-label="Java">Java</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bf%bb%e9%a1%b5%e6%a0%87%e7%ad%be%e6%a0%8fpagertabstrip" aria-label="翻页标签栏PagerTabStrip">翻页标签栏PagerTabStrip</a><ul>
                        
                <li>
                    <a href="#xml-7" aria-label="XML">XML</a></li>
                <li>
                    <a href="#java-7" aria-label="Java">Java</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%ae%80%e5%8d%95%e7%9a%84%e5%90%af%e5%8a%a8%e5%bc%95%e5%af%bc%e9%a1%b5" aria-label="简单的启动引导页">简单的启动引导页</a><ul>
                        
                <li>
                    <a href="#xml-8" aria-label="XML">XML</a><ul>
                        
                <li>
                    <a href="#activity_launch_simplexml" aria-label="activity_launch_simple.xml">activity_launch_simple.xml</a></li>
                <li>
                    <a href="#item_launchxml" aria-label="item_launch.xml">item_launch.xml</a></li></ul>
                </li>
                <li>
                    <a href="#java-8" aria-label="Java">Java</a><ul>
                        
                <li>
                    <a href="#launchsimpleactivityjava" aria-label="LaunchSimpleActivity.java">LaunchSimpleActivity.java</a></li>
                <li>
                    <a href="#launchpageradapterjava" aria-label="LaunchPagerAdapter.java">LaunchPagerAdapter.java</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e7%a2%8e%e7%89%87fragment-" aria-label="碎片Fragment ⭐⭐⭐⭐⭐">碎片Fragment ⭐⭐⭐⭐⭐</a></li>
                <li>
                    <a href="#staticfragment" aria-label="StaticFragment">StaticFragment</a><ul>
                        
                <li>
                    <a href="#xml-9" aria-label="XML">XML</a><ul>
                        
                <li>
                    <a href="#activity_fragement_staticxml" aria-label="activity_fragement_static.xml">activity_fragement_static.xml</a></li>
                <li>
                    <a href="#fragment_staticxml" aria-label="fragment_static.xml">fragment_static.xml</a></li></ul>
                </li>
                <li>
                    <a href="#java-9" aria-label="Java">Java</a><ul>
                        
                <li>
                    <a href="#fragmentstaticactivityjava" aria-label="FragmentStaticActivity.java">FragmentStaticActivity.java</a></li>
                <li>
                    <a href="#staticfragmentjava" aria-label="StaticFragment.java">StaticFragment.java</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#fragment%e6%b3%a8%e5%86%8c" aria-label="Fragment注册">Fragment注册</a></li>
                <li>
                    <a href="#fragment%e5%a3%b0%e6%98%8e%e5%91%a8%e6%9c%9f" aria-label="Fragment声明周期">Fragment声明周期</a></li>
                <li>
                    <a href="#dynamicfragment" aria-label="DynamicFragment">DynamicFragment</a><ul>
                        
                <li>
                    <a href="#xml-10" aria-label="XML">XML</a><ul>
                        
                <li>
                    <a href="#activity_fragment_dynamicxml" aria-label="activity_fragment_dynamic.xml">activity_fragment_dynamic.xml</a></li>
                <li>
                    <a href="#fragment_dynamicxml" aria-label="fragment_dynamic.xml">fragment_dynamic.xml</a></li></ul>
                </li>
                <li>
                    <a href="#java-10" aria-label="Java">Java</a><ul>
                        
                <li>
                    <a href="#fragmentdynamicactivityjava" aria-label="FragmentDynamicActivity.java">FragmentDynamicActivity.java</a></li>
                <li>
                    <a href="#mobilepageradapterjava" aria-label="MobilePagerAdapter.java">MobilePagerAdapter.java</a></li>
                <li>
                    <a href="#dynamicfragmentjava" aria-label="DynamicFragment.java">DynamicFragment.java</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="android5">Android（5）<a hidden class="anchor" aria-hidden="true" href="#android5">#</a></h1>
<h2 id="高级控件">高级控件<a hidden class="anchor" aria-hidden="true" href="#高级控件">#</a></h2>
<h3 id="spinnerdialog--arrayadapter">SpinnerDialog + ArrayAdapter<a hidden class="anchor" aria-hidden="true" href="#spinnerdialog--arrayadapter">#</a></h3>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/spinnerDialog.gif" alt="spinnerDialog"  />
</p>
<h3 id="xml">XML<a hidden class="anchor" aria-hidden="true" href="#xml">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.SpinnerDropdownActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;下拉模式的列表框&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Spinner</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@id/sp_dialog&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:spinnerMode=</span><span style="color:#e6db74">&#34;dialog&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="item_selectxml">item_select.xml<a hidden class="anchor" aria-hidden="true" href="#item_selectxml">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;TextView</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;50dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;#0000ff&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:text=</span><span style="color:#e6db74">&#34;火星&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/TextView&gt;</span>
</span></span></code></pre></div><h3 id="java">Java<a hidden class="anchor" aria-hidden="true" href="#java">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.AdapterView;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ArrayAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.Spinner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SpinnerDialogActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemSelectedListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Spinner sp_dialog;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span>  starArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;水星&#34;</span>, <span style="color:#e6db74">&#34;金星&#34;</span>, <span style="color:#e6db74">&#34;地球&#34;</span>, <span style="color:#e6db74">&#34;火星&#34;</span>, <span style="color:#e6db74">&#34;木星&#34;</span>, <span style="color:#e6db74">&#34;土星&#34;</span>, <span style="color:#e6db74">&#34;天王星&#34;</span>, <span style="color:#e6db74">&#34;海王星&#34;</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_spinner_dialog</span>);
</span></span><span style="display:flex;"><span>        sp_dialog <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">sp_dialog</span>);
</span></span><span style="display:flex;"><span>        ArrayAdapter<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> starAdapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayAdapter<span style="color:#f92672">&lt;&gt;</span>(<span style="color:#66d9ef">this</span>, R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_select</span>,  starArray);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        sp_dialog.<span style="color:#a6e22e">setPrompt</span>(<span style="color:#e6db74">&#34;🌤选择行星&#34;</span>);
</span></span><span style="display:flex;"><span>        sp_dialog.<span style="color:#a6e22e">setAdapter</span>(starAdapter);
</span></span><span style="display:flex;"><span>        sp_dialog.<span style="color:#a6e22e">setSelection</span>(0);
</span></span><span style="display:flex;"><span>        sp_dialog.<span style="color:#a6e22e">setOnItemSelectedListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) {
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;您选择了： &#34;</span> <span style="color:#f92672">+</span> starArray<span style="color:#f92672">[</span>position<span style="color:#f92672">]</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onNothingSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="spinnerdropdown">SpinnerDropdown<a hidden class="anchor" aria-hidden="true" href="#spinnerdropdown">#</a></h3>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/spinnerDropdown.gif" alt="spinnerDropdown"  />
</p>
<h3 id="xml-1">XML<a hidden class="anchor" aria-hidden="true" href="#xml-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.SpinnerDropdownActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;下拉模式的列表框&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Spinner</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@id/sp_dropdown&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:spinnerMode=</span><span style="color:#e6db74">&#34;dropdown&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-1">Java<a hidden class="anchor" aria-hidden="true" href="#java-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.AdapterView;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ArrayAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.Spinner;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.activity.EdgeToEdge;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.graphics.Insets;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.ViewCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.WindowInsetsCompat;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SpinnerDropdownActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemSelectedListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Spinner sp_dropdown;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span>  starArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;水星&#34;</span>, <span style="color:#e6db74">&#34;金星&#34;</span>, <span style="color:#e6db74">&#34;地球&#34;</span>, <span style="color:#e6db74">&#34;火星&#34;</span>, <span style="color:#e6db74">&#34;木星&#34;</span>, <span style="color:#e6db74">&#34;土星&#34;</span>, <span style="color:#e6db74">&#34;天王星&#34;</span>, <span style="color:#e6db74">&#34;海王星&#34;</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_spinner_dropdown</span>);
</span></span><span style="display:flex;"><span>        sp_dropdown <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">sp_dropdown</span>);
</span></span><span style="display:flex;"><span>        ArrayAdapter<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> starAdapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayAdapter<span style="color:#f92672">&lt;&gt;</span>(<span style="color:#66d9ef">this</span>, R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_select</span>,  starArray);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        sp_dropdown.<span style="color:#a6e22e">setAdapter</span>(starAdapter);
</span></span><span style="display:flex;"><span>        sp_dropdown.<span style="color:#a6e22e">setSelection</span>(0);
</span></span><span style="display:flex;"><span>        sp_dropdown.<span style="color:#a6e22e">setOnItemSelectedListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) {
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;您选择了： &#34;</span> <span style="color:#f92672">+</span> starArray<span style="color:#f92672">[</span>position<span style="color:#f92672">]</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onNothingSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="simpleadapter简单适配器">SimpleAdapter简单适配器<a hidden class="anchor" aria-hidden="true" href="#simpleadapter简单适配器">#</a></h3>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/SpinerIcon.gif" alt="SpinerIcon"  />
</p>
<h3 id="xml-2">XML<a hidden class="anchor" aria-hidden="true" href="#xml-2">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.SpinnerDropdownActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;行星的简单适配器&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Spinner</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@id/sp_icon&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:spinnerMode=</span><span style="color:#e6db74">&#34;dropdown&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-2">Java<a hidden class="anchor" aria-hidden="true" href="#java-2">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08; <span style="color:#75715e">// 包名</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SpinnerIconActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemSelectedListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 定义一个整型数组，存储星球图标的资源ID</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> iconArray <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">shuixing</span>, R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">jinxing</span>, R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">diqiu</span>,
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">huoxing</span>, R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">muxing</span>, R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">tuxing</span>,
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 定义一个字符串数组，存储星球的名称</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> starArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;水星&#34;</span>, <span style="color:#e6db74">&#34;金星&#34;</span>, <span style="color:#e6db74">&#34;地球&#34;</span>, <span style="color:#e6db74">&#34;火星&#34;</span>, <span style="color:#e6db74">&#34;木星&#34;</span>, <span style="color:#e6db74">&#34;土星&#34;</span>, <span style="color:#e6db74">&#34;天王星&#34;</span>, <span style="color:#e6db74">&#34;海王星&#34;</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) { <span style="color:#75715e">// onCreate方法，活动启动时调用</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState); <span style="color:#75715e">// 调用父类的onCreate方法</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_spinner_icon</span>); <span style="color:#75715e">// 设置活动的布局文件</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>Map<span style="color:#f92672">&lt;</span>String, Object<span style="color:#f92672">&gt;&gt;</span> list <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>(); <span style="color:#75715e">// 创建一个列表，用于存储图标和名称</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> iconArray.<span style="color:#a6e22e">length</span>; i<span style="color:#f92672">++</span>) { <span style="color:#75715e">// 遍历图标数组</span>
</span></span><span style="display:flex;"><span>            Map<span style="color:#f92672">&lt;</span>String, Object<span style="color:#f92672">&gt;</span> item <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;</span>(); <span style="color:#75715e">// 创建一个HashMap对象</span>
</span></span><span style="display:flex;"><span>            item.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;icon&#34;</span>, iconArray<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>); <span style="color:#75715e">// 将图标资源ID放入Map中</span>
</span></span><span style="display:flex;"><span>            item.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;name&#34;</span>, starArray<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>); <span style="color:#75715e">// 将名称放入Map中</span>
</span></span><span style="display:flex;"><span>            list.<span style="color:#a6e22e">add</span>(item); <span style="color:#75715e">// 将Map添加到列表中</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建一个SimpleAdapter，连接数据和布局</span>
</span></span><span style="display:flex;"><span>        SimpleAdapter startAdapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SimpleAdapter(<span style="color:#66d9ef">this</span>,
</span></span><span style="display:flex;"><span>                list, <span style="color:#75715e">// 数据源</span>
</span></span><span style="display:flex;"><span>                R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_simple</span>, <span style="color:#75715e">// 列表项布局</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span>{<span style="color:#e6db74">&#34;icon&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span>}, <span style="color:#75715e">// Map中的键</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span>{R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_icon</span>, R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_name</span>}); <span style="color:#75715e">// 布局中的视图ID</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Spinner sp_icon <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">sp_icon</span>); <span style="color:#75715e">// 获取Spinner控件</span>
</span></span><span style="display:flex;"><span>        sp_icon.<span style="color:#a6e22e">setAdapter</span>(startAdapter); <span style="color:#75715e">// 为Spinner设置适配器</span>
</span></span><span style="display:flex;"><span>        sp_icon.<span style="color:#a6e22e">setSelection</span>(0); <span style="color:#75715e">// 默认选中第0项</span>
</span></span><span style="display:flex;"><span>        sp_icon.<span style="color:#a6e22e">setOnItemSelectedListener</span>(<span style="color:#66d9ef">this</span>); <span style="color:#75715e">// 设置选项选中监听器</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) { <span style="color:#75715e">// 当选择一个选项时调用</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;你选择的是：&#34;</span> <span style="color:#f92672">+</span> starArray<span style="color:#f92672">[</span>position<span style="color:#f92672">]</span>); <span style="color:#75715e">// 显示选择的星球名称</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onNothingSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent) { <span style="color:#75715e">// 当没有选项被选择时调用</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="baseadapter基本适配器">BaseAdapter基本适配器<a hidden class="anchor" aria-hidden="true" href="#baseadapter基本适配器">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/SpinnerBaseAdapter.gif" alt="SpinnerBaseAdapter"  />
</p>
<p>BaseAdapter是一个抽象类，所以需要重写</p>
<h3 id="planetbaseadapterjava">PlanetBaseAdapter.java<a hidden class="anchor" aria-hidden="true" href="#planetbaseadapterjava">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.adapter; <span style="color:#75715e">// 包名</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.content.Context; <span style="color:#75715e">// 导入Context类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.LayoutInflater; <span style="color:#75715e">// 导入LayoutInflater类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View; <span style="color:#75715e">// 导入View类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.ViewGroup; <span style="color:#75715e">// 导入ViewGroup类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.BaseAdapter; <span style="color:#75715e">// 导入BaseAdapter类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ImageView; <span style="color:#75715e">// 导入ImageView类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.TextView; <span style="color:#75715e">// 导入TextView类</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.R; <span style="color:#75715e">// 导入项目的R类</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.bean.Planet; <span style="color:#75715e">// 导入自定义的Planet类</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List; <span style="color:#75715e">// 导入List接口</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PlanetBaseAdapter</span> <span style="color:#66d9ef">extends</span> BaseAdapter { <span style="color:#75715e">// 定义PlanetBaseAdapter类，继承自BaseAdapter</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Context mContext; <span style="color:#75715e">// 上下文对象</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Planet<span style="color:#f92672">&gt;</span> mPlanetList; <span style="color:#75715e">// 存储Planet对象的列表</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 构造方法，初始化上下文和列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PlanetBaseAdapter</span>(Context mContext, List<span style="color:#f92672">&lt;</span>Planet<span style="color:#f92672">&gt;</span> mPlanetList) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mContext</span> <span style="color:#f92672">=</span> mContext; <span style="color:#75715e">// 初始化上下文</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mPlanetList</span> <span style="color:#f92672">=</span> mPlanetList; <span style="color:#75715e">// 初始化星球列表</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() { <span style="color:#75715e">// 返回列表项的数量</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mPlanetList.<span style="color:#a6e22e">size</span>(); <span style="color:#75715e">// 返回星球列表的大小</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">getItem</span>(<span style="color:#66d9ef">int</span> position) { <span style="color:#75715e">// 获取指定位置的列表项</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mPlanetList.<span style="color:#a6e22e">get</span>(position); <span style="color:#75715e">// 返回指定位置的Planet对象</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getItemId</span>(<span style="color:#66d9ef">int</span> position) { <span style="color:#75715e">// 获取指定位置项的ID</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> position; <span style="color:#75715e">// 返回位置作为项的ID</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> View <span style="color:#a6e22e">getView</span>(<span style="color:#66d9ef">int</span> position, View convertView, ViewGroup parent) { <span style="color:#75715e">// 获取每个列表项的视图</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 根据布局文件item_base.xml生成转换视图对象</span>
</span></span><span style="display:flex;"><span>        View view <span style="color:#f92672">=</span> LayoutInflater.<span style="color:#a6e22e">from</span>(mContext).<span style="color:#a6e22e">inflate</span>(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_base</span>, <span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>        ImageView iv_icon <span style="color:#f92672">=</span> view.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_icon</span>); <span style="color:#75715e">// 获取图标视图</span>
</span></span><span style="display:flex;"><span>        TextView tv_name <span style="color:#f92672">=</span> view.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_name</span>); <span style="color:#75715e">// 获取名称视图</span>
</span></span><span style="display:flex;"><span>        TextView tv_desc <span style="color:#f92672">=</span> view.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_desc</span>); <span style="color:#75715e">// 获取描述视图</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 给控件设置数据</span>
</span></span><span style="display:flex;"><span>        Planet planet <span style="color:#f92672">=</span> mPlanetList.<span style="color:#a6e22e">get</span>(position); <span style="color:#75715e">// 获取当前星球对象</span>
</span></span><span style="display:flex;"><span>        iv_icon.<span style="color:#a6e22e">setImageResource</span>(planet.<span style="color:#a6e22e">image</span>); <span style="color:#75715e">// 设置图标资源</span>
</span></span><span style="display:flex;"><span>        tv_name.<span style="color:#a6e22e">setText</span>(planet.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// 设置星球名称</span>
</span></span><span style="display:flex;"><span>        tv_desc.<span style="color:#a6e22e">setText</span>(planet.<span style="color:#a6e22e">desc</span>); <span style="color:#75715e">// 设置星球描述</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> view; <span style="color:#75715e">// 返回生成的视图</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="item_basexml">item_base.xml<a hidden class="anchor" aria-hidden="true" href="#item_basexml">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/iv_icon&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;60dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">tools:src=</span><span style="color:#e6db74">&#34;@drawable/diqiu&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/tv_name&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;地球&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;@color/black&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;20sp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/tv_desc&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;地球&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;@color/black&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;12sp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">tools:text=</span><span style="color:#e6db74">&#34;地球快一点毁灭吧！地球快一点毁灭吧！地球快一点毁灭吧！地球快一点毁灭吧！地球快一点毁灭吧！地球快一点毁灭吧！&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="baseadapteractivityjava">BaseAdapterActivity.java<a hidden class="anchor" aria-hidden="true" href="#baseadapteractivityjava">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08; <span style="color:#75715e">// 包名</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BaseAdapterActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemSelectedListener</span> { <span style="color:#75715e">// 定义活动类，实现选项选择监听器</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> starArray <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[]</span>{ <span style="color:#75715e">// 定义星球名称数组</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;水星&#34;</span>, <span style="color:#e6db74">&#34;金星&#34;</span>, <span style="color:#e6db74">&#34;地球&#34;</span>, <span style="color:#e6db74">&#34;火星&#34;</span>, <span style="color:#e6db74">&#34;木星&#34;</span>, <span style="color:#e6db74">&#34;土星&#34;</span>, <span style="color:#e6db74">&#34;天王星&#34;</span>, <span style="color:#e6db74">&#34;海王星&#34;</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Planet<span style="color:#f92672">&gt;</span> planetList; <span style="color:#75715e">// 存储Planet对象的列表</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) { <span style="color:#75715e">// 活动创建时调用</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState); <span style="color:#75715e">// 调用父类的onCreate方法</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_base_adapter</span>); <span style="color:#75715e">// 设置活动的布局文件</span>
</span></span><span style="display:flex;"><span>        Spinner sp_planet <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">sp_planet</span>); <span style="color:#75715e">// 获取Spinner控件</span>
</span></span><span style="display:flex;"><span>        planetList <span style="color:#f92672">=</span> Planet.<span style="color:#a6e22e">getDefaultList</span>(); <span style="color:#75715e">// 获取默认的星球列表</span>
</span></span><span style="display:flex;"><span>        PlanetBaseAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PlanetBaseAdapter(<span style="color:#66d9ef">this</span>, planetList); <span style="color:#75715e">// 创建适配器</span>
</span></span><span style="display:flex;"><span>        sp_planet.<span style="color:#a6e22e">setAdapter</span>(adapter); <span style="color:#75715e">// 为Spinner设置适配器</span>
</span></span><span style="display:flex;"><span>        sp_planet.<span style="color:#a6e22e">setSelection</span>(0); <span style="color:#75715e">// 默认选中第0项</span>
</span></span><span style="display:flex;"><span>        sp_planet.<span style="color:#a6e22e">setOnItemSelectedListener</span>(<span style="color:#66d9ef">this</span>); <span style="color:#75715e">// 设置选项选中监听器</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) { <span style="color:#75715e">// 当选择一个选项时调用</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;您选择的是&#34;</span> <span style="color:#f92672">+</span> planetList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// 显示选择的星球名称</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onNothingSelected</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent) { <span style="color:#75715e">// 当没有选项被选择时调用</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="baseadapter优化">BaseAdapter优化<a hidden class="anchor" aria-hidden="true" href="#baseadapter优化">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> View <span style="color:#a6e22e">getView</span>(<span style="color:#66d9ef">int</span> position, View convertView, ViewGroup parent) { <span style="color:#75715e">// 获取每个列表项的视图</span>
</span></span><span style="display:flex;"><span>        ViewHolder holder <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (convertView <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>            convertView <span style="color:#f92672">=</span> LayoutInflater.<span style="color:#a6e22e">from</span>(mContext).<span style="color:#a6e22e">inflate</span>(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_base</span>, <span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>            holder <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ViewHolder();
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">iv_icon</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_icon</span>); <span style="color:#75715e">// 获取图标视图</span>
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">tv_name</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_name</span>); <span style="color:#75715e">// 获取名称视图</span>
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">tv_desc</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_desc</span>); <span style="color:#75715e">// 获取描述视图</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 将视图持有者保存到转换视图当中</span>
</span></span><span style="display:flex;"><span>            convertView.<span style="color:#a6e22e">setTag</span>(holder);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            holder <span style="color:#f92672">=</span> (ViewHolder) convertView.<span style="color:#a6e22e">getTag</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        Planet planet <span style="color:#f92672">=</span> mPlanetList.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">iv_icon</span>.<span style="color:#a6e22e">setImageResource</span>(planet.<span style="color:#a6e22e">image</span>);
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">tv_name</span>.<span style="color:#a6e22e">setText</span>(planet.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">tv_desc</span>.<span style="color:#a6e22e">setText</span>(planet.<span style="color:#a6e22e">desc</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> convertView;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="列表视图listview">列表视图ListView<a hidden class="anchor" aria-hidden="true" href="#列表视图listview">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/ListView.gif" alt="ListView"  />
</p>
<h3 id="xml-3">XML<a hidden class="anchor" aria-hidden="true" href="#xml-3">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.ListViewActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;horizontal&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;CheckBox</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/ck_divider&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;40dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;start|center&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;显示分割线&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;CheckBox</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/ck_bgc&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;40dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;start|center&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;显示按压背景&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ListView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/lv_planet&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:divider=</span><span style="color:#e6db74">&#34;@null&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:dividerHeight=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:listSelector=</span><span style="color:#e6db74">&#34;@color/transparent&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-3">Java<a hidden class="anchor" aria-hidden="true" href="#java-3">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ListViewActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemClickListener</span>, View.<span style="color:#a6e22e">OnClickListener</span>, CompoundButton.<span style="color:#a6e22e">OnCheckedChangeListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 星球列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Planet<span style="color:#f92672">&gt;</span> planetList;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 分割线复选框</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> CheckBox ck_divider;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 背景色复选框</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> CheckBox ck_bgc;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 列表视图</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> ListView lv_planet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_list_view</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 初始化列表视图</span>
</span></span><span style="display:flex;"><span>        lv_planet <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">lv_planet</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 初始化分割线复选框并设置监听器</span>
</span></span><span style="display:flex;"><span>        ck_divider <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">ck_divider</span>);
</span></span><span style="display:flex;"><span>        ck_divider.<span style="color:#a6e22e">setOnCheckedChangeListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 初始化背景色复选框并设置监听器</span>
</span></span><span style="display:flex;"><span>        ck_bgc <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">ck_bgc</span>);
</span></span><span style="display:flex;"><span>        ck_bgc.<span style="color:#a6e22e">setOnCheckedChangeListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取默认星球列表</span>
</span></span><span style="display:flex;"><span>        planetList <span style="color:#f92672">=</span> Planet.<span style="color:#a6e22e">getDefaultList</span>();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建适配器并设置给列表视图</span>
</span></span><span style="display:flex;"><span>        PlanetBaseAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PlanetBaseAdapter(<span style="color:#66d9ef">this</span>, planetList);
</span></span><span style="display:flex;"><span>        lv_planet.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置列表项点击监听器</span>
</span></span><span style="display:flex;"><span>        lv_planet.<span style="color:#a6e22e">setOnItemClickListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemClick</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 当列表项被点击时，显示对应星球名称的 Toast 消息</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;您选择的是&#34;</span> <span style="color:#f92672">+</span> planetList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span>(View v) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 空实现，暂时没有需要处理的点击事件</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCheckedChanged</span>(CompoundButton buttonView, <span style="color:#66d9ef">boolean</span> isChecked) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 当复选框状态改变时调用</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (buttonView.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">ck_divider</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 处理分割线复选框的状态改变</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (ck_divider.<span style="color:#a6e22e">isChecked</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 如果复选框被选中，设置黑色分割线和高度</span>
</span></span><span style="display:flex;"><span>                Drawable black <span style="color:#f92672">=</span> getResources().<span style="color:#a6e22e">getDrawable</span>(R.<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">black</span>, getTheme());
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setDivider</span>(black);
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setDividerHeight</span>(Utils.<span style="color:#a6e22e">dip2px</span>(<span style="color:#66d9ef">this</span>, 1));
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 如果复选框未选中，移除分割线</span>
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setDivider</span>(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setDividerHeight</span>(Utils.<span style="color:#a6e22e">dip2px</span>(<span style="color:#66d9ef">this</span>, 0));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (buttonView.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">ck_bgc</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 处理背景色复选框的状态改变</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (ck_bgc.<span style="color:#a6e22e">isChecked</span>()) {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 如果复选框被选中，设置列表项的选择器背景</span>
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setSelector</span>(R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">list_selector</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 如果复选框未选中，设置透明背景</span>
</span></span><span style="display:flex;"><span>                Drawable transparent <span style="color:#f92672">=</span> getResources().<span style="color:#a6e22e">getDrawable</span>(R.<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">transparent</span>, getTheme());
</span></span><span style="display:flex;"><span>                lv_planet.<span style="color:#a6e22e">setSelector</span>(transparent);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="listview注意点">ListView注意点<a hidden class="anchor" aria-hidden="true" href="#listview注意点">#</a></h2>
<p>在ListView中添加按钮并设置监听时， 会导致原来的ListView中<code>onItemClick</code>无效，此时需要在XML文件中设置<code>android:descendantFocusability=&quot;blocksDescendants</code>才能同时生效。</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/ListFocus.gif" alt="ListFocus"  />
</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240630191703768.png" alt="image-20240630191703768"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    android:descendantFocusability=&#34;blocksDescendants&#34;
</span></span></code></pre></div><h2 id="网格视图gridview">网格视图GridView<a hidden class="anchor" aria-hidden="true" href="#网格视图gridview">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/GridView.gif" alt="GridView"  />
</p>
<h3 id="xml-4">XML<a hidden class="anchor" aria-hidden="true" href="#xml-4">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;GridView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/gv_planet&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:numColumns=</span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:background=</span><span style="color:#e6db74">&#34;@color/pink&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:columnWidth=</span><span style="color:#e6db74">&#34;100dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:verticalSpacing=</span><span style="color:#e6db74">&#34;10dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:stretchMode=</span><span style="color:#e6db74">&#34;none&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-4">Java<a hidden class="anchor" aria-hidden="true" href="#java-4">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.AdapterView;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.GridView;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.PlanetGridAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.Planet;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// GridViewActivity 类实现了 AdapterView.OnItemClickListener 接口</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GridViewActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> AdapterView.<span style="color:#a6e22e">OnItemClickListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 声明一个 Planet 对象的 List，用于存储行星数据</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>Planet<span style="color:#f92672">&gt;</span> planetList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置活动的布局文件</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_grid_view</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取 GridView 控件</span>
</span></span><span style="display:flex;"><span>        GridView gv_planet <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">gv_planet</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取默认的行星列表</span>
</span></span><span style="display:flex;"><span>        planetList <span style="color:#f92672">=</span> Planet.<span style="color:#a6e22e">getDefaultList</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建一个适配器，将行星列表传递给适配器</span>
</span></span><span style="display:flex;"><span>        PlanetGridAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PlanetGridAdapter(<span style="color:#66d9ef">this</span>, planetList);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置 GridView 的适配器</span>
</span></span><span style="display:flex;"><span>        gv_planet.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置 GridView 的 item 点击事件监听器</span>
</span></span><span style="display:flex;"><span>        gv_planet.<span style="color:#a6e22e">setOnItemClickListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置 GridView 的拉伸模式</span>
</span></span><span style="display:flex;"><span>        gv_planet.<span style="color:#a6e22e">setStretchMode</span>(GridView.<span style="color:#a6e22e">STRETCH_COLUMN_WIDTH</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 当 GridView 的 item 被点击时调用此方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onItemClick</span>(AdapterView<span style="color:#f92672">&lt;?&gt;</span> parent, View view, <span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">long</span> id) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 显示一个 Toast，提示用户选择了哪个行星</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;你选择了&#34;</span> <span style="color:#f92672">+</span> planetList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="使用gridview重构购物车">使用GridView重构购物车<a hidden class="anchor" aria-hidden="true" href="#使用gridview重构购物车">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240630190848784.png" alt="image-20240630190848784"  />
</p>
<h3 id="xml-5">XML<a hidden class="anchor" aria-hidden="true" href="#xml-5">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:background=</span><span style="color:#e6db74">&#34;@color/AntiqueWhite1&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;include</span> <span style="color:#a6e22e">layout=</span><span style="color:#e6db74">&#34;@layout/title_shopping&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;GridView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/gv_channel&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:numColumns=</span><span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-5">Java<a hidden class="anchor" aria-hidden="true" href="#java-5">#</a></h3>
<h4 id="goodsgridadapterjava">GoodsGridAdapter.java<a hidden class="anchor" aria-hidden="true" href="#goodsgridadapterjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.adapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.content.Context;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.net.Uri;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.LayoutInflater;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.ViewGroup;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.BaseAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.Button;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ImageView;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.TextView;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.R;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.ShoppingChannelActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GoodsGridAdapter</span> <span style="color:#66d9ef">extends</span> BaseAdapter {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Context mContext;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsInfo;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> AddCartListener mAddCartListener;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">GoodsGridAdapter</span>(Context mContext, List<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsInfo, AddCartListener addCartListener) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mContext</span> <span style="color:#f92672">=</span> mContext;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mGoodsInfo</span> <span style="color:#f92672">=</span> mGoodsInfo;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mAddCartListener</span> <span style="color:#f92672">=</span> addCartListener;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mGoodsInfo.<span style="color:#a6e22e">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">getItem</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mGoodsInfo.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">long</span> <span style="color:#a6e22e">getItemId</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> position;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> View <span style="color:#a6e22e">getView</span>(<span style="color:#66d9ef">int</span> position, View convertView, ViewGroup parent) {
</span></span><span style="display:flex;"><span>        GoodsInfo goodsInfo <span style="color:#f92672">=</span> mGoodsInfo.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>        ViewHolder holder;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(convertView <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>            holder <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ViewHolder();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 将 XML 布局文件扩展为相应的 View 对象的类</span>
</span></span><span style="display:flex;"><span>            convertView <span style="color:#f92672">=</span> LayoutInflater.<span style="color:#a6e22e">from</span>(mContext).<span style="color:#a6e22e">inflate</span>(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">item_goods</span>, <span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">iv_thumb</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_thumb</span>);
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">tv_name</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_name</span>);
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">tv_price</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_price</span>);
</span></span><span style="display:flex;"><span>            holder.<span style="color:#a6e22e">btn_add</span> <span style="color:#f92672">=</span> convertView.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">btn_add</span>);
</span></span><span style="display:flex;"><span>            convertView.<span style="color:#a6e22e">setTag</span>(holder);
</span></span><span style="display:flex;"><span>        }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>            holder <span style="color:#f92672">=</span> (ViewHolder) convertView.<span style="color:#a6e22e">getTag</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        GoodsInfo info <span style="color:#f92672">=</span> mGoodsInfo.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">iv_thumb</span>.<span style="color:#a6e22e">setImageURI</span>(Uri.<span style="color:#a6e22e">parse</span>(info.<span style="color:#a6e22e">picPath</span>));
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">tv_name</span>.<span style="color:#a6e22e">setText</span>(info.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">tv_price</span>.<span style="color:#a6e22e">setText</span>(String.<span style="color:#a6e22e">valueOf</span>(info.<span style="color:#a6e22e">price</span>));
</span></span><span style="display:flex;"><span>        holder.<span style="color:#a6e22e">btn_add</span>.<span style="color:#a6e22e">setOnClickListener</span>(v <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span><span style="color:#75715e">//            ShoppingChannelActivity activity = (ShoppingChannelActivity) mContext;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//            activity.addToCart(info.id, info.name);</span>
</span></span><span style="display:flex;"><span>            mAddCartListener.<span style="color:#a6e22e">addToCart</span>(info.<span style="color:#a6e22e">id</span>, info.<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> convertView;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ViewHolder</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> ImageView iv_thumb;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> TextView tv_name;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> TextView tv_price;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">public</span> Button btn_add;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">AddCartListener</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addToCart</span>(<span style="color:#66d9ef">int</span> goodsId, String goodsName);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="shoppingchannelactivityjava">ShoppingChannelActivity.java<a hidden class="anchor" aria-hidden="true" href="#shoppingchannelactivityjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ShoppingChannelActivity 类实现了 GoodsGridAdapter.AddCartListener 和 View.OnClickListener 接口</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ShoppingChannelActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> GoodsGridAdapter.<span style="color:#a6e22e">AddCartListener</span>, View.<span style="color:#a6e22e">OnClickListener</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String TAG <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Kennem&#34;</span>; <span style="color:#75715e">// 日志标签</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> ShoppingDBHelper mDBHelper; <span style="color:#75715e">// 数据库助手对象</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> TextView tv_title; <span style="color:#75715e">// 显示标题的 TextView</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> GridView gv_channel; <span style="color:#75715e">// 显示商品的 GridView</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> TextView tv_count; <span style="color:#75715e">// 显示购物车商品数量的 TextView</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置活动的布局文件</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_shopping_channel</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 初始化控件</span>
</span></span><span style="display:flex;"><span>        tv_title <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_title</span>);
</span></span><span style="display:flex;"><span>        tv_title.<span style="color:#a6e22e">setText</span>(<span style="color:#e6db74">&#34;手机商城&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        tv_count <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_count</span>);
</span></span><span style="display:flex;"><span>        gv_channel <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">gv_channel</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置点击事件监听器</span>
</span></span><span style="display:flex;"><span>        findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_back</span>).<span style="color:#a6e22e">setOnClickListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_cart</span>).<span style="color:#a6e22e">setOnClickListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 初始化数据库助手并打开读写链接</span>
</span></span><span style="display:flex;"><span>        mDBHelper <span style="color:#f92672">=</span> ShoppingDBHelper.<span style="color:#a6e22e">getInstance</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        mDBHelper.<span style="color:#a6e22e">openWriteLink</span>();
</span></span><span style="display:flex;"><span>        mDBHelper.<span style="color:#a6e22e">openReadLink</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 显示商品信息</span>
</span></span><span style="display:flex;"><span>        showGoods();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onResume</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onResume</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 在活动恢复时，显示购物车的总信息</span>
</span></span><span style="display:flex;"><span>        showCartTotalInfo();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 显示购物车总信息的方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showCartTotalInfo</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> mDBHelper.<span style="color:#a6e22e">countCartInfo</span>();
</span></span><span style="display:flex;"><span>        MyApplication.<span style="color:#a6e22e">getInstance</span>().<span style="color:#a6e22e">goodsCount</span> <span style="color:#f92672">=</span> count;
</span></span><span style="display:flex;"><span>        tv_count.<span style="color:#a6e22e">setText</span>(String.<span style="color:#a6e22e">valueOf</span>(count));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 显示商品信息的方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">showGoods</span>() {
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> mDBHelper.<span style="color:#a6e22e">queryAllGoods</span>();
</span></span><span style="display:flex;"><span>        GoodsGridAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> GoodsGridAdapter(<span style="color:#66d9ef">this</span>, list, <span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        gv_channel.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 添加商品到购物车的方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addToCart</span>(<span style="color:#66d9ef">int</span> goodsId, String name) {
</span></span><span style="display:flex;"><span>        mDBHelper.<span style="color:#a6e22e">insertCartInfo</span>(goodsId);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#f92672">++</span>MyApplication.<span style="color:#a6e22e">getInstance</span>().<span style="color:#a6e22e">goodsCount</span>;
</span></span><span style="display:flex;"><span>        tv_count.<span style="color:#a6e22e">setText</span>(String.<span style="color:#a6e22e">valueOf</span>(count));
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;已添加一部 &#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;到购物车成功！&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 在活动销毁时，关闭数据库链接</span>
</span></span><span style="display:flex;"><span>        mDBHelper.<span style="color:#a6e22e">closeLink</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 处理点击事件的方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onClick</span>(View v) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_back</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 点击返回按钮时，结束当前活动</span>
</span></span><span style="display:flex;"><span>            finish();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_cart</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 点击购物车按钮时，启动购物车活动</span>
</span></span><span style="display:flex;"><span>            Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent(<span style="color:#66d9ef">this</span>, ShoppingCartActivity.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>            intent.<span style="color:#a6e22e">setFlags</span>(Intent.<span style="color:#a6e22e">FLAG_ACTIVITY_SINGLE_TOP</span>);
</span></span><span style="display:flex;"><span>            startActivity(intent);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPointerCaptureChanged</span>(<span style="color:#66d9ef">boolean</span> hasCapture) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onPointerCaptureChanged</span>(hasCapture);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="viewpager">ViewPager<a hidden class="anchor" aria-hidden="true" href="#viewpager">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/ViewPager.gif" alt="ViewPager"  />
</p>
<h3 id="xml-6">XML<a hidden class="anchor" aria-hidden="true" href="#xml-6">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.ViewPageActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;androidx.viewpager.widget.ViewPager</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/vp_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;300dp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-6">Java<a hidden class="anchor" aria-hidden="true" href="#java-6">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.activity.EdgeToEdge;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.graphics.Insets;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.ViewCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.WindowInsetsCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.ViewPager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.ImagePagerAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ViewPageActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> ViewPager.<span style="color:#a6e22e">OnPageChangeListener</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 商品信息列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> ArrayList<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置当前活动的布局文件</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_view_page</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取 ViewPager 控件</span>
</span></span><span style="display:flex;"><span>        ViewPager vp_content <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">vp_content</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取默认的商品信息列表</span>
</span></span><span style="display:flex;"><span>        mGoodsList <span style="color:#f92672">=</span> GoodsInfo.<span style="color:#a6e22e">getDefaultList</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建 ImagePagerAdapter 适配器</span>
</span></span><span style="display:flex;"><span>        ImagePagerAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ImagePagerAdapter(<span style="color:#66d9ef">this</span>, mGoodsList);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 为 ViewPager 设置适配器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置页面变更监听器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">addOnPageChangeListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 在翻页过程中触发
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param position 当前页面位置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param positionOffset 页面偏移百分比
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param positionOffsetPixels 页面偏移像素
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrolled</span>(<span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">float</span> positionOffset, <span style="color:#66d9ef">int</span> positionOffsetPixels) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 可以在这里实现页面滚动时的相关逻辑</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 页面选中时触发
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param position 选中页面的位置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageSelected</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 显示当前选中页面的商品名称</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;当前滑动的页面为 &#34;</span> <span style="color:#f92672">+</span> mGoodsList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 翻页状态改变时触发
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param state 页面状态
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrollStateChanged</span>(<span style="color:#66d9ef">int</span> state) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 可以在这里实现页面滚动状态变化时的相关逻辑</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="翻页标签栏pagertabstrip">翻页标签栏PagerTabStrip<a hidden class="anchor" aria-hidden="true" href="#翻页标签栏pagertabstrip">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/PagerTab.gif" alt="PagerTab"  />
</p>
<h3 id="xml-7">XML<a hidden class="anchor" aria-hidden="true" href="#xml-7">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.PagerTabActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;androidx.viewpager.widget.ViewPager</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/vp_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;androidx.viewpager.widget.PagerTabStrip</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/pts_tab&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/androidx.viewpager.widget.ViewPager&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-7">Java<a hidden class="anchor" aria-hidden="true" href="#java-7">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.graphics.Color;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.util.TypedValue;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.activity.EdgeToEdge;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.graphics.Insets;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.ViewCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.WindowInsetsCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.PagerTabStrip;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.ViewPager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.ImagePagerAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PagerTabActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> ViewPager.<span style="color:#a6e22e">OnPageChangeListener</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 商品信息列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> ArrayList<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_pager_tab</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        initPagerStrip();
</span></span><span style="display:flex;"><span>        initViewPager();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 初始化翻页标签栏</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initPagerStrip</span>() {
</span></span><span style="display:flex;"><span>        PagerTabStrip pts_tab <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">pts_tab</span>);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setTextSize</span>(TypedValue.<span style="color:#a6e22e">COMPLEX_UNIT_SP</span>, 20);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setTextColor</span>(Color.<span style="color:#a6e22e">GRAY</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initViewPager</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取 ViewPager 控件</span>
</span></span><span style="display:flex;"><span>        ViewPager vp_content <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">vp_content</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取默认的商品信息列表</span>
</span></span><span style="display:flex;"><span>        mGoodsList <span style="color:#f92672">=</span> GoodsInfo.<span style="color:#a6e22e">getDefaultList</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建 ImagePagerAdapter 适配器</span>
</span></span><span style="display:flex;"><span>        ImagePagerAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ImagePagerAdapter(<span style="color:#66d9ef">this</span>, mGoodsList);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 为 ViewPager 设置适配器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置页面变更监听器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">addOnPageChangeListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">setCurrentItem</span>(2);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrolled</span>(<span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">float</span> positionOffset, <span style="color:#66d9ef">int</span> positionOffsetPixels) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageSelected</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;当前滑动的页面为 &#34;</span> <span style="color:#f92672">+</span> mGoodsList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrollStateChanged</span>(<span style="color:#66d9ef">int</span> state) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="简单的启动引导页">简单的启动引导页<a hidden class="anchor" aria-hidden="true" href="#简单的启动引导页">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/launch.gif" alt="launch"  />
</p>
<h3 id="xml-8">XML<a hidden class="anchor" aria-hidden="true" href="#xml-8">#</a></h3>
<h4 id="activity_launch_simplexml">activity_launch_simple.xml<a hidden class="anchor" aria-hidden="true" href="#activity_launch_simplexml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.LaunchSimpleActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;androidx.viewpager.widget.ViewPager</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/vp_launch&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h4 id="item_launchxml">item_launch.xml<a hidden class="anchor" aria-hidden="true" href="#item_launchxml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;RelativeLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.LaunchSimpleActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/iv_launch&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:scaleType=</span><span style="color:#e6db74">&#34;fitXY&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;RadioGroup</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/rg_indicate&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_alignParentBottom=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_centerHorizontal=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:paddingBottom=</span><span style="color:#e6db74">&#34;20dp&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/btn_launch&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_centerInParent=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;点击开始美好生活&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;@color/blue&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;22sp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:visibility=</span><span style="color:#e6db74">&#34;gone&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/RelativeLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-8">Java<a hidden class="anchor" aria-hidden="true" href="#java-8">#</a></h3>
<h4 id="launchsimpleactivityjava">LaunchSimpleActivity.java<a hidden class="anchor" aria-hidden="true" href="#launchsimpleactivityjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.annotation.SuppressLint;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.activity.EdgeToEdge;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.graphics.Insets;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.ViewCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.core.view.WindowInsetsCompat;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.ViewPager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.LaunchPagerAdapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LaunchSimpleActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 定义一个数组，用于存储启动界面的背景图片资源ID</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> launchImageArray <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">guide_bg1</span>,
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">guide_bg2</span>,
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">guide_bg3</span>,
</span></span><span style="display:flex;"><span>            R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">guide_bg4</span>
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 当Activity被创建时调用</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置布局文件</span>
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_launch_simple</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 查找布局文件中的ViewPager控件</span>
</span></span><span style="display:flex;"><span>        ViewPager vp_launch <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">vp_launch</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建适配器对象，将图片数组传递进去</span>
</span></span><span style="display:flex;"><span>        LaunchPagerAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LaunchPagerAdapter(<span style="color:#66d9ef">this</span>, launchImageArray);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 为ViewPager设置适配器</span>
</span></span><span style="display:flex;"><span>        vp_launch.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="launchpageradapterjava">LaunchPagerAdapter.java<a hidden class="anchor" aria-hidden="true" href="#launchpageradapterjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.adapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.content.Context;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.ViewGroup;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ImageView;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.NonNull;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.Nullable;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.PagerAdapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.ViewPageActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ImagePagerAdapter</span> <span style="color:#66d9ef">extends</span> PagerAdapter {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Context mContext;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> ArrayList<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>ImageView<span style="color:#f92672">&gt;</span> mViewList <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ImagePagerAdapter</span>(Context context, ArrayList<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> goodsInfos) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mContext</span> <span style="color:#f92672">=</span> context;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mGoodsList</span> <span style="color:#f92672">=</span> goodsInfos;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (GoodsInfo goodsInfo : mGoodsList) {
</span></span><span style="display:flex;"><span>            ImageView view <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ImageView(mContext);
</span></span><span style="display:flex;"><span>            view.<span style="color:#a6e22e">setLayoutParams</span>(<span style="color:#66d9ef">new</span> ViewGroup.<span style="color:#a6e22e">LayoutParams</span>(
</span></span><span style="display:flex;"><span>                    ViewGroup.<span style="color:#a6e22e">LayoutParams</span>.<span style="color:#a6e22e">MATCH_PARENT</span>,
</span></span><span style="display:flex;"><span>                    ViewGroup.<span style="color:#a6e22e">LayoutParams</span>.<span style="color:#a6e22e">WRAP_CONTENT</span>
</span></span><span style="display:flex;"><span>            ));
</span></span><span style="display:flex;"><span>            view.<span style="color:#a6e22e">setImageResource</span>(goodsInfo.<span style="color:#a6e22e">pic</span>);
</span></span><span style="display:flex;"><span>            mViewList.<span style="color:#a6e22e">add</span>(view);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mViewList.<span style="color:#a6e22e">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isViewFromObject</span>(<span style="color:#a6e22e">@NonNull</span> View view, <span style="color:#a6e22e">@NonNull</span> Object object) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> (view <span style="color:#f92672">==</span> object);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 实例化指定位置的页面，并将其添加到容器中</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@NonNull</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Object <span style="color:#a6e22e">instantiateItem</span>(<span style="color:#a6e22e">@NonNull</span> ViewGroup container, <span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        ImageView item <span style="color:#f92672">=</span> mViewList.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>        container.<span style="color:#a6e22e">addView</span>(item);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> item;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 从容器中销毁指定位置的页面</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroyItem</span>(<span style="color:#a6e22e">@NonNull</span> ViewGroup container, <span style="color:#66d9ef">int</span> position, <span style="color:#a6e22e">@NonNull</span> Object object) {
</span></span><span style="display:flex;"><span>        container.<span style="color:#a6e22e">removeView</span>(mViewList.<span style="color:#a6e22e">get</span>(position));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> CharSequence <span style="color:#a6e22e">getPageTitle</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mGoodsList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="碎片fragment-">碎片Fragment ⭐⭐⭐⭐⭐<a hidden class="anchor" aria-hidden="true" href="#碎片fragment-">#</a></h2>
<p>传统的Activity并不能很好的处理大屏问题，所以急需一个碎片化的东西能够划区域的展示内容，并且有属于自己的独立可操作空间，所以就出现了Fragment。</p>
<h2 id="staticfragment">StaticFragment<a hidden class="anchor" aria-hidden="true" href="#staticfragment">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240701200338169.png" alt="image-20240701200338169"  />
</p>
<h3 id="xml-9">XML<a hidden class="anchor" aria-hidden="true" href="#xml-9">#</a></h3>
<h4 id="activity_fragement_staticxml">activity_fragement_static.xml<a hidden class="anchor" aria-hidden="true" href="#activity_fragement_staticxml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:app=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.FragmentStaticActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;androidx.fragment.app.FragmentContainerView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/fragment_static&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;com.showguan.chapter08.fragment.StaticFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;60dp&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;@dimen/common_font_size&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;每个页面的具体内容：&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h4 id="fragment_staticxml">fragment_static.xml<a hidden class="anchor" aria-hidden="true" href="#fragment_staticxml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:background=</span><span style="color:#e6db74">&#34;@color/pink&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.fragment.StaticFragment&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/tv_adv&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;广告图片&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;@color/brown&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;@dimen/common_font_size&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/iv_adv&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_weight=</span><span style="color:#e6db74">&#34;4&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:scaleType=</span><span style="color:#e6db74">&#34;fitCenter&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:src=</span><span style="color:#e6db74">&#34;@drawable/adv&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-9">Java<a hidden class="anchor" aria-hidden="true" href="#java-9">#</a></h3>
<h4 id="fragmentstaticactivityjava">FragmentStaticActivity.java<a hidden class="anchor" aria-hidden="true" href="#fragmentstaticactivityjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.PlanetBaseAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.Planet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FragmentStaticActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String TAG <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fragment&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_fragement_static</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="staticfragmentjava">StaticFragment.java<a hidden class="anchor" aria-hidden="true" href="#staticfragmentjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.fragment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.content.Context;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.NonNull;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.Nullable;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.fragment.app.Fragment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.util.Log;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.LayoutInflater;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.ViewGroup;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.R;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StaticFragment</span> <span style="color:#66d9ef">extends</span> Fragment {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String TAG <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fragment&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onAttach</span>(<span style="color:#a6e22e">@NonNull</span> Context context) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onAttach</span>(context);
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onAttach: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(<span style="color:#a6e22e">@Nullable</span> Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onCreate: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onStart</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onStart</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onStart: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onResume</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onResume</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onResume: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPause</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onPause</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onPause: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onStop</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onStop</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onStop: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onDestroy</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onDestroy: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onDetach</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onDetach</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onDetach: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> View <span style="color:#a6e22e">onCreateView</span>(<span style="color:#a6e22e">@NonNull</span> LayoutInflater inflater, <span style="color:#a6e22e">@Nullable</span> ViewGroup container, <span style="color:#a6e22e">@Nullable</span> Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onCreateView: &#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> inflater.<span style="color:#a6e22e">inflate</span>(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">fragment_static</span>, container, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onActivityCreated</span>(<span style="color:#a6e22e">@Nullable</span> Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onActivityCreated</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;Fragment onActivityCreated: &#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="fragment注册">Fragment注册<a hidden class="anchor" aria-hidden="true" href="#fragment注册">#</a></h2>
<p>静态注册在布局文件中直接指定Fragment，而动态注册直到代码中才动态添加Fragment。</p>
<h2 id="fragment声明周期">Fragment声明周期<a hidden class="anchor" aria-hidden="true" href="#fragment声明周期">#</a></h2>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240630223900670.png" alt="image-20240630223900670"  />
</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240630233229233.png" alt="image-20240630233229233"  />
</p>
<h2 id="dynamicfragment">DynamicFragment<a hidden class="anchor" aria-hidden="true" href="#dynamicfragment">#</a></h2>
<p>用<code>DynamicFragment</code>重构普通的<code>PagerTabStrip</code></p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/kennems/blog-image/dynamicFragment.gif" alt="dynamicFragment"  />
</p>
<h3 id="xml-10">XML<a hidden class="anchor" aria-hidden="true" href="#xml-10">#</a></h3>
<h4 id="activity_fragment_dynamicxml">activity_fragment_dynamic.xml<a hidden class="anchor" aria-hidden="true" href="#activity_fragment_dynamicxml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/main&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.FragmentDynamicActivity&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;androidx.viewpager.widget.ViewPager</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/vp_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;androidx.viewpager.widget.PagerTabStrip</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/pts_tab&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/androidx.viewpager.widget.ViewPager&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h4 id="fragment_dynamicxml">fragment_dynamic.xml<a hidden class="anchor" aria-hidden="true" href="#fragment_dynamicxml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:tools=</span><span style="color:#e6db74">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tools:context=</span><span style="color:#e6db74">&#34;.fragment.DynamicFragment&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:orientation=</span><span style="color:#e6db74">&#34;vertical&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/iv_pic&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;360dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:scaleType=</span><span style="color:#e6db74">&#34;fitCenter&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">tools:src=</span><span style="color:#e6db74">&#34;@drawable/adv&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:id=</span><span style="color:#e6db74">&#34;@+id/tv_desc&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:gravity=</span><span style="color:#e6db74">&#34;left&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;@color/black&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textSize=</span><span style="color:#e6db74">&#34;17sp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">tools:text=</span><span style="color:#e6db74">&#34;Test&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="java-10">Java<a hidden class="anchor" aria-hidden="true" href="#java-10">#</a></h3>
<h4 id="fragmentdynamicactivityjava">FragmentDynamicActivity.java<a hidden class="anchor" aria-hidden="true" href="#fragmentdynamicactivityjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.graphics.Color;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.util.Log;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.util.TypedValue;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.appcompat.app.AppCompatActivity;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.PagerTabStrip;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.viewpager.widget.ViewPager;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.adapter.MobilePagerAdapter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.util.ToastUtil;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FragmentDynamicActivity</span> <span style="color:#66d9ef">extends</span> AppCompatActivity <span style="color:#66d9ef">implements</span> ViewPager.<span style="color:#a6e22e">OnPageChangeListener</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> String TAG <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Kennem&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 商品信息列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> ArrayList<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onCreate</span>(Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">onCreate</span>(savedInstanceState);
</span></span><span style="display:flex;"><span>        setContentView(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">activity_fragment_dynamic</span>);
</span></span><span style="display:flex;"><span>        initPagerStrip();
</span></span><span style="display:flex;"><span>        initViewPager();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 初始化翻页标签栏</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initPagerStrip</span>() {
</span></span><span style="display:flex;"><span>        PagerTabStrip pts_tab <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">pts_tab</span>);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setTextSize</span>(TypedValue.<span style="color:#a6e22e">COMPLEX_UNIT_SP</span>, 20);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setTextColor</span>(Color.<span style="color:#a6e22e">GRAY</span>);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setDrawFullUnderline</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>        pts_tab.<span style="color:#a6e22e">setTabIndicatorColor</span>(Color.<span style="color:#a6e22e">BLUE</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">initViewPager</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取 ViewPager 控件</span>
</span></span><span style="display:flex;"><span>        ViewPager vp_content <span style="color:#f92672">=</span> findViewById(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">vp_content</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取默认的商品信息列表</span>
</span></span><span style="display:flex;"><span>        mGoodsList <span style="color:#f92672">=</span> GoodsInfo.<span style="color:#a6e22e">getDefaultList</span>();
</span></span><span style="display:flex;"><span>        Log.<span style="color:#a6e22e">d</span>(TAG, mGoodsList.<span style="color:#a6e22e">toString</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建 MobilePagerAdapter 适配器</span>
</span></span><span style="display:flex;"><span>        MobilePagerAdapter adapter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MobilePagerAdapter(getSupportFragmentManager(), mGoodsList);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 为 ViewPager 设置适配器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">setAdapter</span>(adapter);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 设置页面变更监听器</span>
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">addOnPageChangeListener</span>(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        vp_content.<span style="color:#a6e22e">setCurrentItem</span>(2); <span style="color:#75715e">// 设置当前显示的页</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrolled</span>(<span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">float</span> positionOffset, <span style="color:#66d9ef">int</span> positionOffsetPixels) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 页面滑动时触发</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageSelected</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 页面选中时触发</span>
</span></span><span style="display:flex;"><span>        ToastUtil.<span style="color:#a6e22e">show</span>(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;当前滑动的页面为 &#34;</span> <span style="color:#f92672">+</span> mGoodsList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onPageScrollStateChanged</span>(<span style="color:#66d9ef">int</span> state) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 页面滑动状态改变时触发</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="mobilepageradapterjava">MobilePagerAdapter.java<a hidden class="anchor" aria-hidden="true" href="#mobilepageradapterjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.adapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.NonNull;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.annotation.Nullable;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.fragment.app.Fragment;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.fragment.app.FragmentManager;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.fragment.app.FragmentPagerAdapter;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.entity.GoodsInfo;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.fragment.DynamicFragment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MobilePagerAdapter</span> <span style="color:#66d9ef">extends</span> FragmentPagerAdapter {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 商品信息列表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> List<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 构造函数，初始化适配器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param fm FragmentManager 用于管理 Fragment 的事务
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param mGoodsList 商品信息列表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MobilePagerAdapter</span>(<span style="color:#a6e22e">@NonNull</span> FragmentManager fm, List<span style="color:#f92672">&lt;</span>GoodsInfo<span style="color:#f92672">&gt;</span> mGoodsList) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>(fm, BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mGoodsList</span> <span style="color:#f92672">=</span> mGoodsList;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 获取指定位置的 Fragment
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param position 位置索引
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return 对应位置的 Fragment 实例
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@NonNull</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Fragment <span style="color:#a6e22e">getItem</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 从列表中获取商品信息</span>
</span></span><span style="display:flex;"><span>        GoodsInfo info <span style="color:#f92672">=</span> mGoodsList.<span style="color:#a6e22e">get</span>(position);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 创建并返回新的 DynamicFragment 实例</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> DynamicFragment.<span style="color:#a6e22e">newInstance</span>(position, info.<span style="color:#a6e22e">pic</span>, info.<span style="color:#a6e22e">description</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 获取列表中的项目数量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return 商品信息列表的大小
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mGoodsList.<span style="color:#a6e22e">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 获取页面标题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param position 位置索引
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return 对应位置的页面标题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> CharSequence <span style="color:#a6e22e">getPageTitle</span>(<span style="color:#66d9ef">int</span> position) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 返回商品名称作为页面标题</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> mGoodsList.<span style="color:#a6e22e">get</span>(position).<span style="color:#a6e22e">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="dynamicfragmentjava">DynamicFragment.java<a hidden class="anchor" aria-hidden="true" href="#dynamicfragmentjava">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.chapter08.fragment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.os.Bundle;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> androidx.fragment.app.Fragment;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.LayoutInflater;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.View;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.view.ViewGroup;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.ImageView;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> android.widget.TextView;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.showguan.chapter08.R;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DynamicFragment</span> <span style="color:#66d9ef">extends</span> Fragment {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 静态工厂方法，用于创建新的 DynamicFragment 实例并传递参数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param position 位置索引
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param pic_id 图片资源 ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param desc 描述文本
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return 新的 DynamicFragment 实例
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> DynamicFragment <span style="color:#a6e22e">newInstance</span>(<span style="color:#66d9ef">int</span> position, <span style="color:#66d9ef">int</span> pic_id, String desc) {
</span></span><span style="display:flex;"><span>        DynamicFragment fragment <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DynamicFragment();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 参数打包</span>
</span></span><span style="display:flex;"><span>        Bundle args <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Bundle();
</span></span><span style="display:flex;"><span>        args.<span style="color:#a6e22e">putInt</span>(<span style="color:#e6db74">&#34;position&#34;</span>, position);
</span></span><span style="display:flex;"><span>        args.<span style="color:#a6e22e">putInt</span>(<span style="color:#e6db74">&#34;image_id&#34;</span>, pic_id);
</span></span><span style="display:flex;"><span>        args.<span style="color:#a6e22e">putString</span>(<span style="color:#e6db74">&#34;desc&#34;</span>, desc);
</span></span><span style="display:flex;"><span>        fragment.<span style="color:#a6e22e">setArguments</span>(args);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> fragment;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * 创建并返回该 fragment 的视图层次结构
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param inflater 用于实例化布局 XML 文件的布局填充器对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param container 父级视图，null 表示没有父级视图
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param savedInstanceState 用于保存的状态
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return 返回 fragment 的根视图
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> View <span style="color:#a6e22e">onCreateView</span>(LayoutInflater inflater, ViewGroup container,
</span></span><span style="display:flex;"><span>                             Bundle savedInstanceState) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 使用给定的布局文件实例化视图</span>
</span></span><span style="display:flex;"><span>        View view <span style="color:#f92672">=</span> inflater.<span style="color:#a6e22e">inflate</span>(R.<span style="color:#a6e22e">layout</span>.<span style="color:#a6e22e">fragment_dynamic</span>, container, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取传递的参数</span>
</span></span><span style="display:flex;"><span>        Bundle arguments <span style="color:#f92672">=</span> getArguments();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(arguments <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 获取并设置 ImageView 和 TextView 的内容</span>
</span></span><span style="display:flex;"><span>            ImageView iv_pic <span style="color:#f92672">=</span> view.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">iv_pic</span>);
</span></span><span style="display:flex;"><span>            TextView tv_desc <span style="color:#f92672">=</span> view.<span style="color:#a6e22e">findViewById</span>(R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">tv_desc</span>);
</span></span><span style="display:flex;"><span>            iv_pic.<span style="color:#a6e22e">setImageResource</span>(arguments.<span style="color:#a6e22e">getInt</span>(<span style="color:#e6db74">&#34;image_id&#34;</span>, R.<span style="color:#a6e22e">drawable</span>.<span style="color:#a6e22e">diqiu</span>));
</span></span><span style="display:flex;"><span>            tv_desc.<span style="color:#a6e22e">setText</span>(arguments.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;desc&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> view;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/android/">Android</a></li>
    </ul>
		
	
	<ul id="categories">
	  
		<li><a href="https://kennems.github.io/categories/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Android学习笔记</a> </li>
	  
	</ul>

	
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/android%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%9F%A5%E8%AF%86%E7%82%B9/">
    <span class="title">« 上一页</span>
    <br>
    <span>Android内存管理知识点</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E8%AF%BE%E7%A8%8B%E7%BB%BC%E5%90%88%E9%A1%B9%E7%9B%AE%E5%9F%BA%E4%BA%8E%E5%A4%9A%E7%A7%8D%E6%BB%A4%E6%B3%A2%E5%99%A8%E7%9A%84%E5%9B%BE%E5%83%8F%E5%8E%BB%E5%99%AA%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83%E4%B8%8E%E5%88%86%E6%9E%90/">
    <span class="title">下一页 »</span>
    <br>
    <span>《数字图像处理》课程综合项目(Matlab)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>


</body>

</html>
