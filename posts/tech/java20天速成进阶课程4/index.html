<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4) | Kennem&#39;s Blog</title>
<meta name="keywords" content="Java">
<meta name="description" content="Javaå­¦ä¹ ç¬”è®°">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.62a7eeae50111b169accaf54360fa68001ac13582e542f2b7f808927f82c7b28.css" integrity="sha256-YqfurlARGxaazK9UNg&#43;mgAGsE1guVC8rf4CJJ/gseyg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

<meta property="og:url" content="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">
  <meta property="og:description" content="Javaå­¦ä¹ ç¬”è®°">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-20T22:30:13+08:00">
    <meta property="article:modified_time" content="2024-09-11T22:20:13+08:00">
    <meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">
<meta name="twitter:description" content="Javaå­¦ä¹ ç¬”è®°">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ğŸ“šæ–‡ç« ",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ’»æŠ€æœ¯",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
      "item": "https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
  "name": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
  "description": "Javaå­¦ä¹ ç¬”è®°",
  "keywords": [
    "Java"
  ],
  "articleBody": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4) ç‰¹æ®Šæ–‡ä»¶ properties, xml\nä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç‰¹æ®Šæ–‡ä»¶ï¼Ÿ\nå­˜å‚¨å¤šä¸ªç”¨æˆ·çš„ï¼šç”¨æˆ·åï¼Œ å¯†ç ï¼Œ å®¶ä¹¡ï¼Œ æ€§åˆ«\næ—¥å¿—æŠ€æœ¯\næŠŠç¨‹åºè¿è¡Œçš„ä¿¡æ¯ï¼Œè®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å®šä½bugï¼Œ å¹¶äº†è§£ç¨‹åºçš„æ‰§è¡Œæƒ…å†µç­‰ã€‚\nProperties æ˜¯ä¸€ä¸ªMapé›†åˆï¼ˆé”®å€¼å¯¹é›†åˆï¼‰ï¼Œ ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šå½“é›†åˆä½¿ç”¨ æ ¸å¿ƒä½œç”¨ï¼šPropertiesæ˜¯ç”¨æ¥ä»£è¡¨å±æ€§æ–‡ä»¶çš„ï¼Œé€šè¿‡Propertieså¯ä»¥è¯»å†™å±æ€§æ–‡ä»¶é‡Œé¢çš„å†…å®¹ public static void main(String[] args) throws IOException { // åˆ›å»ºä¸€ä¸ªPropertieså¯¹è±¡ Properties properties = new Properties(); // è¾“å‡ºåˆå§‹çš„Propertieså¯¹è±¡ï¼Œæ­¤æ—¶ä¸ºç©º System.out.println(properties); // ä»æ–‡ä»¶åŠ è½½Propertiesæ•°æ® properties.load(new FileReader(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\users.properties\")); // è¾“å‡ºåŠ è½½åçš„Propertieså¯¹è±¡ï¼ŒåŒ…å«ä»æ–‡ä»¶ä¸­è¯»å–çš„é”®å€¼å¯¹ System.out.println(properties); // æ ¹æ®æŒ‡å®šé”®å–å¾—å¯¹åº”çš„å€¼ System.out.println(properties.get(\"ken\")); // è·å–Propertieså¯¹è±¡ä¸­æ‰€æœ‰çš„é”®ï¼Œå¹¶éå†è¾“å‡ºæ¯ä¸ªé”®å€¼å¯¹ Set\u003cString\u003e keys = properties.stringPropertyNames(); for (String key : keys) { String val = properties.getProperty(key); System.out.println(key + \"----\u003e\" + val); } } XML æœ¬è´¨æ˜¯ä¸€ç§æ•°æ®çš„æ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå’Œæ•°æ®å…³ç³» XMLç‰¹ç‚¹\nXMLä¸­çš„\u003cæ ‡ç­¾å\u003eç§°ä¸ºä¸€ä¸ªæ ‡ç­¾æˆ–ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬æ˜¯æˆå¯¹å‡ºç°çš„ xmlè§£æ(dom4j) public static void main(String[] args) throws DocumentException { // åˆ›å»ºSAXReaderå¯¹è±¡ SAXReader saxReader = new SAXReader(); // ä½¿ç”¨SAXReaderè§£æXMLæ–‡ä»¶å¹¶ç”ŸæˆDocumentå¯¹è±¡ Document document = saxReader.read(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\helloworld.xml\"); // è·å–XMLæ–‡æ¡£çš„æ ¹å…ƒç´ å¹¶è¾“å‡ºå…¶åç§° Element root = document.getRootElement(); System.out.println(root.getName()); // è·å–æ ¹å…ƒç´ ä¸‹åä¸º\"user\"çš„æ‰€æœ‰å­å…ƒç´ å¹¶è¾“å‡ºå®ƒä»¬çš„åç§° List\u003cElement\u003e elements = root.elements(\"user\"); for (Element element : elements) { System.out.println(element.getName()); } // è·å–åä¸º\"people\"çš„å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º Element people = root.element(\"people\"); System.out.println(people.getText()); // è·å–åä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"user\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º Element user = root.element(\"user\"); System.out.println(user.elementText(\"user\")); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„åä¸º\"id\"çš„å±æ€§å€¼å¹¶è¾“å‡º System.out.println(user.attributeValue(\"id\")); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„åä¸º\"id\"çš„å±æ€§ï¼Œå¹¶è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼ Attribute id = user.attribute(\"id\"); System.out.println(id.getName()); System.out.println(id.getValue()); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶è¾“å‡ºå®ƒä»¬çš„åå’Œå€¼ List\u003cAttribute\u003e attributes = user.attributes(); for (Attribute attribute : attributes) { System.out.println(attribute.getName() + attribute.getValue()); } // è¾“å‡ºåä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"name\"ã€\"åœ°å€\"å’Œ\"password\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ System.out.println(user.elementText(\"name\")); System.out.println(user.elementText(\"åœ°å€\")); System.out.println(user.elementText(\"password\")); // è·å–åä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"data\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶è¾“å‡ºåŒ…æ‹¬å‰åç©ºæ ¼çš„æ–‡æœ¬å’Œå»é™¤å‰åç©ºæ ¼çš„æ–‡æœ¬ Element data = user.element(\"data\"); System.out.println(data.getText()); System.out.println(data.getTextTrim()); //å»é™¤å‰åç©ºæ ¼ } å†™å…¥XMLæ–‡ä»¶ ä½¿ç”¨ç¨‹åºæŠŠæ•°æ®å†™å‡ºåˆ°xmlä¸­\nä¸å»ºè®®ä½¿ç”¨dom4jï¼Œ æ¨èç›´æ¥æŠŠç¨‹åºé‡Œçš„æ•°æ®æ‹¼æ¥æˆxmlæ ¼å¼\npublic static void main(String[] args) throws IOException { // åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç”¨äºæ„å»ºXMLå†…å®¹ StringBuilder sb = new StringBuilder(); // æ„å»ºXMLå¤´éƒ¨ä¿¡æ¯å’Œæ ¹å…ƒç´  sb.append(\"\u003c?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\" ?\u003e\"); sb.append(\"\\r\\n\"); // æ·»åŠ ä¹¦åã€ä½œè€…å’Œä»·æ ¼ä¿¡æ¯ä½œä¸ºå­å…ƒç´  sb.append(\"\").append(\"ä»å…¥é—¨åˆ°åˆ åº“\").append(\"\\r\\n\"); sb.append(\"\").append(\"ai\").append(\"\\r\\n\"); sb.append(\"\").append(999.999).append(\"\\r\\n\"); // å…³é—­æ ¹å…ƒç´  sb.append(\"\\r\\n\"); try ( // ä½¿ç”¨try-with-resourcesè¯­æ³•åˆ›å»ºBufferedWriterå¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­ BufferedWriter bw = new BufferedWriter(new FileWriter(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\test.xml\")); ){ bw.write(sb.toString()); // å°†StringBuilderå¯¹è±¡ä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­ } catch (Exception e) { e.printStackTrace(); // æ‰“å°å¼‚å¸¸ä¿¡æ¯ } } çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™ å°±æ˜¯é™åˆ¶XMLæ–‡ä»¶åªèƒ½æŒ‰ç…§æŸç§æ ¼å¼è¿›è¡Œä¹¦å†™ çº¦æŸæ–‡æ¡£ï¼š\nä¸“é—¨ç”¨æ¥æ˜¾ç¤ºxmlä¹¦å†™æ ¼å¼çš„æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šé™åˆ¶æ ‡ç­¾ï¼Œå±æ€§è¯¥æ€ä¹ˆå†™ çº¦æŸæ–‡æ¡£çš„åˆ†ç±»\nDTDæ–‡æ¡£ Schemaæ–‡æ¡£ XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨ éœ€æ±‚ï¼šåˆ©ç”¨DTDçº¦æŸæ–‡æ¡£ï¼Œçº¦æŸä¸€ä¸ªXMLæ–‡ä»¶çš„ç¼–å†™ã€‚\nDTD(çº¦æŸæ–‡æ¡£)\n\u003c!ELEMENT ä¹¦æ¶ (ä¹¦+)\u003e \u003c!ELEMENT ä¹¦ (ä¹¦å,ä½œè€…,å”®ä»·)\u003e \u003c!ELEMENT ä¹¦å (#PCDATA)\u003e \u003c!ELEMENT ä½œè€… (#PCDATA)\u003e \u003c!ELEMENT å”®ä»· (#PCDATA)\u003e XMLæ–‡æ¡£\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE ä¹¦æ¶ SYSTEM \"data.dtd\"\u003e \u003cä¹¦æ¶\u003e \u003cä¹¦\u003e \u003cä¹¦å\u003eä»åˆ åº“åˆ°è·‘è·¯\u003c/ä¹¦å\u003e \u003cä½œè€…\u003eKenn\u003c/ä½œè€…\u003e \u003cå”®ä»·\u003e0.3\u003c/å”®ä»·\u003e \u003c/ä¹¦\u003e \u003c/ä¹¦æ¶\u003e XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨ å¯ä»¥çº¦æŸXMLæ–‡ä»¶çš„ç¼–å†™ã€å’Œæ•°æ®ç±»å‹ \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e ",
  "wordCount" : "9840",
  "inLanguage": "zh",
  "datePublished": "2024-04-20T22:30:13+08:00",
  "dateModified": "2024-09-11T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="ğŸ—‚ï¸åˆ†ç±»">
                    <span>ğŸ—‚ï¸åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/">ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/tech/">ğŸ’»æŠ€æœ¯</a></div>
    <h1 class="post-title entry-hint-parent">
      Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)
    </h1>
    <div class="post-description">
      Javaå­¦ä¹ ç¬”è®°
    </div>
    <div class="post-meta"><span title='2024-04-20 22:30:13 +0800 CST'>2024-04-20</span>&nbsp;Â·&nbsp;20 åˆ†é’Ÿ&nbsp;Â·&nbsp;9840 å­—&nbsp;Â·&nbsp;updated:&nbsp;2024-09-11&nbsp;Â·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#java20%e5%a4%a9%e9%80%9f%e6%88%90%e8%bf%9b%e9%98%b6%e8%af%be%e7%a8%8b4" aria-label="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)</a><ul>
                            
                    <li>
                        <a href="#%e7%89%b9%e6%ae%8a%e6%96%87%e4%bb%b6" aria-label="ç‰¹æ®Šæ–‡ä»¶">ç‰¹æ®Šæ–‡ä»¶</a></li>
                    <li>
                        <a href="#properties" aria-label="Properties">Properties</a></li>
                    <li>
                        <a href="#xml" aria-label="XML">XML</a><ul>
                            
                    <li>
                        <a href="#xml%e8%a7%a3%e6%9e%90dom4j" aria-label="xmlè§£æ(dom4j)">xmlè§£æ(dom4j)</a></li>
                    <li>
                        <a href="#%e5%86%99%e5%85%a5xml%e6%96%87%e4%bb%b6" aria-label="å†™å…¥XMLæ–‡ä»¶">å†™å…¥XMLæ–‡ä»¶</a></li>
                    <li>
                        <a href="#%e7%ba%a6%e6%9d%9fxml%e6%96%87%e4%bb%b6%e7%9a%84%e4%b9%a6%e5%86%99" aria-label="çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™">çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™</a><ul>
                            
                    <li>
                        <a href="#xml%e6%96%87%e6%a1%a3%e7%bb%93%e6%9d%9f-dtd%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨</a></li>
                    <li>
                        <a href="#xml%e6%96%87%e6%a1%a3%e7%bb%93%e6%9d%9f-schema%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#logback%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8" aria-label="Logbackå¿«é€Ÿå…¥é—¨"><code>Logback</code>å¿«é€Ÿå…¥é—¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%a4%9a%e7%ba%bf%e7%a8%8b" aria-label="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a><ul>
                            
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%b8%80%e7%bb%a7%e6%89%bfthread%e7%b1%bb" aria-label="æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»">æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</a></li>
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%ba%8c%e5%ae%9e%e7%8e%b0runnable%e6%8e%a5%e5%8f%a3" aria-label="æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£">æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</a></li>
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%b8%89%e5%88%a9%e7%94%a8callable%e6%8e%a5%e5%8f%a3futuretask%e7%b1%bb%e6%9d%a5%e5%ae%9e%e7%8e%b0" aria-label="æ–¹å¼ä¸‰ï¼šåˆ©ç”¨Callableæ¥å£ï¼ŒFutureTaskç±»æ¥å®ç°">æ–¹å¼ä¸‰ï¼šåˆ©ç”¨<code>Callable</code>æ¥å£ï¼Œ<code>FutureTask</code>ç±»æ¥å®ç°</a></li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%b8%b8%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8" aria-label="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%90%8c%e6%ad%a5%e7%9a%84%e5%b8%b8%e8%a7%81%e6%96%b9%e6%a1%88" aria-label="çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ</a><ul>
                            
                    <li>
                        <a href="#1-%e5%90%8c%e6%ad%a5%e4%bb%a3%e7%a0%81%e5%9d%97" aria-label="(1) åŒæ­¥ä»£ç å—">(1) åŒæ­¥ä»£ç å—</a></li>
                    <li>
                        <a href="#2-%e5%90%8c%e6%ad%a5%e6%96%b9%e6%b3%95" aria-label="(2) åŒæ­¥æ–¹æ³•">(2) åŒæ­¥æ–¹æ³•</a></li>
                    <li>
                        <a href="#3-lock%e9%94%81" aria-label="(3) Locké”">(3) Locké”</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e9%97%b4%e9%80%9a%e4%bf%a1" aria-label="çº¿ç¨‹é—´é€šä¿¡">çº¿ç¨‹é—´é€šä¿¡</a></li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e6%b1%a0" aria-label="çº¿ç¨‹æ± ">çº¿ç¨‹æ± </a><ul>
                            
                    <li>
                        <a href="#%e6%96%b0%e4%bb%bb%e5%8a%a1%e6%8b%92%e7%bb%9d%e7%ad%96%e7%95%a5" aria-label="æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥</a></li>
                    <li>
                        <a href="#executorservice%e7%9a%84%e5%b8%b8%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="ExecutorServiceçš„å¸¸ç”¨æ–¹æ³•"><code>ExecutorService</code>çš„å¸¸ç”¨æ–¹æ³•</a><ul>
                            
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8crunnable%e4%bb%bb%e5%8a%a1" aria-label="æ‰§è¡ŒRunnableä»»åŠ¡">æ‰§è¡ŒRunnableä»»åŠ¡</a></li>
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8ccallable%e4%bb%bb%e5%8a%a1" aria-label="æ‰§è¡ŒCallableä»»åŠ¡">æ‰§è¡ŒCallableä»»åŠ¡</a></li></ul>
                    </li>
                    <li>
                        <a href="#executors" aria-label="Executors"><code>Executors</code></a></li>
                    <li>
                        <a href="#volatile-%e5%85%b3%e9%94%ae%e5%ad%97" aria-label="volatile å…³é”®å­—"><code>volatile</code> å…³é”®å­—</a><ul>
                            
                    <li>
                        <a href="#%e4%bd%9c%e7%94%a8" aria-label="ä½œç”¨:">ä½œç”¨:</a></li>
                    <li>
                        <a href="#%e6%b3%a8%e6%84%8f%e7%82%b9" aria-label="æ³¨æ„ç‚¹ï¼š">æ³¨æ„ç‚¹ï¼š</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e5%b9%b6%e5%8f%91%e5%b9%b6%e8%a1%8c" aria-label="å¹¶å‘ã€å¹¶è¡Œ">å¹¶å‘ã€å¹¶è¡Œ</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e7%9a%846%e7%a7%8d%e7%8a%b6%e6%80%81%e6%80%bb%e7%bb%93" aria-label="çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e6%82%b2%e8%a7%82%e9%94%81%e4%b9%90%e8%a7%82%e9%94%81%e5%8e%9f%e7%90%86" aria-label="æ‚²è§‚é”ã€ä¹è§‚é”åŸç†">æ‚²è§‚é”ã€ä¹è§‚é”åŸç†</a><ul>
                            
                    <li>
                        <a href="#%e6%a1%88%e4%be%8b" aria-label="æ¡ˆä¾‹">æ¡ˆä¾‹</a>
                    </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="java20å¤©é€Ÿæˆè¿›é˜¶è¯¾ç¨‹4">Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)<a hidden class="anchor" aria-hidden="true" href="#java20å¤©é€Ÿæˆè¿›é˜¶è¯¾ç¨‹4">#</a></h1>
<h2 id="ç‰¹æ®Šæ–‡ä»¶">ç‰¹æ®Šæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç‰¹æ®Šæ–‡ä»¶">#</a></h2>
<p><code>properties</code>, <code>xml</code></p>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç‰¹æ®Šæ–‡ä»¶ï¼Ÿ</strong></p>
<p>å­˜å‚¨å¤šä¸ªç”¨æˆ·çš„ï¼šç”¨æˆ·åï¼Œ å¯†ç ï¼Œ å®¶ä¹¡ï¼Œ æ€§åˆ«</p>
<p><strong>æ—¥å¿—æŠ€æœ¯</strong></p>
<p>æŠŠç¨‹åºè¿è¡Œçš„ä¿¡æ¯ï¼Œè®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å®šä½bugï¼Œ å¹¶äº†è§£ç¨‹åºçš„æ‰§è¡Œæƒ…å†µç­‰ã€‚</p>
<h2 id="properties">Properties<a hidden class="anchor" aria-hidden="true" href="#properties">#</a></h2>
<ul>
<li>æ˜¯ä¸€ä¸ªMapé›†åˆï¼ˆé”®å€¼å¯¹é›†åˆï¼‰ï¼Œ ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šå½“é›†åˆä½¿ç”¨</li>
<li>æ ¸å¿ƒä½œç”¨ï¼šPropertiesæ˜¯ç”¨æ¥ä»£è¡¨å±æ€§æ–‡ä»¶çš„ï¼Œé€šè¿‡Propertieså¯ä»¥è¯»å†™å±æ€§æ–‡ä»¶é‡Œé¢çš„å†…å®¹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºä¸€ä¸ªPropertieså¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Properties properties <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è¾“å‡ºåˆå§‹çš„Propertieså¯¹è±¡ï¼Œæ­¤æ—¶ä¸ºç©º</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(properties);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä»æ–‡ä»¶åŠ è½½Propertiesæ•°æ®</span>
</span></span><span style="display:flex;"><span>        properties.<span style="color:#a6e22e">load</span>(<span style="color:#66d9ef">new</span> FileReader(<span style="color:#e6db74">&#34;file-io-app\\properties-xml-log-app\\src\\users.properties&#34;</span>));
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è¾“å‡ºåŠ è½½åçš„Propertieså¯¹è±¡ï¼ŒåŒ…å«ä»æ–‡ä»¶ä¸­è¯»å–çš„é”®å€¼å¯¹</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(properties);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æ ¹æ®æŒ‡å®šé”®å–å¾—å¯¹åº”çš„å€¼</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(properties.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;ken&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–Propertieså¯¹è±¡ä¸­æ‰€æœ‰çš„é”®ï¼Œå¹¶éå†è¾“å‡ºæ¯ä¸ªé”®å€¼å¯¹</span>
</span></span><span style="display:flex;"><span>        Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> keys <span style="color:#f92672">=</span> properties.<span style="color:#a6e22e">stringPropertyNames</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (String key : keys) {
</span></span><span style="display:flex;"><span>            String val <span style="color:#f92672">=</span> properties.<span style="color:#a6e22e">getProperty</span>(key);
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(key <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;----&gt;&#34;</span> <span style="color:#f92672">+</span> val);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="xml">XML<a hidden class="anchor" aria-hidden="true" href="#xml">#</a></h2>
<ul>
<li>æœ¬è´¨æ˜¯ä¸€ç§æ•°æ®çš„æ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå’Œæ•°æ®å…³ç³»</li>
</ul>
<p><strong>XMLç‰¹ç‚¹</strong></p>
<ul>
<li>XMLä¸­çš„<code>&lt;æ ‡ç­¾å&gt;</code>ç§°ä¸ºä¸€ä¸ªæ ‡ç­¾æˆ–ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬æ˜¯æˆå¯¹å‡ºç°çš„</li>
</ul>
<h3 id="xmlè§£ædom4j">xmlè§£æ(dom4j)<a hidden class="anchor" aria-hidden="true" href="#xmlè§£ædom4j">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> DocumentException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºSAXReaderå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        SAXReader saxReader <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SAXReader();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä½¿ç”¨SAXReaderè§£æXMLæ–‡ä»¶å¹¶ç”ŸæˆDocumentå¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Document document <span style="color:#f92672">=</span> saxReader.<span style="color:#a6e22e">read</span>(<span style="color:#e6db74">&#34;file-io-app\\properties-xml-log-app\\src\\helloworld.xml&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–XMLæ–‡æ¡£çš„æ ¹å…ƒç´ å¹¶è¾“å‡ºå…¶åç§°</span>
</span></span><span style="display:flex;"><span>        Element root <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getRootElement</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(root.<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–æ ¹å…ƒç´ ä¸‹åä¸º&#34;user&#34;çš„æ‰€æœ‰å­å…ƒç´ å¹¶è¾“å‡ºå®ƒä»¬çš„åç§°</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>Element<span style="color:#f92672">&gt;</span> elements <span style="color:#f92672">=</span> root.<span style="color:#a6e22e">elements</span>(<span style="color:#e6db74">&#34;user&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (Element element : elements) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(element.<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;people&#34;çš„å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º</span>
</span></span><span style="display:flex;"><span>        Element people <span style="color:#f92672">=</span> root.<span style="color:#a6e22e">element</span>(<span style="color:#e6db74">&#34;people&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(people.<span style="color:#a6e22e">getText</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;user&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º</span>
</span></span><span style="display:flex;"><span>        Element user <span style="color:#f92672">=</span> root.<span style="color:#a6e22e">element</span>(<span style="color:#e6db74">&#34;user&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(user.<span style="color:#a6e22e">elementText</span>(<span style="color:#e6db74">&#34;user&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„åä¸º&#34;id&#34;çš„å±æ€§å€¼å¹¶è¾“å‡º</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(user.<span style="color:#a6e22e">attributeValue</span>(<span style="color:#e6db74">&#34;id&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„åä¸º&#34;id&#34;çš„å±æ€§ï¼Œå¹¶è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼</span>
</span></span><span style="display:flex;"><span>        Attribute id <span style="color:#f92672">=</span> user.<span style="color:#a6e22e">attribute</span>(<span style="color:#e6db74">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(id.<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(id.<span style="color:#a6e22e">getValue</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶è¾“å‡ºå®ƒä»¬çš„åå’Œå€¼</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>Attribute<span style="color:#f92672">&gt;</span> attributes <span style="color:#f92672">=</span> user.<span style="color:#a6e22e">attributes</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (Attribute attribute : attributes) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(attribute.<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> attribute.<span style="color:#a6e22e">getValue</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è¾“å‡ºåä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;name&#34;ã€&#34;åœ°å€&#34;å’Œ&#34;password&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(user.<span style="color:#a6e22e">elementText</span>(<span style="color:#e6db74">&#34;name&#34;</span>));
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(user.<span style="color:#a6e22e">elementText</span>(<span style="color:#e6db74">&#34;åœ°å€&#34;</span>));
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(user.<span style="color:#a6e22e">elementText</span>(<span style="color:#e6db74">&#34;password&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;data&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶è¾“å‡ºåŒ…æ‹¬å‰åç©ºæ ¼çš„æ–‡æœ¬å’Œå»é™¤å‰åç©ºæ ¼çš„æ–‡æœ¬</span>
</span></span><span style="display:flex;"><span>        Element data <span style="color:#f92672">=</span> user.<span style="color:#a6e22e">element</span>(<span style="color:#e6db74">&#34;data&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(data.<span style="color:#a6e22e">getText</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(data.<span style="color:#a6e22e">getTextTrim</span>()); <span style="color:#75715e">//å»é™¤å‰åç©ºæ ¼</span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="å†™å…¥xmlæ–‡ä»¶">å†™å…¥XMLæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#å†™å…¥xmlæ–‡ä»¶">#</a></h3>
<p>ä½¿ç”¨ç¨‹åºæŠŠæ•°æ®å†™å‡ºåˆ°xmlä¸­</p>
<p>ä¸å»ºè®®ä½¿ç”¨dom4jï¼Œ æ¨èç›´æ¥æŠŠç¨‹åºé‡Œçš„æ•°æ®æ‹¼æ¥æˆxmlæ ¼å¼</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç”¨äºæ„å»ºXMLå†…å®¹</span>
</span></span><span style="display:flex;"><span>        StringBuilder sb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringBuilder();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æ„å»ºXMLå¤´éƒ¨ä¿¡æ¯å’Œæ ¹å…ƒç´ </span>
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;?xml version=\&#34;1.0\&#34; encoding=\&#34;utf-8\&#34; ?&gt;&#34;</span>);
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;book&gt;\r\n&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æ·»åŠ ä¹¦åã€ä½œè€…å’Œä»·æ ¼ä¿¡æ¯ä½œä¸ºå­å…ƒç´ </span>
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;name&gt;&#34;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;ä»å…¥é—¨åˆ°åˆ åº“&#34;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;/name&gt;\r\n&#34;</span>);
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;author&gt;&#34;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;ai&#34;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;/author&gt;\r\n&#34;</span>);
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;price&gt;&#34;</span>).<span style="color:#a6e22e">append</span>(999.<span style="color:#a6e22e">999</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;/price&gt;\r\n&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å…³é—­æ ¹å…ƒç´ </span>
</span></span><span style="display:flex;"><span>        sb.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#34;&lt;/book&gt;\r\n&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> (
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// ä½¿ç”¨try-with-resourcesè¯­æ³•åˆ›å»ºBufferedWriterå¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­</span>
</span></span><span style="display:flex;"><span>                BufferedWriter bw <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedWriter(<span style="color:#66d9ef">new</span> FileWriter(<span style="color:#e6db74">&#34;file-io-app\\properties-xml-log-app\\src\\test.xml&#34;</span>));
</span></span><span style="display:flex;"><span>        ){
</span></span><span style="display:flex;"><span>            bw.<span style="color:#a6e22e">write</span>(sb.<span style="color:#a6e22e">toString</span>()); <span style="color:#75715e">// å°†StringBuilderå¯¹è±¡ä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>(); <span style="color:#75715e">// æ‰“å°å¼‚å¸¸ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="çº¦æŸxmlæ–‡ä»¶çš„ä¹¦å†™">çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™<a hidden class="anchor" aria-hidden="true" href="#çº¦æŸxmlæ–‡ä»¶çš„ä¹¦å†™">#</a></h3>
<ul>
<li>å°±æ˜¯é™åˆ¶XMLæ–‡ä»¶åªèƒ½æŒ‰ç…§æŸç§æ ¼å¼è¿›è¡Œä¹¦å†™</li>
</ul>
<p>çº¦æŸæ–‡æ¡£ï¼š</p>
<ul>
<li>ä¸“é—¨ç”¨æ¥æ˜¾ç¤ºxmlä¹¦å†™æ ¼å¼çš„æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šé™åˆ¶æ ‡ç­¾ï¼Œå±æ€§è¯¥æ€ä¹ˆå†™</li>
</ul>
<p>çº¦æŸæ–‡æ¡£çš„åˆ†ç±»</p>
<ul>
<li>DTDæ–‡æ¡£</li>
<li>Schemaæ–‡æ¡£</li>
</ul>
<h4 id="xmlæ–‡æ¡£ç»“æŸ-dtdçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#xmlæ–‡æ¡£ç»“æŸ-dtdçš„ä½¿ç”¨">#</a></h4>
<p>éœ€æ±‚ï¼šåˆ©ç”¨DTDçº¦æŸæ–‡æ¡£ï¼Œçº¦æŸä¸€ä¸ªXMLæ–‡ä»¶çš„ç¼–å†™ã€‚</p>
<p><strong>DTD</strong>(çº¦æŸæ–‡æ¡£)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dtd" data-lang="dtd"><span style="display:flex;"><span><span style="color:#66d9ef">&lt;!ELEMENT</span> <span style="color:#f92672">ä¹¦æ¶</span> <span style="color:#f92672">(</span><span style="color:#f92672">ä¹¦</span><span style="color:#f92672">+)</span><span style="color:#66d9ef">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">&lt;!ELEMENT</span> <span style="color:#f92672">ä¹¦</span> <span style="color:#f92672">(</span><span style="color:#f92672">ä¹¦å</span><span style="color:#f92672">,</span><span style="color:#f92672">ä½œè€…</span><span style="color:#f92672">,</span><span style="color:#f92672">å”®ä»·</span><span style="color:#f92672">)</span><span style="color:#66d9ef">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">&lt;!ELEMENT</span> <span style="color:#f92672">ä¹¦å</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">#PCDATA</span><span style="color:#f92672">)</span><span style="color:#66d9ef">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">&lt;!ELEMENT</span> <span style="color:#f92672">ä½œè€…</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">#PCDATA</span><span style="color:#f92672">)</span><span style="color:#66d9ef">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">&lt;!ELEMENT</span> <span style="color:#f92672">å”®ä»·</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">#PCDATA</span><span style="color:#f92672">)</span><span style="color:#66d9ef">&gt;</span>
</span></span></code></pre></div><p><strong>XML</strong>æ–‡æ¡£</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE ä¹¦æ¶ SYSTEM &#34;data.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;ä¹¦æ¶&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ä¹¦å&gt;</span>ä»åˆ åº“åˆ°è·‘è·¯<span style="color:#f92672">&lt;/ä¹¦å&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ä½œè€…&gt;</span>Kenn<span style="color:#f92672">&lt;/ä½œè€…&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;å”®ä»·&gt;</span>0.3<span style="color:#f92672">&lt;/å”®ä»·&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ä¹¦æ¶&gt;</span>
</span></span></code></pre></div><h4 id="xmlæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#xmlæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">#</a></h4>
<ul>
<li>å¯ä»¥çº¦æŸXMLæ–‡ä»¶çš„ç¼–å†™ã€å’Œæ•°æ®ç±»å‹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;schema</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">targetNamespace=</span><span style="color:#e6db74">&#34;http://www.itcast.cn&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">elementFormDefault=</span><span style="color:#e6db74">&#34;qualified&#34;</span> <span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- targetNamespace:ç”³æ˜çº¦æŸæ–‡æ¡£çš„åœ°å€ï¼ˆå‘½åç©ºé—´ï¼‰--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;element</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;ä¹¦æ¶&#39;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- å†™å­å…ƒç´  --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;complexType&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">&lt;!-- maxOccurs=&#39;unbounded&#39;: ä¹¦æ¶ä¸‹çš„å­å…ƒç´ å¯ä»¥æœ‰ä»»æ„å¤šä¸ªï¼--&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;sequence</span> <span style="color:#a6e22e">maxOccurs=</span><span style="color:#e6db74">&#39;unbounded&#39;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;element</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;ä¹¦&#39;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">&lt;!-- å†™å­å…ƒç´  --&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;complexType&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;sequence&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;element</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;ä¹¦å&#39;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#39;string&#39;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;element</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;ä½œè€…&#39;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#39;string&#39;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#f92672">&lt;element</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;å”®ä»·&#39;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#39;double&#39;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">&lt;/sequence&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">&lt;/complexType&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;/element&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/sequence&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/complexType&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/element&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/schema&gt;</span>
</span></span></code></pre></div><p>XML</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;ä¹¦æ¶</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.itcast.cn&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.itcast.cn data.xsd&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- xmlns=&#34;http://www.itcast.cn&#34;  åŸºæœ¬ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         xsi:schemaLocation=&#34;http://www.itcast.cn books02.xsd&#34; å…·ä½“çš„ä½ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&lt;ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;ä¹¦å&gt;</span>ä»å…¥é—¨åˆ°åˆ é™¤<span style="color:#f92672">&lt;/ä¹¦å&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;ä½œè€…&gt;</span>dlei<span style="color:#f92672">&lt;/ä½œè€…&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;å”®ä»·&gt;</span>0.03<span style="color:#f92672">&lt;/å”®ä»·&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">&lt;/ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ä¹¦å&gt;</span>ä»å…¥é—¨åˆ°åˆ é™¤<span style="color:#f92672">&lt;/ä¹¦å&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ä½œè€…&gt;</span>dlei<span style="color:#f92672">&lt;/ä½œè€…&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;å”®ä»·&gt;</span>0.9<span style="color:#f92672">&lt;/å”®ä»·&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ä¹¦&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/ä¹¦æ¶&gt;</span>
</span></span></code></pre></div><h3 id="logbackå¿«é€Ÿå…¥é—¨"><code>Logback</code>å¿«é€Ÿå…¥é—¨<a hidden class="anchor" aria-hidden="true" href="#logbackå¿«é€Ÿå…¥é—¨">#</a></h3>
<p>éœ€æ±‚ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>Logback</code>æ—¥å¿—æ¡†æ¶ï¼Œè®°å½•ç³»ç»Ÿçš„è¿è¡Œä¿¡æ¯</li>
</ul>
<p>å®ç°æ­¥éª¤</p>
<ol>
<li>
<p>å¯¼å…¥<code>Logback</code>æ¡†æ¶åˆ°é¡¹ç›®ä¸­å»</p>
<ul>
<li><code>slf4j-api</code>ï¼šæ—¥å¿—æ¥å£</li>
<li><code>logback-core</code></li>
<li><code>logback-classic</code></li>
</ul>
</li>
<li>
<p>å°†<code>Logback</code>æ¡†æ¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>logback.xml</code>ç›´æ¥æ‹·è´åˆ°<code>src</code>ç›®å½•ä¸‹ï¼ˆå¿…é¡»æ˜¯<code>src</code>ä¸‹ï¼‰</p>
</li>
<li>
<p>åˆ›å»º<code>Logback</code>æ¡†æ¶æä¾›çš„<code>Logger</code>å¯¹è±¡ï¼Œç„¶åç”¨Loggerå¯¹è±¡è°ƒç”¨å…¶æä¾›çš„æ–¹æ³•å°±å¯è®°å½•ç³»ç»Ÿçš„æ—¥å¿—ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Logger LOGGER <span style="color:#f92672">=</span> LoggerFactory.<span style="color:#a6e22e">getLogger</span>(<span style="color:#e6db74">&#34;LogBackTest&#34;</span>);
</span></span></code></pre></div></li>
</ol>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>logback.xml</code></p>
<ul>
<li>å¯¹<code>Logback</code>æ—¥å¿—æ¡†æ¶è¿›è¡Œæ§åˆ¶</li>
</ul>
<p><code>Logback</code>è®¾ç½®æ—¥å¿—çº§åˆ«</p>
<ul>
<li>æ—¥å¿—çº§åˆ«æŒ‡çš„æ˜¯æ—¥å¿—ä¿¡æ¯çš„ç±»å‹ï¼Œæ—¥å¿—éƒ½ä¼šåˆ†çº§åˆ«ï¼Œå¸¸è§çš„æ—¥å¿—çº§åˆ«å¦‚ä¸‹ï¼ˆä¼˜å…ˆçº§ä¾æ¬¡å‡é«˜ï¼‰</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">æ—¥å¿—çº§åˆ«</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">trace</td>
<td style="text-align:center">è¿½è¸ªï¼ŒæŒ‡æ˜ç¨‹åºè¿è¡Œè½¨è¿¹</td>
</tr>
<tr>
<td style="text-align:center">debug</td>
<td style="text-align:center">è°ƒè¯•ï¼Œå®é™…åº”ç”¨ä¸­ä¸€èˆ¬å°†å…¶ä½œä¸ºæœ€ä½çº§åˆ«</td>
</tr>
<tr>
<td style="text-align:center">info</td>
<td style="text-align:center">è¾“å‡ºé‡è¦çš„è¿è¡Œä¿¡æ¯ï¼Œæ•°æ®è¿æ¥ï¼Œç½‘ç»œè¿æ¥ï¼ŒIOæ“ä½œç­‰ç­‰ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
<tr>
<td style="text-align:center">warn</td>
<td style="text-align:center">è­¦å‘Šä¿¡æ¯ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
<tr>
<td style="text-align:center">error</td>
<td style="text-align:center">é”™è¯¯ä¿¡æ¯ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
</tbody>
</table>
<p><strong>é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    <span style="color:#f92672">&lt;root</span> <span style="color:#a6e22e">level=</span><span style="color:#e6db74">&#34;debug&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;appender-ref</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;CONSOLE&#34;</span><span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;appender-ref</span> <span style="color:#a6e22e">ref=</span><span style="color:#e6db74">&#34;FILE&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/root&gt;</span>
</span></span></code></pre></div><ul>
<li>åªæœ‰æ—¥å¿—çš„çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ ¸å¿ƒé…ç½®æ–‡ä»¶é…å€¼çš„æ—¥å¿—çº§åˆ«ï¼Œæ‰ä¼šè¢«è®°å½•ï¼Œå¦åˆ™ä¸è®°å½•ã€‚</li>
</ul>
<h2 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹<a hidden class="anchor" aria-hidden="true" href="#å¤šçº¿ç¨‹">#</a></h2>
<ul>
<li>çº¿ç¨‹ï¼ˆ<code>Thread</code>ï¼‰æ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œæµç¨‹</li>
<li>ç¨‹åºä¸­å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œæµç¨‹ï¼Œé‚£è¿™ä¸ªç¨‹åºå°±æ˜¯å•çº¿ç¨‹çš„ç¨‹åº</li>
</ul>
<p><strong>å¤šçº¿ç¨‹</strong></p>
<ul>
<li>å¤šçº¿ç¨‹æ˜¯æŒ‡ä»è½¯ç¡¬ä»¶ä¸Šå®ç°çš„å¤šæ¡æ‰§è¡Œæµç¨‹çš„æŠ€æœ¯ï¼ˆå¤šæ¡çº¿ç¨‹ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œï¼‰</li>
</ul>
<h3 id="æ–¹å¼ä¸€ç»§æ‰¿threadç±»">æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼ä¸€ç»§æ‰¿threadç±»">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyThread</span> <span style="color:#66d9ef">extends</span> Thread{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å­çº¿ç¨‹MyThread&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        MyThread t <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread();
</span></span><span style="display:flex;"><span>        t.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;ä¸»çº¿ç¨‹mainè¾“å‡ºï¼š&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šç¼–ç ç®€å•</li>
<li>ç¼ºç‚¹ï¼šçº¿ç¨‹ç±»å·²ç»ç»§æ‰¿Thread, æ— æ³•ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸åˆ©äºåŠŸèƒ½çš„æ‰©å±•</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>è°ƒç”¨çš„æ˜¯<code>start</code>è€Œä¸æ˜¯<code>run</code></li>
<li>ä¸è¦æŠŠä¸»çº¿ç¨‹ä»»åŠ¡æ”¾åœ¨å¯åŠ¨å­çº¿ç¨‹ä¹‹å‰</li>
</ol>
<h3 id="æ–¹å¼äºŒå®ç°runnableæ¥å£">æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼äºŒå®ç°runnableæ¥å£">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Demo2</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        MyRunnable target <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyRunnable();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(target).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 1000; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;===ä¸»çº¿ç¨‹è¾“å‡º&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRunnable</span> <span style="color:#66d9ef">implements</span> Runnable{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 1000; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å­çº¿ç¨‹è¾“å‡º===&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>å®šä¹‰ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ç±»<code>MyRunnable</code>å®ç°<code>Runnable</code>æ¥å£ï¼Œ é‡å†™<code>run()</code>æ–¹æ³•</li>
<li>åˆ›å»º<code>MyRunnable</code>ä»»åŠ¡å¯¹è±¡</li>
<li>æŠŠ<code>MyRunnbale</code>ä»»åŠ¡å¯¹è±¡äº¤ç»™<code>Thread</code>å¤„ç†</li>
</ol>
<p>ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°<code>Runnable</code>æ¥å£åï¼Œå¯ä»¥ç»§ç»­ç»§æ‰¿å…¶ä»–ç±»ï¼Œå®ç°å…¶ä»–æ¥å£ï¼Œæ‰©å±•æ€§å¼º</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦å¤šä¸€ä¸ª<code>Runnable</code>å¯¹è±¡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨ç¬¬ä¸€ä¸ªå­çº¿ç¨‹</span>
</span></span><span style="display:flex;"><span>        Runnable target1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Runnable() {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å­çº¿ç¨‹è¾“å‡º:&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(target1).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä¸»çº¿ç¨‹æ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;ä¸»çº¿ç¨‹:&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨ç¬¬äºŒä¸ªå­çº¿ç¨‹ï¼Œä½¿ç”¨Lambdaè¡¨è¾¾å¼</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å­çº¿ç¨‹2:&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;ä¸»çº¿ç¨‹:&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="æ–¹å¼ä¸‰åˆ©ç”¨callableæ¥å£futuretaskç±»æ¥å®ç°">æ–¹å¼ä¸‰ï¼šåˆ©ç”¨<code>Callable</code>æ¥å£ï¼Œ<code>FutureTask</code>ç±»æ¥å®ç°<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼ä¸‰åˆ©ç”¨callableæ¥å£futuretaskç±»æ¥å®ç°">#</a></h3>
<p><code>MyCallable</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.Callable;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyCallable</span> <span style="color:#66d9ef">implements</span> Callable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> n;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyCallable</span>() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyCallable</span>(<span style="color:#66d9ef">int</span> n) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">call</span>() <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> sum <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            sum <span style="color:#f92672">+=</span> i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;çº¿ç¨‹æ±‚å’Œç»“æœä¸º&#34;</span> <span style="color:#f92672">+</span> sum;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.Callable;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.ExecutionException;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.FutureTask;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Demo4</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> ExecutionException, InterruptedException {
</span></span><span style="display:flex;"><span>        Callable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> call <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyCallable(100);
</span></span><span style="display:flex;"><span>        FutureTask<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> ft <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FutureTask<span style="color:#f92672">&lt;&gt;</span>(call);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(ft).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        Callable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> call2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyCallable(200);
</span></span><span style="display:flex;"><span>        FutureTask<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> ft2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FutureTask<span style="color:#f92672">&lt;&gt;</span>(call2);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(ft2).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String rs <span style="color:#f92672">=</span> ft.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(rs);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//çº¿ç¨‹æ±‚å’Œç»“æœä¸º4950</span>
</span></span><span style="display:flex;"><span>        String rs2 <span style="color:#f92672">=</span> ft2.<span style="color:#a6e22e">get</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(rs2);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//çº¿ç¨‹æ±‚å’Œç»“æœä¸º19900</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>çº¿ç¨‹ä»»åŠ¡ç±»åªæ˜¯å®ç°æ¥å£ï¼Œå¯ä»¥ç»§ç»­ç»§æ‰¿ç±»å’Œå®ç°æ¥å£ï¼Œæ‰©å±•æ€§å¼ºï¼›å¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå»è·å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœã€‚</li>
</ul>
<h3 id="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">çº¿ç¨‹å¸¸ç”¨æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">#</a></h3>
<ul>
<li>ä¸ºçº¿ç¨‹è®¾ç½®åç§°</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t1</span>
</span></span><span style="display:flex;"><span>        Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread(<span style="color:#e6db74">&#34;çº¿ç¨‹ä¸€å·&#34;</span>);
</span></span><span style="display:flex;"><span>        t1.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(t1.<span style="color:#a6e22e">getName</span>()); <span style="color:#75715e">// æ‰“å°çº¿ç¨‹ t1 çš„åç§°</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t2</span>
</span></span><span style="display:flex;"><span>        Thread t2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread(<span style="color:#e6db74">&#34;çº¿ç¨‹äºŒå·&#34;</span>);
</span></span><span style="display:flex;"><span>        t2.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(t2.<span style="color:#a6e22e">getName</span>()); <span style="color:#75715e">// æ‰“å°çº¿ç¨‹ t2 çš„åç§°</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–å½“å‰çº¿ç¨‹ï¼Œå¹¶å°†å…¶åç§°è®¾ç½®ä¸º &#34;maxçº¿ç¨‹&#34;</span>
</span></span><span style="display:flex;"><span>        Thread m <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>();
</span></span><span style="display:flex;"><span>        m.<span style="color:#a6e22e">setName</span>(<span style="color:#e6db74">&#34;maxçº¿ç¨‹&#34;</span>);
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(m.<span style="color:#a6e22e">getName</span>()); <span style="color:#75715e">// æ‰“å°å½“å‰çº¿ç¨‹çš„åç§°</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªç®€å•çš„ for å¾ªç¯ï¼Œæ‰“å°è¾“å‡ºå½“å‰çº¿ç¨‹çš„åç§°å’Œå¾ªç¯å˜é‡ i</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(m.<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;çº¿ç¨‹è¾“å‡º&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è‡ªå®šä¹‰çº¿ç¨‹ç±» MyThread</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyThread</span> <span style="color:#66d9ef">extends</span> Thread {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyThread</span>() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyThread</span>(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>(name);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;å¼€å§‹æ‰§è¡Œã€‚&#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å­çº¿ç¨‹MyThread&#34;</span> <span style="color:#f92672">+</span> i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ä½¿ç”¨çº¿ç¨‹çš„ <code>join()</code> æ–¹æ³•æ¥å®ç°çº¿ç¨‹çš„<strong>é¡ºåºæ‰§è¡Œ</strong>ï¼Œåœ¨å¾ªç¯ä¸­ä½¿ç”¨ <code>sleep()</code> æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> InterruptedException {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å¾ªç¯éå†æ•´æ•° 0 åˆ° 5</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;=</span> 5; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(i); <span style="color:#75715e">// æ‰“å°å½“å‰æ•´æ•°å€¼</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å¦‚æœå½“å‰æ•´æ•°å€¼ç­‰äº 3ï¼Œåˆ™è®©å½“å‰çº¿ç¨‹ä¼‘çœ  5 ç§’é’Ÿ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">==</span> 3) {
</span></span><span style="display:flex;"><span>            Thread.<span style="color:#a6e22e">sleep</span>(5000);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t1ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t1 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span>
</span></span><span style="display:flex;"><span>    Thread t1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread(<span style="color:#e6db74">&#34;1å·çº¿ç¨‹&#34;</span>);
</span></span><span style="display:flex;"><span>    t1.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>    t1.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t2ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t2 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span>
</span></span><span style="display:flex;"><span>    Thread t2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread(<span style="color:#e6db74">&#34;2å·çº¿ç¨‹&#34;</span>);
</span></span><span style="display:flex;"><span>    t2.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>    t2.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t3ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t3 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span>
</span></span><span style="display:flex;"><span>    Thread t3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyThread(<span style="color:#e6db74">&#34;3å·çº¿ç¨‹&#34;</span>);
</span></span><span style="display:flex;"><span>    t3.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>    t3.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>yield</code>, <code>interrupt</code>, <code>å®ˆæŠ¤çº¿ç¨‹</code>ï¼Œ<code>çº¿ç¨‹ä¼˜å…ˆçº§</code>ç­‰&hellip;</p>
<h2 id="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹å®‰å…¨">#</a></h2>
<p>ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ“ä½œåŒä¸€ä¸ªå…±äº«èµ„æºçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸šåŠ¡å®‰å…¨é—®é¢˜</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadSafeDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Account</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String cardId;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> money;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Account</span>() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Account</span>(String cardId, <span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cardId</span> <span style="color:#f92672">=</span> cardId;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">=</span> money;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getCardId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> cardId;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCardId</span>(String cardId) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cardId</span> <span style="color:#f92672">=</span> cardId;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">double</span> <span style="color:#a6e22e">getMoney</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> money;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMoney</span>(<span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">=</span> money;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ä½¿ç”¨ synchronized å…³é”®å­—ç¡®ä¿çº¿ç¨‹å®‰å…¨</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawMoney</span>(<span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span><span style="color:#f92672">&gt;=</span>money){
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±&#34;</span> <span style="color:#f92672">+</span> money <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">-=</span> money;
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span>);
</span></span><span style="display:flex;"><span>        }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadSafeDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DrawThread</span> <span style="color:#66d9ef">extends</span> Thread{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Account acc;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">DrawThread</span>(Account acc, String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>(name);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">acc</span> <span style="color:#f92672">=</span> acc;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        acc.<span style="color:#a6e22e">drawMoney</span>(10000.<span style="color:#a6e22e">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Demo1</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        Account acc <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Account(<span style="color:#e6db74">&#34;ICBC-10101&#34;</span>, 10000);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> DrawThread(acc, <span style="color:#e6db74">&#34;å°çº¢&#34;</span>).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> DrawThread(acc, <span style="color:#e6db74">&#34;å°æ˜&#34;</span>).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/**è¾“å‡ºç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * å°çº¢æ¥å–é’±10000.0æˆåŠŸï¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * å°æ˜æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * å°çº¢å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: 0.0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         */</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">#</a></h3>
<ul>
<li><strong>åŠ é”</strong>ï¼šæ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼ŒåŠ é”åæ‰èƒ½è¿›å…¥è®¿é—®ï¼Œè®¿é—®å®Œæ¯•åè‡ªåŠ¨è§£é”ï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰èƒ½å†åŠ é”è¿›æ¥</li>
</ul>
<h4 id="1-åŒæ­¥ä»£ç å—">(1) åŒæ­¥ä»£ç å—<a hidden class="anchor" aria-hidden="true" href="#1-åŒæ­¥ä»£ç å—">#</a></h4>
<ul>
<li>
<p><strong>ä½œç”¨</strong>ï¼šæŠŠè®¿é—®å…±äº«èµ„æºçš„æ ¸å¿ƒä»£ç ç»™ä¸Šé”ï¼Œä¾æ¬¡ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
</li>
<li>
<p><strong>åŸç†</strong>ï¼šæ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”åè¿›å…¥ï¼Œæ‰§è¡Œå®Œæ¯•åè‡ªåŠ¨ç»“æœï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥è¿›æ¥æ‰§è¡Œã€‚</p>
</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å¯¹äºå½“å‰åŒæ—¶æ‰§è¡Œçš„çº¿ç¨‹æ¥è¯´ï¼ŒåŒæ­¥é”å¿…é¡»åŒä¸€æŠŠï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºbug</li>
</ul>
<p><strong>é”å¯¹è±¡çš„ä½¿ç”¨è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>å»ºè®®ä½¿ç”¨<strong>å…±äº«èµ„æº</strong>ä½œä¸ºé”å¯¹è±¡ï¼Œå¯¹äº<strong>å®ä¾‹æ–¹æ³•</strong>å»ºè®®ä½¿ç”¨<code>this</code>ä½œä¸ºé”å¯¹è±¡</li>
<li>å¯¹äº<strong>é™æ€æ–¹æ³•</strong>å»ºè®®ä½¿ç”¨å­—èŠ‚ç ï¼ˆ<code>ç±»å.class</code>ï¼‰å¯¹è±¡ä½œä¸ºé”å¯¹è±¡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawMoney</span>(<span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span> (<span style="color:#66d9ef">this</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span><span style="color:#f92672">&gt;=</span>money){
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±&#34;</span> <span style="color:#f92672">+</span> money <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">-=</span> money;
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span>);
</span></span><span style="display:flex;"><span>            }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span>(Account.<span style="color:#a6e22e">class</span>){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h4 id="2-åŒæ­¥æ–¹æ³•">(2) åŒæ­¥æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#2-åŒæ­¥æ–¹æ³•">#</a></h4>
<p>ä½¿ç”¨<code>synchronized</code>ä¿®é¥°æ–¹æ³•</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawMoney</span>(<span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span><span style="color:#f92672">&gt;=</span>money){
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±&#34;</span> <span style="color:#f92672">+</span> money <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">-=</span> money;
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span>);
</span></span><span style="display:flex;"><span>        }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p><strong>åŒæ­¥æ–¹æ³•åº•å±‚åŸç†</strong></p>
<ul>
<li>åŒæ­¥æ–¹æ³•å…¶å®åº•å±‚ä¹Ÿæ˜¯æœ‰éšå¼å¯¹è±¡çš„ï¼Œ åªæ˜¯é”çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ä»£ç </li>
<li>åŒæ ·ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨<code>this</code>ä½œä¸ºé”å¯¹è±¡ï¼›å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨ç±»å<code>.class</code>ä½œä¸ºé”å¯¹è±¡</li>
</ul>
<h4 id="3-locké”">(3) Locké”<a hidden class="anchor" aria-hidden="true" href="#3-locké”">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Lock lk <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ReentrantLock();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">drawMoney</span>(<span style="color:#66d9ef">double</span> money) {
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            lk.<span style="color:#a6e22e">lock</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span><span style="color:#f92672">&gt;=</span>money){
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±&#34;</span> <span style="color:#f92672">+</span> money <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æˆåŠŸï¼&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span> <span style="color:#f92672">-=</span> money;
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">money</span>);
</span></span><span style="display:flex;"><span>            }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>            lk.<span style="color:#a6e22e">unlock</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="çº¿ç¨‹é—´é€šä¿¡">çº¿ç¨‹é—´é€šä¿¡<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹é—´é€šä¿¡">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†ä½¿ç”¨ wait() å’Œ notify() æ–¹æ³•æ¥å®ç°å¤šçº¿ç¨‹é—´çš„æ¶ˆæ¯ä¼ é€’å’ŒåŒæ­¥ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * ä¸»è¦çŸ¥è¯†ç‚¹ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 1. wait() æ–¹æ³•ï¼šä½¿å½“å‰çº¿ç¨‹ç­‰å¾…å¹¶é‡Šæ”¾æ‰€å é”ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ notify() æ–¹æ³•æˆ– notifyAll() æ–¹æ³•æ¥å”¤é†’å®ƒã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 2. notify() æ–¹æ³•ï¼šå”¤é†’æ­£åœ¨ç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 3. notifyAll() æ–¹æ³•ï¼šå”¤é†’æ­£åœ¨ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 4. ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼šå¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹å‘å…±äº«èµ„æºä¸­ç”Ÿäº§ç‰©å“ï¼Œå¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ä»å…±äº«èµ„æºä¸­æ¶ˆè´¹ç‰©å“ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 5. ä½¿ç”¨ synchronized å…³é”®å­—æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œé¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºå¼•èµ·çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ThreadMessageDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Desk</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * ç”Ÿäº§é£Ÿç‰©çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// å¦‚æœæ¡Œå­ä¸Šæ²¡æœ‰é£Ÿç‰©ï¼Œåˆ™ç”Ÿäº§ä¸€ä¸ªé£Ÿç‰©</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (list.<span style="color:#a6e22e">size</span>() <span style="color:#f92672">==</span> 0) {
</span></span><span style="display:flex;"><span>                list.<span style="color:#a6e22e">add</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;åšçš„è‚‰åŒ…å­&#34;</span>);
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;åšäº†ä¸€ä¸ªè‚‰åŒ…å­&#34;</span>);
</span></span><span style="display:flex;"><span>                Thread.<span style="color:#a6e22e">sleep</span>(2000); <span style="color:#75715e">// æ¨¡æ‹Ÿåˆ¶ä½œæ—¶é—´</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifyAll</span>(); <span style="color:#75715e">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">wait</span>(); <span style="color:#75715e">// ç­‰å¾…è¢«å”¤é†’</span>
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifyAll</span>(); <span style="color:#75715e">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">wait</span>(); <span style="color:#75715e">// ç­‰å¾…è¢«å”¤é†’</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * æ¶ˆè´¹é£Ÿç‰©çš„æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">synchronized</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">get</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// å¦‚æœæ¡Œå­ä¸Šæœ‰é£Ÿç‰©ï¼Œåˆ™æ¶ˆè´¹ä¸€ä¸ªé£Ÿç‰©</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (list.<span style="color:#a6e22e">size</span>() <span style="color:#f92672">==</span> 1) {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;åƒäº†&#34;</span> <span style="color:#f92672">+</span> list.<span style="color:#a6e22e">get</span>(0));
</span></span><span style="display:flex;"><span>                list.<span style="color:#a6e22e">clear</span>(); <span style="color:#75715e">// æ¸…ç©ºæ¡Œå­ä¸Šçš„é£Ÿç‰©</span>
</span></span><span style="display:flex;"><span>                Thread.<span style="color:#a6e22e">sleep</span>(1000); <span style="color:#75715e">// æ¨¡æ‹Ÿåƒçš„æ—¶é—´</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifyAll</span>(); <span style="color:#75715e">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">wait</span>(); <span style="color:#75715e">// ç­‰å¾…è¢«å”¤é†’</span>
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifyAll</span>(); <span style="color:#75715e">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">wait</span>(); <span style="color:#75715e">// ç­‰å¾…è¢«å”¤é†’</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            e.<span style="color:#a6e22e">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± <a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹æ± ">#</a></h2>
<ul>
<li>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çº¿ç¨‹çš„æŠ€æœ¯</li>
</ul>
<p><code>ThreadPoolExecutor</code>æ„é€ å™¨</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ThreadPoolExecutor</span>(<span style="color:#66d9ef">int</span> corePoolSize,
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">int</span> maximumPoolSize,
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">long</span> keepAliveTime,
</span></span><span style="display:flex;"><span> TimeUnit unit,
</span></span><span style="display:flex;"><span> BlockingQueue<span style="color:#f92672">&lt;</span>Runnable<span style="color:#f92672">&gt;</span> workQueue)
</span></span></code></pre></div><ul>
<li>å‚æ•°ä¸€ï¼š<code>corePoolSize</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡</li>
<li>å‚æ•°äºŒï¼š<code>maximumPoolSize</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°é‡</li>
<li>å‚æ•°ä¸‰ï¼š<code>keepAliveTime</code>ï¼šæŒ‡å®šä¸´æ—¶çº¿ç¨‹çš„å­˜æ´»æ—¶é—´</li>
<li>å‚æ•°å››ï¼š<code>unit</code>:æŒ‡å®šä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´å•ä½ï¼ˆç§’ï¼Œåˆ†ï¼Œæ—¶ï¼Œå¤©ï¼‰</li>
<li>å‚æ•°äº”ï¼š<code>workQueue</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å‚æ•°å…­ï¼š<code>threadFactory</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„çº¿ç¨‹å·¥å‚</li>
<li>å‚æ•°ä¸ƒï¼š<code>handler</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼ˆçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†çš„æ—¶å€™ï¼Œæ–°ä»»åŠ¡æ¥äº†è¯¥æ€ä¹ˆå¤„ç†ï¼‰</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ol>
<li><strong>ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Ÿ</strong>
<ul>
<li>æ–°ä»»åŠ¡æäº¤æ—¶å‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶æ‰ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹</li>
</ul>
</li>
<li><strong>ä»€ä¹ˆæ—¶å€™ä¼šå¼€å§‹æ‹’ç»æ–°ä»»åŠ¡ï¼Ÿ</strong>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹å’Œä¸´æ—¶çº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œæ–°çš„ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šå¼€å§‹æ‹’ç»æ–°ä»»åŠ¡</li>
</ul>
</li>
</ol>
<h3 id="æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥<a hidden class="anchor" aria-hidden="true" href="#æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:center"><code>ç­–ç•¥</code></th>
<th style="text-align:center"><code>è§£é‡Š</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.AbortPolicy</code></td>
<td style="text-align:center">å½“ä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± ä¸­è¢«æ‹’ç»æ—¶ï¼ŒæŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸ã€‚ï¼ˆé»˜è®¤ç­–ç•¥ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.DiscardPolicy</code></td>
<td style="text-align:center">ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä¸æ¨è</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.DiscardOldestPolicy</code></td>
<td style="text-align:center">æŠ›å¼ƒé˜Ÿåˆ—ä¸­<strong>ç­‰å¾…æœ€ä¹…</strong>çš„ä»»åŠ¡ï¼Œç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.CallerRunsPolicy</code></td>
<td style="text-align:center">ç”±ä¸»çº¿ç¨‹è´Ÿè´£è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ä»è€Œç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="executorserviceçš„å¸¸ç”¨æ–¹æ³•"><code>ExecutorService</code>çš„å¸¸ç”¨æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#executorserviceçš„å¸¸ç”¨æ–¹æ³•">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>æ–¹æ³•ã€æè¿°</strong></th>
<th style="text-align:center"><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>execute(Runnable command)</code></td>
<td style="text-align:center">æ‰§è¡ŒRunnableä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center"><code>submit(Callable&lt;T&gt; task)</code></td>
<td style="text-align:center">æ‰§è¡ŒCallableä»»åŠ¡ï¼Œè¿”å›æœªæ¥ä»»åŠ¡å¯¹è±¡ï¼Œç”¨äºè·å–çº¿ç¨‹è¿”å›çš„ç»“æœ</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdown()</code></td>
<td style="text-align:center">ç­‰å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†å…³é—­çº¿ç¨‹æ± ï¼</td>
</tr>
<tr>
<td style="text-align:center"><code>List&lt;Runnable&gt; shutdownNow()</code></td>
<td style="text-align:center">ç«‹åˆ»å…³é—­çº¿ç¨‹æ± ï¼Œåœæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›é˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„ä»»åŠ¡</td>
</tr>
</tbody>
</table>
<h4 id="æ‰§è¡Œrunnableä»»åŠ¡">æ‰§è¡ŒRunnableä»»åŠ¡<a hidden class="anchor" aria-hidden="true" href="#æ‰§è¡Œrunnableä»»åŠ¡">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºçº¿ç¨‹æ± </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä½¿ç”¨ ThreadPoolExecutor æ„é€ æ–¹æ³•è‡ªå®šä¹‰çº¿ç¨‹æ± </span>
</span></span><span style="display:flex;"><span>        ExecutorService pool <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ThreadPoolExecutor(
</span></span><span style="display:flex;"><span>                3, <span style="color:#75715e">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
</span></span><span style="display:flex;"><span>                5, <span style="color:#75715e">// æœ€å¤§çº¿ç¨‹æ•°</span>
</span></span><span style="display:flex;"><span>                8, <span style="color:#75715e">// çº¿ç¨‹ç©ºé—²æ—¶é—´</span>
</span></span><span style="display:flex;"><span>                TimeUnit.<span style="color:#a6e22e">SECONDS</span>, <span style="color:#75715e">// æ—¶é—´å•ä½</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> ArrayBlockingQueue<span style="color:#f92672">&lt;&gt;</span>(4), <span style="color:#75715e">// å·¥ä½œé˜Ÿåˆ—</span>
</span></span><span style="display:flex;"><span>                Executors.<span style="color:#a6e22e">defaultThreadFactory</span>(), <span style="color:#75715e">// çº¿ç¨‹å·¥å‚ï¼Œ ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹çš„å®ä¾‹ã€‚</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> ThreadPoolExecutor.<span style="color:#a6e22e">CallerRunsPolicy</span>() <span style="color:#75715e">// æ‹’ç»ç­–ç•¥</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        Runnable target <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyRunnable();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æäº¤ä»»åŠ¡ç»™çº¿ç¨‹æ± æ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// ä½¿ç”¨ä¸´æ—¶çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// ä½¿ç”¨ä¸´æ—¶çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// æ‰§è¡Œä»»åŠ¡è¢«æ‹’ç»ï¼ˆæ‹’ç»ç­–ç•¥å†³å®šï¼‰</span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">execute</span>(target); <span style="color:#75715e">// æ‰§è¡Œä»»åŠ¡è¢«æ‹’ç»ï¼ˆæ‹’ç»ç­–ç•¥å†³å®šï¼‰</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å…³é—­çº¿ç¨‹æ± </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        pool.shutdown();</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        pool.shutdownNow();</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è‡ªå®šä¹‰ä»»åŠ¡</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRunnable</span> <span style="color:#66d9ef">implements</span> Runnable {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä»»åŠ¡é€»è¾‘</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="æ‰§è¡Œcallableä»»åŠ¡">æ‰§è¡ŒCallableä»»åŠ¡<a hidden class="anchor" aria-hidden="true" href="#æ‰§è¡Œcallableä»»åŠ¡">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> ExecutionException, InterruptedException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºçº¿ç¨‹æ± </span>
</span></span><span style="display:flex;"><span>        ExecutorService pool <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ThreadPoolExecutor(
</span></span><span style="display:flex;"><span>                3, <span style="color:#75715e">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
</span></span><span style="display:flex;"><span>                5, <span style="color:#75715e">// æœ€å¤§çº¿ç¨‹æ•°</span>
</span></span><span style="display:flex;"><span>                8, <span style="color:#75715e">// çº¿ç¨‹ç©ºé—²æ—¶é—´</span>
</span></span><span style="display:flex;"><span>                TimeUnit.<span style="color:#a6e22e">SECONDS</span>, <span style="color:#75715e">// æ—¶é—´å•ä½</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> ArrayBlockingQueue<span style="color:#f92672">&lt;&gt;</span>(4), <span style="color:#75715e">// å·¥ä½œé˜Ÿåˆ—</span>
</span></span><span style="display:flex;"><span>                Executors.<span style="color:#a6e22e">defaultThreadFactory</span>(), <span style="color:#75715e">// çº¿ç¨‹å·¥å‚</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> ThreadPoolExecutor.<span style="color:#a6e22e">CallerRunsPolicy</span>() <span style="color:#75715e">// æ‹’ç»ç­–ç•¥</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æäº¤å¯è°ƒç”¨ä»»åŠ¡ç»™çº¿ç¨‹æ± æ‰§è¡Œ</span>
</span></span><span style="display:flex;"><span>        Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> f1 <span style="color:#f92672">=</span> pool.<span style="color:#a6e22e">submit</span>(<span style="color:#66d9ef">new</span> MyCallable(100)); <span style="color:#75715e">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> f2 <span style="color:#f92672">=</span> pool.<span style="color:#a6e22e">submit</span>(<span style="color:#66d9ef">new</span> MyCallable(200)); <span style="color:#75715e">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> f3 <span style="color:#f92672">=</span> pool.<span style="color:#a6e22e">submit</span>(<span style="color:#66d9ef">new</span> MyCallable(300)); <span style="color:#75715e">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>        Future<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> f4 <span style="color:#f92672">=</span> pool.<span style="color:#a6e22e">submit</span>(<span style="color:#66d9ef">new</span> MyCallable(400)); <span style="color:#75715e">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// è·å–ä»»åŠ¡æ‰§è¡Œç»“æœå¹¶è¾“å‡º</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(f1.<span style="color:#a6e22e">get</span>()); <span style="color:#75715e">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(f2.<span style="color:#a6e22e">get</span>()); <span style="color:#75715e">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(f3.<span style="color:#a6e22e">get</span>()); <span style="color:#75715e">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(f4.<span style="color:#a6e22e">get</span>()); <span style="color:#75715e">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å…³é—­çº¿ç¨‹æ± </span>
</span></span><span style="display:flex;"><span>        pool.<span style="color:#a6e22e">shutdown</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è‡ªå®šä¹‰å¯è°ƒç”¨ä»»åŠ¡</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyCallable</span> <span style="color:#66d9ef">implements</span> Callable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> value;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">MyCallable</span>(<span style="color:#66d9ef">int</span> value) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">call</span>() <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ä»»åŠ¡é€»è¾‘</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Result: &#34;</span> <span style="color:#f92672">+</span> value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="executors"><code>Executors</code><a hidden class="anchor" aria-hidden="true" href="#executors">#</a></h3>
<ul>
<li>æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± çš„å·¥å…·ç±»ï¼Œæä¾›é‡Œå¾ˆå¤šé™æ€æ–¹æ³•ç”¨äºè¿”å›ä¸åŒç‰¹ç‚¹çš„çº¿ç¨‹æ± å¯¹è±¡</li>
</ul>
<p><code>Executors</code>ä½¿ç”¨å¯èƒ½å­˜åœ¨çš„é™·è¿›</p>
<ul>
<li>å¤§å‹å¹¶å‘ç³»ç»Ÿç¯å¢ƒä¸­ä½¿ç”¨<code>Executors</code>å¦‚æœä¸æ³¨æ„å¯èƒ½ä¼šå‡ºç°ç³»ç»Ÿé£é™©</li>
</ul>
<blockquote>
<ol start="4">
<li>ã€å¼ºåˆ¶ã€‘çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™
æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚
è¯´æ˜ï¼šExecutors è¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š
1ï¼‰ FixedThreadPool å’Œ SingleThreadPoolï¼š
å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´ OOM(OutOfMemoryError)ã€‚
2ï¼‰ CachedThreadPoolï¼š
å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</li>
</ol>
</blockquote>
<h3 id="volatile-å…³é”®å­—"><code>volatile</code> å…³é”®å­—<a hidden class="anchor" aria-hidden="true" href="#volatile-å…³é”®å­—">#</a></h3>
<h4 id="ä½œç”¨">ä½œç”¨:<a hidden class="anchor" aria-hidden="true" href="#ä½œç”¨">#</a></h4>
<ol>
<li><strong>å¯è§æ€§ä¿è¯</strong> ï¼š å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æœä½¿ç”¨ä¸åŒçš„åŒæ­¥æœºåˆ¶ï¼Œçº¿ç¨‹å¯èƒ½ä¼šç¼“å­˜å˜é‡çš„å€¼ï¼Œå¹¶ä¸ä¼šç«‹å³ä»ä¸»å†…å­˜ä¸­è¯»å–æˆ–å†™å›ï¼Œä½¿ç”¨<code>volatile</code>ä¿®é¥°çš„å˜é‡ï¼Œèƒ½å¤Ÿä¿è¯å¯¹è¯¥å˜é‡çš„æ‰€æœ‰å†™æ“ä½œéƒ½ä¼š<strong>ç«‹å³</strong>è¢«åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œæ‰€æœ‰å¯¹å®ƒçš„è¯»å–æ“ä½œä¹Ÿä¼š<strong>ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å–</strong>ï¼Œè€Œä¸æ˜¯ä»çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­è¯»å–ã€‚å³ä¸€ä¸ªçº¿ç¨‹å¯¹volatileå˜é‡æ‰€åšçš„å†™æ“ä½œï¼Œå¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚</li>
<li><strong>é˜²æ­¢æŒ‡ä»¤é‡æ’</strong>ï¼šJavaç¼–è¯‘å™¨ï¼ŒJVMï¼Œå’ŒCPUåœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œå¯èƒ½ä¼šä¸ºäº†æé«˜æ€§èƒ½è€Œå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œè¿™å›å¯¼è‡´æŸäº›æ“ä½œçš„æ‰§è¡Œé¡ºåºå’Œä»£ç ä¸­çš„é¡ºåºä¸ä¸€æ ·ã€‚volatileä¿è¯åœ¨è¯»å–æˆ–å†™å…¥å˜é‡æ—¶ï¼Œä¹‹å‰çš„æ“ä½œä¸€å®šå·²ç»å®Œæˆï¼Œä¹‹åçš„æ“ä½œä¸€å®šä¸ä¼šè¢«é‡æ’åºåˆ°å®ƒä¹‹å‰ã€‚</li>
</ol>
<h4 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹ï¼š<a hidden class="anchor" aria-hidden="true" href="#æ³¨æ„ç‚¹">#</a></h4>
<ol>
<li><strong>ä¸èƒ½ä¿è¯åŸå­æ€§</strong>ï¼š<code>volatile</code>ä»…ä»…ä¿è¯äº†å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œä½†å®ƒå¹¶ä¸èƒ½ä¿è¯<strong>æ“ä½œçš„åŸå­æ€§</strong>ã€‚ä¾‹å¦‚ï¼Œå¯¹äº<code>volatile int</code>å˜é‡è¿›è¡Œè‡ªå¢æ“ä½œ <code>count ++</code> , å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºè‡ªå¢æ“ä½œå®é™…ä¸Šåˆ†ä¸ºä¸‰æ­¥ï¼ˆè¯»å–ï¼ŒåŠ ä¸€ï¼Œå†™å›ï¼‰ï¼Œè¿™äº›æ­¥éª¤å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè€Œäº’ç›¸å¹²æ‰°ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå“ªäº›éœ€è¦<strong>ç®€å•è¯»å†™æ“ä½œçš„å…±äº«å˜é‡</strong>ï¼Œæ¯”å¦‚æ ‡å¿—ä½ï¼ŒçŠ¶æ€å˜é‡ç­‰ã€‚å¦‚æœéœ€è¦æ›´å¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ä½¿ç”¨<code>synchronized</code>æˆ–å…¶ä»–é”æœºåˆ¶ã€‚</li>
</ol>
<h2 id="å¹¶å‘å¹¶è¡Œ">å¹¶å‘ã€å¹¶è¡Œ<a hidden class="anchor" aria-hidden="true" href="#å¹¶å‘å¹¶è¡Œ">#</a></h2>
<p><strong>è¿›ç¨‹</strong></p>
<ul>
<li>æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼ˆè½¯ä»¶ï¼‰å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹</li>
<li>çº¿ç¨‹æ˜¯å±äºè¿›ç¨‹çš„ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹</li>
<li>è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…¶å®æ˜¯å¹¶å‘å’Œå¹¶è¡Œæ‰§è¡Œçš„</li>
</ul>
<p><strong>å¹¶å‘çš„å«ä¹‰</strong></p>
<ul>
<li>è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ˜¯ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œçš„ï¼Œä½†CPUèƒ½åŒæ—¶å¤„ç†çº¿ç¨‹çš„æ•°é‡æœ‰é™ï¼Œä¸ºäº†ä¿è¯å…¨éƒ¨çº¿ç¨‹éƒ½èƒ½å¾€å‰æ‰§è¡Œï¼Œ CPUä¼šè½®è¯¢ä¸ºç³»ç»Ÿçš„æ¯ä¸ªçº¿ç¨‹æœåŠ¡ï¼Œç”±äºCPUåˆ‡æ¢çš„é€Ÿåº¦å¾ˆå¿«ï¼Œç»™æˆ‘ä»¬çš„æ„Ÿè§‰è¿™äº›çº¿ç¨‹åœ¨åŒæ—¶æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¹¶å‘</li>
</ul>
<p><strong>å¹¶è¡Œçš„ç†è§£</strong></p>
<ul>
<li>åœ¨åŒä¸€ä¸ªæ—¶åˆ»ä¸Šï¼ŒåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹åœ¨è¢«CPUè°ƒåº¦æ‰§è¡Œ</li>
</ul>
<h3 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">#</a></h3>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240421160224752.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240421160224752.png" alt="image-20240421160224752"  />
        </a>
    </div>
</p>
<h4 id="çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">#</a></h4>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>çŠ¶æ€åç§°</strong></th>
<th style="text-align:left"><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">NEW(æ–°å»º)</td>
<td style="text-align:left">çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨</td>
</tr>
<tr>
<td style="text-align:left">Runnable(å¯è¿è¡Œ)</td>
<td style="text-align:left">çº¿ç¨‹å·²ç»è°ƒç”¨äº†start()ï¼Œ ç­‰å¾…CPUè°ƒåº¦</td>
</tr>
<tr>
<td style="text-align:left">Blocked(è¢«é˜»å¡)</td>
<td style="text-align:left">çº¿ç¨‹åœ¨æ‰§è¡Œçš„æ—¶å€™æœªç«äº‰åˆ°é”å¯¹è±¡ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">Waiting(ç­‰å¾…)</td>
<td style="text-align:left">ä¸€ä¸ªçº¿ç¨‹è¿›å…¥WaitingçŠ¶æ€ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹éœ€è¦Notifyæˆ–è€…notifyAllæ‰èƒ½å¤Ÿå”¤é†’ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Timed Waiting (è®¡æ—¶ç­‰å¾…)</td>
<td style="text-align:left">åŒWaitingçŠ¶æ€ç±»ä¼¼ï¼Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼ˆsleepï¼Œ waitï¼‰æœ‰è¶…æ—¶å‚æ•°ï¼Œè°ƒç”¨ä»–ä»¬å°†è¿›å…¥Timed WaitingçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">Terminated (è¢«ç»ˆæ­¢)</td>
<td style="text-align:left">å› ä¸ºrunæ–¹æ³•æ­£å¸¸é€€å‡ºè€Œæ­»äº¡ï¼Œæˆ–è€…å› ä¸ºæ²¡æœ‰æ•è·çš„å¼‚å¸¸ç»ˆæ­¢äº†runæ–¹æ³•è€Œæ­»äº¡.</td>
</tr>
</tbody>
</table>
<h2 id="æ‚²è§‚é”ä¹è§‚é”åŸç†">æ‚²è§‚é”ã€ä¹è§‚é”åŸç†<a hidden class="anchor" aria-hidden="true" href="#æ‚²è§‚é”ä¹è§‚é”åŸç†">#</a></h2>
<ul>
<li>æ‚²è§‚é”ï¼šä¸€ä¸Šæ¥å°±åŠ é”ï¼Œæ²¡æœ‰å®‰å…¨æ„Ÿï¼Œæ¯æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è®¿é—®å®Œæ¯•åï¼Œå†è§£é”ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå·®</li>
<li>ä¹è§‚é”ï¼šä¸€å¼€å§‹ä¸ä¸Šé”ï¼Œè®¤ä¸ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¤§å®¶ä¸€èµ·è·‘ï¼Œç­‰è¦å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ—¶å€™æ‰å¼€å§‹æ§åˆ¶ã€‚çº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå¥½
<ul>
<li>CASç®—æ³•</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ExtendDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.atomic.AtomicInteger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†ä¹è§‚é”çš„ä½¿ç”¨ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * ä¹è§‚é”æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå®ƒå‡è®¾å¯¹æ•°æ®çš„è¯»å–æ“ä½œä¸ä¼šé€ æˆæ•°æ®å†²çªï¼Œå› æ­¤ä¸éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”æ“ä½œã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * ç›¸åï¼Œå®ƒåœ¨æ›´æ–°æ•°æ®æ—¶æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœæœ‰åˆ™è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚é‡è¯•æˆ–è€…æ”¾å¼ƒæ›´æ–°ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†ä¸¤ç§å®ç°æ–¹å¼ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 1. ä½¿ç”¨ synchronized å…³é”®å­—å®ç°çš„æ‚²è§‚é”ï¼ˆMyRunnable ç±»ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 2. ä½¿ç”¨ AtomicInteger å®ç°çš„ä¹è§‚é”ï¼ˆMyRunnable2 ç±»ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * MyRunnable ç±»ä¸­ä½¿ç”¨äº† synchronized å…³é”®å­—æ¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯¹ count å˜é‡çš„å®‰å…¨è®¿é—®ï¼Œå®ƒæ˜¯ä¸€ç§æ‚²è§‚é”çš„å®ç°æ–¹å¼ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * æ¯ä¸ªçº¿ç¨‹åœ¨è®¿é—® count å˜é‡æ—¶éƒ½éœ€è¦è·å¾—å¯¹è±¡é”ï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡Œä¸´ç•ŒåŒºä»£ç ï¼Œå…¶ä»–çº¿ç¨‹éœ€è¦ç­‰å¾…é‡Šæ”¾é”æ‰èƒ½æ‰§è¡Œã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * MyRunnable2 ç±»ä¸­ä½¿ç”¨äº† AtomicInteger æ¥å®ç°ä¹è§‚é”ã€‚AtomicInteger æä¾›äº†ä¸€ç§åŸå­æ€§çš„æ›´æ–°æ“ä½œï¼Œä¿è¯äº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å®‰å…¨è®¿é—®ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * åœ¨è¿™ç§å®ç°æ–¹å¼ä¸­ï¼Œçº¿ç¨‹ä¸éœ€è¦è·å–é”ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡åŸå­æ€§çš„æ“ä½œæ¥æ›´æ–° count å˜é‡ï¼Œå› æ­¤å¯ä»¥å®ç°æ›´é«˜çš„å¹¶å‘æ€§èƒ½ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„é”æœºåˆ¶å–å†³äºå…·ä½“çš„åœºæ™¯å’Œæ€§èƒ½éœ€æ±‚ã€‚å¦‚æœå¯¹æ•°æ®çš„æ›´æ–°æ“ä½œæ¯”è¾ƒé¢‘ç¹ï¼Œä¸”ç«äº‰ä¸æ˜¯å¾ˆæ¿€çƒˆï¼Œå¯ä»¥é€‰æ‹©ä¹è§‚é”æ¥æå‡æ€§èƒ½ï¼›
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * å¦‚æœç«äº‰æ¯”è¾ƒæ¿€çƒˆï¼Œæˆ–è€…å¯¹æ•°æ®çš„ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜ï¼Œåˆ™å¯ä»¥é€‰æ‹©æ‚²è§‚é”æ¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Demo1</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        Runnable target = new MyRunnable();</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        for (int i = 1; i &lt;= 100; i++) {</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//            new Thread(target).start();</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        }</span>
</span></span><span style="display:flex;"><span>        Runnable target <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyRunnable2();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1; i <span style="color:#f92672">&lt;=</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Thread(target).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ExtendDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * å®ç°äº† Runnable æ¥å£çš„ç±»ï¼Œä½¿ç”¨ synchronized å…³é”®å­—å®ç°çš„æ‚²è§‚é”ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRunnable</span> <span style="color:#66d9ef">implements</span> Runnable{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">synchronized</span> (<span style="color:#66d9ef">this</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1; i <span style="color:#f92672">&lt;=</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span><span style="color:#75715e">//                System.out.println(this);</span>
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;  Count:  &#34;</span> <span style="color:#f92672">+</span> (<span style="color:#f92672">++</span>count));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.ExtendDemo;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.atomic.AtomicInteger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * å®ç°äº† Runnable æ¥å£çš„ç±»ï¼Œä½¿ç”¨ AtomicInteger å®ç°çš„ä¹è§‚é”ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRunnable2</span> <span style="color:#66d9ef">implements</span> Runnable{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> AtomicInteger count <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> AtomicInteger();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1; i <span style="color:#f92672">&lt;=</span> 100; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span><span style="color:#75715e">//                System.out.println(this);</span>
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;  Count:  &#34;</span> <span style="color:#f92672">+</span> (count.<span style="color:#a6e22e">incrementAndGet</span>()));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹<a hidden class="anchor" aria-hidden="true" href="#æ¡ˆä¾‹">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Random;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Demo1</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> InterruptedException {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºç¤¼ç‰©åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> gift <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å®šä¹‰ç¤¼ç‰©åç§°æ•°ç»„</span>
</span></span><span style="display:flex;"><span>        String<span style="color:#f92672">[]</span> names <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;å£çº¢&#34;</span>, <span style="color:#e6db74">&#34;çˆ±é©¬ä»•&#34;</span>, <span style="color:#e6db74">&#34;iphone&#34;</span>, <span style="color:#e6db74">&#34;æ‰‹è¡¨&#34;</span>, <span style="color:#e6db74">&#34;mac&#34;</span>};
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// éšæœºæ•°ç”Ÿæˆå™¨</span>
</span></span><span style="display:flex;"><span>        Random r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// å¾ªç¯æ·»åŠ ç¤¼ç‰©åˆ°åˆ—è¡¨ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 1; i <span style="color:#f92672">&lt;=</span> 1000; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            gift.<span style="color:#a6e22e">add</span>(names<span style="color:#f92672">[</span>r.<span style="color:#a6e22e">nextInt</span>(names.<span style="color:#a6e22e">length</span>)<span style="color:#f92672">]</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> (i<span style="color:#f92672">+</span>1)); <span style="color:#75715e">// åœ¨ç¤¼ç‰©åˆ—è¡¨ä¸­æ·»åŠ éšæœºé€‰å–çš„ç¤¼ç‰©</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(gift); <span style="color:#75715e">// æ‰“å°ç¤¼ç‰©åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;-------------&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// åˆ›å»ºä¸¤ä¸ªå‘é€çº¿ç¨‹ï¼Œåˆ†åˆ«ä»£è¡¨å°çº¢å’Œå°æ˜</span>
</span></span><span style="display:flex;"><span>        SendThread xh <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SendThread(gift, <span style="color:#e6db74">&#34;å°çº¢&#34;</span>);
</span></span><span style="display:flex;"><span>        xh.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>        SendThread xm <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SendThread(gift, <span style="color:#e6db74">&#34;å°æ˜&#34;</span>);
</span></span><span style="display:flex;"><span>        xm.<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ç­‰å¾…ä¸¤ä¸ªå‘é€çº¿ç¨‹ç»“æŸ</span>
</span></span><span style="display:flex;"><span>        xm.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>        xh.<span style="color:#a6e22e">join</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// æ‰“å°ä¸¤ä¸ªå‘é€çº¿ç¨‹å‘é€çš„ç¤¼ç‰©æ•°é‡</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å°æ˜å‘å‡ºäº†ï¼š&#34;</span> <span style="color:#f92672">+</span> xm.<span style="color:#a6e22e">getCount</span>());
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;å°çº¢å‘å‡ºäº†ï¼š&#34;</span> <span style="color:#f92672">+</span> xh.<span style="color:#a6e22e">getCount</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.showguan.Test;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.List;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Random;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SendThread</span> <span style="color:#66d9ef">extends</span> Thread {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> gift; <span style="color:#75715e">// ç¤¼ç‰©åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count; <span style="color:#75715e">// å‘é€çš„ç¤¼ç‰©æ•°é‡</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ„é€ æ–¹æ³•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">SendThread</span>(List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> gift, String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>(name); <span style="color:#75715e">// è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹å</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gift</span> <span style="color:#f92672">=</span> gift; <span style="color:#75715e">// åˆå§‹åŒ–ç¤¼ç‰©åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        Random r <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random(); <span style="color:#75715e">// éšæœºæ•°ç”Ÿæˆå™¨</span>
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> Thread.<span style="color:#a6e22e">currentThread</span>().<span style="color:#a6e22e">getName</span>(); <span style="color:#75715e">// è·å–å½“å‰çº¿ç¨‹å</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">synchronized</span> (gift){ <span style="color:#75715e">// åŒæ­¥å—ï¼Œç¡®ä¿ç¤¼ç‰©åˆ—è¡¨çš„çº¿ç¨‹å®‰å…¨</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(gift.<span style="color:#a6e22e">size</span>()<span style="color:#f92672">&lt;</span>10){ <span style="color:#75715e">// å½“ç¤¼ç‰©åˆ—è¡¨æ•°é‡å°äº10æ—¶ï¼Œç»“æŸå¾ªç¯</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                String rs <span style="color:#f92672">=</span> gift.<span style="color:#a6e22e">remove</span>(r.<span style="color:#a6e22e">nextInt</span>(gift.<span style="color:#a6e22e">size</span>())); <span style="color:#75715e">// ä»ç¤¼ç‰©åˆ—è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç¤¼ç‰©ï¼Œå¹¶ç§»é™¤</span>
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; å‘å‡ºäº†ç¤¼å“ï¼š &#34;</span> <span style="color:#f92672">+</span> rs); <span style="color:#75715e">// æ‰“å°å‘é€çš„ç¤¼ç‰©ä¿¡æ¯</span>
</span></span><span style="display:flex;"><span>                count<span style="color:#f92672">++</span>; <span style="color:#75715e">// è®°å½•å‘é€çš„ç¤¼ç‰©æ•°é‡</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è·å–å‘é€çš„ç¤¼ç‰©æ•°é‡</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è®¾ç½®å‘é€çš„ç¤¼ç‰©æ•°é‡</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setCount</span>(<span style="color:#66d9ef">int</span> count) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> count;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/java/">Java</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Javaå­¦ä¹ ç¬”è®°</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B39420240421/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>LeetCodeå‘¨èµ›240421</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B3/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(3)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
