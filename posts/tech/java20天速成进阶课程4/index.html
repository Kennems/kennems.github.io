<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4) | Kennem&#39;s Blog</title>
<meta name="keywords" content="Java">
<meta name="description" content="Javaå­¦ä¹ ç¬”è®°">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1a7bc7e6d01b82c8ca2b2e53cfcf7e33d2fd9058f6b28245f94da0d91447c6a0.css" integrity="sha256-GnvH5tAbgsjKKy5Tz89&#43;M9L9kFj2soJF&#43;U2g2RRHxqA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>


<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

<meta property="og:url" content="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">
  <meta property="og:description" content="Javaå­¦ä¹ ç¬”è®°">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-20T22:30:13+08:00">
    <meta property="article:modified_time" content="2024-09-11T22:20:13+08:00">
    <meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">
<meta name="twitter:description" content="Javaå­¦ä¹ ç¬”è®°">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ğŸ“šæ–‡ç« ",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ’»æŠ€æœ¯",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
      "item": "https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
  "name": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)",
  "description": "Javaå­¦ä¹ ç¬”è®°",
  "keywords": [
    "Java"
  ],
  "articleBody": "Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4) ç‰¹æ®Šæ–‡ä»¶ properties, xml\nä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç‰¹æ®Šæ–‡ä»¶ï¼Ÿ\nå­˜å‚¨å¤šä¸ªç”¨æˆ·çš„ï¼šç”¨æˆ·åï¼Œ å¯†ç ï¼Œ å®¶ä¹¡ï¼Œ æ€§åˆ«\næ—¥å¿—æŠ€æœ¯\næŠŠç¨‹åºè¿è¡Œçš„ä¿¡æ¯ï¼Œè®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å®šä½bugï¼Œ å¹¶äº†è§£ç¨‹åºçš„æ‰§è¡Œæƒ…å†µç­‰ã€‚\nProperties æ˜¯ä¸€ä¸ªMapé›†åˆï¼ˆé”®å€¼å¯¹é›†åˆï¼‰ï¼Œ ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šå½“é›†åˆä½¿ç”¨ æ ¸å¿ƒä½œç”¨ï¼šPropertiesæ˜¯ç”¨æ¥ä»£è¡¨å±æ€§æ–‡ä»¶çš„ï¼Œé€šè¿‡Propertieså¯ä»¥è¯»å†™å±æ€§æ–‡ä»¶é‡Œé¢çš„å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 public static void main(String[] args) throws IOException { // åˆ›å»ºä¸€ä¸ªPropertieså¯¹è±¡ Properties properties = new Properties(); // è¾“å‡ºåˆå§‹çš„Propertieså¯¹è±¡ï¼Œæ­¤æ—¶ä¸ºç©º System.out.println(properties); // ä»æ–‡ä»¶åŠ è½½Propertiesæ•°æ® properties.load(new FileReader(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\users.properties\")); // è¾“å‡ºåŠ è½½åçš„Propertieså¯¹è±¡ï¼ŒåŒ…å«ä»æ–‡ä»¶ä¸­è¯»å–çš„é”®å€¼å¯¹ System.out.println(properties); // æ ¹æ®æŒ‡å®šé”®å–å¾—å¯¹åº”çš„å€¼ System.out.println(properties.get(\"ken\")); // è·å–Propertieså¯¹è±¡ä¸­æ‰€æœ‰çš„é”®ï¼Œå¹¶éå†è¾“å‡ºæ¯ä¸ªé”®å€¼å¯¹ Set\u003cString\u003e keys = properties.stringPropertyNames(); for (String key : keys) { String val = properties.getProperty(key); System.out.println(key + \"----\u003e\" + val); } } XML æœ¬è´¨æ˜¯ä¸€ç§æ•°æ®çš„æ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå’Œæ•°æ®å…³ç³» XMLç‰¹ç‚¹\nXMLä¸­çš„\u003cæ ‡ç­¾å\u003eç§°ä¸ºä¸€ä¸ªæ ‡ç­¾æˆ–ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬æ˜¯æˆå¯¹å‡ºç°çš„ xmlè§£æ(dom4j) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 public static void main(String[] args) throws DocumentException { // åˆ›å»ºSAXReaderå¯¹è±¡ SAXReader saxReader = new SAXReader(); // ä½¿ç”¨SAXReaderè§£æXMLæ–‡ä»¶å¹¶ç”ŸæˆDocumentå¯¹è±¡ Document document = saxReader.read(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\helloworld.xml\"); // è·å–XMLæ–‡æ¡£çš„æ ¹å…ƒç´ å¹¶è¾“å‡ºå…¶åç§° Element root = document.getRootElement(); System.out.println(root.getName()); // è·å–æ ¹å…ƒç´ ä¸‹åä¸º\"user\"çš„æ‰€æœ‰å­å…ƒç´ å¹¶è¾“å‡ºå®ƒä»¬çš„åç§° List\u003cElement\u003e elements = root.elements(\"user\"); for (Element element : elements) { System.out.println(element.getName()); } // è·å–åä¸º\"people\"çš„å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º Element people = root.element(\"people\"); System.out.println(people.getText()); // è·å–åä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"user\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º Element user = root.element(\"user\"); System.out.println(user.elementText(\"user\")); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„åä¸º\"id\"çš„å±æ€§å€¼å¹¶è¾“å‡º System.out.println(user.attributeValue(\"id\")); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„åä¸º\"id\"çš„å±æ€§ï¼Œå¹¶è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼ Attribute id = user.attribute(\"id\"); System.out.println(id.getName()); System.out.println(id.getValue()); // è·å–åä¸º\"user\"çš„å…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶è¾“å‡ºå®ƒä»¬çš„åå’Œå€¼ List\u003cAttribute\u003e attributes = user.attributes(); for (Attribute attribute : attributes) { System.out.println(attribute.getName() + attribute.getValue()); } // è¾“å‡ºåä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"name\"ã€\"åœ°å€\"å’Œ\"password\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ System.out.println(user.elementText(\"name\")); System.out.println(user.elementText(\"åœ°å€\")); System.out.println(user.elementText(\"password\")); // è·å–åä¸º\"user\"çš„å…ƒç´ ä¸‹åä¸º\"data\"çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶è¾“å‡ºåŒ…æ‹¬å‰åç©ºæ ¼çš„æ–‡æœ¬å’Œå»é™¤å‰åç©ºæ ¼çš„æ–‡æœ¬ Element data = user.element(\"data\"); System.out.println(data.getText()); System.out.println(data.getTextTrim()); //å»é™¤å‰åç©ºæ ¼ } å†™å…¥XMLæ–‡ä»¶ ä½¿ç”¨ç¨‹åºæŠŠæ•°æ®å†™å‡ºåˆ°xmlä¸­\nä¸å»ºè®®ä½¿ç”¨dom4jï¼Œ æ¨èç›´æ¥æŠŠç¨‹åºé‡Œçš„æ•°æ®æ‹¼æ¥æˆxmlæ ¼å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 public static void main(String[] args) throws IOException { // åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç”¨äºæ„å»ºXMLå†…å®¹ StringBuilder sb = new StringBuilder(); // æ„å»ºXMLå¤´éƒ¨ä¿¡æ¯å’Œæ ¹å…ƒç´  sb.append(\"\u003c?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\" ?\u003e\"); sb.append(\"\\r\\n\"); // æ·»åŠ ä¹¦åã€ä½œè€…å’Œä»·æ ¼ä¿¡æ¯ä½œä¸ºå­å…ƒç´  sb.append(\"\").append(\"ä»å…¥é—¨åˆ°åˆ åº“\").append(\"\\r\\n\"); sb.append(\"\").append(\"ai\").append(\"\\r\\n\"); sb.append(\"\").append(999.999).append(\"\\r\\n\"); // å…³é—­æ ¹å…ƒç´  sb.append(\"\\r\\n\"); try ( // ä½¿ç”¨try-with-resourcesè¯­æ³•åˆ›å»ºBufferedWriterå¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­ BufferedWriter bw = new BufferedWriter(new FileWriter(\"file-io-app\\\\properties-xml-log-app\\\\src\\\\test.xml\")); ){ bw.write(sb.toString()); // å°†StringBuilderå¯¹è±¡ä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­ } catch (Exception e) { e.printStackTrace(); // æ‰“å°å¼‚å¸¸ä¿¡æ¯ } } çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™ å°±æ˜¯é™åˆ¶XMLæ–‡ä»¶åªèƒ½æŒ‰ç…§æŸç§æ ¼å¼è¿›è¡Œä¹¦å†™ çº¦æŸæ–‡æ¡£ï¼š\nä¸“é—¨ç”¨æ¥æ˜¾ç¤ºxmlä¹¦å†™æ ¼å¼çš„æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šé™åˆ¶æ ‡ç­¾ï¼Œå±æ€§è¯¥æ€ä¹ˆå†™ çº¦æŸæ–‡æ¡£çš„åˆ†ç±»\nDTDæ–‡æ¡£ Schemaæ–‡æ¡£ XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨ éœ€æ±‚ï¼šåˆ©ç”¨DTDçº¦æŸæ–‡æ¡£ï¼Œçº¦æŸä¸€ä¸ªXMLæ–‡ä»¶çš„ç¼–å†™ã€‚\nDTD(çº¦æŸæ–‡æ¡£)\n1 2 3 4 5 \u003c!ELEMENT ä¹¦æ¶ (ä¹¦+)\u003e \u003c!ELEMENT ä¹¦ (ä¹¦å,ä½œè€…,å”®ä»·)\u003e \u003c!ELEMENT ä¹¦å (#PCDATA)\u003e \u003c!ELEMENT ä½œè€… (#PCDATA)\u003e \u003c!ELEMENT å”®ä»· (#PCDATA)\u003e XMLæ–‡æ¡£\n1 2 3 4 5 6 7 8 9 \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e \u003c!DOCTYPE ä¹¦æ¶ SYSTEM \"data.dtd\"\u003e \u003cä¹¦æ¶\u003e \u003cä¹¦\u003e \u003cä¹¦å\u003eä»åˆ åº“åˆ°è·‘è·¯\u003c/ä¹¦å\u003e \u003cä½œè€…\u003eKenn\u003c/ä½œè€…\u003e \u003cå”®ä»·\u003e0.3\u003c/å”®ä»·\u003e \u003c/ä¹¦\u003e \u003c/ä¹¦æ¶\u003e XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨ å¯ä»¥çº¦æŸXMLæ–‡ä»¶çš„ç¼–å†™ã€å’Œæ•°æ®ç±»å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u003c?xml version=\"1.0\" encoding=\"UTF-8\" ?\u003e ",
  "wordCount" : "10613",
  "inLanguage": "zh",
  "datePublished": "2024-04-20T22:30:13+08:00",
  "dateModified": "2024-09-11T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B4/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="ğŸ ä¸»é¡µ">
                    <span>ğŸ ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="ğŸ”æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="ğŸ“šæ–‡ç« ">
                    <span>ğŸ“šæ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="â±æ—¶é—´è½´">
                    <span>â±æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="ğŸ”–æ ‡ç­¾">
                    <span>ğŸ”–æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="ğŸ—‚ï¸åˆ†ç±»">
                    <span>ğŸ—‚ï¸åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸å…³äº">
                    <span>ğŸ™‹ğŸ»â€â™‚ï¸å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/">ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://kennems.github.io/posts/tech/">ğŸ’»æŠ€æœ¯</a></div>
    <h1 class="post-title entry-hint-parent">
      Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)
    </h1>
    <div class="post-description">
      Javaå­¦ä¹ ç¬”è®°
    </div>
    <div class="post-meta"><span title='2024-04-20 22:30:13 +0800 CST'>2024-04-20</span>&nbsp;Â·&nbsp;22 åˆ†é’Ÿ&nbsp;Â·&nbsp;10613 å­—&nbsp;Â·&nbsp;updated:&nbsp;2024-09-11&nbsp;Â·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#java20%e5%a4%a9%e9%80%9f%e6%88%90%e8%bf%9b%e9%98%b6%e8%af%be%e7%a8%8b4" aria-label="Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)">Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)</a><ul>
                            
                    <li>
                        <a href="#%e7%89%b9%e6%ae%8a%e6%96%87%e4%bb%b6" aria-label="ç‰¹æ®Šæ–‡ä»¶">ç‰¹æ®Šæ–‡ä»¶</a></li>
                    <li>
                        <a href="#properties" aria-label="Properties">Properties</a></li>
                    <li>
                        <a href="#xml" aria-label="XML">XML</a><ul>
                            
                    <li>
                        <a href="#xml%e8%a7%a3%e6%9e%90dom4j" aria-label="xmlè§£æ(dom4j)">xmlè§£æ(dom4j)</a></li>
                    <li>
                        <a href="#%e5%86%99%e5%85%a5xml%e6%96%87%e4%bb%b6" aria-label="å†™å…¥XMLæ–‡ä»¶">å†™å…¥XMLæ–‡ä»¶</a></li>
                    <li>
                        <a href="#%e7%ba%a6%e6%9d%9fxml%e6%96%87%e4%bb%b6%e7%9a%84%e4%b9%a6%e5%86%99" aria-label="çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™">çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™</a><ul>
                            
                    <li>
                        <a href="#xml%e6%96%87%e6%a1%a3%e7%bb%93%e6%9d%9f-dtd%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨</a></li>
                    <li>
                        <a href="#xml%e6%96%87%e6%a1%a3%e7%bb%93%e6%9d%9f-schema%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#logback%e5%bf%ab%e9%80%9f%e5%85%a5%e9%97%a8" aria-label="Logbackå¿«é€Ÿå…¥é—¨"><code>Logback</code>å¿«é€Ÿå…¥é—¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%a4%9a%e7%ba%bf%e7%a8%8b" aria-label="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a><ul>
                            
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%b8%80%e7%bb%a7%e6%89%bfthread%e7%b1%bb" aria-label="æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»">æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</a></li>
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%ba%8c%e5%ae%9e%e7%8e%b0runnable%e6%8e%a5%e5%8f%a3" aria-label="æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£">æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</a></li>
                    <li>
                        <a href="#%e6%96%b9%e5%bc%8f%e4%b8%89%e5%88%a9%e7%94%a8callable%e6%8e%a5%e5%8f%a3futuretask%e7%b1%bb%e6%9d%a5%e5%ae%9e%e7%8e%b0" aria-label="æ–¹å¼ä¸‰ï¼šåˆ©ç”¨Callableæ¥å£ï¼ŒFutureTaskç±»æ¥å®ç°">æ–¹å¼ä¸‰ï¼šåˆ©ç”¨<code>Callable</code>æ¥å£ï¼Œ<code>FutureTask</code>ç±»æ¥å®ç°</a></li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%b8%b8%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8" aria-label="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e5%90%8c%e6%ad%a5%e7%9a%84%e5%b8%b8%e8%a7%81%e6%96%b9%e6%a1%88" aria-label="çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ</a><ul>
                            
                    <li>
                        <a href="#1-%e5%90%8c%e6%ad%a5%e4%bb%a3%e7%a0%81%e5%9d%97" aria-label="(1) åŒæ­¥ä»£ç å—">(1) åŒæ­¥ä»£ç å—</a></li>
                    <li>
                        <a href="#2-%e5%90%8c%e6%ad%a5%e6%96%b9%e6%b3%95" aria-label="(2) åŒæ­¥æ–¹æ³•">(2) åŒæ­¥æ–¹æ³•</a></li>
                    <li>
                        <a href="#3-lock%e9%94%81" aria-label="(3) Locké”">(3) Locké”</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e9%97%b4%e9%80%9a%e4%bf%a1" aria-label="çº¿ç¨‹é—´é€šä¿¡">çº¿ç¨‹é—´é€šä¿¡</a></li>
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e6%b1%a0" aria-label="çº¿ç¨‹æ± ">çº¿ç¨‹æ± </a><ul>
                            
                    <li>
                        <a href="#%e6%96%b0%e4%bb%bb%e5%8a%a1%e6%8b%92%e7%bb%9d%e7%ad%96%e7%95%a5" aria-label="æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥</a></li>
                    <li>
                        <a href="#executorservice%e7%9a%84%e5%b8%b8%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="ExecutorServiceçš„å¸¸ç”¨æ–¹æ³•"><code>ExecutorService</code>çš„å¸¸ç”¨æ–¹æ³•</a><ul>
                            
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8crunnable%e4%bb%bb%e5%8a%a1" aria-label="æ‰§è¡ŒRunnableä»»åŠ¡">æ‰§è¡ŒRunnableä»»åŠ¡</a></li>
                    <li>
                        <a href="#%e6%89%a7%e8%a1%8ccallable%e4%bb%bb%e5%8a%a1" aria-label="æ‰§è¡ŒCallableä»»åŠ¡">æ‰§è¡ŒCallableä»»åŠ¡</a></li></ul>
                    </li>
                    <li>
                        <a href="#executors" aria-label="Executors"><code>Executors</code></a></li>
                    <li>
                        <a href="#volatile-%e5%85%b3%e9%94%ae%e5%ad%97" aria-label="volatile å…³é”®å­—"><code>volatile</code> å…³é”®å­—</a><ul>
                            
                    <li>
                        <a href="#%e4%bd%9c%e7%94%a8" aria-label="ä½œç”¨:">ä½œç”¨:</a></li>
                    <li>
                        <a href="#%e6%b3%a8%e6%84%8f%e7%82%b9" aria-label="æ³¨æ„ç‚¹ï¼š">æ³¨æ„ç‚¹ï¼š</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e5%b9%b6%e5%8f%91%e5%b9%b6%e8%a1%8c" aria-label="å¹¶å‘ã€å¹¶è¡Œ">å¹¶å‘ã€å¹¶è¡Œ</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</a><ul>
                            
                    <li>
                        <a href="#%e7%ba%bf%e7%a8%8b%e7%9a%846%e7%a7%8d%e7%8a%b6%e6%80%81%e6%80%bb%e7%bb%93" aria-label="çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e6%82%b2%e8%a7%82%e9%94%81%e4%b9%90%e8%a7%82%e9%94%81%e5%8e%9f%e7%90%86" aria-label="æ‚²è§‚é”ã€ä¹è§‚é”åŸç†">æ‚²è§‚é”ã€ä¹è§‚é”åŸç†</a><ul>
                            
                    <li>
                        <a href="#%e6%a1%88%e4%be%8b" aria-label="æ¡ˆä¾‹">æ¡ˆä¾‹</a>
                    </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="java20å¤©é€Ÿæˆè¿›é˜¶è¯¾ç¨‹4">Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(4)<a hidden class="anchor" aria-hidden="true" href="#java20å¤©é€Ÿæˆè¿›é˜¶è¯¾ç¨‹4">#</a></h1>
<h2 id="ç‰¹æ®Šæ–‡ä»¶">ç‰¹æ®Šæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#ç‰¹æ®Šæ–‡ä»¶">#</a></h2>
<p><code>properties</code>, <code>xml</code></p>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç‰¹æ®Šæ–‡ä»¶ï¼Ÿ</strong></p>
<p>å­˜å‚¨å¤šä¸ªç”¨æˆ·çš„ï¼šç”¨æˆ·åï¼Œ å¯†ç ï¼Œ å®¶ä¹¡ï¼Œ æ€§åˆ«</p>
<p><strong>æ—¥å¿—æŠ€æœ¯</strong></p>
<p>æŠŠç¨‹åºè¿è¡Œçš„ä¿¡æ¯ï¼Œè®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å®šä½bugï¼Œ å¹¶äº†è§£ç¨‹åºçš„æ‰§è¡Œæƒ…å†µç­‰ã€‚</p>
<h2 id="properties">Properties<a hidden class="anchor" aria-hidden="true" href="#properties">#</a></h2>
<ul>
<li>æ˜¯ä¸€ä¸ªMapé›†åˆï¼ˆé”®å€¼å¯¹é›†åˆï¼‰ï¼Œ ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šå½“é›†åˆä½¿ç”¨</li>
<li>æ ¸å¿ƒä½œç”¨ï¼šPropertiesæ˜¯ç”¨æ¥ä»£è¡¨å±æ€§æ–‡ä»¶çš„ï¼Œé€šè¿‡Propertieså¯ä»¥è¯»å†™å±æ€§æ–‡ä»¶é‡Œé¢çš„å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a class="lnlinks" href="#hl-0-1"> 1</a>
</span><span class="lnt" id="hl-0-2"><a class="lnlinks" href="#hl-0-2"> 2</a>
</span><span class="lnt" id="hl-0-3"><a class="lnlinks" href="#hl-0-3"> 3</a>
</span><span class="lnt" id="hl-0-4"><a class="lnlinks" href="#hl-0-4"> 4</a>
</span><span class="lnt" id="hl-0-5"><a class="lnlinks" href="#hl-0-5"> 5</a>
</span><span class="lnt" id="hl-0-6"><a class="lnlinks" href="#hl-0-6"> 6</a>
</span><span class="lnt" id="hl-0-7"><a class="lnlinks" href="#hl-0-7"> 7</a>
</span><span class="lnt" id="hl-0-8"><a class="lnlinks" href="#hl-0-8"> 8</a>
</span><span class="lnt" id="hl-0-9"><a class="lnlinks" href="#hl-0-9"> 9</a>
</span><span class="lnt" id="hl-0-10"><a class="lnlinks" href="#hl-0-10">10</a>
</span><span class="lnt" id="hl-0-11"><a class="lnlinks" href="#hl-0-11">11</a>
</span><span class="lnt" id="hl-0-12"><a class="lnlinks" href="#hl-0-12">12</a>
</span><span class="lnt" id="hl-0-13"><a class="lnlinks" href="#hl-0-13">13</a>
</span><span class="lnt" id="hl-0-14"><a class="lnlinks" href="#hl-0-14">14</a>
</span><span class="lnt" id="hl-0-15"><a class="lnlinks" href="#hl-0-15">15</a>
</span><span class="lnt" id="hl-0-16"><a class="lnlinks" href="#hl-0-16">16</a>
</span><span class="lnt" id="hl-0-17"><a class="lnlinks" href="#hl-0-17">17</a>
</span><span class="lnt" id="hl-0-18"><a class="lnlinks" href="#hl-0-18">18</a>
</span><span class="lnt" id="hl-0-19"><a class="lnlinks" href="#hl-0-19">19</a>
</span><span class="lnt" id="hl-0-20"><a class="lnlinks" href="#hl-0-20">20</a>
</span><span class="lnt" id="hl-0-21"><a class="lnlinks" href="#hl-0-21">21</a>
</span><span class="lnt" id="hl-0-22"><a class="lnlinks" href="#hl-0-22">22</a>
</span><span class="lnt" id="hl-0-23"><a class="lnlinks" href="#hl-0-23">23</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªPropertieså¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Properties</span><span class="w"> </span><span class="n">properties</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Properties</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è¾“å‡ºåˆå§‹çš„Propertieså¯¹è±¡ï¼Œæ­¤æ—¶ä¸ºç©º</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">properties</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä»æ–‡ä»¶åŠ è½½Propertiesæ•°æ®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">properties</span><span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="s">&#34;file-io-app\\properties-xml-log-app\\src\\users.properties&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è¾“å‡ºåŠ è½½åçš„Propertieså¯¹è±¡ï¼ŒåŒ…å«ä»æ–‡ä»¶ä¸­è¯»å–çš„é”®å€¼å¯¹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">properties</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æ ¹æ®æŒ‡å®šé”®å–å¾—å¯¹åº”çš„å€¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">properties</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&#34;ken&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–Propertieså¯¹è±¡ä¸­æ‰€æœ‰çš„é”®ï¼Œå¹¶éå†è¾“å‡ºæ¯ä¸ªé”®å€¼å¯¹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">stringPropertyNames</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">keys</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">properties</span><span class="p">.</span><span class="na">getProperty</span><span class="p">(</span><span class="n">key</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;----&gt;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">val</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="xml">XML<a hidden class="anchor" aria-hidden="true" href="#xml">#</a></h2>
<ul>
<li>æœ¬è´¨æ˜¯ä¸€ç§æ•°æ®çš„æ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå’Œæ•°æ®å…³ç³»</li>
</ul>
<p><strong>XMLç‰¹ç‚¹</strong></p>
<ul>
<li>XMLä¸­çš„<code>&lt;æ ‡ç­¾å&gt;</code>ç§°ä¸ºä¸€ä¸ªæ ‡ç­¾æˆ–ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬æ˜¯æˆå¯¹å‡ºç°çš„</li>
</ul>
<h3 id="xmlè§£ædom4j">xmlè§£æ(dom4j)<a hidden class="anchor" aria-hidden="true" href="#xmlè§£ædom4j">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a class="lnlinks" href="#hl-1-1"> 1</a>
</span><span class="lnt" id="hl-1-2"><a class="lnlinks" href="#hl-1-2"> 2</a>
</span><span class="lnt" id="hl-1-3"><a class="lnlinks" href="#hl-1-3"> 3</a>
</span><span class="lnt" id="hl-1-4"><a class="lnlinks" href="#hl-1-4"> 4</a>
</span><span class="lnt" id="hl-1-5"><a class="lnlinks" href="#hl-1-5"> 5</a>
</span><span class="lnt" id="hl-1-6"><a class="lnlinks" href="#hl-1-6"> 6</a>
</span><span class="lnt" id="hl-1-7"><a class="lnlinks" href="#hl-1-7"> 7</a>
</span><span class="lnt" id="hl-1-8"><a class="lnlinks" href="#hl-1-8"> 8</a>
</span><span class="lnt" id="hl-1-9"><a class="lnlinks" href="#hl-1-9"> 9</a>
</span><span class="lnt" id="hl-1-10"><a class="lnlinks" href="#hl-1-10">10</a>
</span><span class="lnt" id="hl-1-11"><a class="lnlinks" href="#hl-1-11">11</a>
</span><span class="lnt" id="hl-1-12"><a class="lnlinks" href="#hl-1-12">12</a>
</span><span class="lnt" id="hl-1-13"><a class="lnlinks" href="#hl-1-13">13</a>
</span><span class="lnt" id="hl-1-14"><a class="lnlinks" href="#hl-1-14">14</a>
</span><span class="lnt" id="hl-1-15"><a class="lnlinks" href="#hl-1-15">15</a>
</span><span class="lnt" id="hl-1-16"><a class="lnlinks" href="#hl-1-16">16</a>
</span><span class="lnt" id="hl-1-17"><a class="lnlinks" href="#hl-1-17">17</a>
</span><span class="lnt" id="hl-1-18"><a class="lnlinks" href="#hl-1-18">18</a>
</span><span class="lnt" id="hl-1-19"><a class="lnlinks" href="#hl-1-19">19</a>
</span><span class="lnt" id="hl-1-20"><a class="lnlinks" href="#hl-1-20">20</a>
</span><span class="lnt" id="hl-1-21"><a class="lnlinks" href="#hl-1-21">21</a>
</span><span class="lnt" id="hl-1-22"><a class="lnlinks" href="#hl-1-22">22</a>
</span><span class="lnt" id="hl-1-23"><a class="lnlinks" href="#hl-1-23">23</a>
</span><span class="lnt" id="hl-1-24"><a class="lnlinks" href="#hl-1-24">24</a>
</span><span class="lnt" id="hl-1-25"><a class="lnlinks" href="#hl-1-25">25</a>
</span><span class="lnt" id="hl-1-26"><a class="lnlinks" href="#hl-1-26">26</a>
</span><span class="lnt" id="hl-1-27"><a class="lnlinks" href="#hl-1-27">27</a>
</span><span class="lnt" id="hl-1-28"><a class="lnlinks" href="#hl-1-28">28</a>
</span><span class="lnt" id="hl-1-29"><a class="lnlinks" href="#hl-1-29">29</a>
</span><span class="lnt" id="hl-1-30"><a class="lnlinks" href="#hl-1-30">30</a>
</span><span class="lnt" id="hl-1-31"><a class="lnlinks" href="#hl-1-31">31</a>
</span><span class="lnt" id="hl-1-32"><a class="lnlinks" href="#hl-1-32">32</a>
</span><span class="lnt" id="hl-1-33"><a class="lnlinks" href="#hl-1-33">33</a>
</span><span class="lnt" id="hl-1-34"><a class="lnlinks" href="#hl-1-34">34</a>
</span><span class="lnt" id="hl-1-35"><a class="lnlinks" href="#hl-1-35">35</a>
</span><span class="lnt" id="hl-1-36"><a class="lnlinks" href="#hl-1-36">36</a>
</span><span class="lnt" id="hl-1-37"><a class="lnlinks" href="#hl-1-37">37</a>
</span><span class="lnt" id="hl-1-38"><a class="lnlinks" href="#hl-1-38">38</a>
</span><span class="lnt" id="hl-1-39"><a class="lnlinks" href="#hl-1-39">39</a>
</span><span class="lnt" id="hl-1-40"><a class="lnlinks" href="#hl-1-40">40</a>
</span><span class="lnt" id="hl-1-41"><a class="lnlinks" href="#hl-1-41">41</a>
</span><span class="lnt" id="hl-1-42"><a class="lnlinks" href="#hl-1-42">42</a>
</span><span class="lnt" id="hl-1-43"><a class="lnlinks" href="#hl-1-43">43</a>
</span><span class="lnt" id="hl-1-44"><a class="lnlinks" href="#hl-1-44">44</a>
</span><span class="lnt" id="hl-1-45"><a class="lnlinks" href="#hl-1-45">45</a>
</span><span class="lnt" id="hl-1-46"><a class="lnlinks" href="#hl-1-46">46</a>
</span><span class="lnt" id="hl-1-47"><a class="lnlinks" href="#hl-1-47">47</a>
</span><span class="lnt" id="hl-1-48"><a class="lnlinks" href="#hl-1-48">48</a>
</span><span class="lnt" id="hl-1-49"><a class="lnlinks" href="#hl-1-49">49</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">DocumentException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºSAXReaderå¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SAXReader</span><span class="w"> </span><span class="n">saxReader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SAXReader</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä½¿ç”¨SAXReaderè§£æXMLæ–‡ä»¶å¹¶ç”ŸæˆDocumentå¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Document</span><span class="w"> </span><span class="n">document</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">saxReader</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="s">&#34;file-io-app\\properties-xml-log-app\\src\\helloworld.xml&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–XMLæ–‡æ¡£çš„æ ¹å…ƒç´ å¹¶è¾“å‡ºå…¶åç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Element</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">document</span><span class="p">.</span><span class="na">getRootElement</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–æ ¹å…ƒç´ ä¸‹åä¸º&#34;user&#34;çš„æ‰€æœ‰å­å…ƒç´ å¹¶è¾“å‡ºå®ƒä»¬çš„åç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">.</span><span class="na">elements</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Element</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">elements</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">element</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;people&#34;çš„å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Element</span><span class="w"> </span><span class="n">people</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">.</span><span class="na">element</span><span class="p">(</span><span class="s">&#34;people&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">people</span><span class="p">.</span><span class="na">getText</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;user&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹å¹¶è¾“å‡º</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Element</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">.</span><span class="na">element</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">elementText</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„åä¸º&#34;id&#34;çš„å±æ€§å€¼å¹¶è¾“å‡º</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">attributeValue</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„åä¸º&#34;id&#34;çš„å±æ€§ï¼Œå¹¶è¾“å‡ºå±æ€§åå’Œå±æ€§å€¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Attribute</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">attribute</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">id</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">id</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶è¾“å‡ºå®ƒä»¬çš„åå’Œå€¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Attribute</span><span class="o">&gt;</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">attributes</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Attribute</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">attributes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">attribute</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">attribute</span><span class="p">.</span><span class="na">getValue</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è¾“å‡ºåä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;name&#34;ã€&#34;åœ°å€&#34;å’Œ&#34;password&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">elementText</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">elementText</span><span class="p">(</span><span class="s">&#34;åœ°å€&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="na">elementText</span><span class="p">(</span><span class="s">&#34;password&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–åä¸º&#34;user&#34;çš„å…ƒç´ ä¸‹åä¸º&#34;data&#34;çš„å­å…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶è¾“å‡ºåŒ…æ‹¬å‰åç©ºæ ¼çš„æ–‡æœ¬å’Œå»é™¤å‰åç©ºæ ¼çš„æ–‡æœ¬</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Element</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">element</span><span class="p">(</span><span class="s">&#34;data&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getText</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getTextTrim</span><span class="p">());</span><span class="w"> </span><span class="c1">//å»é™¤å‰åç©ºæ ¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å†™å…¥xmlæ–‡ä»¶">å†™å…¥XMLæ–‡ä»¶<a hidden class="anchor" aria-hidden="true" href="#å†™å…¥xmlæ–‡ä»¶">#</a></h3>
<p>ä½¿ç”¨ç¨‹åºæŠŠæ•°æ®å†™å‡ºåˆ°xmlä¸­</p>
<p>ä¸å»ºè®®ä½¿ç”¨dom4jï¼Œ æ¨èç›´æ¥æŠŠç¨‹åºé‡Œçš„æ•°æ®æ‹¼æ¥æˆxmlæ ¼å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a class="lnlinks" href="#hl-2-1"> 1</a>
</span><span class="lnt" id="hl-2-2"><a class="lnlinks" href="#hl-2-2"> 2</a>
</span><span class="lnt" id="hl-2-3"><a class="lnlinks" href="#hl-2-3"> 3</a>
</span><span class="lnt" id="hl-2-4"><a class="lnlinks" href="#hl-2-4"> 4</a>
</span><span class="lnt" id="hl-2-5"><a class="lnlinks" href="#hl-2-5"> 5</a>
</span><span class="lnt" id="hl-2-6"><a class="lnlinks" href="#hl-2-6"> 6</a>
</span><span class="lnt" id="hl-2-7"><a class="lnlinks" href="#hl-2-7"> 7</a>
</span><span class="lnt" id="hl-2-8"><a class="lnlinks" href="#hl-2-8"> 8</a>
</span><span class="lnt" id="hl-2-9"><a class="lnlinks" href="#hl-2-9"> 9</a>
</span><span class="lnt" id="hl-2-10"><a class="lnlinks" href="#hl-2-10">10</a>
</span><span class="lnt" id="hl-2-11"><a class="lnlinks" href="#hl-2-11">11</a>
</span><span class="lnt" id="hl-2-12"><a class="lnlinks" href="#hl-2-12">12</a>
</span><span class="lnt" id="hl-2-13"><a class="lnlinks" href="#hl-2-13">13</a>
</span><span class="lnt" id="hl-2-14"><a class="lnlinks" href="#hl-2-14">14</a>
</span><span class="lnt" id="hl-2-15"><a class="lnlinks" href="#hl-2-15">15</a>
</span><span class="lnt" id="hl-2-16"><a class="lnlinks" href="#hl-2-16">16</a>
</span><span class="lnt" id="hl-2-17"><a class="lnlinks" href="#hl-2-17">17</a>
</span><span class="lnt" id="hl-2-18"><a class="lnlinks" href="#hl-2-18">18</a>
</span><span class="lnt" id="hl-2-19"><a class="lnlinks" href="#hl-2-19">19</a>
</span><span class="lnt" id="hl-2-20"><a class="lnlinks" href="#hl-2-20">20</a>
</span><span class="lnt" id="hl-2-21"><a class="lnlinks" href="#hl-2-21">21</a>
</span><span class="lnt" id="hl-2-22"><a class="lnlinks" href="#hl-2-22">22</a>
</span><span class="lnt" id="hl-2-23"><a class="lnlinks" href="#hl-2-23">23</a>
</span><span class="lnt" id="hl-2-24"><a class="lnlinks" href="#hl-2-24">24</a>
</span><span class="lnt" id="hl-2-25"><a class="lnlinks" href="#hl-2-25">25</a>
</span><span class="lnt" id="hl-2-26"><a class="lnlinks" href="#hl-2-26">26</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç”¨äºæ„å»ºXMLå†…å®¹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">StringBuilder</span><span class="w"> </span><span class="n">sb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringBuilder</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æ„å»ºXMLå¤´éƒ¨ä¿¡æ¯å’Œæ ¹å…ƒç´ </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;?xml version=\&#34;1.0\&#34; encoding=\&#34;utf-8\&#34; ?&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;book&gt;\r\n&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æ·»åŠ ä¹¦åã€ä½œè€…å’Œä»·æ ¼ä¿¡æ¯ä½œä¸ºå­å…ƒç´ </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;name&gt;&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;ä»å…¥é—¨åˆ°åˆ åº“&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;/name&gt;\r\n&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;author&gt;&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;ai&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;/author&gt;\r\n&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;price&gt;&#34;</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="n">999</span><span class="p">.</span><span class="na">999</span><span class="p">).</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;/price&gt;\r\n&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å…³é—­æ ¹å…ƒç´ </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">sb</span><span class="p">.</span><span class="na">append</span><span class="p">(</span><span class="s">&#34;&lt;/book&gt;\r\n&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// ä½¿ç”¨try-with-resourcesè¯­æ³•åˆ›å»ºBufferedWriterå¯¹è±¡ï¼Œå°†å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">BufferedWriter</span><span class="w"> </span><span class="n">bw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedWriter</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileWriter</span><span class="p">(</span><span class="s">&#34;file-io-app\\properties-xml-log-app\\src\\test.xml&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">bw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">sb</span><span class="p">.</span><span class="na">toString</span><span class="p">());</span><span class="w"> </span><span class="c1">// å°†StringBuilderå¯¹è±¡ä¸­çš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"> </span><span class="c1">// æ‰“å°å¼‚å¸¸ä¿¡æ¯</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="çº¦æŸxmlæ–‡ä»¶çš„ä¹¦å†™">çº¦æŸXMLæ–‡ä»¶çš„ä¹¦å†™<a hidden class="anchor" aria-hidden="true" href="#çº¦æŸxmlæ–‡ä»¶çš„ä¹¦å†™">#</a></h3>
<ul>
<li>å°±æ˜¯é™åˆ¶XMLæ–‡ä»¶åªèƒ½æŒ‰ç…§æŸç§æ ¼å¼è¿›è¡Œä¹¦å†™</li>
</ul>
<p>çº¦æŸæ–‡æ¡£ï¼š</p>
<ul>
<li>ä¸“é—¨ç”¨æ¥æ˜¾ç¤ºxmlä¹¦å†™æ ¼å¼çš„æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šé™åˆ¶æ ‡ç­¾ï¼Œå±æ€§è¯¥æ€ä¹ˆå†™</li>
</ul>
<p>çº¦æŸæ–‡æ¡£çš„åˆ†ç±»</p>
<ul>
<li>DTDæ–‡æ¡£</li>
<li>Schemaæ–‡æ¡£</li>
</ul>
<h4 id="xmlæ–‡æ¡£ç»“æŸ-dtdçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-DTDçš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#xmlæ–‡æ¡£ç»“æŸ-dtdçš„ä½¿ç”¨">#</a></h4>
<p>éœ€æ±‚ï¼šåˆ©ç”¨DTDçº¦æŸæ–‡æ¡£ï¼Œçº¦æŸä¸€ä¸ªXMLæ–‡ä»¶çš„ç¼–å†™ã€‚</p>
<p><strong>DTD</strong>(çº¦æŸæ–‡æ¡£)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a class="lnlinks" href="#hl-3-1">1</a>
</span><span class="lnt" id="hl-3-2"><a class="lnlinks" href="#hl-3-2">2</a>
</span><span class="lnt" id="hl-3-3"><a class="lnlinks" href="#hl-3-3">3</a>
</span><span class="lnt" id="hl-3-4"><a class="lnlinks" href="#hl-3-4">4</a>
</span><span class="lnt" id="hl-3-5"><a class="lnlinks" href="#hl-3-5">5</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dtd" data-lang="dtd"><span class="line"><span class="cl"><span class="k">&lt;!ELEMENT</span> <span class="nt">ä¹¦æ¶</span> <span class="o">(</span><span class="nt">ä¹¦</span><span class="o">+)</span><span class="k">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">&lt;!ELEMENT</span> <span class="nt">ä¹¦</span> <span class="o">(</span><span class="nt">ä¹¦å</span><span class="o">,</span><span class="nt">ä½œè€…</span><span class="o">,</span><span class="nt">å”®ä»·</span><span class="o">)</span><span class="k">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">&lt;!ELEMENT</span> <span class="nt">ä¹¦å</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">&lt;!ELEMENT</span> <span class="nt">ä½œè€…</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">&lt;!ELEMENT</span> <span class="nt">å”®ä»·</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>XML</strong>æ–‡æ¡£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-4-1"><a class="lnlinks" href="#hl-4-1">1</a>
</span><span class="lnt" id="hl-4-2"><a class="lnlinks" href="#hl-4-2">2</a>
</span><span class="lnt" id="hl-4-3"><a class="lnlinks" href="#hl-4-3">3</a>
</span><span class="lnt" id="hl-4-4"><a class="lnlinks" href="#hl-4-4">4</a>
</span><span class="lnt" id="hl-4-5"><a class="lnlinks" href="#hl-4-5">5</a>
</span><span class="lnt" id="hl-4-6"><a class="lnlinks" href="#hl-4-6">6</a>
</span><span class="lnt" id="hl-4-7"><a class="lnlinks" href="#hl-4-7">7</a>
</span><span class="lnt" id="hl-4-8"><a class="lnlinks" href="#hl-4-8">8</a>
</span><span class="lnt" id="hl-4-9"><a class="lnlinks" href="#hl-4-9">9</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE ä¹¦æ¶ SYSTEM &#34;data.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;ä¹¦æ¶&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;ä¹¦å&gt;</span>ä»åˆ åº“åˆ°è·‘è·¯<span class="nt">&lt;/ä¹¦å&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;ä½œè€…&gt;</span>Kenn<span class="nt">&lt;/ä½œè€…&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;å”®ä»·&gt;</span>0.3<span class="nt">&lt;/å”®ä»·&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/ä¹¦æ¶&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="xmlæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">XMLæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#xmlæ–‡æ¡£ç»“æŸ-schemaçš„ä½¿ç”¨">#</a></h4>
<ul>
<li>å¯ä»¥çº¦æŸXMLæ–‡ä»¶çš„ç¼–å†™ã€å’Œæ•°æ®ç±»å‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-5-1"><a class="lnlinks" href="#hl-5-1"> 1</a>
</span><span class="lnt" id="hl-5-2"><a class="lnlinks" href="#hl-5-2"> 2</a>
</span><span class="lnt" id="hl-5-3"><a class="lnlinks" href="#hl-5-3"> 3</a>
</span><span class="lnt" id="hl-5-4"><a class="lnlinks" href="#hl-5-4"> 4</a>
</span><span class="lnt" id="hl-5-5"><a class="lnlinks" href="#hl-5-5"> 5</a>
</span><span class="lnt" id="hl-5-6"><a class="lnlinks" href="#hl-5-6"> 6</a>
</span><span class="lnt" id="hl-5-7"><a class="lnlinks" href="#hl-5-7"> 7</a>
</span><span class="lnt" id="hl-5-8"><a class="lnlinks" href="#hl-5-8"> 8</a>
</span><span class="lnt" id="hl-5-9"><a class="lnlinks" href="#hl-5-9"> 9</a>
</span><span class="lnt" id="hl-5-10"><a class="lnlinks" href="#hl-5-10">10</a>
</span><span class="lnt" id="hl-5-11"><a class="lnlinks" href="#hl-5-11">11</a>
</span><span class="lnt" id="hl-5-12"><a class="lnlinks" href="#hl-5-12">12</a>
</span><span class="lnt" id="hl-5-13"><a class="lnlinks" href="#hl-5-13">13</a>
</span><span class="lnt" id="hl-5-14"><a class="lnlinks" href="#hl-5-14">14</a>
</span><span class="lnt" id="hl-5-15"><a class="lnlinks" href="#hl-5-15">15</a>
</span><span class="lnt" id="hl-5-16"><a class="lnlinks" href="#hl-5-16">16</a>
</span><span class="lnt" id="hl-5-17"><a class="lnlinks" href="#hl-5-17">17</a>
</span><span class="lnt" id="hl-5-18"><a class="lnlinks" href="#hl-5-18">18</a>
</span><span class="lnt" id="hl-5-19"><a class="lnlinks" href="#hl-5-19">19</a>
</span><span class="lnt" id="hl-5-20"><a class="lnlinks" href="#hl-5-20">20</a>
</span><span class="lnt" id="hl-5-21"><a class="lnlinks" href="#hl-5-21">21</a>
</span><span class="lnt" id="hl-5-22"><a class="lnlinks" href="#hl-5-22">22</a>
</span><span class="lnt" id="hl-5-23"><a class="lnlinks" href="#hl-5-23">23</a>
</span><span class="lnt" id="hl-5-24"><a class="lnlinks" href="#hl-5-24">24</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;schema</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">targetNamespace=</span><span class="s">&#34;http://www.itcast.cn&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">elementFormDefault=</span><span class="s">&#34;qualified&#34;</span> <span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- targetNamespace:ç”³æ˜çº¦æŸæ–‡æ¡£çš„åœ°å€ï¼ˆå‘½åç©ºé—´ï¼‰--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&#39;ä¹¦æ¶&#39;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- å†™å­å…ƒç´  --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;complexType&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- maxOccurs=&#39;unbounded&#39;: ä¹¦æ¶ä¸‹çš„å­å…ƒç´ å¯ä»¥æœ‰ä»»æ„å¤šä¸ªï¼--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;sequence</span> <span class="na">maxOccurs=</span><span class="s">&#39;unbounded&#39;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&#39;ä¹¦&#39;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="c">&lt;!-- å†™å­å…ƒç´  --&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;complexType&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;sequence&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&#39;ä¹¦å&#39;</span> <span class="na">type=</span><span class="s">&#39;string&#39;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&#39;ä½œè€…&#39;</span> <span class="na">type=</span><span class="s">&#39;string&#39;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&#39;å”®ä»·&#39;</span> <span class="na">type=</span><span class="s">&#39;double&#39;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/sequence&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/complexType&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/element&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/sequence&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/complexType&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/element&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/schema&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>XML</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-6-1"><a class="lnlinks" href="#hl-6-1"> 1</a>
</span><span class="lnt" id="hl-6-2"><a class="lnlinks" href="#hl-6-2"> 2</a>
</span><span class="lnt" id="hl-6-3"><a class="lnlinks" href="#hl-6-3"> 3</a>
</span><span class="lnt" id="hl-6-4"><a class="lnlinks" href="#hl-6-4"> 4</a>
</span><span class="lnt" id="hl-6-5"><a class="lnlinks" href="#hl-6-5"> 5</a>
</span><span class="lnt" id="hl-6-6"><a class="lnlinks" href="#hl-6-6"> 6</a>
</span><span class="lnt" id="hl-6-7"><a class="lnlinks" href="#hl-6-7"> 7</a>
</span><span class="lnt" id="hl-6-8"><a class="lnlinks" href="#hl-6-8"> 8</a>
</span><span class="lnt" id="hl-6-9"><a class="lnlinks" href="#hl-6-9"> 9</a>
</span><span class="lnt" id="hl-6-10"><a class="lnlinks" href="#hl-6-10">10</a>
</span><span class="lnt" id="hl-6-11"><a class="lnlinks" href="#hl-6-11">11</a>
</span><span class="lnt" id="hl-6-12"><a class="lnlinks" href="#hl-6-12">12</a>
</span><span class="lnt" id="hl-6-13"><a class="lnlinks" href="#hl-6-13">13</a>
</span><span class="lnt" id="hl-6-14"><a class="lnlinks" href="#hl-6-14">14</a>
</span><span class="lnt" id="hl-6-15"><a class="lnlinks" href="#hl-6-15">15</a>
</span><span class="lnt" id="hl-6-16"><a class="lnlinks" href="#hl-6-16">16</a>
</span><span class="lnt" id="hl-6-17"><a class="lnlinks" href="#hl-6-17">17</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;ä¹¦æ¶</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.itcast.cn&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.itcast.cn data.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- xmlns=&#34;http://www.itcast.cn&#34;  åŸºæœ¬ä½ç½®
</span></span></span><span class="line"><span class="cl"><span class="c">         xsi:schemaLocation=&#34;http://www.itcast.cn books02.xsd&#34; å…·ä½“çš„ä½ç½® --&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;ä¹¦å&gt;</span>ä»å…¥é—¨åˆ°åˆ é™¤<span class="nt">&lt;/ä¹¦å&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;ä½œè€…&gt;</span>dlei<span class="nt">&lt;/ä½œè€…&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&lt;å”®ä»·&gt;</span>0.03<span class="nt">&lt;/å”®ä»·&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;/ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;ä¹¦å&gt;</span>ä»å…¥é—¨åˆ°åˆ é™¤<span class="nt">&lt;/ä¹¦å&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;ä½œè€…&gt;</span>dlei<span class="nt">&lt;/ä½œè€…&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;å”®ä»·&gt;</span>0.9<span class="nt">&lt;/å”®ä»·&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/ä¹¦&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/ä¹¦æ¶&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="logbackå¿«é€Ÿå…¥é—¨"><code>Logback</code>å¿«é€Ÿå…¥é—¨<a hidden class="anchor" aria-hidden="true" href="#logbackå¿«é€Ÿå…¥é—¨">#</a></h3>
<p>éœ€æ±‚ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>Logback</code>æ—¥å¿—æ¡†æ¶ï¼Œè®°å½•ç³»ç»Ÿçš„è¿è¡Œä¿¡æ¯</li>
</ul>
<p>å®ç°æ­¥éª¤</p>
<ol>
<li>
<p>å¯¼å…¥<code>Logback</code>æ¡†æ¶åˆ°é¡¹ç›®ä¸­å»</p>
<ul>
<li><code>slf4j-api</code>ï¼šæ—¥å¿—æ¥å£</li>
<li><code>logback-core</code></li>
<li><code>logback-classic</code></li>
</ul>
</li>
<li>
<p>å°†<code>Logback</code>æ¡†æ¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>logback.xml</code>ç›´æ¥æ‹·è´åˆ°<code>src</code>ç›®å½•ä¸‹ï¼ˆå¿…é¡»æ˜¯<code>src</code>ä¸‹ï¼‰</p>
</li>
<li>
<p>åˆ›å»º<code>Logback</code>æ¡†æ¶æä¾›çš„<code>Logger</code>å¯¹è±¡ï¼Œç„¶åç”¨Loggerå¯¹è±¡è°ƒç”¨å…¶æä¾›çš„æ–¹æ³•å°±å¯è®°å½•ç³»ç»Ÿçš„æ—¥å¿—ä¿¡æ¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-7-1"><a class="lnlinks" href="#hl-7-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">LOGGER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="s">&#34;LogBackTest&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>logback.xml</code></p>
<ul>
<li>å¯¹<code>Logback</code>æ—¥å¿—æ¡†æ¶è¿›è¡Œæ§åˆ¶</li>
</ul>
<p><code>Logback</code>è®¾ç½®æ—¥å¿—çº§åˆ«</p>
<ul>
<li>æ—¥å¿—çº§åˆ«æŒ‡çš„æ˜¯æ—¥å¿—ä¿¡æ¯çš„ç±»å‹ï¼Œæ—¥å¿—éƒ½ä¼šåˆ†çº§åˆ«ï¼Œå¸¸è§çš„æ—¥å¿—çº§åˆ«å¦‚ä¸‹ï¼ˆä¼˜å…ˆçº§ä¾æ¬¡å‡é«˜ï¼‰</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">æ—¥å¿—çº§åˆ«</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">trace</td>
<td style="text-align:center">è¿½è¸ªï¼ŒæŒ‡æ˜ç¨‹åºè¿è¡Œè½¨è¿¹</td>
</tr>
<tr>
<td style="text-align:center">debug</td>
<td style="text-align:center">è°ƒè¯•ï¼Œå®é™…åº”ç”¨ä¸­ä¸€èˆ¬å°†å…¶ä½œä¸ºæœ€ä½çº§åˆ«</td>
</tr>
<tr>
<td style="text-align:center">info</td>
<td style="text-align:center">è¾“å‡ºé‡è¦çš„è¿è¡Œä¿¡æ¯ï¼Œæ•°æ®è¿æ¥ï¼Œç½‘ç»œè¿æ¥ï¼ŒIOæ“ä½œç­‰ç­‰ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
<tr>
<td style="text-align:center">warn</td>
<td style="text-align:center">è­¦å‘Šä¿¡æ¯ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé—®é¢˜ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
<tr>
<td style="text-align:center">error</td>
<td style="text-align:center">é”™è¯¯ä¿¡æ¯ï¼Œä½¿ç”¨è¾ƒå¤š</td>
</tr>
</tbody>
</table>
<p><strong>é…ç½®æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-8-1"><a class="lnlinks" href="#hl-8-1">1</a>
</span><span class="lnt" id="hl-8-2"><a class="lnlinks" href="#hl-8-2">2</a>
</span><span class="lnt" id="hl-8-3"><a class="lnlinks" href="#hl-8-3">3</a>
</span><span class="lnt" id="hl-8-4"><a class="lnlinks" href="#hl-8-4">4</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">&#34;debug&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&#34;CONSOLE&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">&#34;FILE&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/root&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åªæœ‰æ—¥å¿—çš„çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ ¸å¿ƒé…ç½®æ–‡ä»¶é…å€¼çš„æ—¥å¿—çº§åˆ«ï¼Œæ‰ä¼šè¢«è®°å½•ï¼Œå¦åˆ™ä¸è®°å½•ã€‚</li>
</ul>
<h2 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹<a hidden class="anchor" aria-hidden="true" href="#å¤šçº¿ç¨‹">#</a></h2>
<ul>
<li>çº¿ç¨‹ï¼ˆ<code>Thread</code>ï¼‰æ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œæµç¨‹</li>
<li>ç¨‹åºä¸­å¦‚æœåªæœ‰ä¸€æ¡æ‰§è¡Œæµç¨‹ï¼Œé‚£è¿™ä¸ªç¨‹åºå°±æ˜¯å•çº¿ç¨‹çš„ç¨‹åº</li>
</ul>
<p><strong>å¤šçº¿ç¨‹</strong></p>
<ul>
<li>å¤šçº¿ç¨‹æ˜¯æŒ‡ä»è½¯ç¡¬ä»¶ä¸Šå®ç°çš„å¤šæ¡æ‰§è¡Œæµç¨‹çš„æŠ€æœ¯ï¼ˆå¤šæ¡çº¿ç¨‹ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œï¼‰</li>
</ul>
<h3 id="æ–¹å¼ä¸€ç»§æ‰¿threadç±»">æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼ä¸€ç»§æ‰¿threadç±»">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-9-1"><a class="lnlinks" href="#hl-9-1"> 1</a>
</span><span class="lnt" id="hl-9-2"><a class="lnlinks" href="#hl-9-2"> 2</a>
</span><span class="lnt" id="hl-9-3"><a class="lnlinks" href="#hl-9-3"> 3</a>
</span><span class="lnt" id="hl-9-4"><a class="lnlinks" href="#hl-9-4"> 4</a>
</span><span class="lnt" id="hl-9-5"><a class="lnlinks" href="#hl-9-5"> 5</a>
</span><span class="lnt" id="hl-9-6"><a class="lnlinks" href="#hl-9-6"> 6</a>
</span><span class="lnt" id="hl-9-7"><a class="lnlinks" href="#hl-9-7"> 7</a>
</span><span class="lnt" id="hl-9-8"><a class="lnlinks" href="#hl-9-8"> 8</a>
</span><span class="lnt" id="hl-9-9"><a class="lnlinks" href="#hl-9-9"> 9</a>
</span><span class="lnt" id="hl-9-10"><a class="lnlinks" href="#hl-9-10">10</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­çº¿ç¨‹MyThread&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-10-1"><a class="lnlinks" href="#hl-10-1">1</a>
</span><span class="lnt" id="hl-10-2"><a class="lnlinks" href="#hl-10-2">2</a>
</span><span class="lnt" id="hl-10-3"><a class="lnlinks" href="#hl-10-3">3</a>
</span><span class="lnt" id="hl-10-4"><a class="lnlinks" href="#hl-10-4">4</a>
</span><span class="lnt" id="hl-10-5"><a class="lnlinks" href="#hl-10-5">5</a>
</span><span class="lnt" id="hl-10-6"><a class="lnlinks" href="#hl-10-6">6</a>
</span><span class="lnt" id="hl-10-7"><a class="lnlinks" href="#hl-10-7">7</a>
</span><span class="lnt" id="hl-10-8"><a class="lnlinks" href="#hl-10-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">MyThread</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ä¸»çº¿ç¨‹mainè¾“å‡ºï¼š&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šç¼–ç ç®€å•</li>
<li>ç¼ºç‚¹ï¼šçº¿ç¨‹ç±»å·²ç»ç»§æ‰¿Thread, æ— æ³•ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸åˆ©äºåŠŸèƒ½çš„æ‰©å±•</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ol>
<li>è°ƒç”¨çš„æ˜¯<code>start</code>è€Œä¸æ˜¯<code>run</code></li>
<li>ä¸è¦æŠŠä¸»çº¿ç¨‹ä»»åŠ¡æ”¾åœ¨å¯åŠ¨å­çº¿ç¨‹ä¹‹å‰</li>
</ol>
<h3 id="æ–¹å¼äºŒå®ç°runnableæ¥å£">æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼äºŒå®ç°runnableæ¥å£">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-11-1"><a class="lnlinks" href="#hl-11-1"> 1</a>
</span><span class="lnt" id="hl-11-2"><a class="lnlinks" href="#hl-11-2"> 2</a>
</span><span class="lnt" id="hl-11-3"><a class="lnlinks" href="#hl-11-3"> 3</a>
</span><span class="lnt" id="hl-11-4"><a class="lnlinks" href="#hl-11-4"> 4</a>
</span><span class="lnt" id="hl-11-5"><a class="lnlinks" href="#hl-11-5"> 5</a>
</span><span class="lnt" id="hl-11-6"><a class="lnlinks" href="#hl-11-6"> 6</a>
</span><span class="lnt" id="hl-11-7"><a class="lnlinks" href="#hl-11-7"> 7</a>
</span><span class="lnt" id="hl-11-8"><a class="lnlinks" href="#hl-11-8"> 8</a>
</span><span class="lnt" id="hl-11-9"><a class="lnlinks" href="#hl-11-9"> 9</a>
</span><span class="lnt" id="hl-11-10"><a class="lnlinks" href="#hl-11-10">10</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo2</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">MyRunnable</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyRunnable</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">1000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;===ä¸»çº¿ç¨‹è¾“å‡º&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-12-1"><a class="lnlinks" href="#hl-12-1">1</a>
</span><span class="lnt" id="hl-12-2"><a class="lnlinks" href="#hl-12-2">2</a>
</span><span class="lnt" id="hl-12-3"><a class="lnlinks" href="#hl-12-3">3</a>
</span><span class="lnt" id="hl-12-4"><a class="lnlinks" href="#hl-12-4">4</a>
</span><span class="lnt" id="hl-12-5"><a class="lnlinks" href="#hl-12-5">5</a>
</span><span class="lnt" id="hl-12-6"><a class="lnlinks" href="#hl-12-6">6</a>
</span><span class="lnt" id="hl-12-7"><a class="lnlinks" href="#hl-12-7">7</a>
</span><span class="lnt" id="hl-12-8"><a class="lnlinks" href="#hl-12-8">8</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyRunnable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">1000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­çº¿ç¨‹è¾“å‡º===&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>å®šä¹‰ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ç±»<code>MyRunnable</code>å®ç°<code>Runnable</code>æ¥å£ï¼Œ é‡å†™<code>run()</code>æ–¹æ³•</li>
<li>åˆ›å»º<code>MyRunnable</code>ä»»åŠ¡å¯¹è±¡</li>
<li>æŠŠ<code>MyRunnbale</code>ä»»åŠ¡å¯¹è±¡äº¤ç»™<code>Thread</code>å¤„ç†</li>
</ol>
<p>ä¼˜ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå®ç°<code>Runnable</code>æ¥å£åï¼Œå¯ä»¥ç»§ç»­ç»§æ‰¿å…¶ä»–ç±»ï¼Œå®ç°å…¶ä»–æ¥å£ï¼Œæ‰©å±•æ€§å¼º</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦å¤šä¸€ä¸ª<code>Runnable</code>å¯¹è±¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-13-1"><a class="lnlinks" href="#hl-13-1"> 1</a>
</span><span class="lnt" id="hl-13-2"><a class="lnlinks" href="#hl-13-2"> 2</a>
</span><span class="lnt" id="hl-13-3"><a class="lnlinks" href="#hl-13-3"> 3</a>
</span><span class="lnt" id="hl-13-4"><a class="lnlinks" href="#hl-13-4"> 4</a>
</span><span class="lnt" id="hl-13-5"><a class="lnlinks" href="#hl-13-5"> 5</a>
</span><span class="lnt" id="hl-13-6"><a class="lnlinks" href="#hl-13-6"> 6</a>
</span><span class="lnt" id="hl-13-7"><a class="lnlinks" href="#hl-13-7"> 7</a>
</span><span class="lnt" id="hl-13-8"><a class="lnlinks" href="#hl-13-8"> 8</a>
</span><span class="lnt" id="hl-13-9"><a class="lnlinks" href="#hl-13-9"> 9</a>
</span><span class="lnt" id="hl-13-10"><a class="lnlinks" href="#hl-13-10">10</a>
</span><span class="lnt" id="hl-13-11"><a class="lnlinks" href="#hl-13-11">11</a>
</span><span class="lnt" id="hl-13-12"><a class="lnlinks" href="#hl-13-12">12</a>
</span><span class="lnt" id="hl-13-13"><a class="lnlinks" href="#hl-13-13">13</a>
</span><span class="lnt" id="hl-13-14"><a class="lnlinks" href="#hl-13-14">14</a>
</span><span class="lnt" id="hl-13-15"><a class="lnlinks" href="#hl-13-15">15</a>
</span><span class="lnt" id="hl-13-16"><a class="lnlinks" href="#hl-13-16">16</a>
</span><span class="lnt" id="hl-13-17"><a class="lnlinks" href="#hl-13-17">17</a>
</span><span class="lnt" id="hl-13-18"><a class="lnlinks" href="#hl-13-18">18</a>
</span><span class="lnt" id="hl-13-19"><a class="lnlinks" href="#hl-13-19">19</a>
</span><span class="lnt" id="hl-13-20"><a class="lnlinks" href="#hl-13-20">20</a>
</span><span class="lnt" id="hl-13-21"><a class="lnlinks" href="#hl-13-21">21</a>
</span><span class="lnt" id="hl-13-22"><a class="lnlinks" href="#hl-13-22">22</a>
</span><span class="lnt" id="hl-13-23"><a class="lnlinks" href="#hl-13-23">23</a>
</span><span class="lnt" id="hl-13-24"><a class="lnlinks" href="#hl-13-24">24</a>
</span><span class="lnt" id="hl-13-25"><a class="lnlinks" href="#hl-13-25">25</a>
</span><span class="lnt" id="hl-13-26"><a class="lnlinks" href="#hl-13-26">26</a>
</span><span class="lnt" id="hl-13-27"><a class="lnlinks" href="#hl-13-27">27</a>
</span><span class="lnt" id="hl-13-28"><a class="lnlinks" href="#hl-13-28">28</a>
</span><span class="lnt" id="hl-13-29"><a class="lnlinks" href="#hl-13-29">29</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨ç¬¬ä¸€ä¸ªå­çº¿ç¨‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">target1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­çº¿ç¨‹è¾“å‡º:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">target1</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä¸»çº¿ç¨‹æ‰§è¡Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ä¸»çº¿ç¨‹:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨ç¬¬äºŒä¸ªå­çº¿ç¨‹ï¼Œä½¿ç”¨Lambdaè¡¨è¾¾å¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­çº¿ç¨‹2:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;ä¸»çº¿ç¨‹:&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–¹å¼ä¸‰åˆ©ç”¨callableæ¥å£futuretaskç±»æ¥å®ç°">æ–¹å¼ä¸‰ï¼šåˆ©ç”¨<code>Callable</code>æ¥å£ï¼Œ<code>FutureTask</code>ç±»æ¥å®ç°<a hidden class="anchor" aria-hidden="true" href="#æ–¹å¼ä¸‰åˆ©ç”¨callableæ¥å£futuretaskç±»æ¥å®ç°">#</a></h3>
<p><code>MyCallable</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-14-1"><a class="lnlinks" href="#hl-14-1"> 1</a>
</span><span class="lnt" id="hl-14-2"><a class="lnlinks" href="#hl-14-2"> 2</a>
</span><span class="lnt" id="hl-14-3"><a class="lnlinks" href="#hl-14-3"> 3</a>
</span><span class="lnt" id="hl-14-4"><a class="lnlinks" href="#hl-14-4"> 4</a>
</span><span class="lnt" id="hl-14-5"><a class="lnlinks" href="#hl-14-5"> 5</a>
</span><span class="lnt" id="hl-14-6"><a class="lnlinks" href="#hl-14-6"> 6</a>
</span><span class="lnt" id="hl-14-7"><a class="lnlinks" href="#hl-14-7"> 7</a>
</span><span class="lnt" id="hl-14-8"><a class="lnlinks" href="#hl-14-8"> 8</a>
</span><span class="lnt" id="hl-14-9"><a class="lnlinks" href="#hl-14-9"> 9</a>
</span><span class="lnt" id="hl-14-10"><a class="lnlinks" href="#hl-14-10">10</a>
</span><span class="lnt" id="hl-14-11"><a class="lnlinks" href="#hl-14-11">11</a>
</span><span class="lnt" id="hl-14-12"><a class="lnlinks" href="#hl-14-12">12</a>
</span><span class="lnt" id="hl-14-13"><a class="lnlinks" href="#hl-14-13">13</a>
</span><span class="lnt" id="hl-14-14"><a class="lnlinks" href="#hl-14-14">14</a>
</span><span class="lnt" id="hl-14-15"><a class="lnlinks" href="#hl-14-15">15</a>
</span><span class="lnt" id="hl-14-16"><a class="lnlinks" href="#hl-14-16">16</a>
</span><span class="lnt" id="hl-14-17"><a class="lnlinks" href="#hl-14-17">17</a>
</span><span class="lnt" id="hl-14-18"><a class="lnlinks" href="#hl-14-18">18</a>
</span><span class="lnt" id="hl-14-19"><a class="lnlinks" href="#hl-14-19">19</a>
</span><span class="lnt" id="hl-14-20"><a class="lnlinks" href="#hl-14-20">20</a>
</span><span class="lnt" id="hl-14-21"><a class="lnlinks" href="#hl-14-21">21</a>
</span><span class="lnt" id="hl-14-22"><a class="lnlinks" href="#hl-14-22">22</a>
</span><span class="lnt" id="hl-14-23"><a class="lnlinks" href="#hl-14-23">23</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.Callable</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyCallable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyCallable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyCallable</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">call</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;çº¿ç¨‹æ±‚å’Œç»“æœä¸º&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-15-1"><a class="lnlinks" href="#hl-15-1"> 1</a>
</span><span class="lnt" id="hl-15-2"><a class="lnlinks" href="#hl-15-2"> 2</a>
</span><span class="lnt" id="hl-15-3"><a class="lnlinks" href="#hl-15-3"> 3</a>
</span><span class="lnt" id="hl-15-4"><a class="lnlinks" href="#hl-15-4"> 4</a>
</span><span class="lnt" id="hl-15-5"><a class="lnlinks" href="#hl-15-5"> 5</a>
</span><span class="lnt" id="hl-15-6"><a class="lnlinks" href="#hl-15-6"> 6</a>
</span><span class="lnt" id="hl-15-7"><a class="lnlinks" href="#hl-15-7"> 7</a>
</span><span class="lnt" id="hl-15-8"><a class="lnlinks" href="#hl-15-8"> 8</a>
</span><span class="lnt" id="hl-15-9"><a class="lnlinks" href="#hl-15-9"> 9</a>
</span><span class="lnt" id="hl-15-10"><a class="lnlinks" href="#hl-15-10">10</a>
</span><span class="lnt" id="hl-15-11"><a class="lnlinks" href="#hl-15-11">11</a>
</span><span class="lnt" id="hl-15-12"><a class="lnlinks" href="#hl-15-12">12</a>
</span><span class="lnt" id="hl-15-13"><a class="lnlinks" href="#hl-15-13">13</a>
</span><span class="lnt" id="hl-15-14"><a class="lnlinks" href="#hl-15-14">14</a>
</span><span class="lnt" id="hl-15-15"><a class="lnlinks" href="#hl-15-15">15</a>
</span><span class="lnt" id="hl-15-16"><a class="lnlinks" href="#hl-15-16">16</a>
</span><span class="lnt" id="hl-15-17"><a class="lnlinks" href="#hl-15-17">17</a>
</span><span class="lnt" id="hl-15-18"><a class="lnlinks" href="#hl-15-18">18</a>
</span><span class="lnt" id="hl-15-19"><a class="lnlinks" href="#hl-15-19">19</a>
</span><span class="lnt" id="hl-15-20"><a class="lnlinks" href="#hl-15-20">20</a>
</span><span class="lnt" id="hl-15-21"><a class="lnlinks" href="#hl-15-21">21</a>
</span><span class="lnt" id="hl-15-22"><a class="lnlinks" href="#hl-15-22">22</a>
</span><span class="lnt" id="hl-15-23"><a class="lnlinks" href="#hl-15-23">23</a>
</span><span class="lnt" id="hl-15-24"><a class="lnlinks" href="#hl-15-24">24</a>
</span><span class="lnt" id="hl-15-25"><a class="lnlinks" href="#hl-15-25">25</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.Callable</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.ExecutionException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.FutureTask</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo4</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ExecutionException</span><span class="p">,</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">100</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FutureTask</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FutureTask</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">call</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">ft</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">call2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">200</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">FutureTask</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ft2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FutureTask</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">call2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">ft2</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ft</span><span class="p">.</span><span class="na">get</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">rs</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//çº¿ç¨‹æ±‚å’Œç»“æœä¸º4950</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">rs2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ft2</span><span class="p">.</span><span class="na">get</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">rs2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//çº¿ç¨‹æ±‚å’Œç»“æœä¸º19900</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>çº¿ç¨‹ä»»åŠ¡ç±»åªæ˜¯å®ç°æ¥å£ï¼Œå¯ä»¥ç»§ç»­ç»§æ‰¿ç±»å’Œå®ç°æ¥å£ï¼Œæ‰©å±•æ€§å¼ºï¼›å¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå»è·å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœã€‚</li>
</ul>
<h3 id="çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">çº¿ç¨‹å¸¸ç”¨æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">#</a></h3>
<ul>
<li>ä¸ºçº¿ç¨‹è®¾ç½®åç§°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-16-1"><a class="lnlinks" href="#hl-16-1"> 1</a>
</span><span class="lnt" id="hl-16-2"><a class="lnlinks" href="#hl-16-2"> 2</a>
</span><span class="lnt" id="hl-16-3"><a class="lnlinks" href="#hl-16-3"> 3</a>
</span><span class="lnt" id="hl-16-4"><a class="lnlinks" href="#hl-16-4"> 4</a>
</span><span class="lnt" id="hl-16-5"><a class="lnlinks" href="#hl-16-5"> 5</a>
</span><span class="lnt" id="hl-16-6"><a class="lnlinks" href="#hl-16-6"> 6</a>
</span><span class="lnt" id="hl-16-7"><a class="lnlinks" href="#hl-16-7"> 7</a>
</span><span class="lnt" id="hl-16-8"><a class="lnlinks" href="#hl-16-8"> 8</a>
</span><span class="lnt" id="hl-16-9"><a class="lnlinks" href="#hl-16-9"> 9</a>
</span><span class="lnt" id="hl-16-10"><a class="lnlinks" href="#hl-16-10">10</a>
</span><span class="lnt" id="hl-16-11"><a class="lnlinks" href="#hl-16-11">11</a>
</span><span class="lnt" id="hl-16-12"><a class="lnlinks" href="#hl-16-12">12</a>
</span><span class="lnt" id="hl-16-13"><a class="lnlinks" href="#hl-16-13">13</a>
</span><span class="lnt" id="hl-16-14"><a class="lnlinks" href="#hl-16-14">14</a>
</span><span class="lnt" id="hl-16-15"><a class="lnlinks" href="#hl-16-15">15</a>
</span><span class="lnt" id="hl-16-16"><a class="lnlinks" href="#hl-16-16">16</a>
</span><span class="lnt" id="hl-16-17"><a class="lnlinks" href="#hl-16-17">17</a>
</span><span class="lnt" id="hl-16-18"><a class="lnlinks" href="#hl-16-18">18</a>
</span><span class="lnt" id="hl-16-19"><a class="lnlinks" href="#hl-16-19">19</a>
</span><span class="lnt" id="hl-16-20"><a class="lnlinks" href="#hl-16-20">20</a>
</span><span class="lnt" id="hl-16-21"><a class="lnlinks" href="#hl-16-21">21</a>
</span><span class="lnt" id="hl-16-22"><a class="lnlinks" href="#hl-16-22">22</a>
</span><span class="lnt" id="hl-16-23"><a class="lnlinks" href="#hl-16-23">23</a>
</span><span class="lnt" id="hl-16-24"><a class="lnlinks" href="#hl-16-24">24</a>
</span><span class="lnt" id="hl-16-25"><a class="lnlinks" href="#hl-16-25">25</a>
</span><span class="lnt" id="hl-16-26"><a class="lnlinks" href="#hl-16-26">26</a>
</span><span class="lnt" id="hl-16-27"><a class="lnlinks" href="#hl-16-27">27</a>
</span><span class="lnt" id="hl-16-28"><a class="lnlinks" href="#hl-16-28">28</a>
</span><span class="lnt" id="hl-16-29"><a class="lnlinks" href="#hl-16-29">29</a>
</span><span class="lnt" id="hl-16-30"><a class="lnlinks" href="#hl-16-30">30</a>
</span><span class="lnt" id="hl-16-31"><a class="lnlinks" href="#hl-16-31">31</a>
</span><span class="lnt" id="hl-16-32"><a class="lnlinks" href="#hl-16-32">32</a>
</span><span class="lnt" id="hl-16-33"><a class="lnlinks" href="#hl-16-33">33</a>
</span><span class="lnt" id="hl-16-34"><a class="lnlinks" href="#hl-16-34">34</a>
</span><span class="lnt" id="hl-16-35"><a class="lnlinks" href="#hl-16-35">35</a>
</span><span class="lnt" id="hl-16-36"><a class="lnlinks" href="#hl-16-36">36</a>
</span><span class="lnt" id="hl-16-37"><a class="lnlinks" href="#hl-16-37">37</a>
</span><span class="lnt" id="hl-16-38"><a class="lnlinks" href="#hl-16-38">38</a>
</span><span class="lnt" id="hl-16-39"><a class="lnlinks" href="#hl-16-39">39</a>
</span><span class="lnt" id="hl-16-40"><a class="lnlinks" href="#hl-16-40">40</a>
</span><span class="lnt" id="hl-16-41"><a class="lnlinks" href="#hl-16-41">41</a>
</span><span class="lnt" id="hl-16-42"><a class="lnlinks" href="#hl-16-42">42</a>
</span><span class="lnt" id="hl-16-43"><a class="lnlinks" href="#hl-16-43">43</a>
</span><span class="lnt" id="hl-16-44"><a class="lnlinks" href="#hl-16-44">44</a>
</span><span class="lnt" id="hl-16-45"><a class="lnlinks" href="#hl-16-45">45</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&#34;çº¿ç¨‹ä¸€å·&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// æ‰“å°çº¿ç¨‹ t1 çš„åç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&#34;çº¿ç¨‹äºŒå·&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">t2</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">t2</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// æ‰“å°çº¿ç¨‹ t2 çš„åç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–å½“å‰çº¿ç¨‹ï¼Œå¹¶å°†å…¶åç§°è®¾ç½®ä¸º &#34;maxçº¿ç¨‹&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">m</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&#34;maxçº¿ç¨‹&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// æ‰“å°å½“å‰çº¿ç¨‹çš„åç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªç®€å•çš„ for å¾ªç¯ï¼Œæ‰“å°è¾“å‡ºå½“å‰çº¿ç¨‹çš„åç§°å’Œå¾ªç¯å˜é‡ i</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;çº¿ç¨‹è¾“å‡º&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// è‡ªå®šä¹‰çº¿ç¨‹ç±» MyThread</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyThread</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyThread</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;å¼€å§‹æ‰§è¡Œã€‚&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å­çº¿ç¨‹MyThread&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä½¿ç”¨çº¿ç¨‹çš„ <code>join()</code> æ–¹æ³•æ¥å®ç°çº¿ç¨‹çš„<strong>é¡ºåºæ‰§è¡Œ</strong>ï¼Œåœ¨å¾ªç¯ä¸­ä½¿ç”¨ <code>sleep()</code> æ–¹æ³•æ¥æ§åˆ¶çº¿ç¨‹çš„æ‰§è¡Œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-17-1"><a class="lnlinks" href="#hl-17-1"> 1</a>
</span><span class="lnt" id="hl-17-2"><a class="lnlinks" href="#hl-17-2"> 2</a>
</span><span class="lnt" id="hl-17-3"><a class="lnlinks" href="#hl-17-3"> 3</a>
</span><span class="lnt" id="hl-17-4"><a class="lnlinks" href="#hl-17-4"> 4</a>
</span><span class="lnt" id="hl-17-5"><a class="lnlinks" href="#hl-17-5"> 5</a>
</span><span class="lnt" id="hl-17-6"><a class="lnlinks" href="#hl-17-6"> 6</a>
</span><span class="lnt" id="hl-17-7"><a class="lnlinks" href="#hl-17-7"> 7</a>
</span><span class="lnt" id="hl-17-8"><a class="lnlinks" href="#hl-17-8"> 8</a>
</span><span class="lnt" id="hl-17-9"><a class="lnlinks" href="#hl-17-9"> 9</a>
</span><span class="lnt" id="hl-17-10"><a class="lnlinks" href="#hl-17-10">10</a>
</span><span class="lnt" id="hl-17-11"><a class="lnlinks" href="#hl-17-11">11</a>
</span><span class="lnt" id="hl-17-12"><a class="lnlinks" href="#hl-17-12">12</a>
</span><span class="lnt" id="hl-17-13"><a class="lnlinks" href="#hl-17-13">13</a>
</span><span class="lnt" id="hl-17-14"><a class="lnlinks" href="#hl-17-14">14</a>
</span><span class="lnt" id="hl-17-15"><a class="lnlinks" href="#hl-17-15">15</a>
</span><span class="lnt" id="hl-17-16"><a class="lnlinks" href="#hl-17-16">16</a>
</span><span class="lnt" id="hl-17-17"><a class="lnlinks" href="#hl-17-17">17</a>
</span><span class="lnt" id="hl-17-18"><a class="lnlinks" href="#hl-17-18">18</a>
</span><span class="lnt" id="hl-17-19"><a class="lnlinks" href="#hl-17-19">19</a>
</span><span class="lnt" id="hl-17-20"><a class="lnlinks" href="#hl-17-20">20</a>
</span><span class="lnt" id="hl-17-21"><a class="lnlinks" href="#hl-17-21">21</a>
</span><span class="lnt" id="hl-17-22"><a class="lnlinks" href="#hl-17-22">22</a>
</span><span class="lnt" id="hl-17-23"><a class="lnlinks" href="#hl-17-23">23</a>
</span><span class="lnt" id="hl-17-24"><a class="lnlinks" href="#hl-17-24">24</a>
</span><span class="lnt" id="hl-17-25"><a class="lnlinks" href="#hl-17-25">25</a>
</span><span class="lnt" id="hl-17-26"><a class="lnlinks" href="#hl-17-26">26</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// å¾ªç¯éå†æ•´æ•° 0 åˆ° 5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ‰“å°å½“å‰æ•´æ•°å€¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å¦‚æœå½“å‰æ•´æ•°å€¼ç­‰äº 3ï¼Œåˆ™è®©å½“å‰çº¿ç¨‹ä¼‘çœ  5 ç§’é’Ÿ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="n">5000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t1ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t1 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&#34;1å·çº¿ç¨‹&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t1</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t2ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t2 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Thread</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&#34;2å·çº¿ç¨‹&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t2</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t2</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ t3ï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾… t3 çº¿ç¨‹æ‰§è¡Œå®Œæˆ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Thread</span><span class="w"> </span><span class="n">t3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&#34;3å·çº¿ç¨‹&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t3</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">t3</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>yield</code>, <code>interrupt</code>, <code>å®ˆæŠ¤çº¿ç¨‹</code>ï¼Œ<code>çº¿ç¨‹ä¼˜å…ˆçº§</code>ç­‰&hellip;</p>
<h2 id="çº¿ç¨‹å®‰å…¨">çº¿ç¨‹å®‰å…¨<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹å®‰å…¨">#</a></h2>
<p>ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ“ä½œåŒä¸€ä¸ªå…±äº«èµ„æºçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸šåŠ¡å®‰å…¨é—®é¢˜</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-18-1"><a class="lnlinks" href="#hl-18-1"> 1</a>
</span><span class="lnt" id="hl-18-2"><a class="lnlinks" href="#hl-18-2"> 2</a>
</span><span class="lnt" id="hl-18-3"><a class="lnlinks" href="#hl-18-3"> 3</a>
</span><span class="lnt" id="hl-18-4"><a class="lnlinks" href="#hl-18-4"> 4</a>
</span><span class="lnt" id="hl-18-5"><a class="lnlinks" href="#hl-18-5"> 5</a>
</span><span class="lnt" id="hl-18-6"><a class="lnlinks" href="#hl-18-6"> 6</a>
</span><span class="lnt" id="hl-18-7"><a class="lnlinks" href="#hl-18-7"> 7</a>
</span><span class="lnt" id="hl-18-8"><a class="lnlinks" href="#hl-18-8"> 8</a>
</span><span class="lnt" id="hl-18-9"><a class="lnlinks" href="#hl-18-9"> 9</a>
</span><span class="lnt" id="hl-18-10"><a class="lnlinks" href="#hl-18-10">10</a>
</span><span class="lnt" id="hl-18-11"><a class="lnlinks" href="#hl-18-11">11</a>
</span><span class="lnt" id="hl-18-12"><a class="lnlinks" href="#hl-18-12">12</a>
</span><span class="lnt" id="hl-18-13"><a class="lnlinks" href="#hl-18-13">13</a>
</span><span class="lnt" id="hl-18-14"><a class="lnlinks" href="#hl-18-14">14</a>
</span><span class="lnt" id="hl-18-15"><a class="lnlinks" href="#hl-18-15">15</a>
</span><span class="lnt" id="hl-18-16"><a class="lnlinks" href="#hl-18-16">16</a>
</span><span class="lnt" id="hl-18-17"><a class="lnlinks" href="#hl-18-17">17</a>
</span><span class="lnt" id="hl-18-18"><a class="lnlinks" href="#hl-18-18">18</a>
</span><span class="lnt" id="hl-18-19"><a class="lnlinks" href="#hl-18-19">19</a>
</span><span class="lnt" id="hl-18-20"><a class="lnlinks" href="#hl-18-20">20</a>
</span><span class="lnt" id="hl-18-21"><a class="lnlinks" href="#hl-18-21">21</a>
</span><span class="lnt" id="hl-18-22"><a class="lnlinks" href="#hl-18-22">22</a>
</span><span class="lnt" id="hl-18-23"><a class="lnlinks" href="#hl-18-23">23</a>
</span><span class="lnt" id="hl-18-24"><a class="lnlinks" href="#hl-18-24">24</a>
</span><span class="lnt" id="hl-18-25"><a class="lnlinks" href="#hl-18-25">25</a>
</span><span class="lnt" id="hl-18-26"><a class="lnlinks" href="#hl-18-26">26</a>
</span><span class="lnt" id="hl-18-27"><a class="lnlinks" href="#hl-18-27">27</a>
</span><span class="lnt" id="hl-18-28"><a class="lnlinks" href="#hl-18-28">28</a>
</span><span class="lnt" id="hl-18-29"><a class="lnlinks" href="#hl-18-29">29</a>
</span><span class="lnt" id="hl-18-30"><a class="lnlinks" href="#hl-18-30">30</a>
</span><span class="lnt" id="hl-18-31"><a class="lnlinks" href="#hl-18-31">31</a>
</span><span class="lnt" id="hl-18-32"><a class="lnlinks" href="#hl-18-32">32</a>
</span><span class="lnt" id="hl-18-33"><a class="lnlinks" href="#hl-18-33">33</a>
</span><span class="lnt" id="hl-18-34"><a class="lnlinks" href="#hl-18-34">34</a>
</span><span class="lnt" id="hl-18-35"><a class="lnlinks" href="#hl-18-35">35</a>
</span><span class="lnt" id="hl-18-36"><a class="lnlinks" href="#hl-18-36">36</a>
</span><span class="lnt" id="hl-18-37"><a class="lnlinks" href="#hl-18-37">37</a>
</span><span class="lnt" id="hl-18-38"><a class="lnlinks" href="#hl-18-38">38</a>
</span><span class="lnt" id="hl-18-39"><a class="lnlinks" href="#hl-18-39">39</a>
</span><span class="lnt" id="hl-18-40"><a class="lnlinks" href="#hl-18-40">40</a>
</span><span class="lnt" id="hl-18-41"><a class="lnlinks" href="#hl-18-41">41</a>
</span><span class="lnt" id="hl-18-42"><a class="lnlinks" href="#hl-18-42">42</a>
</span><span class="lnt" id="hl-18-43"><a class="lnlinks" href="#hl-18-43">43</a>
</span><span class="lnt" id="hl-18-44"><a class="lnlinks" href="#hl-18-44">44</a>
</span><span class="lnt" id="hl-18-45"><a class="lnlinks" href="#hl-18-45">45</a>
</span><span class="lnt" id="hl-18-46"><a class="lnlinks" href="#hl-18-46">46</a>
</span><span class="lnt" id="hl-18-47"><a class="lnlinks" href="#hl-18-47">47</a>
</span><span class="lnt" id="hl-18-48"><a class="lnlinks" href="#hl-18-48">48</a>
</span><span class="lnt" id="hl-18-49"><a class="lnlinks" href="#hl-18-49">49</a>
</span><span class="lnt" id="hl-18-50"><a class="lnlinks" href="#hl-18-50">50</a>
</span><span class="lnt" id="hl-18-51"><a class="lnlinks" href="#hl-18-51">51</a>
</span><span class="lnt" id="hl-18-52"><a class="lnlinks" href="#hl-18-52">52</a>
</span><span class="lnt" id="hl-18-53"><a class="lnlinks" href="#hl-18-53">53</a>
</span><span class="lnt" id="hl-18-54"><a class="lnlinks" href="#hl-18-54">54</a>
</span><span class="lnt" id="hl-18-55"><a class="lnlinks" href="#hl-18-55">55</a>
</span><span class="lnt" id="hl-18-56"><a class="lnlinks" href="#hl-18-56">56</a>
</span><span class="lnt" id="hl-18-57"><a class="lnlinks" href="#hl-18-57">57</a>
</span><span class="lnt" id="hl-18-58"><a class="lnlinks" href="#hl-18-58">58</a>
</span><span class="lnt" id="hl-18-59"><a class="lnlinks" href="#hl-18-59">59</a>
</span><span class="lnt" id="hl-18-60"><a class="lnlinks" href="#hl-18-60">60</a>
</span><span class="lnt" id="hl-18-61"><a class="lnlinks" href="#hl-18-61">61</a>
</span><span class="lnt" id="hl-18-62"><a class="lnlinks" href="#hl-18-62">62</a>
</span><span class="lnt" id="hl-18-63"><a class="lnlinks" href="#hl-18-63">63</a>
</span><span class="lnt" id="hl-18-64"><a class="lnlinks" href="#hl-18-64">64</a>
</span><span class="lnt" id="hl-18-65"><a class="lnlinks" href="#hl-18-65">65</a>
</span><span class="lnt" id="hl-18-66"><a class="lnlinks" href="#hl-18-66">66</a>
</span><span class="lnt" id="hl-18-67"><a class="lnlinks" href="#hl-18-67">67</a>
</span><span class="lnt" id="hl-18-68"><a class="lnlinks" href="#hl-18-68">68</a>
</span><span class="lnt" id="hl-18-69"><a class="lnlinks" href="#hl-18-69">69</a>
</span><span class="lnt" id="hl-18-70"><a class="lnlinks" href="#hl-18-70">70</a>
</span><span class="lnt" id="hl-18-71"><a class="lnlinks" href="#hl-18-71">71</a>
</span><span class="lnt" id="hl-18-72"><a class="lnlinks" href="#hl-18-72">72</a>
</span><span class="lnt" id="hl-18-73"><a class="lnlinks" href="#hl-18-73">73</a>
</span><span class="lnt" id="hl-18-74"><a class="lnlinks" href="#hl-18-74">74</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadSafeDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Account</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Account</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">cardId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getCardId</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setCardId</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">cardId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">getMoney</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ä½¿ç”¨ synchronized å…³é”®å­—ç¡®ä¿çº¿ç¨‹å®‰å…¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="o">&gt;=</span><span class="n">money</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadSafeDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DrawThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">DrawThread</span><span class="p">(</span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acc</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">acc</span><span class="p">.</span><span class="na">drawMoney</span><span class="p">(</span><span class="n">10000</span><span class="p">.</span><span class="na">0</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo1</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Account</span><span class="p">(</span><span class="s">&#34;ICBC-10101&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">10000</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DrawThread</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;å°çº¢&#34;</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DrawThread</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;å°æ˜&#34;</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="cm">/**è¾“å‡ºç»“æœ
</span></span></span><span class="line"><span class="cl"><span class="cm">         * å°çº¢æ¥å–é’±10000.0æˆåŠŸï¼
</span></span></span><span class="line"><span class="cl"><span class="cm">         * å°æ˜æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼
</span></span></span><span class="line"><span class="cl"><span class="cm">         * å°çº¢å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: 0.0
</span></span></span><span class="line"><span class="cl"><span class="cm">         */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹åŒæ­¥çš„å¸¸è§æ–¹æ¡ˆ">#</a></h3>
<ul>
<li><strong>åŠ é”</strong>ï¼šæ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼ŒåŠ é”åæ‰èƒ½è¿›å…¥è®¿é—®ï¼Œè®¿é—®å®Œæ¯•åè‡ªåŠ¨è§£é”ï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰èƒ½å†åŠ é”è¿›æ¥</li>
</ul>
<h4 id="1-åŒæ­¥ä»£ç å—">(1) åŒæ­¥ä»£ç å—<a hidden class="anchor" aria-hidden="true" href="#1-åŒæ­¥ä»£ç å—">#</a></h4>
<ul>
<li>
<p><strong>ä½œç”¨</strong>ï¼šæŠŠè®¿é—®å…±äº«èµ„æºçš„æ ¸å¿ƒä»£ç ç»™ä¸Šé”ï¼Œä¾æ¬¡ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
</li>
<li>
<p><strong>åŸç†</strong>ï¼šæ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”åè¿›å…¥ï¼Œæ‰§è¡Œå®Œæ¯•åè‡ªåŠ¨ç»“æœï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥è¿›æ¥æ‰§è¡Œã€‚</p>
</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å¯¹äºå½“å‰åŒæ—¶æ‰§è¡Œçš„çº¿ç¨‹æ¥è¯´ï¼ŒåŒæ­¥é”å¿…é¡»åŒä¸€æŠŠï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºbug</li>
</ul>
<p><strong>é”å¯¹è±¡çš„ä½¿ç”¨è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>å»ºè®®ä½¿ç”¨<strong>å…±äº«èµ„æº</strong>ä½œä¸ºé”å¯¹è±¡ï¼Œå¯¹äº<strong>å®ä¾‹æ–¹æ³•</strong>å»ºè®®ä½¿ç”¨<code>this</code>ä½œä¸ºé”å¯¹è±¡</li>
<li>å¯¹äº<strong>é™æ€æ–¹æ³•</strong>å»ºè®®ä½¿ç”¨å­—èŠ‚ç ï¼ˆ<code>ç±»å.class</code>ï¼‰å¯¹è±¡ä½œä¸ºé”å¯¹è±¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-19-1"><a class="lnlinks" href="#hl-19-1"> 1</a>
</span><span class="lnt" id="hl-19-2"><a class="lnlinks" href="#hl-19-2"> 2</a>
</span><span class="lnt" id="hl-19-3"><a class="lnlinks" href="#hl-19-3"> 3</a>
</span><span class="lnt" id="hl-19-4"><a class="lnlinks" href="#hl-19-4"> 4</a>
</span><span class="lnt" id="hl-19-5"><a class="lnlinks" href="#hl-19-5"> 5</a>
</span><span class="lnt" id="hl-19-6"><a class="lnlinks" href="#hl-19-6"> 6</a>
</span><span class="lnt" id="hl-19-7"><a class="lnlinks" href="#hl-19-7"> 7</a>
</span><span class="lnt" id="hl-19-8"><a class="lnlinks" href="#hl-19-8"> 8</a>
</span><span class="lnt" id="hl-19-9"><a class="lnlinks" href="#hl-19-9"> 9</a>
</span><span class="lnt" id="hl-19-10"><a class="lnlinks" href="#hl-19-10">10</a>
</span><span class="lnt" id="hl-19-11"><a class="lnlinks" href="#hl-19-11">11</a>
</span><span class="lnt" id="hl-19-12"><a class="lnlinks" href="#hl-19-12">12</a>
</span><span class="lnt" id="hl-19-13"><a class="lnlinks" href="#hl-19-13">13</a>
</span><span class="lnt" id="hl-19-14"><a class="lnlinks" href="#hl-19-14">14</a>
</span><span class="lnt" id="hl-19-15"><a class="lnlinks" href="#hl-19-15">15</a>
</span><span class="lnt" id="hl-19-16"><a class="lnlinks" href="#hl-19-16">16</a>
</span><span class="lnt" id="hl-19-17"><a class="lnlinks" href="#hl-19-17">17</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="o">&gt;=</span><span class="n">money</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">synchronized</span><span class="p">(</span><span class="n">Account</span><span class="p">.</span><span class="na">class</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-åŒæ­¥æ–¹æ³•">(2) åŒæ­¥æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#2-åŒæ­¥æ–¹æ³•">#</a></h4>
<p>ä½¿ç”¨<code>synchronized</code>ä¿®é¥°æ–¹æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-20-1"><a class="lnlinks" href="#hl-20-1"> 1</a>
</span><span class="lnt" id="hl-20-2"><a class="lnlinks" href="#hl-20-2"> 2</a>
</span><span class="lnt" id="hl-20-3"><a class="lnlinks" href="#hl-20-3"> 3</a>
</span><span class="lnt" id="hl-20-4"><a class="lnlinks" href="#hl-20-4"> 4</a>
</span><span class="lnt" id="hl-20-5"><a class="lnlinks" href="#hl-20-5"> 5</a>
</span><span class="lnt" id="hl-20-6"><a class="lnlinks" href="#hl-20-6"> 6</a>
</span><span class="lnt" id="hl-20-7"><a class="lnlinks" href="#hl-20-7"> 7</a>
</span><span class="lnt" id="hl-20-8"><a class="lnlinks" href="#hl-20-8"> 8</a>
</span><span class="lnt" id="hl-20-9"><a class="lnlinks" href="#hl-20-9"> 9</a>
</span><span class="lnt" id="hl-20-10"><a class="lnlinks" href="#hl-20-10">10</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="o">&gt;=</span><span class="n">money</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>åŒæ­¥æ–¹æ³•åº•å±‚åŸç†</strong></p>
<ul>
<li>åŒæ­¥æ–¹æ³•å…¶å®åº•å±‚ä¹Ÿæ˜¯æœ‰éšå¼å¯¹è±¡çš„ï¼Œ åªæ˜¯é”çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ä»£ç </li>
<li>åŒæ ·ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨<code>this</code>ä½œä¸ºé”å¯¹è±¡ï¼›å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼šåŒæ­¥æ–¹æ³•é»˜è®¤ç”¨ç±»å<code>.class</code>ä½œä¸ºé”å¯¹è±¡</li>
</ul>
<h4 id="3-locké”">(3) Locké”<a hidden class="anchor" aria-hidden="true" href="#3-locké”">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-21-1"><a class="lnlinks" href="#hl-21-1"> 1</a>
</span><span class="lnt" id="hl-21-2"><a class="lnlinks" href="#hl-21-2"> 2</a>
</span><span class="lnt" id="hl-21-3"><a class="lnlinks" href="#hl-21-3"> 3</a>
</span><span class="lnt" id="hl-21-4"><a class="lnlinks" href="#hl-21-4"> 4</a>
</span><span class="lnt" id="hl-21-5"><a class="lnlinks" href="#hl-21-5"> 5</a>
</span><span class="lnt" id="hl-21-6"><a class="lnlinks" href="#hl-21-6"> 6</a>
</span><span class="lnt" id="hl-21-7"><a class="lnlinks" href="#hl-21-7"> 7</a>
</span><span class="lnt" id="hl-21-8"><a class="lnlinks" href="#hl-21-8"> 8</a>
</span><span class="lnt" id="hl-21-9"><a class="lnlinks" href="#hl-21-9"> 9</a>
</span><span class="lnt" id="hl-21-10"><a class="lnlinks" href="#hl-21-10">10</a>
</span><span class="lnt" id="hl-21-11"><a class="lnlinks" href="#hl-21-11">11</a>
</span><span class="lnt" id="hl-21-12"><a class="lnlinks" href="#hl-21-12">12</a>
</span><span class="lnt" id="hl-21-13"><a class="lnlinks" href="#hl-21-13">13</a>
</span><span class="lnt" id="hl-21-14"><a class="lnlinks" href="#hl-21-14">14</a>
</span><span class="lnt" id="hl-21-15"><a class="lnlinks" href="#hl-21-15">15</a>
</span><span class="lnt" id="hl-21-16"><a class="lnlinks" href="#hl-21-16">16</a>
</span><span class="lnt" id="hl-21-17"><a class="lnlinks" href="#hl-21-17">17</a>
</span><span class="lnt" id="hl-21-18"><a class="lnlinks" href="#hl-21-18">18</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">lk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ReentrantLock</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">lk</span><span class="p">.</span><span class="na">lock</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="o">&gt;=</span><span class="n">money</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æˆåŠŸï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;å–é’±ä¹‹åï¼Œä½™é¢å‰©ä½™: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;æ¥å–é’±ï¼Œ ä½™é¢ä¸è¶³ï¼&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">lk</span><span class="p">.</span><span class="na">unlock</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="çº¿ç¨‹é—´é€šä¿¡">çº¿ç¨‹é—´é€šä¿¡<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹é—´é€šä¿¡">#</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-22-1"><a class="lnlinks" href="#hl-22-1"> 1</a>
</span><span class="lnt" id="hl-22-2"><a class="lnlinks" href="#hl-22-2"> 2</a>
</span><span class="lnt" id="hl-22-3"><a class="lnlinks" href="#hl-22-3"> 3</a>
</span><span class="lnt" id="hl-22-4"><a class="lnlinks" href="#hl-22-4"> 4</a>
</span><span class="lnt" id="hl-22-5"><a class="lnlinks" href="#hl-22-5"> 5</a>
</span><span class="lnt" id="hl-22-6"><a class="lnlinks" href="#hl-22-6"> 6</a>
</span><span class="lnt" id="hl-22-7"><a class="lnlinks" href="#hl-22-7"> 7</a>
</span><span class="lnt" id="hl-22-8"><a class="lnlinks" href="#hl-22-8"> 8</a>
</span><span class="lnt" id="hl-22-9"><a class="lnlinks" href="#hl-22-9"> 9</a>
</span><span class="lnt" id="hl-22-10"><a class="lnlinks" href="#hl-22-10">10</a>
</span><span class="lnt" id="hl-22-11"><a class="lnlinks" href="#hl-22-11">11</a>
</span><span class="lnt" id="hl-22-12"><a class="lnlinks" href="#hl-22-12">12</a>
</span><span class="lnt" id="hl-22-13"><a class="lnlinks" href="#hl-22-13">13</a>
</span><span class="lnt" id="hl-22-14"><a class="lnlinks" href="#hl-22-14">14</a>
</span><span class="lnt" id="hl-22-15"><a class="lnlinks" href="#hl-22-15">15</a>
</span><span class="lnt" id="hl-22-16"><a class="lnlinks" href="#hl-22-16">16</a>
</span><span class="lnt" id="hl-22-17"><a class="lnlinks" href="#hl-22-17">17</a>
</span><span class="lnt" id="hl-22-18"><a class="lnlinks" href="#hl-22-18">18</a>
</span><span class="lnt" id="hl-22-19"><a class="lnlinks" href="#hl-22-19">19</a>
</span><span class="lnt" id="hl-22-20"><a class="lnlinks" href="#hl-22-20">20</a>
</span><span class="lnt" id="hl-22-21"><a class="lnlinks" href="#hl-22-21">21</a>
</span><span class="lnt" id="hl-22-22"><a class="lnlinks" href="#hl-22-22">22</a>
</span><span class="lnt" id="hl-22-23"><a class="lnlinks" href="#hl-22-23">23</a>
</span><span class="lnt" id="hl-22-24"><a class="lnlinks" href="#hl-22-24">24</a>
</span><span class="lnt" id="hl-22-25"><a class="lnlinks" href="#hl-22-25">25</a>
</span><span class="lnt" id="hl-22-26"><a class="lnlinks" href="#hl-22-26">26</a>
</span><span class="lnt" id="hl-22-27"><a class="lnlinks" href="#hl-22-27">27</a>
</span><span class="lnt" id="hl-22-28"><a class="lnlinks" href="#hl-22-28">28</a>
</span><span class="lnt" id="hl-22-29"><a class="lnlinks" href="#hl-22-29">29</a>
</span><span class="lnt" id="hl-22-30"><a class="lnlinks" href="#hl-22-30">30</a>
</span><span class="lnt" id="hl-22-31"><a class="lnlinks" href="#hl-22-31">31</a>
</span><span class="lnt" id="hl-22-32"><a class="lnlinks" href="#hl-22-32">32</a>
</span><span class="lnt" id="hl-22-33"><a class="lnlinks" href="#hl-22-33">33</a>
</span><span class="lnt" id="hl-22-34"><a class="lnlinks" href="#hl-22-34">34</a>
</span><span class="lnt" id="hl-22-35"><a class="lnlinks" href="#hl-22-35">35</a>
</span><span class="lnt" id="hl-22-36"><a class="lnlinks" href="#hl-22-36">36</a>
</span><span class="lnt" id="hl-22-37"><a class="lnlinks" href="#hl-22-37">37</a>
</span><span class="lnt" id="hl-22-38"><a class="lnlinks" href="#hl-22-38">38</a>
</span><span class="lnt" id="hl-22-39"><a class="lnlinks" href="#hl-22-39">39</a>
</span><span class="lnt" id="hl-22-40"><a class="lnlinks" href="#hl-22-40">40</a>
</span><span class="lnt" id="hl-22-41"><a class="lnlinks" href="#hl-22-41">41</a>
</span><span class="lnt" id="hl-22-42"><a class="lnlinks" href="#hl-22-42">42</a>
</span><span class="lnt" id="hl-22-43"><a class="lnlinks" href="#hl-22-43">43</a>
</span><span class="lnt" id="hl-22-44"><a class="lnlinks" href="#hl-22-44">44</a>
</span><span class="lnt" id="hl-22-45"><a class="lnlinks" href="#hl-22-45">45</a>
</span><span class="lnt" id="hl-22-46"><a class="lnlinks" href="#hl-22-46">46</a>
</span><span class="lnt" id="hl-22-47"><a class="lnlinks" href="#hl-22-47">47</a>
</span><span class="lnt" id="hl-22-48"><a class="lnlinks" href="#hl-22-48">48</a>
</span><span class="lnt" id="hl-22-49"><a class="lnlinks" href="#hl-22-49">49</a>
</span><span class="lnt" id="hl-22-50"><a class="lnlinks" href="#hl-22-50">50</a>
</span><span class="lnt" id="hl-22-51"><a class="lnlinks" href="#hl-22-51">51</a>
</span><span class="lnt" id="hl-22-52"><a class="lnlinks" href="#hl-22-52">52</a>
</span><span class="lnt" id="hl-22-53"><a class="lnlinks" href="#hl-22-53">53</a>
</span><span class="lnt" id="hl-22-54"><a class="lnlinks" href="#hl-22-54">54</a>
</span><span class="lnt" id="hl-22-55"><a class="lnlinks" href="#hl-22-55">55</a>
</span><span class="lnt" id="hl-22-56"><a class="lnlinks" href="#hl-22-56">56</a>
</span><span class="lnt" id="hl-22-57"><a class="lnlinks" href="#hl-22-57">57</a>
</span><span class="lnt" id="hl-22-58"><a class="lnlinks" href="#hl-22-58">58</a>
</span><span class="lnt" id="hl-22-59"><a class="lnlinks" href="#hl-22-59">59</a>
</span><span class="lnt" id="hl-22-60"><a class="lnlinks" href="#hl-22-60">60</a>
</span><span class="lnt" id="hl-22-61"><a class="lnlinks" href="#hl-22-61">61</a>
</span><span class="lnt" id="hl-22-62"><a class="lnlinks" href="#hl-22-62">62</a>
</span><span class="lnt" id="hl-22-63"><a class="lnlinks" href="#hl-22-63">63</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†ä½¿ç”¨ wait() å’Œ notify() æ–¹æ³•æ¥å®ç°å¤šçº¿ç¨‹é—´çš„æ¶ˆæ¯ä¼ é€’å’ŒåŒæ­¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ä¸»è¦çŸ¥è¯†ç‚¹ï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1. wait() æ–¹æ³•ï¼šä½¿å½“å‰çº¿ç¨‹ç­‰å¾…å¹¶é‡Šæ”¾æ‰€å é”ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ notify() æ–¹æ³•æˆ– notifyAll() æ–¹æ³•æ¥å”¤é†’å®ƒã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2. notify() æ–¹æ³•ï¼šå”¤é†’æ­£åœ¨ç­‰å¾…çš„å•ä¸ªçº¿ç¨‹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 3. notifyAll() æ–¹æ³•ï¼šå”¤é†’æ­£åœ¨ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 4. ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼šå¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹å‘å…±äº«èµ„æºä¸­ç”Ÿäº§ç‰©å“ï¼Œå¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ä»å…±äº«èµ„æºä¸­æ¶ˆè´¹ç‰©å“ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 5. ä½¿ç”¨ synchronized å…³é”®å­—æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œé¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºå¼•èµ·çš„æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ThreadMessageDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Desk</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * ç”Ÿäº§é£Ÿç‰©çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">put</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// å¦‚æœæ¡Œå­ä¸Šæ²¡æœ‰é£Ÿç‰©ï¼Œåˆ™ç”Ÿäº§ä¸€ä¸ªé£Ÿç‰©</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;åšçš„è‚‰åŒ…å­&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;åšäº†ä¸€ä¸ªè‚‰åŒ…å­&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="n">2000</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ¨¡æ‹Ÿåˆ¶ä½œæ—¶é—´</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">notifyAll</span><span class="p">();</span><span class="w"> </span><span class="c1">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">wait</span><span class="p">();</span><span class="w"> </span><span class="c1">// ç­‰å¾…è¢«å”¤é†’</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">notifyAll</span><span class="p">();</span><span class="w"> </span><span class="c1">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">wait</span><span class="p">();</span><span class="w"> </span><span class="c1">// ç­‰å¾…è¢«å”¤é†’</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * æ¶ˆè´¹é£Ÿç‰©çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">get</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// å¦‚æœæ¡Œå­ä¸Šæœ‰é£Ÿç‰©ï¼Œåˆ™æ¶ˆè´¹ä¸€ä¸ªé£Ÿç‰©</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">list</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;åƒäº†&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">0</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">list</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span><span class="w"> </span><span class="c1">// æ¸…ç©ºæ¡Œå­ä¸Šçš„é£Ÿç‰©</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="n">1000</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ¨¡æ‹Ÿåƒçš„æ—¶é—´</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">notifyAll</span><span class="p">();</span><span class="w"> </span><span class="c1">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">wait</span><span class="p">();</span><span class="w"> </span><span class="c1">// ç­‰å¾…è¢«å”¤é†’</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">notifyAll</span><span class="p">();</span><span class="w"> </span><span class="c1">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">wait</span><span class="p">();</span><span class="w"> </span><span class="c1">// ç­‰å¾…è¢«å”¤é†’</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="çº¿ç¨‹æ± ">çº¿ç¨‹æ± <a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹æ± ">#</a></h2>
<ul>
<li>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çº¿ç¨‹çš„æŠ€æœ¯</li>
</ul>
<p><code>ThreadPoolExecutor</code>æ„é€ å™¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-23-1"><a class="lnlinks" href="#hl-23-1">1</a>
</span><span class="lnt" id="hl-23-2"><a class="lnlinks" href="#hl-23-2">2</a>
</span><span class="lnt" id="hl-23-3"><a class="lnlinks" href="#hl-23-3">3</a>
</span><span class="lnt" id="hl-23-4"><a class="lnlinks" href="#hl-23-4">4</a>
</span><span class="lnt" id="hl-23-5"><a class="lnlinks" href="#hl-23-5">5</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="nf">ThreadPoolExecutor</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">corePoolSize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">maximumPoolSize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">keepAliveTime</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="n">TimeUnit</span><span class="w"> </span><span class="n">unit</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="n">BlockingQueue</span><span class="o">&lt;</span><span class="n">Runnable</span><span class="o">&gt;</span><span class="w"> </span><span class="n">workQueue</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å‚æ•°ä¸€ï¼š<code>corePoolSize</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡</li>
<li>å‚æ•°äºŒï¼š<code>maximumPoolSize</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°é‡</li>
<li>å‚æ•°ä¸‰ï¼š<code>keepAliveTime</code>ï¼šæŒ‡å®šä¸´æ—¶çº¿ç¨‹çš„å­˜æ´»æ—¶é—´</li>
<li>å‚æ•°å››ï¼š<code>unit</code>:æŒ‡å®šä¸´æ—¶çº¿ç¨‹å­˜æ´»çš„æ—¶é—´å•ä½ï¼ˆç§’ï¼Œåˆ†ï¼Œæ—¶ï¼Œå¤©ï¼‰</li>
<li>å‚æ•°äº”ï¼š<code>workQueue</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å‚æ•°å…­ï¼š<code>threadFactory</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„çº¿ç¨‹å·¥å‚</li>
<li>å‚æ•°ä¸ƒï¼š<code>handler</code>ï¼šæŒ‡å®šçº¿ç¨‹æ± çš„ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼ˆçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†çš„æ—¶å€™ï¼Œæ–°ä»»åŠ¡æ¥äº†è¯¥æ€ä¹ˆå¤„ç†ï¼‰</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ol>
<li><strong>ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Ÿ</strong>
<ul>
<li>æ–°ä»»åŠ¡æäº¤æ—¶å‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶æ‰ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹</li>
</ul>
</li>
<li><strong>ä»€ä¹ˆæ—¶å€™ä¼šå¼€å§‹æ‹’ç»æ–°ä»»åŠ¡ï¼Ÿ</strong>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹å’Œä¸´æ—¶çº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œæ–°çš„ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šå¼€å§‹æ‹’ç»æ–°ä»»åŠ¡</li>
</ul>
</li>
</ol>
<h3 id="æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥<a hidden class="anchor" aria-hidden="true" href="#æ–°ä»»åŠ¡æ‹’ç»ç­–ç•¥">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:center"><code>ç­–ç•¥</code></th>
<th style="text-align:center"><code>è§£é‡Š</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.AbortPolicy</code></td>
<td style="text-align:center">å½“ä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± ä¸­è¢«æ‹’ç»æ—¶ï¼ŒæŠ›å‡º<code>RejectedExecutionException</code>å¼‚å¸¸ã€‚ï¼ˆé»˜è®¤ç­–ç•¥ï¼‰</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.DiscardPolicy</code></td>
<td style="text-align:center">ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä¸æ¨è</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.DiscardOldestPolicy</code></td>
<td style="text-align:center">æŠ›å¼ƒé˜Ÿåˆ—ä¸­<strong>ç­‰å¾…æœ€ä¹…</strong>çš„ä»»åŠ¡ï¼Œç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­</td>
</tr>
<tr>
<td style="text-align:center"><code>ThreadPoolExecutor.CallerRunsPolicy</code></td>
<td style="text-align:center">ç”±ä¸»çº¿ç¨‹è´Ÿè´£è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ä»è€Œç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œ</td>
</tr>
</tbody>
</table>
<h3 id="executorserviceçš„å¸¸ç”¨æ–¹æ³•"><code>ExecutorService</code>çš„å¸¸ç”¨æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#executorserviceçš„å¸¸ç”¨æ–¹æ³•">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>æ–¹æ³•ã€æè¿°</strong></th>
<th style="text-align:center"><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>execute(Runnable command)</code></td>
<td style="text-align:center">æ‰§è¡ŒRunnableä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center"><code>submit(Callable&lt;T&gt; task)</code></td>
<td style="text-align:center">æ‰§è¡ŒCallableä»»åŠ¡ï¼Œè¿”å›æœªæ¥ä»»åŠ¡å¯¹è±¡ï¼Œç”¨äºè·å–çº¿ç¨‹è¿”å›çš„ç»“æœ</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdown()</code></td>
<td style="text-align:center">ç­‰å…¨éƒ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†å…³é—­çº¿ç¨‹æ± ï¼</td>
</tr>
<tr>
<td style="text-align:center"><code>List&lt;Runnable&gt; shutdownNow()</code></td>
<td style="text-align:center">ç«‹åˆ»å…³é—­çº¿ç¨‹æ± ï¼Œåœæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶è¿”å›é˜Ÿåˆ—ä¸­æœªæ‰§è¡Œçš„ä»»åŠ¡</td>
</tr>
</tbody>
</table>
<h4 id="æ‰§è¡Œrunnableä»»åŠ¡">æ‰§è¡ŒRunnableä»»åŠ¡<a hidden class="anchor" aria-hidden="true" href="#æ‰§è¡Œrunnableä»»åŠ¡">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-24-1"><a class="lnlinks" href="#hl-24-1"> 1</a>
</span><span class="lnt" id="hl-24-2"><a class="lnlinks" href="#hl-24-2"> 2</a>
</span><span class="lnt" id="hl-24-3"><a class="lnlinks" href="#hl-24-3"> 3</a>
</span><span class="lnt" id="hl-24-4"><a class="lnlinks" href="#hl-24-4"> 4</a>
</span><span class="lnt" id="hl-24-5"><a class="lnlinks" href="#hl-24-5"> 5</a>
</span><span class="lnt" id="hl-24-6"><a class="lnlinks" href="#hl-24-6"> 6</a>
</span><span class="lnt" id="hl-24-7"><a class="lnlinks" href="#hl-24-7"> 7</a>
</span><span class="lnt" id="hl-24-8"><a class="lnlinks" href="#hl-24-8"> 8</a>
</span><span class="lnt" id="hl-24-9"><a class="lnlinks" href="#hl-24-9"> 9</a>
</span><span class="lnt" id="hl-24-10"><a class="lnlinks" href="#hl-24-10">10</a>
</span><span class="lnt" id="hl-24-11"><a class="lnlinks" href="#hl-24-11">11</a>
</span><span class="lnt" id="hl-24-12"><a class="lnlinks" href="#hl-24-12">12</a>
</span><span class="lnt" id="hl-24-13"><a class="lnlinks" href="#hl-24-13">13</a>
</span><span class="lnt" id="hl-24-14"><a class="lnlinks" href="#hl-24-14">14</a>
</span><span class="lnt" id="hl-24-15"><a class="lnlinks" href="#hl-24-15">15</a>
</span><span class="lnt" id="hl-24-16"><a class="lnlinks" href="#hl-24-16">16</a>
</span><span class="lnt" id="hl-24-17"><a class="lnlinks" href="#hl-24-17">17</a>
</span><span class="lnt" id="hl-24-18"><a class="lnlinks" href="#hl-24-18">18</a>
</span><span class="lnt" id="hl-24-19"><a class="lnlinks" href="#hl-24-19">19</a>
</span><span class="lnt" id="hl-24-20"><a class="lnlinks" href="#hl-24-20">20</a>
</span><span class="lnt" id="hl-24-21"><a class="lnlinks" href="#hl-24-21">21</a>
</span><span class="lnt" id="hl-24-22"><a class="lnlinks" href="#hl-24-22">22</a>
</span><span class="lnt" id="hl-24-23"><a class="lnlinks" href="#hl-24-23">23</a>
</span><span class="lnt" id="hl-24-24"><a class="lnlinks" href="#hl-24-24">24</a>
</span><span class="lnt" id="hl-24-25"><a class="lnlinks" href="#hl-24-25">25</a>
</span><span class="lnt" id="hl-24-26"><a class="lnlinks" href="#hl-24-26">26</a>
</span><span class="lnt" id="hl-24-27"><a class="lnlinks" href="#hl-24-27">27</a>
</span><span class="lnt" id="hl-24-28"><a class="lnlinks" href="#hl-24-28">28</a>
</span><span class="lnt" id="hl-24-29"><a class="lnlinks" href="#hl-24-29">29</a>
</span><span class="lnt" id="hl-24-30"><a class="lnlinks" href="#hl-24-30">30</a>
</span><span class="lnt" id="hl-24-31"><a class="lnlinks" href="#hl-24-31">31</a>
</span><span class="lnt" id="hl-24-32"><a class="lnlinks" href="#hl-24-32">32</a>
</span><span class="lnt" id="hl-24-33"><a class="lnlinks" href="#hl-24-33">33</a>
</span><span class="lnt" id="hl-24-34"><a class="lnlinks" href="#hl-24-34">34</a>
</span><span class="lnt" id="hl-24-35"><a class="lnlinks" href="#hl-24-35">35</a>
</span><span class="lnt" id="hl-24-36"><a class="lnlinks" href="#hl-24-36">36</a>
</span><span class="lnt" id="hl-24-37"><a class="lnlinks" href="#hl-24-37">37</a>
</span><span class="lnt" id="hl-24-38"><a class="lnlinks" href="#hl-24-38">38</a>
</span><span class="lnt" id="hl-24-39"><a class="lnlinks" href="#hl-24-39">39</a>
</span><span class="lnt" id="hl-24-40"><a class="lnlinks" href="#hl-24-40">40</a>
</span><span class="lnt" id="hl-24-41"><a class="lnlinks" href="#hl-24-41">41</a>
</span><span class="lnt" id="hl-24-42"><a class="lnlinks" href="#hl-24-42">42</a>
</span><span class="lnt" id="hl-24-43"><a class="lnlinks" href="#hl-24-43">43</a>
</span><span class="lnt" id="hl-24-44"><a class="lnlinks" href="#hl-24-44">44</a>
</span><span class="lnt" id="hl-24-45"><a class="lnlinks" href="#hl-24-45">45</a>
</span><span class="lnt" id="hl-24-46"><a class="lnlinks" href="#hl-24-46">46</a>
</span><span class="lnt" id="hl-24-47"><a class="lnlinks" href="#hl-24-47">47</a>
</span><span class="lnt" id="hl-24-48"><a class="lnlinks" href="#hl-24-48">48</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºçº¿ç¨‹æ± </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä½¿ç”¨ ThreadPoolExecutor æ„é€ æ–¹æ³•è‡ªå®šä¹‰çº¿ç¨‹æ± </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// æ ¸å¿ƒçº¿ç¨‹æ•°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">5</span><span class="p">,</span><span class="w"> </span><span class="c1">// æœ€å¤§çº¿ç¨‹æ•°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">8</span><span class="p">,</span><span class="w"> </span><span class="c1">// çº¿ç¨‹ç©ºé—²æ—¶é—´</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">,</span><span class="w"> </span><span class="c1">// æ—¶é—´å•ä½</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayBlockingQueue</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">4</span><span class="p">),</span><span class="w"> </span><span class="c1">// å·¥ä½œé˜Ÿåˆ—</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Executors</span><span class="p">.</span><span class="na">defaultThreadFactory</span><span class="p">(),</span><span class="w"> </span><span class="c1">// çº¿ç¨‹å·¥å‚ï¼Œ ç”¨äºåˆ›å»ºæ–°çº¿ç¨‹çš„å®ä¾‹ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">.</span><span class="na">CallerRunsPolicy</span><span class="p">()</span><span class="w"> </span><span class="c1">// æ‹’ç»ç­–ç•¥</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyRunnable</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æäº¤ä»»åŠ¡ç»™çº¿ç¨‹æ± æ‰§è¡Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä½¿ç”¨æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// å¤ç”¨å‰é¢çš„æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä½¿ç”¨ä¸´æ—¶çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// ä½¿ç”¨ä¸´æ—¶çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ‰§è¡Œä»»åŠ¡è¢«æ‹’ç»ï¼ˆæ‹’ç»ç­–ç•¥å†³å®šï¼‰</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ‰§è¡Œä»»åŠ¡è¢«æ‹’ç»ï¼ˆæ‹’ç»ç­–ç•¥å†³å®šï¼‰</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å…³é—­çº¿ç¨‹æ± </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        pool.shutdown();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        pool.shutdownNow();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// è‡ªå®šä¹‰ä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">MyRunnable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä»»åŠ¡é€»è¾‘</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ‰§è¡Œcallableä»»åŠ¡">æ‰§è¡ŒCallableä»»åŠ¡<a hidden class="anchor" aria-hidden="true" href="#æ‰§è¡Œcallableä»»åŠ¡">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-25-1"><a class="lnlinks" href="#hl-25-1"> 1</a>
</span><span class="lnt" id="hl-25-2"><a class="lnlinks" href="#hl-25-2"> 2</a>
</span><span class="lnt" id="hl-25-3"><a class="lnlinks" href="#hl-25-3"> 3</a>
</span><span class="lnt" id="hl-25-4"><a class="lnlinks" href="#hl-25-4"> 4</a>
</span><span class="lnt" id="hl-25-5"><a class="lnlinks" href="#hl-25-5"> 5</a>
</span><span class="lnt" id="hl-25-6"><a class="lnlinks" href="#hl-25-6"> 6</a>
</span><span class="lnt" id="hl-25-7"><a class="lnlinks" href="#hl-25-7"> 7</a>
</span><span class="lnt" id="hl-25-8"><a class="lnlinks" href="#hl-25-8"> 8</a>
</span><span class="lnt" id="hl-25-9"><a class="lnlinks" href="#hl-25-9"> 9</a>
</span><span class="lnt" id="hl-25-10"><a class="lnlinks" href="#hl-25-10">10</a>
</span><span class="lnt" id="hl-25-11"><a class="lnlinks" href="#hl-25-11">11</a>
</span><span class="lnt" id="hl-25-12"><a class="lnlinks" href="#hl-25-12">12</a>
</span><span class="lnt" id="hl-25-13"><a class="lnlinks" href="#hl-25-13">13</a>
</span><span class="lnt" id="hl-25-14"><a class="lnlinks" href="#hl-25-14">14</a>
</span><span class="lnt" id="hl-25-15"><a class="lnlinks" href="#hl-25-15">15</a>
</span><span class="lnt" id="hl-25-16"><a class="lnlinks" href="#hl-25-16">16</a>
</span><span class="lnt" id="hl-25-17"><a class="lnlinks" href="#hl-25-17">17</a>
</span><span class="lnt" id="hl-25-18"><a class="lnlinks" href="#hl-25-18">18</a>
</span><span class="lnt" id="hl-25-19"><a class="lnlinks" href="#hl-25-19">19</a>
</span><span class="lnt" id="hl-25-20"><a class="lnlinks" href="#hl-25-20">20</a>
</span><span class="lnt" id="hl-25-21"><a class="lnlinks" href="#hl-25-21">21</a>
</span><span class="lnt" id="hl-25-22"><a class="lnlinks" href="#hl-25-22">22</a>
</span><span class="lnt" id="hl-25-23"><a class="lnlinks" href="#hl-25-23">23</a>
</span><span class="lnt" id="hl-25-24"><a class="lnlinks" href="#hl-25-24">24</a>
</span><span class="lnt" id="hl-25-25"><a class="lnlinks" href="#hl-25-25">25</a>
</span><span class="lnt" id="hl-25-26"><a class="lnlinks" href="#hl-25-26">26</a>
</span><span class="lnt" id="hl-25-27"><a class="lnlinks" href="#hl-25-27">27</a>
</span><span class="lnt" id="hl-25-28"><a class="lnlinks" href="#hl-25-28">28</a>
</span><span class="lnt" id="hl-25-29"><a class="lnlinks" href="#hl-25-29">29</a>
</span><span class="lnt" id="hl-25-30"><a class="lnlinks" href="#hl-25-30">30</a>
</span><span class="lnt" id="hl-25-31"><a class="lnlinks" href="#hl-25-31">31</a>
</span><span class="lnt" id="hl-25-32"><a class="lnlinks" href="#hl-25-32">32</a>
</span><span class="lnt" id="hl-25-33"><a class="lnlinks" href="#hl-25-33">33</a>
</span><span class="lnt" id="hl-25-34"><a class="lnlinks" href="#hl-25-34">34</a>
</span><span class="lnt" id="hl-25-35"><a class="lnlinks" href="#hl-25-35">35</a>
</span><span class="lnt" id="hl-25-36"><a class="lnlinks" href="#hl-25-36">36</a>
</span><span class="lnt" id="hl-25-37"><a class="lnlinks" href="#hl-25-37">37</a>
</span><span class="lnt" id="hl-25-38"><a class="lnlinks" href="#hl-25-38">38</a>
</span><span class="lnt" id="hl-25-39"><a class="lnlinks" href="#hl-25-39">39</a>
</span><span class="lnt" id="hl-25-40"><a class="lnlinks" href="#hl-25-40">40</a>
</span><span class="lnt" id="hl-25-41"><a class="lnlinks" href="#hl-25-41">41</a>
</span><span class="lnt" id="hl-25-42"><a class="lnlinks" href="#hl-25-42">42</a>
</span><span class="lnt" id="hl-25-43"><a class="lnlinks" href="#hl-25-43">43</a>
</span><span class="lnt" id="hl-25-44"><a class="lnlinks" href="#hl-25-44">44</a>
</span><span class="lnt" id="hl-25-45"><a class="lnlinks" href="#hl-25-45">45</a>
</span><span class="lnt" id="hl-25-46"><a class="lnlinks" href="#hl-25-46">46</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ExecutionException</span><span class="p">,</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºçº¿ç¨‹æ± </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// æ ¸å¿ƒçº¿ç¨‹æ•°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">5</span><span class="p">,</span><span class="w"> </span><span class="c1">// æœ€å¤§çº¿ç¨‹æ•°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">8</span><span class="p">,</span><span class="w"> </span><span class="c1">// çº¿ç¨‹ç©ºé—²æ—¶é—´</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">,</span><span class="w"> </span><span class="c1">// æ—¶é—´å•ä½</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayBlockingQueue</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">4</span><span class="p">),</span><span class="w"> </span><span class="c1">// å·¥ä½œé˜Ÿåˆ—</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Executors</span><span class="p">.</span><span class="na">defaultThreadFactory</span><span class="p">(),</span><span class="w"> </span><span class="c1">// çº¿ç¨‹å·¥å‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">.</span><span class="na">CallerRunsPolicy</span><span class="p">()</span><span class="w"> </span><span class="c1">// æ‹’ç»ç­–ç•¥</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æäº¤å¯è°ƒç”¨ä»»åŠ¡ç»™çº¿ç¨‹æ± æ‰§è¡Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">100</span><span class="p">));</span><span class="w"> </span><span class="c1">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">200</span><span class="p">));</span><span class="w"> </span><span class="c1">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">300</span><span class="p">));</span><span class="w"> </span><span class="c1">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="n">400</span><span class="p">));</span><span class="w"> </span><span class="c1">// æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// è·å–ä»»åŠ¡æ‰§è¡Œç»“æœå¹¶è¾“å‡º</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">get</span><span class="p">());</span><span class="w"> </span><span class="c1">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="na">get</span><span class="p">());</span><span class="w"> </span><span class="c1">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="na">get</span><span class="p">());</span><span class="w"> </span><span class="c1">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f4</span><span class="p">.</span><span class="na">get</span><span class="p">());</span><span class="w"> </span><span class="c1">// é˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå¹¶è·å–ç»“æœ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å…³é—­çº¿ç¨‹æ± </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">shutdown</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// è‡ªå®šä¹‰å¯è°ƒç”¨ä»»åŠ¡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">MyCallable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyCallable</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">call</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ä»»åŠ¡é€»è¾‘</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;Result: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="executors"><code>Executors</code><a hidden class="anchor" aria-hidden="true" href="#executors">#</a></h3>
<ul>
<li>æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± çš„å·¥å…·ç±»ï¼Œæä¾›é‡Œå¾ˆå¤šé™æ€æ–¹æ³•ç”¨äºè¿”å›ä¸åŒç‰¹ç‚¹çš„çº¿ç¨‹æ± å¯¹è±¡</li>
</ul>
<p><code>Executors</code>ä½¿ç”¨å¯èƒ½å­˜åœ¨çš„é™·è¿›</p>
<ul>
<li>å¤§å‹å¹¶å‘ç³»ç»Ÿç¯å¢ƒä¸­ä½¿ç”¨<code>Executors</code>å¦‚æœä¸æ³¨æ„å¯èƒ½ä¼šå‡ºç°ç³»ç»Ÿé£é™©</li>
</ul>
<blockquote>
<ol start="4">
<li>ã€å¼ºåˆ¶ã€‘çº¿ç¨‹æ± ä¸å…è®¸ä½¿ç”¨ Executors å»åˆ›å»ºï¼Œè€Œæ˜¯é€šè¿‡ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™
æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚
è¯´æ˜ï¼šExecutors è¿”å›çš„çº¿ç¨‹æ± å¯¹è±¡çš„å¼Šç«¯å¦‚ä¸‹ï¼š
1ï¼‰ FixedThreadPool å’Œ SingleThreadPoolï¼š
å…è®¸çš„è¯·æ±‚é˜Ÿåˆ—é•¿åº¦ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šå †ç§¯å¤§é‡çš„è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´ OOM(OutOfMemoryError)ã€‚
2ï¼‰ CachedThreadPoolï¼š
å…è®¸çš„åˆ›å»ºçº¿ç¨‹æ•°é‡ä¸º Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºå¤§é‡çš„çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ OOMã€‚</li>
</ol>
</blockquote>
<h3 id="volatile-å…³é”®å­—"><code>volatile</code> å…³é”®å­—<a hidden class="anchor" aria-hidden="true" href="#volatile-å…³é”®å­—">#</a></h3>
<h4 id="ä½œç”¨">ä½œç”¨:<a hidden class="anchor" aria-hidden="true" href="#ä½œç”¨">#</a></h4>
<ol>
<li><strong>å¯è§æ€§ä¿è¯</strong> ï¼š å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æœä½¿ç”¨ä¸åŒçš„åŒæ­¥æœºåˆ¶ï¼Œçº¿ç¨‹å¯èƒ½ä¼šç¼“å­˜å˜é‡çš„å€¼ï¼Œå¹¶ä¸ä¼šç«‹å³ä»ä¸»å†…å­˜ä¸­è¯»å–æˆ–å†™å›ï¼Œä½¿ç”¨<code>volatile</code>ä¿®é¥°çš„å˜é‡ï¼Œèƒ½å¤Ÿä¿è¯å¯¹è¯¥å˜é‡çš„æ‰€æœ‰å†™æ“ä½œéƒ½ä¼š<strong>ç«‹å³</strong>è¢«åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œæ‰€æœ‰å¯¹å®ƒçš„è¯»å–æ“ä½œä¹Ÿä¼š<strong>ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å–</strong>ï¼Œè€Œä¸æ˜¯ä»çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­è¯»å–ã€‚å³ä¸€ä¸ªçº¿ç¨‹å¯¹volatileå˜é‡æ‰€åšçš„å†™æ“ä½œï¼Œå¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚</li>
<li><strong>é˜²æ­¢æŒ‡ä»¤é‡æ’</strong>ï¼šJavaç¼–è¯‘å™¨ï¼ŒJVMï¼Œå’ŒCPUåœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œå¯èƒ½ä¼šä¸ºäº†æé«˜æ€§èƒ½è€Œå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œè¿™å›å¯¼è‡´æŸäº›æ“ä½œçš„æ‰§è¡Œé¡ºåºå’Œä»£ç ä¸­çš„é¡ºåºä¸ä¸€æ ·ã€‚volatileä¿è¯åœ¨è¯»å–æˆ–å†™å…¥å˜é‡æ—¶ï¼Œä¹‹å‰çš„æ“ä½œä¸€å®šå·²ç»å®Œæˆï¼Œä¹‹åçš„æ“ä½œä¸€å®šä¸ä¼šè¢«é‡æ’åºåˆ°å®ƒä¹‹å‰ã€‚</li>
</ol>
<h4 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹ï¼š<a hidden class="anchor" aria-hidden="true" href="#æ³¨æ„ç‚¹">#</a></h4>
<ol>
<li><strong>ä¸èƒ½ä¿è¯åŸå­æ€§</strong>ï¼š<code>volatile</code>ä»…ä»…ä¿è¯äº†å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œä½†å®ƒå¹¶ä¸èƒ½ä¿è¯<strong>æ“ä½œçš„åŸå­æ€§</strong>ã€‚ä¾‹å¦‚ï¼Œå¯¹äº<code>volatile int</code>å˜é‡è¿›è¡Œè‡ªå¢æ“ä½œ <code>count ++</code> , å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºè‡ªå¢æ“ä½œå®é™…ä¸Šåˆ†ä¸ºä¸‰æ­¥ï¼ˆè¯»å–ï¼ŒåŠ ä¸€ï¼Œå†™å›ï¼‰ï¼Œè¿™äº›æ­¥éª¤å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè€Œäº’ç›¸å¹²æ‰°ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºå“ªäº›éœ€è¦<strong>ç®€å•è¯»å†™æ“ä½œçš„å…±äº«å˜é‡</strong>ï¼Œæ¯”å¦‚æ ‡å¿—ä½ï¼ŒçŠ¶æ€å˜é‡ç­‰ã€‚å¦‚æœéœ€è¦æ›´å¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ä½¿ç”¨<code>synchronized</code>æˆ–å…¶ä»–é”æœºåˆ¶ã€‚</li>
</ol>
<h2 id="å¹¶å‘å¹¶è¡Œ">å¹¶å‘ã€å¹¶è¡Œ<a hidden class="anchor" aria-hidden="true" href="#å¹¶å‘å¹¶è¡Œ">#</a></h2>
<p><strong>è¿›ç¨‹</strong></p>
<ul>
<li>æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼ˆè½¯ä»¶ï¼‰å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹</li>
<li>çº¿ç¨‹æ˜¯å±äºè¿›ç¨‹çš„ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹</li>
<li>è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…¶å®æ˜¯å¹¶å‘å’Œå¹¶è¡Œæ‰§è¡Œçš„</li>
</ul>
<p><strong>å¹¶å‘çš„å«ä¹‰</strong></p>
<ul>
<li>è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ˜¯ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œçš„ï¼Œä½†CPUèƒ½åŒæ—¶å¤„ç†çº¿ç¨‹çš„æ•°é‡æœ‰é™ï¼Œä¸ºäº†ä¿è¯å…¨éƒ¨çº¿ç¨‹éƒ½èƒ½å¾€å‰æ‰§è¡Œï¼Œ CPUä¼šè½®è¯¢ä¸ºç³»ç»Ÿçš„æ¯ä¸ªçº¿ç¨‹æœåŠ¡ï¼Œç”±äºCPUåˆ‡æ¢çš„é€Ÿåº¦å¾ˆå¿«ï¼Œç»™æˆ‘ä»¬çš„æ„Ÿè§‰è¿™äº›çº¿ç¨‹åœ¨åŒæ—¶æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¹¶å‘</li>
</ul>
<p><strong>å¹¶è¡Œçš„ç†è§£</strong></p>
<ul>
<li>åœ¨åŒä¸€ä¸ªæ—¶åˆ»ä¸Šï¼ŒåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹åœ¨è¢«CPUè°ƒåº¦æ‰§è¡Œ</li>
</ul>
<h3 id="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ">#</a></h3>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240421160224752.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240421160224752.png" alt="image-20240421160224752"  />
        </a>
    </div>
</p>
<h4 id="çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#çº¿ç¨‹çš„6ç§çŠ¶æ€æ€»ç»“">#</a></h4>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>çŠ¶æ€åç§°</strong></th>
<th style="text-align:left"><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">NEW(æ–°å»º)</td>
<td style="text-align:left">çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨</td>
</tr>
<tr>
<td style="text-align:left">Runnable(å¯è¿è¡Œ)</td>
<td style="text-align:left">çº¿ç¨‹å·²ç»è°ƒç”¨äº†start()ï¼Œ ç­‰å¾…CPUè°ƒåº¦</td>
</tr>
<tr>
<td style="text-align:left">Blocked(è¢«é˜»å¡)</td>
<td style="text-align:left">çº¿ç¨‹åœ¨æ‰§è¡Œçš„æ—¶å€™æœªç«äº‰åˆ°é”å¯¹è±¡ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">Waiting(ç­‰å¾…)</td>
<td style="text-align:left">ä¸€ä¸ªçº¿ç¨‹è¿›å…¥WaitingçŠ¶æ€ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹éœ€è¦Notifyæˆ–è€…notifyAllæ‰èƒ½å¤Ÿå”¤é†’ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Timed Waiting (è®¡æ—¶ç­‰å¾…)</td>
<td style="text-align:left">åŒWaitingçŠ¶æ€ç±»ä¼¼ï¼Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼ˆsleepï¼Œ waitï¼‰æœ‰è¶…æ—¶å‚æ•°ï¼Œè°ƒç”¨ä»–ä»¬å°†è¿›å…¥Timed WaitingçŠ¶æ€</td>
</tr>
<tr>
<td style="text-align:left">Terminated (è¢«ç»ˆæ­¢)</td>
<td style="text-align:left">å› ä¸ºrunæ–¹æ³•æ­£å¸¸é€€å‡ºè€Œæ­»äº¡ï¼Œæˆ–è€…å› ä¸ºæ²¡æœ‰æ•è·çš„å¼‚å¸¸ç»ˆæ­¢äº†runæ–¹æ³•è€Œæ­»äº¡.</td>
</tr>
</tbody>
</table>
<h2 id="æ‚²è§‚é”ä¹è§‚é”åŸç†">æ‚²è§‚é”ã€ä¹è§‚é”åŸç†<a hidden class="anchor" aria-hidden="true" href="#æ‚²è§‚é”ä¹è§‚é”åŸç†">#</a></h2>
<ul>
<li>æ‚²è§‚é”ï¼šä¸€ä¸Šæ¥å°±åŠ é”ï¼Œæ²¡æœ‰å®‰å…¨æ„Ÿï¼Œæ¯æ¬¡åªèƒ½ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è®¿é—®å®Œæ¯•åï¼Œå†è§£é”ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå·®</li>
<li>ä¹è§‚é”ï¼šä¸€å¼€å§‹ä¸ä¸Šé”ï¼Œè®¤ä¸ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¤§å®¶ä¸€èµ·è·‘ï¼Œç­‰è¦å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜çš„æ—¶å€™æ‰å¼€å§‹æ§åˆ¶ã€‚çº¿ç¨‹å®‰å…¨ï¼Œæ€§èƒ½è¾ƒå¥½
<ul>
<li>CASç®—æ³•</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-26-1"><a class="lnlinks" href="#hl-26-1"> 1</a>
</span><span class="lnt" id="hl-26-2"><a class="lnlinks" href="#hl-26-2"> 2</a>
</span><span class="lnt" id="hl-26-3"><a class="lnlinks" href="#hl-26-3"> 3</a>
</span><span class="lnt" id="hl-26-4"><a class="lnlinks" href="#hl-26-4"> 4</a>
</span><span class="lnt" id="hl-26-5"><a class="lnlinks" href="#hl-26-5"> 5</a>
</span><span class="lnt" id="hl-26-6"><a class="lnlinks" href="#hl-26-6"> 6</a>
</span><span class="lnt" id="hl-26-7"><a class="lnlinks" href="#hl-26-7"> 7</a>
</span><span class="lnt" id="hl-26-8"><a class="lnlinks" href="#hl-26-8"> 8</a>
</span><span class="lnt" id="hl-26-9"><a class="lnlinks" href="#hl-26-9"> 9</a>
</span><span class="lnt" id="hl-26-10"><a class="lnlinks" href="#hl-26-10">10</a>
</span><span class="lnt" id="hl-26-11"><a class="lnlinks" href="#hl-26-11">11</a>
</span><span class="lnt" id="hl-26-12"><a class="lnlinks" href="#hl-26-12">12</a>
</span><span class="lnt" id="hl-26-13"><a class="lnlinks" href="#hl-26-13">13</a>
</span><span class="lnt" id="hl-26-14"><a class="lnlinks" href="#hl-26-14">14</a>
</span><span class="lnt" id="hl-26-15"><a class="lnlinks" href="#hl-26-15">15</a>
</span><span class="lnt" id="hl-26-16"><a class="lnlinks" href="#hl-26-16">16</a>
</span><span class="lnt" id="hl-26-17"><a class="lnlinks" href="#hl-26-17">17</a>
</span><span class="lnt" id="hl-26-18"><a class="lnlinks" href="#hl-26-18">18</a>
</span><span class="lnt" id="hl-26-19"><a class="lnlinks" href="#hl-26-19">19</a>
</span><span class="lnt" id="hl-26-20"><a class="lnlinks" href="#hl-26-20">20</a>
</span><span class="lnt" id="hl-26-21"><a class="lnlinks" href="#hl-26-21">21</a>
</span><span class="lnt" id="hl-26-22"><a class="lnlinks" href="#hl-26-22">22</a>
</span><span class="lnt" id="hl-26-23"><a class="lnlinks" href="#hl-26-23">23</a>
</span><span class="lnt" id="hl-26-24"><a class="lnlinks" href="#hl-26-24">24</a>
</span><span class="lnt" id="hl-26-25"><a class="lnlinks" href="#hl-26-25">25</a>
</span><span class="lnt" id="hl-26-26"><a class="lnlinks" href="#hl-26-26">26</a>
</span><span class="lnt" id="hl-26-27"><a class="lnlinks" href="#hl-26-27">27</a>
</span><span class="lnt" id="hl-26-28"><a class="lnlinks" href="#hl-26-28">28</a>
</span><span class="lnt" id="hl-26-29"><a class="lnlinks" href="#hl-26-29">29</a>
</span><span class="lnt" id="hl-26-30"><a class="lnlinks" href="#hl-26-30">30</a>
</span><span class="lnt" id="hl-26-31"><a class="lnlinks" href="#hl-26-31">31</a>
</span><span class="lnt" id="hl-26-32"><a class="lnlinks" href="#hl-26-32">32</a>
</span><span class="lnt" id="hl-26-33"><a class="lnlinks" href="#hl-26-33">33</a>
</span><span class="lnt" id="hl-26-34"><a class="lnlinks" href="#hl-26-34">34</a>
</span><span class="lnt" id="hl-26-35"><a class="lnlinks" href="#hl-26-35">35</a>
</span><span class="lnt" id="hl-26-36"><a class="lnlinks" href="#hl-26-36">36</a>
</span><span class="lnt" id="hl-26-37"><a class="lnlinks" href="#hl-26-37">37</a>
</span><span class="lnt" id="hl-26-38"><a class="lnlinks" href="#hl-26-38">38</a>
</span><span class="lnt" id="hl-26-39"><a class="lnlinks" href="#hl-26-39">39</a>
</span><span class="lnt" id="hl-26-40"><a class="lnlinks" href="#hl-26-40">40</a>
</span><span class="lnt" id="hl-26-41"><a class="lnlinks" href="#hl-26-41">41</a>
</span><span class="lnt" id="hl-26-42"><a class="lnlinks" href="#hl-26-42">42</a>
</span><span class="lnt" id="hl-26-43"><a class="lnlinks" href="#hl-26-43">43</a>
</span><span class="lnt" id="hl-26-44"><a class="lnlinks" href="#hl-26-44">44</a>
</span><span class="lnt" id="hl-26-45"><a class="lnlinks" href="#hl-26-45">45</a>
</span><span class="lnt" id="hl-26-46"><a class="lnlinks" href="#hl-26-46">46</a>
</span><span class="lnt" id="hl-26-47"><a class="lnlinks" href="#hl-26-47">47</a>
</span><span class="lnt" id="hl-26-48"><a class="lnlinks" href="#hl-26-48">48</a>
</span><span class="lnt" id="hl-26-49"><a class="lnlinks" href="#hl-26-49">49</a>
</span><span class="lnt" id="hl-26-50"><a class="lnlinks" href="#hl-26-50">50</a>
</span><span class="lnt" id="hl-26-51"><a class="lnlinks" href="#hl-26-51">51</a>
</span><span class="lnt" id="hl-26-52"><a class="lnlinks" href="#hl-26-52">52</a>
</span><span class="lnt" id="hl-26-53"><a class="lnlinks" href="#hl-26-53">53</a>
</span><span class="lnt" id="hl-26-54"><a class="lnlinks" href="#hl-26-54">54</a>
</span><span class="lnt" id="hl-26-55"><a class="lnlinks" href="#hl-26-55">55</a>
</span><span class="lnt" id="hl-26-56"><a class="lnlinks" href="#hl-26-56">56</a>
</span><span class="lnt" id="hl-26-57"><a class="lnlinks" href="#hl-26-57">57</a>
</span><span class="lnt" id="hl-26-58"><a class="lnlinks" href="#hl-26-58">58</a>
</span><span class="lnt" id="hl-26-59"><a class="lnlinks" href="#hl-26-59">59</a>
</span><span class="lnt" id="hl-26-60"><a class="lnlinks" href="#hl-26-60">60</a>
</span><span class="lnt" id="hl-26-61"><a class="lnlinks" href="#hl-26-61">61</a>
</span><span class="lnt" id="hl-26-62"><a class="lnlinks" href="#hl-26-62">62</a>
</span><span class="lnt" id="hl-26-63"><a class="lnlinks" href="#hl-26-63">63</a>
</span><span class="lnt" id="hl-26-64"><a class="lnlinks" href="#hl-26-64">64</a>
</span><span class="lnt" id="hl-26-65"><a class="lnlinks" href="#hl-26-65">65</a>
</span><span class="lnt" id="hl-26-66"><a class="lnlinks" href="#hl-26-66">66</a>
</span><span class="lnt" id="hl-26-67"><a class="lnlinks" href="#hl-26-67">67</a>
</span><span class="lnt" id="hl-26-68"><a class="lnlinks" href="#hl-26-68">68</a>
</span><span class="lnt" id="hl-26-69"><a class="lnlinks" href="#hl-26-69">69</a>
</span><span class="lnt" id="hl-26-70"><a class="lnlinks" href="#hl-26-70">70</a>
</span><span class="lnt" id="hl-26-71"><a class="lnlinks" href="#hl-26-71">71</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ExtendDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†ä¹è§‚é”çš„ä½¿ç”¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ä¹è§‚é”æ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå®ƒå‡è®¾å¯¹æ•°æ®çš„è¯»å–æ“ä½œä¸ä¼šé€ æˆæ•°æ®å†²çªï¼Œå› æ­¤ä¸éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”æ“ä½œã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * ç›¸åï¼Œå®ƒåœ¨æ›´æ–°æ•°æ®æ—¶æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœæœ‰åˆ™è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚é‡è¯•æˆ–è€…æ”¾å¼ƒæ›´æ–°ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†ä¸¤ç§å®ç°æ–¹å¼ï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 1. ä½¿ç”¨ synchronized å…³é”®å­—å®ç°çš„æ‚²è§‚é”ï¼ˆMyRunnable ç±»ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 2. ä½¿ç”¨ AtomicInteger å®ç°çš„ä¹è§‚é”ï¼ˆMyRunnable2 ç±»ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * MyRunnable ç±»ä¸­ä½¿ç”¨äº† synchronized å…³é”®å­—æ¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯¹ count å˜é‡çš„å®‰å…¨è®¿é—®ï¼Œå®ƒæ˜¯ä¸€ç§æ‚²è§‚é”çš„å®ç°æ–¹å¼ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="cm"> * æ¯ä¸ªçº¿ç¨‹åœ¨è®¿é—® count å˜é‡æ—¶éƒ½éœ€è¦è·å¾—å¯¹è±¡é”ï¼Œå› æ­¤åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ‰§è¡Œä¸´ç•ŒåŒºä»£ç ï¼Œå…¶ä»–çº¿ç¨‹éœ€è¦ç­‰å¾…é‡Šæ”¾é”æ‰èƒ½æ‰§è¡Œã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * MyRunnable2 ç±»ä¸­ä½¿ç”¨äº† AtomicInteger æ¥å®ç°ä¹è§‚é”ã€‚AtomicInteger æä¾›äº†ä¸€ç§åŸå­æ€§çš„æ›´æ–°æ“ä½œï¼Œä¿è¯äº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å®‰å…¨è®¿é—®ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * åœ¨è¿™ç§å®ç°æ–¹å¼ä¸­ï¼Œçº¿ç¨‹ä¸éœ€è¦è·å–é”ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡åŸå­æ€§çš„æ“ä½œæ¥æ›´æ–° count å˜é‡ï¼Œå› æ­¤å¯ä»¥å®ç°æ›´é«˜çš„å¹¶å‘æ€§èƒ½ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 
</span></span></span><span class="line"><span class="cl"><span class="cm"> * åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„é”æœºåˆ¶å–å†³äºå…·ä½“çš„åœºæ™¯å’Œæ€§èƒ½éœ€æ±‚ã€‚å¦‚æœå¯¹æ•°æ®çš„æ›´æ–°æ“ä½œæ¯”è¾ƒé¢‘ç¹ï¼Œä¸”ç«äº‰ä¸æ˜¯å¾ˆæ¿€çƒˆï¼Œå¯ä»¥é€‰æ‹©ä¹è§‚é”æ¥æå‡æ€§èƒ½ï¼›
</span></span></span><span class="line"><span class="cl"><span class="cm"> * å¦‚æœç«äº‰æ¯”è¾ƒæ¿€çƒˆï¼Œæˆ–è€…å¯¹æ•°æ®çš„ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜ï¼Œåˆ™å¯ä»¥é€‰æ‹©æ‚²è§‚é”æ¥ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo1</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        Runnable target = new MyRunnable();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        for (int i = 1; i &lt;= 100; i++) {</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//            new Thread(target).start();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//        }</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyRunnable2</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="p">).</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ExtendDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * å®ç°äº† Runnable æ¥å£çš„ç±»ï¼Œä½¿ç”¨ synchronized å…³é”®å­—å®ç°çš„æ‚²è§‚é”ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyRunnable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//                System.out.println(this);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  Count:  &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="o">++</span><span class="n">count</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.ExtendDemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * å®ç°äº† Runnable æ¥å£çš„ç±»ï¼Œä½¿ç”¨ AtomicInteger å®ç°çš„ä¹è§‚é”ã€‚
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyRunnable2</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AtomicInteger</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//                System.out.println(this);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;  Count:  &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="p">.</span><span class="na">incrementAndGet</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¡ˆä¾‹">æ¡ˆä¾‹<a hidden class="anchor" aria-hidden="true" href="#æ¡ˆä¾‹">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-27-1"><a class="lnlinks" href="#hl-27-1"> 1</a>
</span><span class="lnt" id="hl-27-2"><a class="lnlinks" href="#hl-27-2"> 2</a>
</span><span class="lnt" id="hl-27-3"><a class="lnlinks" href="#hl-27-3"> 3</a>
</span><span class="lnt" id="hl-27-4"><a class="lnlinks" href="#hl-27-4"> 4</a>
</span><span class="lnt" id="hl-27-5"><a class="lnlinks" href="#hl-27-5"> 5</a>
</span><span class="lnt" id="hl-27-6"><a class="lnlinks" href="#hl-27-6"> 6</a>
</span><span class="lnt" id="hl-27-7"><a class="lnlinks" href="#hl-27-7"> 7</a>
</span><span class="lnt" id="hl-27-8"><a class="lnlinks" href="#hl-27-8"> 8</a>
</span><span class="lnt" id="hl-27-9"><a class="lnlinks" href="#hl-27-9"> 9</a>
</span><span class="lnt" id="hl-27-10"><a class="lnlinks" href="#hl-27-10">10</a>
</span><span class="lnt" id="hl-27-11"><a class="lnlinks" href="#hl-27-11">11</a>
</span><span class="lnt" id="hl-27-12"><a class="lnlinks" href="#hl-27-12">12</a>
</span><span class="lnt" id="hl-27-13"><a class="lnlinks" href="#hl-27-13">13</a>
</span><span class="lnt" id="hl-27-14"><a class="lnlinks" href="#hl-27-14">14</a>
</span><span class="lnt" id="hl-27-15"><a class="lnlinks" href="#hl-27-15">15</a>
</span><span class="lnt" id="hl-27-16"><a class="lnlinks" href="#hl-27-16">16</a>
</span><span class="lnt" id="hl-27-17"><a class="lnlinks" href="#hl-27-17">17</a>
</span><span class="lnt" id="hl-27-18"><a class="lnlinks" href="#hl-27-18">18</a>
</span><span class="lnt" id="hl-27-19"><a class="lnlinks" href="#hl-27-19">19</a>
</span><span class="lnt" id="hl-27-20"><a class="lnlinks" href="#hl-27-20">20</a>
</span><span class="lnt" id="hl-27-21"><a class="lnlinks" href="#hl-27-21">21</a>
</span><span class="lnt" id="hl-27-22"><a class="lnlinks" href="#hl-27-22">22</a>
</span><span class="lnt" id="hl-27-23"><a class="lnlinks" href="#hl-27-23">23</a>
</span><span class="lnt" id="hl-27-24"><a class="lnlinks" href="#hl-27-24">24</a>
</span><span class="lnt" id="hl-27-25"><a class="lnlinks" href="#hl-27-25">25</a>
</span><span class="lnt" id="hl-27-26"><a class="lnlinks" href="#hl-27-26">26</a>
</span><span class="lnt" id="hl-27-27"><a class="lnlinks" href="#hl-27-27">27</a>
</span><span class="lnt" id="hl-27-28"><a class="lnlinks" href="#hl-27-28">28</a>
</span><span class="lnt" id="hl-27-29"><a class="lnlinks" href="#hl-27-29">29</a>
</span><span class="lnt" id="hl-27-30"><a class="lnlinks" href="#hl-27-30">30</a>
</span><span class="lnt" id="hl-27-31"><a class="lnlinks" href="#hl-27-31">31</a>
</span><span class="lnt" id="hl-27-32"><a class="lnlinks" href="#hl-27-32">32</a>
</span><span class="lnt" id="hl-27-33"><a class="lnlinks" href="#hl-27-33">33</a>
</span><span class="lnt" id="hl-27-34"><a class="lnlinks" href="#hl-27-34">34</a>
</span><span class="lnt" id="hl-27-35"><a class="lnlinks" href="#hl-27-35">35</a>
</span><span class="lnt" id="hl-27-36"><a class="lnlinks" href="#hl-27-36">36</a>
</span><span class="lnt" id="hl-27-37"><a class="lnlinks" href="#hl-27-37">37</a>
</span><span class="lnt" id="hl-27-38"><a class="lnlinks" href="#hl-27-38">38</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.Test</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Random</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo1</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">InterruptedException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºç¤¼ç‰©åˆ—è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gift</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å®šä¹‰ç¤¼ç‰©åç§°æ•°ç»„</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&#34;å£çº¢&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;çˆ±é©¬ä»•&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;iphone&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;æ‰‹è¡¨&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;mac&#34;</span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// éšæœºæ•°ç”Ÿæˆå™¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Random</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// å¾ªç¯æ·»åŠ ç¤¼ç‰©åˆ°åˆ—è¡¨ä¸­</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">1000</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">gift</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">names</span><span class="o">[</span><span class="n">r</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="n">names</span><span class="p">.</span><span class="na">length</span><span class="p">)</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">1</span><span class="p">));</span><span class="w"> </span><span class="c1">// åœ¨ç¤¼ç‰©åˆ—è¡¨ä¸­æ·»åŠ éšæœºé€‰å–çš„ç¤¼ç‰©</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">gift</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ‰“å°ç¤¼ç‰©åˆ—è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;-------------&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// åˆ›å»ºä¸¤ä¸ªå‘é€çº¿ç¨‹ï¼Œåˆ†åˆ«ä»£è¡¨å°çº¢å’Œå°æ˜</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SendThread</span><span class="w"> </span><span class="n">xh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SendThread</span><span class="p">(</span><span class="n">gift</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;å°çº¢&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">xh</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SendThread</span><span class="w"> </span><span class="n">xm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SendThread</span><span class="p">(</span><span class="n">gift</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;å°æ˜&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">xm</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ç­‰å¾…ä¸¤ä¸ªå‘é€çº¿ç¨‹ç»“æŸ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">xm</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">xh</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// æ‰“å°ä¸¤ä¸ªå‘é€çº¿ç¨‹å‘é€çš„ç¤¼ç‰©æ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å°æ˜å‘å‡ºäº†ï¼š&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xm</span><span class="p">.</span><span class="na">getCount</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;å°çº¢å‘å‡ºäº†ï¼š&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xh</span><span class="p">.</span><span class="na">getCount</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-28-1"><a class="lnlinks" href="#hl-28-1"> 1</a>
</span><span class="lnt" id="hl-28-2"><a class="lnlinks" href="#hl-28-2"> 2</a>
</span><span class="lnt" id="hl-28-3"><a class="lnlinks" href="#hl-28-3"> 3</a>
</span><span class="lnt" id="hl-28-4"><a class="lnlinks" href="#hl-28-4"> 4</a>
</span><span class="lnt" id="hl-28-5"><a class="lnlinks" href="#hl-28-5"> 5</a>
</span><span class="lnt" id="hl-28-6"><a class="lnlinks" href="#hl-28-6"> 6</a>
</span><span class="lnt" id="hl-28-7"><a class="lnlinks" href="#hl-28-7"> 7</a>
</span><span class="lnt" id="hl-28-8"><a class="lnlinks" href="#hl-28-8"> 8</a>
</span><span class="lnt" id="hl-28-9"><a class="lnlinks" href="#hl-28-9"> 9</a>
</span><span class="lnt" id="hl-28-10"><a class="lnlinks" href="#hl-28-10">10</a>
</span><span class="lnt" id="hl-28-11"><a class="lnlinks" href="#hl-28-11">11</a>
</span><span class="lnt" id="hl-28-12"><a class="lnlinks" href="#hl-28-12">12</a>
</span><span class="lnt" id="hl-28-13"><a class="lnlinks" href="#hl-28-13">13</a>
</span><span class="lnt" id="hl-28-14"><a class="lnlinks" href="#hl-28-14">14</a>
</span><span class="lnt" id="hl-28-15"><a class="lnlinks" href="#hl-28-15">15</a>
</span><span class="lnt" id="hl-28-16"><a class="lnlinks" href="#hl-28-16">16</a>
</span><span class="lnt" id="hl-28-17"><a class="lnlinks" href="#hl-28-17">17</a>
</span><span class="lnt" id="hl-28-18"><a class="lnlinks" href="#hl-28-18">18</a>
</span><span class="lnt" id="hl-28-19"><a class="lnlinks" href="#hl-28-19">19</a>
</span><span class="lnt" id="hl-28-20"><a class="lnlinks" href="#hl-28-20">20</a>
</span><span class="lnt" id="hl-28-21"><a class="lnlinks" href="#hl-28-21">21</a>
</span><span class="lnt" id="hl-28-22"><a class="lnlinks" href="#hl-28-22">22</a>
</span><span class="lnt" id="hl-28-23"><a class="lnlinks" href="#hl-28-23">23</a>
</span><span class="lnt" id="hl-28-24"><a class="lnlinks" href="#hl-28-24">24</a>
</span><span class="lnt" id="hl-28-25"><a class="lnlinks" href="#hl-28-25">25</a>
</span><span class="lnt" id="hl-28-26"><a class="lnlinks" href="#hl-28-26">26</a>
</span><span class="lnt" id="hl-28-27"><a class="lnlinks" href="#hl-28-27">27</a>
</span><span class="lnt" id="hl-28-28"><a class="lnlinks" href="#hl-28-28">28</a>
</span><span class="lnt" id="hl-28-29"><a class="lnlinks" href="#hl-28-29">29</a>
</span><span class="lnt" id="hl-28-30"><a class="lnlinks" href="#hl-28-30">30</a>
</span><span class="lnt" id="hl-28-31"><a class="lnlinks" href="#hl-28-31">31</a>
</span><span class="lnt" id="hl-28-32"><a class="lnlinks" href="#hl-28-32">32</a>
</span><span class="lnt" id="hl-28-33"><a class="lnlinks" href="#hl-28-33">33</a>
</span><span class="lnt" id="hl-28-34"><a class="lnlinks" href="#hl-28-34">34</a>
</span><span class="lnt" id="hl-28-35"><a class="lnlinks" href="#hl-28-35">35</a>
</span><span class="lnt" id="hl-28-36"><a class="lnlinks" href="#hl-28-36">36</a>
</span><span class="lnt" id="hl-28-37"><a class="lnlinks" href="#hl-28-37">37</a>
</span><span class="lnt" id="hl-28-38"><a class="lnlinks" href="#hl-28-38">38</a>
</span><span class="lnt" id="hl-28-39"><a class="lnlinks" href="#hl-28-39">39</a>
</span><span class="lnt" id="hl-28-40"><a class="lnlinks" href="#hl-28-40">40</a>
</span><span class="lnt" id="hl-28-41"><a class="lnlinks" href="#hl-28-41">41</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.showguan.Test</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Random</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SendThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gift</span><span class="p">;</span><span class="w"> </span><span class="c1">// ç¤¼ç‰©åˆ—è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="c1">// å‘é€çš„ç¤¼ç‰©æ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// æ„é€ æ–¹æ³•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">SendThread</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gift</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹å</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">gift</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gift</span><span class="p">;</span><span class="w"> </span><span class="c1">// åˆå§‹åŒ–ç¤¼ç‰©åˆ—è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Random</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">();</span><span class="w"> </span><span class="c1">// éšæœºæ•°ç”Ÿæˆå™¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span><span class="w"> </span><span class="c1">// è·å–å½“å‰çº¿ç¨‹å</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="n">gift</span><span class="p">){</span><span class="w"> </span><span class="c1">// åŒæ­¥å—ï¼Œç¡®ä¿ç¤¼ç‰©åˆ—è¡¨çš„çº¿ç¨‹å®‰å…¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">gift</span><span class="p">.</span><span class="na">size</span><span class="p">()</span><span class="o">&lt;</span><span class="n">10</span><span class="p">){</span><span class="w"> </span><span class="c1">// å½“ç¤¼ç‰©åˆ—è¡¨æ•°é‡å°äº10æ—¶ï¼Œç»“æŸå¾ªç¯</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="k">break</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gift</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="na">nextInt</span><span class="p">(</span><span class="n">gift</span><span class="p">.</span><span class="na">size</span><span class="p">()));</span><span class="w"> </span><span class="c1">// ä»ç¤¼ç‰©åˆ—è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªç¤¼ç‰©ï¼Œå¹¶ç§»é™¤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; å‘å‡ºäº†ç¤¼å“ï¼š &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rs</span><span class="p">);</span><span class="w"> </span><span class="c1">// æ‰“å°å‘é€çš„ç¤¼ç‰©ä¿¡æ¯</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">count</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// è®°å½•å‘é€çš„ç¤¼ç‰©æ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// è·å–å‘é€çš„ç¤¼ç‰©æ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getCount</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// è®¾ç½®å‘é€çš„ç¤¼ç‰©æ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setCount</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/java/">Java</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Javaå­¦ä¹ ç¬”è®°</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/tech/%E5%8A%9B%E6%89%A3%E5%91%A8%E8%B5%9B39420240421/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>LeetCodeå‘¨èµ›240421</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/java20%E5%A4%A9%E9%80%9F%E6%88%90%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B3/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Java20å¤©é€Ÿæˆâ€”â€”è¿›é˜¶è¯¾ç¨‹(3)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerHTML = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerHTML = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<footer class="footer">
    <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Visitors: <span id="busuanzi_value_page_uv"></span>
        Views: <span id="busuanzi_value_page_pv"></span>

        
    </span>
</footer>



</body>

</html>
