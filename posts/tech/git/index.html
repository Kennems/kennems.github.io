<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<meta name="msvalidate.01" content="DF5FE493CC759E62BFE073BEA8EFD472" />
<title>Git | Kennem&#39;s Blog</title>
<meta name="keywords" content="Git">
<meta name="description" content="Git使用">
<meta name="author" content="ShowGuan">
<link rel="canonical" href="https://kennems.github.io/posts/tech/git/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1a7bc7e6d01b82c8ca2b2e53cfcf7e33d2fd9058f6b28245f94da0d91447c6a0.css" integrity="sha256-GnvH5tAbgsjKKy5Tz89&#43;M9L9kFj2soJF&#43;U2g2RRHxqA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://kennems.github.io/img/sun.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://kennems.github.io/img/sun.png">
<link rel="apple-touch-icon" href="https://kennems.github.io/img/sun.png">
<link rel="mask-icon" href="https://kennems.github.io/img/sun.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://kennems.github.io/posts/tech/git/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false}
        ]
    });
});
</script>



<link rel="stylesheet" href="https://fonts.cdnfonts.com/css/code-new-roman">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>


  

<meta property="og:url" content="https://kennems.github.io/posts/tech/git/">
  <meta property="og:site_name" content="Kennem&#39;s Blog">
  <meta property="og:title" content="Git">
  <meta property="og:description" content="Git使用">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-20T22:30:13+08:00">
    <meta property="article:modified_time" content="2024-08-20T22:20:13+08:00">
    <meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git">
<meta name="twitter:description" content="Git使用">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚文章",
      "item": "https://kennems.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "💻技术",
      "item": "https://kennems.github.io/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Git",
      "item": "https://kennems.github.io/posts/tech/git/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Git",
  "name": "Git",
  "description": "Git使用",
  "keywords": [
    "Git"
  ],
  "articleBody": "Git git 由 linus 开发。\nGit流程图 clone（克隆)）： 从远程仓库中克隆代码到本地仓库 checkout（检出）：从本地仓库中检出一个仓库分支然后进行修订 add（添加）：在提交前先将代码提交到暂存区 commit（提交）：提交到本地仓库，本地仓库中保存修改的各个历史版本 fetch（抓取）：从远程库，抓取到本地仓库，不进行任何的合并动作，一般操作比较少。 pull（拉取）：从远程库拉到本地库，自动进行合并（merge），然后放到工作区，相当于fetch + merge push（推送）：修改完成后，需要和团队成员共享代码时，将代码推送到远程仓库 Git基本配置 git config --global user.name \"xxx\" git config --global user.email \"xxx@gmail.com\" git config --global user.name git config --global user.email 给一些长命令起别名：\n在 ~/.bashrc 中添加：\nalias git-log='git log --pretty=oneline --all --graph --abbrev-commit' alias ll='ls -al' 之后 source ~/.bashrc 使其生效。\n新建代码库 # 在当前目录新建一个git代码库 $ git init # 新建一个目录，将其初始化为git代码库 $ git init [project-name] # 下载一个项目和它的整个代码历史 $ git clone [url] 配置 git的设置文件为 .gitconfig ,它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。\n# 显示当前的git配置 $ git config --list #编辑git配置文件 $ git config -e [--global] #设置提交代码时的用户信息 $ git config [--global] user.name \"[name]\" $ git config [--global] user.name \"[email address]\" 增加/删除文件 # 添加指定文件到暂存区 $ git add [file1] [file2] # 添加指定目录到暂存区，包括子目录 $ git add [dir] # 添加当前目录的所有文件到暂存区 $ git add . # 添加每个变化前，都会要求确认 # 对于同一个文件的多处变化，可以实现分次提交 $ git add -p # 删除工作区文件，并且将这次删除放入暂存区 $ git rm [file1] [file2] # 停止追踪指定文件，但该文件会保留在工作区 $ git rm --cached [file] # 改名文件，并且将这个改名放入暂存区 $ git mv [file-original] [file-renamed] 代码提交 # 提交暂存区到仓库区 $ git commit -m [message] # 提交暂存区的指定文件到仓库区 $ git commit [file1] [file2] [file3] ... -m [message] # 提交工作区自上次commit之后的变化，直接到仓库区 $ git commit -a # 提交时显示所有diff信息 $ git commit -v # 使用一次新的commit，替代上一次提交 # 如果代码没有任何新变化，则用来改写上一次commit的提交信息 $ git commit -amend -m [message] # 重做上一次commit，并包括指定文件的新变化 $ git commit -amend [file1] [file2] ... 版本切换： git reset --hard commitId 查看所有日志：\ngit reflog 换行符（LF \u0026 CRLF） 它控制着在提交和检出文件时是否自动地将行结束符转换为不同的格式。\ngit config --global core.autocrlf false 查看当前项目是由哪个.git目录管理的 方法一：使用 git rev-parse --show-toplevel git rev-parse --show-toplevel 这条命令会输出 Git 仓库的根目录，即 .git 所在目录。\n/home/kenn/Projects/my-project 方法二：查看 .git 目录的路径 git rev-parse --git-dir 这条命令直接输出 .git 目录的路径：\n如果输出是 .git，说明当前目录（或上层）就有 .git 文件夹。 如果是类似 .git 是一个文件（子模块或工作区配置），则它可能是一个指向真实 .git 的路径（Git 工作树结构）。 代理 git config --global http.sslVerify \"false\" 设置代理 git config --global http.proxy http://127.0.0.1:端口号 git config --global http.proxy http://127.0.0.1:10809 git config --global https.proxy http://127.0.0.1:10809 取消代理 临时取消全局代理设置\ngit config --global --unset http.proxy git config --global --unset https.proxy 仅对当前仓库禁用代理\ngit config --local http.proxy \"\" git config --local https.proxy \"\" 通过环境变量临时禁用（适用于当前终端会话）\nset HTTP_PROXY= set HTTPS_PROXY= 临时取消代理 直接使用无代理克隆（推荐）\ngit -c http.proxy= clone https://huggingface.co/XiaomiMiMo/MiMo-7B-RL 分支 查看本地分支\ngit branch 创建本地分支\ngit branch 分支名 切换分支\ngit checkout 分支名 切换并创建分支\ngit checkout -b 分支名 合并分支 git merge 删除分支 删除分支时，需要做各种检查\ngit branch -d b1 不做任何检查，强制删除\ngit branch -D b1 解决冲突 git merge 需要合并的工作区 远程仓库 git push -f --set-upstream [远端名称[本地分支名][:远端分支名]] git remote add origin 源 源管理 查看源 git remote -v 只查看 origin 的 URL\ngit remote get-url origin 更改远程仓库的 URL git remote set-url origin 新的仓库地址 添加多个源 git remote add origin2 https://github.com/username/other-repo.git 删除源 git remote remove origin2 设置本地分支与远端分支绑定 git push --set-upstream origin main 或者-u 会设置 upstream\n设置好之后，直接\ngit push 克隆 git clone 地址 从远程仓库抓取和拉取 抓取，将仓库里的更新都抓取到本地，但不会进行合并\ngit fetch [remote name] [branch name] 拉取，就是将远端仓库的修改拉到本地并自动进行合并，等同于 fetch + merge\ngit pull [remote name] [branch name] 解决合并冲突 在 Git 中，合并冲突通常发生在你尝试将一个分支的修改合并到另一个分支时，且这些分支修改了相同的文件和行。Git 无法自动合并这些冲突，需要手动干预来解决。\n远程有本地没有的提交，同时本地也有提交(或者改动) 方法一：先拉，再推 bashCopyEditgit pull --rebase origin main git push -u origin main 方法二：放弃远程的 main，强推 git push -f origin main 方法三：创建一个新分支然后提 Merge Request bashCopyEditgit checkout -b my_main_v1 git push -u origin my_main_v1 处理代码本地改动 提交\ngit add . git commit -m \"本地修改：提交前pull\" git pull --rebase origin main git push -u origin main 暂时存起来\ngit stash git pull --rebase origin main git stash pop git push -u origin main 解决 Git 合并冲突的步骤： 触发合并冲突\n通常，合并冲突在你执行 git merge 或 git rebase 时发生。例如，如果你正在将 feature 分支合并到 main 分支：\ngit checkout main git merge feature 如果有冲突，Git 会停止合并，并输出类似以下的信息：\nAuto-merging CONFLICT (content): Merge conflict in 查看哪些文件有冲突\n使用 git status 查看哪些文件存在冲突：\ngit status Git 会列出有冲突的文件，通常显示为 “both modified”。\n例如：\nboth modified: example.txt 打开并解决冲突\n打开有冲突的文件（例如 example.txt），你会看到类似下面的内容：\n\u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD 这是 main 分支的内容 ======= 这是 feature 分支的内容 \u003e\u003e\u003e\u003e\u003e\u003e\u003e feature \u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD 和 ======= 之间是当前分支（HEAD）的内容。 ======= 和 \u003e\u003e\u003e\u003e\u003e\u003e\u003e feature 之间是要合并的分支（feature）的内容。 你需要手动修改这些冲突部分，选择保留哪个内容，或者进行合并。例如，可能会修改为：\n这是合并后的内容，包含了 main 和 feature 分支的修改。 解决完冲突后，删除标记 (\u003c\u003c\u003c\u003c\u003c\u003c\u003c, =======, \u003e\u003e\u003e\u003e\u003e\u003e\u003e)，并保存文件。\n标记文件为已解决\n解决冲突并保存文件后，使用 git add 将文件标记为已解决：\ngit add example.txt 完成合并\n一旦所有冲突都解决并标记为已解决，你可以提交合并：\ngit commit 如果是合并操作，Git 会自动生成一个合并提交信息，你可以修改这个信息，或者直接保存并提交。\n查看合并结果\n使用 git status 确认冲突已解决，工作树干净，合并已完成：\ngit status 如果一切正常，Git 会显示如下：\nOn branch main nothing to commit, working tree clean 使用图形化工具解决冲突 使用 Git 的图形化工具（如 GitKraken、SourceTree、Git GUI 等）。这些工具通常会以可视化方式显示冲突，并允许你选择或编辑解决方案。\n合并冲突的常见场景 编辑同一行：两个分支修改了相同的文件的同一行。 删除和修改：一个分支删除了文件，另一个分支修改了文件内容。 相同内容的修改：两个分支在同一文件中修改了相同的内容，但修改的方式略有不同。 推送 推送所有本地分支 git push --all 强推 git push --force origin main 使用 --force-with-lease 替代 --force 为了避免强推造成的潜在数据丢失问题，可以使用 --force-with-lease 代替 --force。这个命令可以确保你仅在远程仓库的分支没有新的提交时进行强推，否则会拒绝推送，避免覆盖其他人的提交。\ngit push --force-with-lease 恢复 1. 恢复到特定提交 如果你想将分支恢复到某个特定的提交（如 abc1234），可以使用以下命令：\ngit reset --hard abc1234 这将重置当前分支到该提交，并且会丢失该提交之后的所有更改。\n2. 还原最近的提交（但保留更改） 如果你想撤销最近的提交，但保留工作区的更改，可以使用：\ngit reset --soft HEAD~1 这会将 HEAD 移动到上一个提交，同时保留你的更改在暂存区。\n3. 恢复被删除的提交 如果你需要恢复一个已经被删除的提交，可以使用 git reflog 查找并恢复它：\ngit reflog 找到需要恢复的提交哈希（如 abc1234），然后使用：\ngit checkout abc1234 或者，如果你想将当前分支移动到该提交：\ngit reset --hard abc1234 4. 撤销最近的提交（保持更改） 如果你想撤销最近的提交，但想保留更改在工作目录中，可以使用：\ngit revert HEAD 这将创建一个新的提交，撤销最后一次提交的更改。\n修改 commit 的 message 1. 修改最近一次的 commit message 使用 --amend：\ngit commit --amend -m \"新的提交信息\" 这条命令会替换最近一次的 commit message。\n2. 修改更早的 commit message 如果需要修改更早的 commit message，可以使用 rebase 命令：\n启动交互式 rebase：\ngit rebase -i HEAD~n 其中 n 是你想要回溯的提交数量。\n在打开的文本编辑器中找到要修改的 commit，将 pick 改为 reword（或 r）。\n保存并退出编辑器，接着会弹出一个新的编辑器窗口，你可以在这里修改 commit message。\n保存并关闭编辑器，完成后 Git 将会应用修改。\nSSH配置 1. 生成 SSH 密钥 ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\" 解释：\n-t rsa：指定使用 RSA 算法生成密钥。 -b 4096：指定密钥的长度为 4096 位，越长的密钥越安全。 -C：添加一个注释，通常用来标识密钥的用途（例如你的电子邮件地址）。 接下来，系统会提示你选择密钥保存位置。默认情况下，SSH 密钥会保存在 ~/.ssh/id_rsa（Linux 和 macOS）或 C:\\Users\\\\.ssh\\id_rsa（Windows）中。直接按 Enter 即可使用默认位置。 你会被要求输入一个密钥的 密码。这个密码是可选的，如果设置了密码，每次使用 SSH 密钥时需要输入密码，增加安全性。 完成后，SSH 密钥对将会生成： 公钥：~/.ssh/id_rsa.pub 私钥：~/.ssh/id_rsa 2. 将 SSH 公钥添加到 Git 服务器 将你生成的公钥添加到 Git 服务器（如 GitHub、GitLab 或 Bitbucket）以便验证你的身份。这里以 GitHub 为例：\n复制 SSH 公钥：\n使用以下命令将公钥复制到剪贴板（Linux/macOS）：\ncat ~/.ssh/id_rsa.pub 可以手动复制输出的公钥，或者在 macOS 上使用 pbcopy（Windows 上可以直接打开文件并复制）：\npbcopy \u003c ~/.ssh/id_rsa.pub # macOS 对于 Windows，可以直接打开 ~/.ssh/id_rsa.pub 文件，并复制内容。\n将公钥添加到 GitHub：\n登录到你的 GitHub 账户。 进入 Settings（设置） \u003e SSH and GPG keys \u003e New SSH key。 将刚刚复制的公钥粘贴到 Key 字段中，并为该密钥设置一个合适的标题（例如：My Laptop）。 点击 Add SSH key。 3. 测试 SSH 连接 确保一切配置正确后，运行以下命令来测试 SSH 是否连接成功：\nssh -T git@github.com 如果你使用的是 GitHub，这条命令应该返回类似以下的信息：\nHi username! You've successfully authenticated, but GitHub does not provide shell access. 如果返回成功信息，则说明 SSH 配置成功。\n4. 配置 Git 使用 SSH URL 现在，你已经成功配置了 SSH 密钥，并将其添加到 GitHub 账户。接下来，确保 Git 使用 SSH 协议而非 HTTPS 协议进行操作。\n克隆仓库时使用 SSH URL：\ngit clone git@github.com:username/repository.git 更改现有仓库的远程 URL 为 SSH：\n如果你已经克隆了一个仓库，但它是使用 HTTPS URL，想改成 SSH URL，可以使用以下命令：\ngit remote set-url origin git@github.com:username/repository.git 这样，之后所有 git push 和 git pull 操作都会通过 SSH 进行。\n5. 常见问题 无法连接到 Git 服务器：确认公钥已正确添加到服务器，并检查防火墙或代理设置是否阻止了 SSH 连接。\n密钥权限问题：确保你的私钥文件权限正确（~/.ssh/id_rsa 应该是 600 权限）：\nchmod 600 ~/.ssh/id_rsa 使用多个 Git 账户：如果你有多个 Git 账户（例如，一个用于工作，一个用于个人项目），你可以通过在 ~/.ssh/config 文件中配置不同的密钥来区分不同的账户。\n# Default GitHub Account (for personal use) Host github.com User git HostName github.com IdentityFile ~/.ssh/id_rsa_github_personal # Work GitHub Account (for work use) Host github-work.com User git HostName github.com IdentityFile ~/.ssh/id_rsa_github_work IdentitiesOnly yes # GitLab Personal Account Host gitlab.com User git HostName gitlab.com IdentityFile ~/.ssh/id_rsa_gitlab_personal IdentitiesOnly yes IdentityFile：指定用于 SSH 连接的密钥文件。 IdentitiesOnly yes：确保只有你指定的密钥会被使用，避免其他默认密钥的干扰。 使用配置的 Git 操作： 克隆仓库时指定 Host：\n你可以使用配置中指定的 Host 来轻松地选择要使用的远程仓库。例如，假设你要克隆 GitHub 个人账户的仓库，你可以使用如下命令：\ngit clone git@github.com:username/repository.git 对于工作 GitHub 账户，可以使用：\ngit clone git@github-work.com:username/repository.git 对于 GitLab 和 Bitbucket 也同理。\n推送到远程仓库时：\n当你执行 git push 或 git pull 时，Git 会自动选择相应的 SSH 密钥。\nGit Bash git bash 设置home目录\nsetx HOME \"C:\\Projects\" .gitignore 检查.gitignore 是否设置生效\ngit check-ignore -v .idea ",
  "wordCount" : "4449",
  "inLanguage": "zh",
  "datePublished": "2024-08-20T22:30:13+08:00",
  "dateModified": "2024-08-20T22:20:13+08:00",
  "author":{
    "@type": "Person",
    "name": "ShowGuan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://kennems.github.io/posts/tech/git/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Kennem's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://kennems.github.io/img/sun.png"
    }
  }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://kennems.github.io/" accesskey="h" title="Kennem&#39;s Blog (Alt + H)">
                <img src="https://kennems.github.io/img/sun.png" alt="" aria-label="logo"
                    height="35">Kennem&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://kennems.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/archives" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/categories" title="🗂️分类">
                    <span>🗂️分类</span>
                </a>
            </li>
            <li>
                <a href="https://kennems.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://kennems.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://kennems.github.io/posts/tech/">💻技术</a></div>
    <h1 class="post-title entry-hint-parent">
      Git
    </h1>
    <div class="post-description">
      Git使用
    </div>
    <div class="post-meta"><span title='2024-08-20 22:30:13 +0800 CST'>2024-08-20</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;4449 字&nbsp;·&nbsp;updated:&nbsp;2024-08-20&nbsp;·&nbsp;ShowGuan

</div>
    
     <div class="post-password">
        
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#git" aria-label="Git">Git</a><ul>
                            
                    <li>
                        <a href="#git%e6%b5%81%e7%a8%8b%e5%9b%be" aria-label="Git流程图">Git流程图</a></li>
                    <li>
                        <a href="#git%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae" aria-label="Git基本配置">Git基本配置</a><ul>
                            
                    <li>
                        <a href="#%e6%96%b0%e5%bb%ba%e4%bb%a3%e7%a0%81%e5%ba%93" aria-label="新建代码库">新建代码库</a></li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae" aria-label="配置">配置</a></li>
                    <li>
                        <a href="#%e5%a2%9e%e5%8a%a0%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6" aria-label="增加/删除文件">增加/删除文件</a></li>
                    <li>
                        <a href="#%e4%bb%a3%e7%a0%81%e6%8f%90%e4%ba%a4" aria-label="代码提交">代码提交</a></li>
                    <li>
                        <a href="#%e7%89%88%e6%9c%ac%e5%88%87%e6%8d%a2" aria-label="版本切换：">版本切换：</a></li>
                    <li>
                        <a href="#%e6%8d%a2%e8%a1%8c%e7%ac%a6lf--crlf" aria-label="换行符（LF &amp; CRLF）">换行符（LF &amp; CRLF）</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e9%a1%b9%e7%9b%ae%e6%98%af%e7%94%b1%e5%93%aa%e4%b8%aagit%e7%9b%ae%e5%bd%95%e7%ae%a1%e7%90%86%e7%9a%84" aria-label="查看当前项目是由哪个.git目录管理的">查看当前项目是由哪个<code>.git</code>目录管理的</a><ul>
                            
                    <li>
                        <a href="#%e6%96%b9%e6%b3%95%e4%b8%80%e4%bd%bf%e7%94%a8-git-rev-parse---show-toplevel" aria-label="方法一：使用 git rev-parse --show-toplevel">方法一：使用 <code>git rev-parse --show-toplevel</code></a></li>
                    <li>
                        <a href="#%e6%96%b9%e6%b3%95%e4%ba%8c%e6%9f%a5%e7%9c%8b-git-%e7%9b%ae%e5%bd%95%e7%9a%84%e8%b7%af%e5%be%84" aria-label="方法二：查看 .git 目录的路径">方法二：查看 <code>.git</code> 目录的路径</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bb%a3%e7%90%86" aria-label="代理">代理</a><ul>
                            
                    <li>
                        <a href="#%e8%ae%be%e7%bd%ae%e4%bb%a3%e7%90%86" aria-label="设置代理">设置代理</a></li>
                    <li>
                        <a href="#%e5%8f%96%e6%b6%88%e4%bb%a3%e7%90%86" aria-label="取消代理">取消代理</a><ul>
                            
                    <li>
                        <a href="#%e4%b8%b4%e6%97%b6%e5%8f%96%e6%b6%88%e4%bb%a3%e7%90%86" aria-label="临时取消代理">临时取消代理</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e5%88%86%e6%94%af" aria-label="分支">分支</a><ul>
                            
                    <li>
                        <a href="#%e5%90%88%e5%b9%b6%e5%88%86%e6%94%af" aria-label="合并分支">合并分支</a></li>
                    <li>
                        <a href="#%e5%88%a0%e9%99%a4%e5%88%86%e6%94%af" aria-label="删除分支">删除分支</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%a7%a3%e5%86%b3%e5%86%b2%e7%aa%81" aria-label="解决冲突">解决冲突</a><ul>
                            
                    <li>
                        <a href="#%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93" aria-label="远程仓库">远程仓库</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%ba%90%e7%ae%a1%e7%90%86" aria-label="源管理">源管理</a><ul>
                            
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e6%ba%90" aria-label="查看源">查看源</a></li>
                    <li>
                        <a href="#%e6%9b%b4%e6%94%b9%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93%e7%9a%84-url" aria-label="更改远程仓库的 URL">更改远程仓库的 URL</a></li>
                    <li>
                        <a href="#%e6%b7%bb%e5%8a%a0%e5%a4%9a%e4%b8%aa%e6%ba%90" aria-label="添加多个源">添加多个源</a></li>
                    <li>
                        <a href="#%e5%88%a0%e9%99%a4%e6%ba%90" aria-label="删除源">删除源</a></li>
                    <li>
                        <a href="#%e8%ae%be%e7%bd%ae%e6%9c%ac%e5%9c%b0%e5%88%86%e6%94%af%e4%b8%8e%e8%bf%9c%e7%ab%af%e5%88%86%e6%94%af%e7%bb%91%e5%ae%9a" aria-label="设置本地分支与远端分支绑定">设置本地分支与远端分支绑定</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%85%8b%e9%9a%86" aria-label="克隆">克隆</a><ul>
                            
                    <li>
                        <a href="#%e4%bb%8e%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93%e6%8a%93%e5%8f%96%e5%92%8c%e6%8b%89%e5%8f%96" aria-label="从远程仓库抓取和拉取">从远程仓库抓取和拉取</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%a7%a3%e5%86%b3%e5%90%88%e5%b9%b6%e5%86%b2%e7%aa%81" aria-label="解决合并冲突">解决合并冲突</a></li>
                    <li>
                        <a href="#%e8%bf%9c%e7%a8%8b%e6%9c%89%e6%9c%ac%e5%9c%b0%e6%b2%a1%e6%9c%89%e7%9a%84%e6%8f%90%e4%ba%a4%e5%90%8c%e6%97%b6%e6%9c%ac%e5%9c%b0%e4%b9%9f%e6%9c%89%e6%8f%90%e4%ba%a4%e6%88%96%e8%80%85%e6%94%b9%e5%8a%a8" aria-label="远程有本地没有的提交，同时本地也有提交(或者改动)">远程有本地没有的提交，同时本地也有提交(或者改动)</a><ul>
                            <ul>
                            
                    <li>
                        <a href="#%e6%96%b9%e6%b3%95%e4%b8%80%e5%85%88%e6%8b%89%e5%86%8d%e6%8e%a8" aria-label="方法一：先拉，再推">方法一：<strong>先拉，再推</strong></a></li>
                    <li>
                        <a href="#%e6%96%b9%e6%b3%95%e4%ba%8c%e6%94%be%e5%bc%83%e8%bf%9c%e7%a8%8b%e7%9a%84-main%e5%bc%ba%e6%8e%a8" aria-label="方法二：放弃远程的 main，强推">方法二：<strong>放弃远程的 main，强推</strong></a></li>
                    <li>
                        <a href="#%e6%96%b9%e6%b3%95%e4%b8%89%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e6%96%b0%e5%88%86%e6%94%af%e7%84%b6%e5%90%8e%e6%8f%90-merge-request" aria-label="方法三：创建一个新分支然后提 Merge Request">方法三：<strong>创建一个新分支然后提 Merge Request</strong></a></li>
                    <li>
                        <a href="#%e5%a4%84%e7%90%86%e4%bb%a3%e7%a0%81%e6%9c%ac%e5%9c%b0%e6%94%b9%e5%8a%a8" aria-label="处理代码本地改动">处理代码本地改动</a></li></ul>
                        
                    <li>
                        <a href="#%e8%a7%a3%e5%86%b3-git-%e5%90%88%e5%b9%b6%e5%86%b2%e7%aa%81%e7%9a%84%e6%ad%a5%e9%aa%a4" aria-label="解决 Git 合并冲突的步骤：">解决 Git 合并冲突的步骤：</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e5%9b%be%e5%bd%a2%e5%8c%96%e5%b7%a5%e5%85%b7%e8%a7%a3%e5%86%b3%e5%86%b2%e7%aa%81" aria-label="使用图形化工具解决冲突">使用图形化工具解决冲突</a></li>
                    <li>
                        <a href="#%e5%90%88%e5%b9%b6%e5%86%b2%e7%aa%81%e7%9a%84%e5%b8%b8%e8%a7%81%e5%9c%ba%e6%99%af" aria-label="合并冲突的常见场景">合并冲突的常见场景</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%8e%a8%e9%80%81" aria-label="推送">推送</a><ul>
                            
                    <li>
                        <a href="#%e6%8e%a8%e9%80%81%e6%89%80%e6%9c%89%e6%9c%ac%e5%9c%b0%e5%88%86%e6%94%af" aria-label="推送所有本地分支">推送所有本地分支</a></li>
                    <li>
                        <a href="#%e5%bc%ba%e6%8e%a8" aria-label="强推">强推</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8---force-with-lease-%e6%9b%bf%e4%bb%a3---force" aria-label="使用 --force-with-lease 替代 --force">使用 <code>--force-with-lease</code> 替代 <code>--force</code></a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%81%a2%e5%a4%8d" aria-label="恢复">恢复</a><ul>
                            
                    <li>
                        <a href="#1-%e6%81%a2%e5%a4%8d%e5%88%b0%e7%89%b9%e5%ae%9a%e6%8f%90%e4%ba%a4" aria-label="1. 恢复到特定提交">1. 恢复到特定提交</a></li>
                    <li>
                        <a href="#2-%e8%bf%98%e5%8e%9f%e6%9c%80%e8%bf%91%e7%9a%84%e6%8f%90%e4%ba%a4%e4%bd%86%e4%bf%9d%e7%95%99%e6%9b%b4%e6%94%b9" aria-label="2. 还原最近的提交（但保留更改）">2. 还原最近的提交（但保留更改）</a></li>
                    <li>
                        <a href="#3-%e6%81%a2%e5%a4%8d%e8%a2%ab%e5%88%a0%e9%99%a4%e7%9a%84%e6%8f%90%e4%ba%a4" aria-label="3. 恢复被删除的提交">3. 恢复被删除的提交</a></li>
                    <li>
                        <a href="#4-%e6%92%a4%e9%94%80%e6%9c%80%e8%bf%91%e7%9a%84%e6%8f%90%e4%ba%a4%e4%bf%9d%e6%8c%81%e6%9b%b4%e6%94%b9" aria-label="4. 撤销最近的提交（保持更改）">4. 撤销最近的提交（保持更改）</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e4%bf%ae%e6%94%b9-commit-%e7%9a%84-message" aria-label="修改 commit 的 message">修改 commit 的 message</a><ul>
                            
                    <li>
                        <a href="#1-%e4%bf%ae%e6%94%b9%e6%9c%80%e8%bf%91%e4%b8%80%e6%ac%a1%e7%9a%84-commit-message" aria-label="1. 修改最近一次的 commit message">1. 修改最近一次的 commit message</a></li>
                    <li>
                        <a href="#2-%e4%bf%ae%e6%94%b9%e6%9b%b4%e6%97%a9%e7%9a%84-commit-message" aria-label="2. 修改更早的 commit message">2. 修改更早的 commit message</a></li></ul>
                    </li>
                    <li>
                        <a href="#ssh%e9%85%8d%e7%bd%ae" aria-label="SSH配置">SSH配置</a><ul>
                            
                    <li>
                        <a href="#1-%e7%94%9f%e6%88%90-ssh-%e5%af%86%e9%92%a5" aria-label="1. 生成 SSH 密钥">1. <strong>生成 SSH 密钥</strong></a></li>
                    <li>
                        <a href="#2-%e5%b0%86-ssh-%e5%85%ac%e9%92%a5%e6%b7%bb%e5%8a%a0%e5%88%b0-git-%e6%9c%8d%e5%8a%a1%e5%99%a8" aria-label="2. 将 SSH 公钥添加到 Git 服务器">2. <strong>将 SSH 公钥添加到 Git 服务器</strong></a></li>
                    <li>
                        <a href="#3-%e6%b5%8b%e8%af%95-ssh-%e8%bf%9e%e6%8e%a5" aria-label="3. 测试 SSH 连接">3. <strong>测试 SSH 连接</strong></a></li>
                    <li>
                        <a href="#4-%e9%85%8d%e7%bd%ae-git-%e4%bd%bf%e7%94%a8-ssh-url" aria-label="4. 配置 Git 使用 SSH URL">4. <strong>配置 Git 使用 SSH URL</strong></a></li>
                    <li>
                        <a href="#5-%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98" aria-label="5. 常见问题">5. <strong>常见问题</strong></a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8%e9%85%8d%e7%bd%ae%e7%9a%84-git-%e6%93%8d%e4%bd%9c" aria-label="使用配置的 Git 操作：">使用配置的 Git 操作：</a></li></ul>
                    </li>
                    <li>
                        <a href="#git-bash" aria-label="Git Bash">Git Bash</a></li>
                    <li>
                        <a href="#gitignore" aria-label=".gitignore"><code>.gitignore</code></a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h1 id="git">Git<a hidden class="anchor" aria-hidden="true" href="#git">#</a></h1>
<p>git 由 linus 开发。</p>
<h2 id="git流程图">Git流程图<a hidden class="anchor" aria-hidden="true" href="#git流程图">#</a></h2>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png">
            <img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png" alt="img"  />
        </a>
    </div>
</p>
<ol>
<li><strong>clone</strong>（克隆)）： 从远程仓库中克隆代码到本地仓库</li>
<li><strong>checkout</strong>（检出）：从本地仓库中检出一个仓库分支然后进行修订</li>
<li><strong>add</strong>（添加）：在提交前先将代码提交到暂存区</li>
<li><strong>commit</strong>（提交）：提交到本地仓库，本地仓库中保存修改的各个历史版本</li>
<li><strong>fetch</strong>（抓取）：从远程库，抓取到本地仓库，不进行任何的合并动作，一般操作比较少。</li>
<li><strong>pull</strong>（拉取）：从远程库拉到本地库，自动进行合并（merge），然后放到工作区，相当于fetch + merge</li>
<li><strong>push</strong>（推送）：修改完成后，需要和团队成员共享代码时，将代码推送到远程仓库</li>
</ol>
<h2 id="git基本配置">Git基本配置<a hidden class="anchor" aria-hidden="true" href="#git基本配置">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git config --global user.name <span style="color:#e6db74">&#34;xxx&#34;</span>
</span></span><span style="display:flex;"><span>git config --global user.email <span style="color:#e6db74">&#34;xxx@gmail.com&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git config --global user.name
</span></span><span style="display:flex;"><span>git config --global user.email
</span></span></code></pre></div><p>给一些长命令起别名：</p>
<p>在 ~/.bashrc 中添加：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>alias git-log<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;git log --pretty=oneline --all --graph --abbrev-commit&#39;</span>
</span></span><span style="display:flex;"><span>alias ll<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -al&#39;</span>
</span></span></code></pre></div><p>之后 source ~/.bashrc 使其生效。</p>
<h3 id="新建代码库">新建代码库<a hidden class="anchor" aria-hidden="true" href="#新建代码库">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 在当前目录新建一个git代码库</span>
</span></span><span style="display:flex;"><span>$ git init 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个目录，将其初始化为git代码库</span>
</span></span><span style="display:flex;"><span>$ git init <span style="color:#f92672">[</span>project-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 下载一个项目和它的整个代码历史</span>
</span></span><span style="display:flex;"><span>$ git clone <span style="color:#f92672">[</span>url<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="配置">配置<a hidden class="anchor" aria-hidden="true" href="#配置">#</a></h3>
<p>git的设置文件为 <strong>.gitconfig</strong> ,它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 显示当前的git配置</span>
</span></span><span style="display:flex;"><span>$ git config --list 
</span></span><span style="display:flex;"><span><span style="color:#75715e">#编辑git配置文件</span>
</span></span><span style="display:flex;"><span>$ git config -e <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#设置提交代码时的用户信息</span>
</span></span><span style="display:flex;"><span>$ git config <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span> user.name <span style="color:#e6db74">&#34;[name]&#34;</span>
</span></span><span style="display:flex;"><span>$ git config <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span> user.name <span style="color:#e6db74">&#34;[email address]&#34;</span>
</span></span></code></pre></div><h3 id="增加删除文件">增加/删除文件<a hidden class="anchor" aria-hidden="true" href="#增加删除文件">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 添加指定文件到暂存区</span>
</span></span><span style="display:flex;"><span>$ git add <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加指定目录到暂存区，包括子目录</span>
</span></span><span style="display:flex;"><span>$ git add <span style="color:#f92672">[</span>dir<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加当前目录的所有文件到暂存区</span>
</span></span><span style="display:flex;"><span>$ git add .
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加每个变化前，都会要求确认</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 对于同一个文件的多处变化，可以实现分次提交</span>
</span></span><span style="display:flex;"><span>$ git add -p
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除工作区文件，并且将这次删除放入暂存区</span>
</span></span><span style="display:flex;"><span>$ git rm <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 停止追踪指定文件，但该文件会保留在工作区</span>
</span></span><span style="display:flex;"><span>$ git rm --cached <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 改名文件，并且将这个改名放入暂存区</span>
</span></span><span style="display:flex;"><span>$ git mv <span style="color:#f92672">[</span>file-original<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file-renamed<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="代码提交">代码提交<a hidden class="anchor" aria-hidden="true" href="#代码提交">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 提交暂存区到仓库区</span>
</span></span><span style="display:flex;"><span>$ git commit -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交暂存区的指定文件到仓库区</span>
</span></span><span style="display:flex;"><span>$ git commit <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file3<span style="color:#f92672">]</span> ... -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交工作区自上次commit之后的变化，直接到仓库区 </span>
</span></span><span style="display:flex;"><span>$ git commit -a 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交时显示所有diff信息</span>
</span></span><span style="display:flex;"><span>$ git commit -v
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用一次新的commit，替代上一次提交</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span>
</span></span><span style="display:flex;"><span>$ git commit -amend -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重做上一次commit，并包括指定文件的新变化</span>
</span></span><span style="display:flex;"><span>$ git commit -amend <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> ...
</span></span></code></pre></div><h3 id="版本切换">版本切换：<a hidden class="anchor" aria-hidden="true" href="#版本切换">#</a></h3>
<p>






    <div class="post-img-view">
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240814114817965.png">
            <img src="https://cdn.jsdelivr.net/gh/kennems/blog-image/image-20240814114817965.png" alt="image-20240814114817965"  />
        </a>
    </div>
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reset --hard commitId
</span></span></code></pre></div><p>查看所有日志：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reflog
</span></span></code></pre></div><h3 id="换行符lf--crlf">换行符（LF &amp; CRLF）<a hidden class="anchor" aria-hidden="true" href="#换行符lf--crlf">#</a></h3>
<p>它控制着在提交和检出文件时是否自动地将行结束符转换为不同的格式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git config --global core.autocrlf false
</span></span></code></pre></div><h3 id="查看当前项目是由哪个git目录管理的">查看当前项目是由哪个<code>.git</code>目录管理的<a hidden class="anchor" aria-hidden="true" href="#查看当前项目是由哪个git目录管理的">#</a></h3>
<h4 id="方法一使用-git-rev-parse---show-toplevel">方法一：使用 <code>git rev-parse --show-toplevel</code><a hidden class="anchor" aria-hidden="true" href="#方法一使用-git-rev-parse---show-toplevel">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git rev-parse --show-toplevel
</span></span></code></pre></div><p>这条命令会输出 <strong>Git 仓库的根目录</strong>，即 <code>.git</code> 所在目录。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/home/kenn/Projects/my-project
</span></span></code></pre></div><h4 id="方法二查看-git-目录的路径">方法二：查看 <code>.git</code> 目录的路径<a hidden class="anchor" aria-hidden="true" href="#方法二查看-git-目录的路径">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git rev-parse --git-dir
</span></span></code></pre></div><p>这条命令直接输出 <code>.git</code> 目录的路径：</p>
<ul>
<li>如果输出是 <code>.git</code>，说明当前目录（或上层）就有 <code>.git</code> 文件夹。</li>
<li>如果是类似 <code>.git</code> 是一个文件（子模块或工作区配置），则它可能是一个指向真实 <code>.git</code> 的路径（Git 工作树结构）。</li>
</ul>
<h2 id="代理">代理<a hidden class="anchor" aria-hidden="true" href="#代理">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global http.sslVerify <span style="color:#e6db74">&#34;false&#34;</span>
</span></span></code></pre></div><h3 id="设置代理">设置代理<a hidden class="anchor" aria-hidden="true" href="#设置代理">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global http.proxy http://127.0.0.1:端口号
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global http.proxy http://127.0.0.1:10809
</span></span><span style="display:flex;"><span>git config --global https.proxy http://127.0.0.1:10809
</span></span></code></pre></div><h3 id="取消代理">取消代理<a hidden class="anchor" aria-hidden="true" href="#取消代理">#</a></h3>
<p>临时取消全局代理设置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global --unset http.proxy
</span></span><span style="display:flex;"><span>git config --global --unset https.proxy
</span></span></code></pre></div><p>仅对当前仓库禁用代理</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --local http.proxy <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>git config --local https.proxy <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><p>通过环境变量临时禁用（适用于当前终端会话）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>set HTTP_PROXY<span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>set HTTPS_PROXY<span style="color:#f92672">=</span>
</span></span></code></pre></div><h4 id="临时取消代理">临时取消代理<a hidden class="anchor" aria-hidden="true" href="#临时取消代理">#</a></h4>
<p>直接使用无代理克隆（推荐）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git -c http.proxy<span style="color:#f92672">=</span> clone https://huggingface.co/XiaomiMiMo/MiMo-7B-RL
</span></span></code></pre></div><h2 id="分支">分支<a hidden class="anchor" aria-hidden="true" href="#分支">#</a></h2>
<p>查看本地分支</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git branch
</span></span></code></pre></div><p>创建本地分支</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git branch 分支名
</span></span></code></pre></div><p>切换分支</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout 分支名
</span></span></code></pre></div><p>切换并创建分支</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout -b 分支名
</span></span></code></pre></div><h3 id="合并分支">合并分支<a hidden class="anchor" aria-hidden="true" href="#合并分支">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git merge
</span></span></code></pre></div><h3 id="删除分支">删除分支<a hidden class="anchor" aria-hidden="true" href="#删除分支">#</a></h3>
<p>删除分支时，需要做各种检查</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git branch -d b1 
</span></span></code></pre></div><p>不做任何检查，强制删除</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git branch -D b1
</span></span></code></pre></div><h2 id="解决冲突">解决冲突<a hidden class="anchor" aria-hidden="true" href="#解决冲突">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git merge 需要合并的工作区
</span></span></code></pre></div><h3 id="远程仓库">远程仓库<a hidden class="anchor" aria-hidden="true" href="#远程仓库">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push -f --set-upstream <span style="color:#f92672">[</span>远端名称<span style="color:#f92672">[</span>本地分支名<span style="color:#f92672">][</span>:远端分支名<span style="color:#f92672">]]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote add origin 源
</span></span></code></pre></div><h2 id="源管理">源管理<a hidden class="anchor" aria-hidden="true" href="#源管理">#</a></h2>
<h3 id="查看源">查看源<a hidden class="anchor" aria-hidden="true" href="#查看源">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git remote -v
</span></span></code></pre></div><p>只查看 <code>origin</code> 的 URL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git remote get-url origin
</span></span></code></pre></div><h3 id="更改远程仓库的-url">更改远程仓库的 URL<a hidden class="anchor" aria-hidden="true" href="#更改远程仓库的-url">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git remote set-url origin 新的仓库地址
</span></span></code></pre></div><h3 id="添加多个源">添加多个源<a hidden class="anchor" aria-hidden="true" href="#添加多个源">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote add origin2 https://github.com/username/other-repo.git
</span></span></code></pre></div><h3 id="删除源">删除源<a hidden class="anchor" aria-hidden="true" href="#删除源">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote remove origin2
</span></span></code></pre></div><h3 id="设置本地分支与远端分支绑定">设置本地分支与远端分支绑定<a hidden class="anchor" aria-hidden="true" href="#设置本地分支与远端分支绑定">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push --set-upstream origin main
</span></span></code></pre></div><p>或者<code>-u</code> 会设置 upstream</p>
<p>设置好之后，直接</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push 
</span></span></code></pre></div><h2 id="克隆">克隆<a hidden class="anchor" aria-hidden="true" href="#克隆">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone 地址
</span></span></code></pre></div><h3 id="从远程仓库抓取和拉取">从远程仓库抓取和拉取<a hidden class="anchor" aria-hidden="true" href="#从远程仓库抓取和拉取">#</a></h3>
<p>抓取，将仓库里的更新都抓取到本地，但不会进行合并</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git fetch <span style="color:#f92672">[</span>remote name<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>branch name<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>拉取，就是将远端仓库的修改拉到本地并自动进行合并，等同于 fetch + merge</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git pull <span style="color:#f92672">[</span>remote name<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>branch name<span style="color:#f92672">]</span>
</span></span></code></pre></div><h2 id="解决合并冲突">解决合并冲突<a hidden class="anchor" aria-hidden="true" href="#解决合并冲突">#</a></h2>
<p>在 Git 中，合并冲突通常发生在你尝试将一个分支的修改合并到另一个分支时，且这些分支修改了相同的文件和行。Git 无法自动合并这些冲突，需要手动干预来解决。</p>
<h2 id="远程有本地没有的提交同时本地也有提交或者改动">远程有本地没有的提交，同时本地也有提交(或者改动)<a hidden class="anchor" aria-hidden="true" href="#远程有本地没有的提交同时本地也有提交或者改动">#</a></h2>
<h4 id="方法一先拉再推">方法一：<strong>先拉，再推</strong><a hidden class="anchor" aria-hidden="true" href="#方法一先拉再推">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bashCopyEditgit pull --rebase origin main
</span></span><span style="display:flex;"><span>git push -u origin main
</span></span></code></pre></div><h4 id="方法二放弃远程的-main强推">方法二：<strong>放弃远程的 main，强推</strong><a hidden class="anchor" aria-hidden="true" href="#方法二放弃远程的-main强推">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push -f origin main
</span></span></code></pre></div><h4 id="方法三创建一个新分支然后提-merge-request">方法三：<strong>创建一个新分支然后提 Merge Request</strong><a hidden class="anchor" aria-hidden="true" href="#方法三创建一个新分支然后提-merge-request">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bashCopyEditgit checkout -b my_main_v1
</span></span><span style="display:flex;"><span>git push -u origin my_main_v1
</span></span></code></pre></div><h4 id="处理代码本地改动">处理代码本地改动<a hidden class="anchor" aria-hidden="true" href="#处理代码本地改动">#</a></h4>
<p>提交</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;本地修改：提交前pull&#34;</span>
</span></span><span style="display:flex;"><span>git pull --rebase origin main
</span></span><span style="display:flex;"><span>git push -u origin main
</span></span></code></pre></div><p>暂时存起来</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git stash
</span></span><span style="display:flex;"><span>git pull --rebase origin main
</span></span><span style="display:flex;"><span>git stash pop
</span></span><span style="display:flex;"><span>git push -u origin main
</span></span></code></pre></div><h3 id="解决-git-合并冲突的步骤">解决 Git 合并冲突的步骤：<a hidden class="anchor" aria-hidden="true" href="#解决-git-合并冲突的步骤">#</a></h3>
<ol>
<li>
<p><strong>触发合并冲突</strong></p>
<p>通常，合并冲突在你执行 <code>git merge</code> 或 <code>git rebase</code> 时发生。例如，如果你正在将 <code>feature</code> 分支合并到 <code>main</code> 分支：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout main
</span></span><span style="display:flex;"><span>git merge feature
</span></span></code></pre></div><p>如果有冲突，Git 会停止合并，并输出类似以下的信息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Auto-merging &lt;file&gt;
</span></span><span style="display:flex;"><span>CONFLICT (content): Merge conflict in &lt;file&gt;
</span></span></code></pre></div></li>
<li>
<p><strong>查看哪些文件有冲突</strong></p>
<p>使用 <code>git status</code> 查看哪些文件存在冲突：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git status
</span></span></code></pre></div><p>Git 会列出有冲突的文件，通常显示为 <strong>&ldquo;both modified&rdquo;</strong>。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>both modified:   example.txt
</span></span></code></pre></div></li>
<li>
<p><strong>打开并解决冲突</strong></p>
<p>打开有冲突的文件（例如 <code>example.txt</code>），你会看到类似下面的内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</span></span><span style="display:flex;"><span>这是 main 分支的内容
</span></span><span style="display:flex;"><span>=======
</span></span><span style="display:flex;"><span>这是 feature 分支的内容
</span></span><span style="display:flex;"><span>&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature
</span></span></code></pre></div><ul>
<li><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code> 和 <code>=======</code> 之间是当前分支（<code>HEAD</code>）的内容。</li>
<li><code>=======</code> 和 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature</code> 之间是要合并的分支（<code>feature</code>）的内容。</li>
</ul>
<p>你需要手动修改这些冲突部分，选择保留哪个内容，或者进行合并。例如，可能会修改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>这是合并后的内容，包含了 main 和 feature 分支的修改。
</span></span></code></pre></div><p>解决完冲突后，删除标记 (<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code>, <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>)，并保存文件。</p>
</li>
<li>
<p><strong>标记文件为已解决</strong></p>
<p>解决冲突并保存文件后，使用 <code>git add</code> 将文件标记为已解决：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add example.txt
</span></span></code></pre></div></li>
<li>
<p><strong>完成合并</strong></p>
<p>一旦所有冲突都解决并标记为已解决，你可以提交合并：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git commit
</span></span></code></pre></div><p>如果是合并操作，Git 会自动生成一个合并提交信息，你可以修改这个信息，或者直接保存并提交。</p>
</li>
<li>
<p><strong>查看合并结果</strong></p>
<p>使用 <code>git status</code> 确认冲突已解决，工作树干净，合并已完成：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git status
</span></span></code></pre></div><p>如果一切正常，Git 会显示如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>On branch main
</span></span><span style="display:flex;"><span>nothing to commit, working tree clean
</span></span></code></pre></div></li>
</ol>
<h3 id="使用图形化工具解决冲突">使用图形化工具解决冲突<a hidden class="anchor" aria-hidden="true" href="#使用图形化工具解决冲突">#</a></h3>
<p>使用 Git 的图形化工具（如 <code>GitKraken</code>、<code>SourceTree</code>、<code>Git GUI</code> 等）。这些工具通常会以可视化方式显示冲突，并允许你选择或编辑解决方案。</p>
<h3 id="合并冲突的常见场景">合并冲突的常见场景<a hidden class="anchor" aria-hidden="true" href="#合并冲突的常见场景">#</a></h3>
<ol>
<li><strong>编辑同一行</strong>：两个分支修改了相同的文件的同一行。</li>
<li><strong>删除和修改</strong>：一个分支删除了文件，另一个分支修改了文件内容。</li>
<li><strong>相同内容的修改</strong>：两个分支在同一文件中修改了相同的内容，但修改的方式略有不同。</li>
</ol>
<h2 id="推送">推送<a hidden class="anchor" aria-hidden="true" href="#推送">#</a></h2>
<h3 id="推送所有本地分支">推送所有本地分支<a hidden class="anchor" aria-hidden="true" href="#推送所有本地分支">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push --all
</span></span></code></pre></div><h3 id="强推">强推<a hidden class="anchor" aria-hidden="true" href="#强推">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push --force origin main
</span></span></code></pre></div><h3 id="使用---force-with-lease-替代---force">使用 <code>--force-with-lease</code> 替代 <code>--force</code><a hidden class="anchor" aria-hidden="true" href="#使用---force-with-lease-替代---force">#</a></h3>
<p>为了避免强推造成的潜在数据丢失问题，可以使用 <code>--force-with-lease</code> 代替 <code>--force</code>。这个命令可以确保你仅在远程仓库的分支没有新的提交时进行强推，否则会拒绝推送，避免覆盖其他人的提交。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git push --force-with-lease
</span></span></code></pre></div><h2 id="恢复">恢复<a hidden class="anchor" aria-hidden="true" href="#恢复">#</a></h2>
<h3 id="1-恢复到特定提交">1. 恢复到特定提交<a hidden class="anchor" aria-hidden="true" href="#1-恢复到特定提交">#</a></h3>
<p>如果你想将分支恢复到某个特定的提交（如 <code>abc1234</code>），可以使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reset --hard abc1234
</span></span></code></pre></div><p>这将重置当前分支到该提交，并且会丢失该提交之后的所有更改。</p>
<h3 id="2-还原最近的提交但保留更改">2. 还原最近的提交（但保留更改）<a hidden class="anchor" aria-hidden="true" href="#2-还原最近的提交但保留更改">#</a></h3>
<p>如果你想撤销最近的提交，但保留工作区的更改，可以使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reset --soft HEAD~1
</span></span></code></pre></div><p>这会将 HEAD 移动到上一个提交，同时保留你的更改在暂存区。</p>
<h3 id="3-恢复被删除的提交">3. 恢复被删除的提交<a hidden class="anchor" aria-hidden="true" href="#3-恢复被删除的提交">#</a></h3>
<p>如果你需要恢复一个已经被删除的提交，可以使用 <code>git reflog</code> 查找并恢复它：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reflog
</span></span></code></pre></div><p>找到需要恢复的提交哈希（如 <code>abc1234</code>），然后使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout abc1234
</span></span></code></pre></div><p>或者，如果你想将当前分支移动到该提交：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git reset --hard abc1234
</span></span></code></pre></div><h3 id="4-撤销最近的提交保持更改">4. 撤销最近的提交（保持更改）<a hidden class="anchor" aria-hidden="true" href="#4-撤销最近的提交保持更改">#</a></h3>
<p>如果你想撤销最近的提交，但想保留更改在工作目录中，可以使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git revert HEAD
</span></span></code></pre></div><p>这将创建一个新的提交，撤销最后一次提交的更改。</p>
<h2 id="修改-commit-的-message">修改 commit 的 message<a hidden class="anchor" aria-hidden="true" href="#修改-commit-的-message">#</a></h2>
<h3 id="1-修改最近一次的-commit-message">1. 修改最近一次的 commit message<a hidden class="anchor" aria-hidden="true" href="#1-修改最近一次的-commit-message">#</a></h3>
<ol>
<li>
<p>使用 <code>--amend</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git commit --amend -m <span style="color:#e6db74">&#34;新的提交信息&#34;</span>
</span></span></code></pre></div><p>这条命令会替换最近一次的 commit message。</p>
</li>
</ol>
<h3 id="2-修改更早的-commit-message">2. 修改更早的 commit message<a hidden class="anchor" aria-hidden="true" href="#2-修改更早的-commit-message">#</a></h3>
<p>如果需要修改更早的 commit message，可以使用 <code>rebase</code> 命令：</p>
<ol>
<li>
<p><strong>启动交互式 rebase</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git rebase -i HEAD~n
</span></span></code></pre></div><p>其中 <code>n</code> 是你想要回溯的提交数量。</p>
</li>
<li>
<p><strong>在打开的文本编辑器中找到要修改的 commit</strong>，将 <code>pick</code> 改为 <code>reword</code>（或 <code>r</code>）。</p>
</li>
<li>
<p><strong>保存并退出编辑器</strong>，接着会弹出一个新的编辑器窗口，你可以在这里修改 commit message。</p>
</li>
<li>
<p><strong>保存并关闭编辑器</strong>，完成后 Git 将会应用修改。</p>
</li>
</ol>
<h2 id="ssh配置">SSH配置<a hidden class="anchor" aria-hidden="true" href="#ssh配置">#</a></h2>
<h3 id="1-生成-ssh-密钥">1. <strong>生成 SSH 密钥</strong><a hidden class="anchor" aria-hidden="true" href="#1-生成-ssh-密钥">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-keygen -t rsa -b <span style="color:#ae81ff">4096</span> -C <span style="color:#e6db74">&#34;your_email@example.com&#34;</span>
</span></span></code></pre></div><p>解释：</p>
<ul>
<li><code>-t rsa</code>：指定使用 RSA 算法生成密钥。</li>
<li><code>-b 4096</code>：指定密钥的长度为 4096 位，越长的密钥越安全。</li>
<li><code>-C</code>：添加一个注释，通常用来标识密钥的用途（例如你的电子邮件地址）。</li>
</ul>
<ol>
<li>接下来，系统会提示你选择密钥保存位置。默认情况下，SSH 密钥会保存在 <code>~/.ssh/id_rsa</code>（Linux 和 macOS）或 <code>C:\Users\&lt;YourUsername&gt;\.ssh\id_rsa</code>（Windows）中。直接按 <strong>Enter</strong> 即可使用默认位置。</li>
<li>你会被要求输入一个密钥的 <strong>密码</strong>。这个密码是可选的，如果设置了密码，每次使用 SSH 密钥时需要输入密码，增加安全性。</li>
<li>完成后，SSH 密钥对将会生成：
<ul>
<li>公钥：<code>~/.ssh/id_rsa.pub</code></li>
<li>私钥：<code>~/.ssh/id_rsa</code></li>
</ul>
</li>
</ol>
<h3 id="2-将-ssh-公钥添加到-git-服务器">2. <strong>将 SSH 公钥添加到 Git 服务器</strong><a hidden class="anchor" aria-hidden="true" href="#2-将-ssh-公钥添加到-git-服务器">#</a></h3>
<p>将你生成的公钥添加到 Git 服务器（如 GitHub、GitLab 或 Bitbucket）以便验证你的身份。这里以 GitHub 为例：</p>
<ol>
<li>
<p><strong>复制 SSH 公钥</strong>：</p>
<p>使用以下命令将公钥复制到剪贴板（Linux/macOS）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.ssh/id_rsa.pub
</span></span></code></pre></div><p>可以手动复制输出的公钥，或者在 macOS 上使用 <code>pbcopy</code>（Windows 上可以直接打开文件并复制）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pbcopy &lt; ~/.ssh/id_rsa.pub  <span style="color:#75715e"># macOS</span>
</span></span></code></pre></div><p>对于 Windows，可以直接打开 <code>~/.ssh/id_rsa.pub</code> 文件，并复制内容。</p>
</li>
<li>
<p><strong>将公钥添加到 GitHub</strong>：</p>
<ul>
<li>登录到你的 GitHub 账户。</li>
<li>进入 <strong>Settings</strong>（设置） &gt; <strong>SSH and GPG keys</strong> &gt; <strong>New SSH key</strong>。</li>
<li>将刚刚复制的公钥粘贴到 <strong>Key</strong> 字段中，并为该密钥设置一个合适的标题（例如：<code>My Laptop</code>）。</li>
<li>点击 <strong>Add SSH key</strong>。</li>
</ul>
</li>
</ol>
<h3 id="3-测试-ssh-连接">3. <strong>测试 SSH 连接</strong><a hidden class="anchor" aria-hidden="true" href="#3-测试-ssh-连接">#</a></h3>
<p>确保一切配置正确后，运行以下命令来测试 SSH 是否连接成功：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh -T git@github.com
</span></span></code></pre></div><p>如果你使用的是 GitHub，这条命令应该返回类似以下的信息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Hi username! You&#39;ve successfully authenticated, but GitHub does not provide shell access.
</span></span></code></pre></div><p>如果返回成功信息，则说明 SSH 配置成功。</p>
<h3 id="4-配置-git-使用-ssh-url">4. <strong>配置 Git 使用 SSH URL</strong><a hidden class="anchor" aria-hidden="true" href="#4-配置-git-使用-ssh-url">#</a></h3>
<p>现在，你已经成功配置了 SSH 密钥，并将其添加到 GitHub 账户。接下来，确保 Git 使用 SSH 协议而非 HTTPS 协议进行操作。</p>
<ol>
<li>
<p><strong>克隆仓库时使用 SSH URL</strong>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone git@github.com:username/repository.git
</span></span></code></pre></div></li>
<li>
<p><strong>更改现有仓库的远程 URL 为 SSH</strong>：</p>
<p>如果你已经克隆了一个仓库，但它是使用 HTTPS URL，想改成 SSH URL，可以使用以下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git remote set-url origin git@github.com:username/repository.git
</span></span></code></pre></div><p>这样，之后所有 <code>git push</code> 和 <code>git pull</code> 操作都会通过 SSH 进行。</p>
</li>
</ol>
<h3 id="5-常见问题">5. <strong>常见问题</strong><a hidden class="anchor" aria-hidden="true" href="#5-常见问题">#</a></h3>
<ul>
<li>
<p><strong>无法连接到 Git 服务器</strong>：确认公钥已正确添加到服务器，并检查防火墙或代理设置是否阻止了 SSH 连接。</p>
</li>
<li>
<p><strong>密钥权限问题</strong>：确保你的私钥文件权限正确（<code>~/.ssh/id_rsa</code> 应该是 600 权限）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod <span style="color:#ae81ff">600</span> ~/.ssh/id_rsa
</span></span></code></pre></div></li>
<li>
<p><strong>使用多个 Git 账户</strong>：如果你有多个 Git 账户（例如，一个用于工作，一个用于个人项目），你可以通过在 <code>~/.ssh/config</code> 文件中配置不同的密钥来区分不同的账户。</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Default GitHub Account (for personal use)</span>
</span></span><span style="display:flex;"><span>Host github.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  HostName github.com
</span></span><span style="display:flex;"><span>  IdentityFile ~/.ssh/id_rsa_github_personal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Work GitHub Account (for work use)</span>
</span></span><span style="display:flex;"><span>Host github-work.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  HostName github.com
</span></span><span style="display:flex;"><span>  IdentityFile ~/.ssh/id_rsa_github_work
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># GitLab Personal Account</span>
</span></span><span style="display:flex;"><span>Host gitlab.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  HostName gitlab.com
</span></span><span style="display:flex;"><span>  IdentityFile ~/.ssh/id_rsa_gitlab_personal
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes
</span></span></code></pre></div><ul>
<li><strong><code>IdentityFile</code></strong>：指定用于 SSH 连接的密钥文件。</li>
<li><strong><code>IdentitiesOnly yes</code></strong>：确保只有你指定的密钥会被使用，避免其他默认密钥的干扰。</li>
</ul>
<h3 id="使用配置的-git-操作">使用配置的 Git 操作：<a hidden class="anchor" aria-hidden="true" href="#使用配置的-git-操作">#</a></h3>
<ol>
<li>
<p><strong>克隆仓库时指定 <code>Host</code></strong>：</p>
<p>你可以使用配置中指定的 <code>Host</code> 来轻松地选择要使用的远程仓库。例如，假设你要克隆 GitHub 个人账户的仓库，你可以使用如下命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone git@github.com:username/repository.git
</span></span></code></pre></div><p>对于工作 GitHub 账户，可以使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone git@github-work.com:username/repository.git
</span></span></code></pre></div><p>对于 GitLab 和 Bitbucket 也同理。</p>
</li>
<li>
<p><strong>推送到远程仓库时</strong>：</p>
<p>当你执行 <code>git push</code> 或 <code>git pull</code> 时，Git 会自动选择相应的 SSH 密钥。</p>
</li>
</ol>
<h2 id="git-bash">Git Bash<a hidden class="anchor" aria-hidden="true" href="#git-bash">#</a></h2>
<p><code>git bash</code> 设置home目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>setx HOME <span style="color:#e6db74">&#34;C:\Projects&#34;</span>
</span></span></code></pre></div><h2 id="gitignore"><code>.gitignore</code><a hidden class="anchor" aria-hidden="true" href="#gitignore">#</a></h2>
<p>检查<code>.gitignore</code> 是否设置生效</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git check-ignore -v .idea
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://kennems.github.io/tags/git/">Git</a></li>
    </ul>
        
    
    <ul id="categories">
      
        <li><a href="https://kennems.github.io/categories/git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">Git学习笔记</a> </li>
      
    </ul>
    
    
<nav class="paginav">
  <a class="prev" href="https://kennems.github.io/posts/life/20240823-%E6%98%9F%E6%9C%9F%E4%BA%94-%E9%9D%92%E5%B2%9B%E5%B8%82%E5%8C%BA/">
    <span class="title">« 上一页</span>
    <br>
    <span>20240823 星期五 青岛市区</span>
  </a>
  <a class="next" href="https://kennems.github.io/posts/tech/kotlin%E5%8D%8F%E7%A8%8B3/">
    <span class="title">下一页 »</span>
    <br>
    <span>Kotlin协程(3)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://kennems.github.io/">Kennem&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<footer class="footer">
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container">
    👤 Visitors: <span id="busuanzi_value_site_uv"></span>
    👀 Views: <span id="busuanzi_value_site_pv"></span>
  </span>
</footer>



</body>

</html>
