<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Guan</title>
<meta name="keywords" content="">
<meta name="description" content="蓝桥杯笔记 以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。
一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。
真题一定要全部过一遍
一、基础复习阶段 3.4~3.10
二、刷题 3.10~3.20
三、刷真题，搞懂每一道真题 3.20~4.10
程序易错点 ：
变量未声明 i,j,k变量写错了 11&#43;12&#43;16&#43;15&#43;12&#43;12 = 78
七夕祭 $$ p[i] : i给i&#43;1 \enspace p[i]个糖果 \ 则 ans = \sum_{i=1}^n|p[i]| \ p[1]=a[1]-avg \ 递推 \enspace p[2]=p[1]&#43;a[2]-avg \ p[3]=p[2]&#43;a[3]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg \ p[4]=p[3]&#43;a[4]-avg = p[2]&#43;p[3]-avg&#43;a[4]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg&#43;a[4]-avg \ =\sum_{i=2}^4{(a[i]-avg)} - p[1] \ ans = $$
from collections import defaultdict r = defaultdict(int) c = defaultdict(int) s = defaultdict(int) def get_ans(a, n): ans = 0 avg = sum(a.">
<meta name="author" content="">
<link rel="canonical" href="https://showguan.github.io/posts/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%AC%94%E8%AE%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4599eadb9eb2ad3d0a8d6827b41a8fda8f2f4af226b63466c09c5fddbc8706b7.css" integrity="sha256-RZnq256yrT0KjWgntBqP2o8vSvImtjRmwJxf3byHBrc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://showguan.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://showguan.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://showguan.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://showguan.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://showguan.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://showguan.github.io/posts/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%AC%94%E8%AE%B0/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="" />
<meta property="og:description" content="蓝桥杯笔记 以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。
一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。
真题一定要全部过一遍
一、基础复习阶段 3.4~3.10
二、刷题 3.10~3.20
三、刷真题，搞懂每一道真题 3.20~4.10
程序易错点 ：
变量未声明 i,j,k变量写错了 11&#43;12&#43;16&#43;15&#43;12&#43;12 = 78
七夕祭 $$ p[i] : i给i&#43;1 \enspace p[i]个糖果 \ 则 ans = \sum_{i=1}^n|p[i]| \ p[1]=a[1]-avg \ 递推 \enspace p[2]=p[1]&#43;a[2]-avg \ p[3]=p[2]&#43;a[3]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg \ p[4]=p[3]&#43;a[4]-avg = p[2]&#43;p[3]-avg&#43;a[4]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg&#43;a[4]-avg \ =\sum_{i=2}^4{(a[i]-avg)} - p[1] \ ans = $$
from collections import defaultdict r = defaultdict(int) c = defaultdict(int) s = defaultdict(int) def get_ans(a, n): ans = 0 avg = sum(a." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://showguan.github.io/posts/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="posts" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="蓝桥杯笔记 以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。
一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。
真题一定要全部过一遍
一、基础复习阶段 3.4~3.10
二、刷题 3.10~3.20
三、刷真题，搞懂每一道真题 3.20~4.10
程序易错点 ：
变量未声明 i,j,k变量写错了 11&#43;12&#43;16&#43;15&#43;12&#43;12 = 78
七夕祭 $$ p[i] : i给i&#43;1 \enspace p[i]个糖果 \ 则 ans = \sum_{i=1}^n|p[i]| \ p[1]=a[1]-avg \ 递推 \enspace p[2]=p[1]&#43;a[2]-avg \ p[3]=p[2]&#43;a[3]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg \ p[4]=p[3]&#43;a[4]-avg = p[2]&#43;p[3]-avg&#43;a[4]-avg = p[1]&#43;a[2]-avg&#43;a[3]-avg&#43;a[4]-avg \ =\sum_{i=2}^4{(a[i]-avg)} - p[1] \ ans = $$
from collections import defaultdict r = defaultdict(int) c = defaultdict(int) s = defaultdict(int) def get_ans(a, n): ans = 0 avg = sum(a."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://showguan.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "",
      "item": "https://showguan.github.io/posts/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%AC%94%E8%AE%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "name": "",
  "description": "蓝桥杯笔记 以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。\n一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。\n真题一定要全部过一遍\n一、基础复习阶段 3.4~3.10\n二、刷题 3.10~3.20\n三、刷真题，搞懂每一道真题 3.20~4.10\n程序易错点 ：\n变量未声明 i,j,k变量写错了 11+12+16+15+12+12 = 78\n七夕祭 $$ p[i] : i给i+1 \\enspace p[i]个糖果 \\ 则 ans = \\sum_{i=1}^n|p[i]| \\ p[1]=a[1]-avg \\ 递推 \\enspace p[2]=p[1]+a[2]-avg \\ p[3]=p[2]+a[3]-avg = p[1]+a[2]-avg+a[3]-avg \\ p[4]=p[3]+a[4]-avg = p[2]+p[3]-avg+a[4]-avg = p[1]+a[2]-avg+a[3]-avg+a[4]-avg \\ =\\sum_{i=2}^4{(a[i]-avg)} - p[1] \\ ans = $$\nfrom collections import defaultdict r = defaultdict(int) c = defaultdict(int) s = defaultdict(int) def get_ans(a, n): ans = 0 avg = sum(a.",
  "keywords": [
    
  ],
  "articleBody": "蓝桥杯笔记 以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。\n一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。\n真题一定要全部过一遍\n一、基础复习阶段 3.4~3.10\n二、刷题 3.10~3.20\n三、刷真题，搞懂每一道真题 3.20~4.10\n程序易错点 ：\n变量未声明 i,j,k变量写错了 11+12+16+15+12+12 = 78\n七夕祭 $$ p[i] : i给i+1 \\enspace p[i]个糖果 \\ 则 ans = \\sum_{i=1}^n|p[i]| \\ p[1]=a[1]-avg \\ 递推 \\enspace p[2]=p[1]+a[2]-avg \\ p[3]=p[2]+a[3]-avg = p[1]+a[2]-avg+a[3]-avg \\ p[4]=p[3]+a[4]-avg = p[2]+p[3]-avg+a[4]-avg = p[1]+a[2]-avg+a[3]-avg+a[4]-avg \\ =\\sum_{i=2}^4{(a[i]-avg)} - p[1] \\ ans = $$\nfrom collections import defaultdict r = defaultdict(int) c = defaultdict(int) s = defaultdict(int) def get_ans(a, n): ans = 0 avg = sum(a.values()) // n for i in a: a[i] -= avg s[1] = 0 prev_sum = 0 sorted_values = sorted(a.values()) mid = sorted_values[n // 2] for i in range(2, n + 1): prev_sum += a[i] s[i] = prev_sum for i in s.values(): ans += abs(i - mid) return ans n, m, t = map(int, input().split()) for _ in range(t): x, y = map(int, input().split()) r[x] += 1 c[y] += 1 if t % n != 0 and t % m != 0: print(\"impossible\") elif t % n == 0 and t % m == 0: print(\"both\", get_ans(r, n) + get_ans(c, m)) elif t % n == 0: print(\"row\", get_ans(r, n)) else: print(\"column\", get_ans(c, m)) 模板 基础+杂项 快速排序 def quick_sort(q, l, r): if l\u003e=r: return i,j,x=l-1,r+1,q[(l+r)\u003e\u003e1] while i\u003cj: i+=1 while q[i]\u003cx: i+=1 j-=1 while q[j]\u003ex: j-=1 if i\u003cj: q[i], q[j] = q[j], q[i] quick_sort(q, l, j) quick_sort(q, j+1, r) n=int(input()) arr=list(map(int, input().split())) quick_sort(arr,0,n-1) print(\" \".join(map(str, arr))) 归并排序 j = mid+1 !!!\ndef merge_sort(q,l,r): if l\u003e=r: return mid = (l+r)\u003e\u003e1 merge_sort(q, l, mid) merge_sort(q, mid+1, r) i,j,k = l, mid+1, 0 tmp = [0]*(r-l+1) while i\u003c=mid and j\u003c=r: if q[i]\u003cq[j]: tmp[k]=q[i] k+=1 i+=1 else: tmp[k]=q[j] k+=1 j+=1 while i\u003c=mid: tmp[k]=q[i] i+=1 k+=1 while j\u003c=r: tmp[k]=q[j] j+=1 k+=1 for i in range(l, r+1): q[i]=tmp[i-l] n=int(input()) arr=list(map(int, input().split())) merge_sort(arr, 0, n-1) print(\" \".join(map(str, arr))) 二分 def check(x): # 检查 x 是否满足某种性质 pass # 这里需要根据具体的情况实现 def bsearch_1(l, r): while l \u003c r: mid = (l + r) // 2 if check(mid): r = mid else: l = mid + 1 return l def bsearch_2(l, r): while l \u003c r: mid = (l + r + 1) // 2 if check(mid): l = mid else: r = mid - 1 return l # 示例用法 # 首先定义 check 函数来检查性质 # 然后使用 bsearch_1 或 bsearch_2 来进行二分搜索 浮点数二分 def check(x): # 检查x是否满足某种性质 pass # 这里需要根据具体情况实现check函数 def bsearch_3(l, r): eps = 1e-6 # eps 表示精度，取决于题目对精度的要求 while r - l \u003e eps: mid = (l + r) / 2 if check(mid): r = mid else: l = mid return l 一维前缀和 def prefixSum(arr): n = len(arr) prefixSum = [0] * n prefixSum[0] = arr[0] for i in range(1, n): prefixSum[i] = prefixSum[i-1] + arr[i] for i in range(n): print(prefixSum[i], end=\" \") arr = [1, 2, 3, 4, 5] prefixSum(arr) 二维前缀和 def prefixSum2D(arr): n = len(arr) m = len(arr[0]) prefixSum = [[0] * m for _ in range(n)] # 计算第一行的前缀和 prefixSum[0][0] = arr[0][0] for j in range(1, m): prefixSum[0][j] = prefixSum[0][j-1] + arr[0][j] # 计算第一列的前缀和 for i in range(1, n): prefixSum[i][0] = prefixSum[i-1][0] + arr[i][0] # 计算其他部分的前缀和 for i in range(1, n): for j in range(1, m): prefixSum[i][j] = prefixSum[i-1][j] + prefixSum[i][j-1] - prefixSum[i-1][j-1] + arr[i][j] return prefixSum def submatrixSum(prefixSum, x1, y1, x2, y2): return prefixSum[x2][y2] - prefixSum[x1-1][y2] - prefixSum[x2][y1-1] + prefixSum[x1-1][y1-1] arr = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]] prefixSum = prefixSum2D(arr) print(prefixSum) x1, y1 = 1, 1 x2, y2 = 2, 2 submatrixSum = submatrixSum(prefixSum, x1, y1, x2, y2) print(submatrixSum) 一维差分 差分和前缀和是逆运算。\n需要计算某一段区间$+-$操作时，运用差分操作 updateRange 需要先构造差分数组\n$s[i] = s[i-1]+a[i]$ 逆运算 $d[i]=a[i]-a[i-1]$ （原数组看作为前缀和数组）\ndef updateRange(B, l, r, c): B[l] += c B[r + 1] -= c def printArray(arr): for i in range(len(arr)): print(arr[i], end=\" \") print() n= 5 B = [0] * (n + 1) updateRange(B, 1, 3, 2) updateRange(B, 2, 4, 3) printArray(B) 二维差分 def updateSubmatrix(S, x1, y1, x2, y2, c): S[x1][y1] += c S[x2 + 1][y1] -= c S[x1][y2 + 1] -= c S[x2 + 1][y2 + 1] += c def printMatrix(S): rows = len(S) cols = len(S[0]) for i in range(rows): for j in range(cols): print(S[i][j], end=\" \") print() rows = 3 cols = 3 S = [[0] * cols for _ in range(rows + 1)] updateSubmatrix(S, 0, 0, 1, 1, 1) updateSubmatrix(S, 1, 1, 2, 2, 2) printMatrix(S) 双指针 for i in range(n): j = 0 while j \u003c i and check(j, i): j += 1 # 具体问题的逻辑 # 常见问题分类： # (1) 对于一个序列，用两个指针维护一段区间 # (2) 对于两个序列，维护某种次序，比如归并排序中合并两个有序序列的操作 位运算 原码，反码，补码 求n二进制表示中第k位数字: n \u003e\u003e k \u0026 1 返回n的最后一位1：lowbit(n) = n \u0026 -n 树状数组基本操作 离散化 alls = [] # 存储所有待离散化的值 # 将所有值排序 alls.sort() # 去掉重复元素 alls = list(set(alls)) # 二分求出x对应的离散化的值 def find(x): l, r = 0, len(alls) - 1 while l \u003c r: mid = (l + r) // 2 if alls[mid] \u003e= x: r = mid else: l = mid + 1 return r + 1 # 映射到1, 2, ...n 区间合并 def merge(segs): segs.sort() # 区间左端点排序 res = [] st, ed = -2e9, -2e9 for seg in segs: if ed \u003c seg[0]: if st != -2e9: res.append((st, ed)) st, ed = seg[0], seg[1] else: ed = max(ed, seg[1]) if st != -2e9: res.append((st, ed)) segs[:] = res 数据结构 单链表 N = int(1e5+10) e=[0]*N ne=[0]*N head=-1 idx=1 def insert(x): global idx, head e[idx]=x ne[idx]=head head=idx idx+=1 def add(k, x): global idx e[idx]=x ne[idx]=ne[k] ne[k]=idx idx+=1 def remove(k): global idx, head if k==0: head = ne[head] else: ne[k]=ne[ne[k]] n = int(input()) for _ in range(n): s = input().split() op=s[0] if op=='H': insert(int(s[1])) elif op=='I': add(int(s[1]), int(s[2])) else: remove(int(s[1])) i=head while i!=-1: print(e[i], end=' ') i=ne[i] 双链表 N = int(1e5+10) e=[0]*N l=[0]*N r=[0]*N idx=0 def init(): global idx r[2]=1 l[1]=2 idx=3 def insert(k, x): global idx e[idx]=x l[idx]=k r[idx]=r[k] l[r[k]]=idx r[k]=idx idx+=1 def remove(k): l[r[k]]=l[k] r[l[k]]=r[k] init() m=int(input()) for _ in range(m): s=input().split() if s[0]=='L': x=int(s[1]) insert(2,x) elif s[0]=='R': x=int(s[1]) insert(l[1],x) elif s[0]=='D': k=int(s[1])+2 remove(k) elif s[0]=='IL': k=int(s[1])+2 x=int(s[2]) insert(l[k],x) elif s[0]=='IR': k=int(s[1])+2 x=int(s[2]) insert(k,x) i=2 while i!=0: if i==2 or i==1: i=r[i] continue print(e[i],end=\" \") i=r[i] 栈 N = int(1e5+10) # 假设N的值为100 stk = [0] * N tt = 0 # 向栈顶插入一个数 tt += 1 stk[tt] = x # 从栈顶弹出一个数 tt -= 1 # 栈顶的值 stk[tt] # 判断栈是否为空 if tt \u003e 0: pass 队列 N = 100 # 假设N的值为100 q = [0] * N hh = 0 tt = -1 # 向队尾插入一个数 tt += 1 q[tt] = x # 从队头弹出一个数 hh += 1 # 队头的值 q[hh] # 判断队列是否为空 if hh \u003c= tt: pass N = 100 # 假设N的值为100 q = [0] * N hh = 0 tt = 0 # 向队尾插入一个数 q[tt] = x tt += 1 if tt == N: tt = 0 # 从队头弹出一个数 hh += 1 if hh == N: hh = 0 # 队头的值 q[hh] # 判断队列是否为空 if hh != tt: pass 单调栈 tt = 0 stk = [0] * (n + 1) for i in range(1, n + 1): while tt and check(stk[tt], i): tt -= 1 stk[tt + 1] = i tt += 1 单调队列 n = 10 # 假设n的值为10 hh = 0 tt = -1 q = [0] * n for i in range(n): while hh \u003c= tt and check_out(q[hh]): hh += 1 while hh \u003c= tt and check(q[tt], i): tt -= 1 q[tt + 1] = i tt += 1 N = int(1e6+10) q=[0 for _ in range(N)] n,k=map(int, input().split()) a=[0]+[int(x) for x in input().split()] hh,tt=0,-1 for i in range(1,n+1): if hh\u003c=tt and i-q[hh]+1\u003ek: hh+=1 while hh\u003c=tt and a[q[tt]] \u003e= a[i]: tt-=1 tt+=1 q[tt]=i if i \u003e= k: print(a[q[hh]], end=\" \") print() hh,tt=0,-1 for i in range(1,n+1): if hh\u003c=tt and i-q[hh]+1\u003ek: hh+=1 while hh\u003c=tt and a[q[tt]] \u003c= a[i]: tt-=1 tt+=1 q[tt]=i if i\u003e=k: print(a[q[hh]], end=\" \") KMP m = len(p) # 假设p为模板串，长度为m n = len(s) # 假设s为模式串，长度为n ne = [0] * (m + 1) # 初始化ne数组 # 求Next数组 j = 0 for i in range(2, m + 1): while j and p[i] != p[j + 1]: j = ne[j] if p[i] == p[j + 1]: j += 1 ne[i] = j # 匹配 j = 0 for i in range(1, n + 1): while j and s[i] != p[j + 1]: j = ne[j] if s[i] == p[j + 1]: j += 1 if j == m: j = ne[j] # 匹配成功后的逻辑 Tire N = 100010 son = [[0] * 26 for _ in range(N)] cnt = [0] * N idx = 0 # 0号点既是根节点，又是空节点 # son[][]存储树中每个节点的子节点 # cnt[]存储以每个节点结尾的单词数量 # 插入一个字符串 def insert(s): global idx p = 0 for i in range(len(s)): u = ord(s[i]) - ord('a') if not son[p][u]: idx += 1 son[p][u] = idx p = son[p][u] cnt[p] += 1 # 查询字符串出现的次数 def query(s): p = 0 for i in range(len(s)): u = ord(s[i]) - ord('a') if not son[p][u]: return 0 p = son[p][u] return cnt[p] 并查集 N = 1000005 # 假设N的值为1000005 p = [0] * N # 初始化p数组 # 返回x的祖宗节点 def find(x): if p[x] != x: p[x] = find(p[x]) return p[x] # 初始化，假定节点编号是1~n for i in range(1, n + 1): p[i] = i # 合并a和b所在的两个集合 p[find(a)] = find(b) 维护size信息\n# Python中没有类似于C++的数组声明方式，我们直接使用列表来代替 p = [i for i in range(N)] size = [1] * N # 返回x的祖宗节点 def find(x): if p[x] != x: p[x] = find(p[x]) return p[x] # 初始化，假定节点编号是1~n n = N # 假设n是提前定义好的 for i in range(1, n + 1): p[i] = i size[i] = 1 # 合并a和b所在的两个集合 p[find(a)] = find(b) size[b] += size[a] 维护到祖宗节点距离的并查集\n# Python中没有类似于C++的数组声明方式，我们直接使用列表来代替 p = [i for i in range(N)] d = [0] * N # 返回x的祖宗节点 def find(x): if p[x] != x: u = find(p[x]) d[x] += d[p[x]] p[x] = u return p[x] # 初始化，假定节点编号是1~n n = N # 假设n是提前定义好的 for i in range(1, n + 1): p[i] = i d[i] = 0 # 合并a和b所在的两个集合 p[find(a)] = find(b) d[find(a)] = distance # 根据具体问题，初始化find(a)的偏移量 堆 # h[N] 存储堆中的值, h[1]是堆顶，x的左儿子是2x, 右儿子是2x + 1 # ph pos[k] 存储第k个插入的点在堆中的位置 # hp ord[k] 存储堆中下标是k的点是第几个插入的 N = 1000005 # 假设N的值为1000005 h = [0] * N # 初始化h数组 ph = [0] * N # 初始化ph数组 hp = [0] * N # 初始化hp数组 size = 0 # 初始化size为0 # 交换两个点，及其映射关系 def heap_swap(a, b): ph[hp[a]], ph[hp[b]] = ph[hp[b]], ph[hp[a]] hp[a], hp[b] = hp[b], hp[a] h[a], h[b] = h[b], h[a] def down(u): t = u if u * 2 \u003c= size and h[u * 2] \u003c h[t]: t = u * 2 if u * 2 + 1 \u003c= size and h[u * 2 + 1] \u003c h[t]: t = u * 2 + 1 if u != t: heap_swap(u, t) down(t) def up(u): while u // 2 and h[u] \u003c h[u // 2]: heap_swap(u, u // 2) u \u003e\u003e= 1 # O(n)建堆 for i in range(n // 2, 0, -1): down(i) def add_element(x): global size size += 1 h[size] = x ph[size] = size hp[size] = size up(size) def get_heap_top(): return h[1] def delete_element(k): global size heap_swap(k, size) size -= 1 down(k) up(k) def update_element(k, x): h[k] = x down(k) up(k) # 添加元素 add_element(x) # 堆顶元素 heap_top = get_heap_top() # 删除第size个节点 delete_element(1) # 删除第k个节点 delete_element(k) # 将第k个元素赋值为x update_element(k, x) 哈希 (1)拉链法 N = 1000005 # 假设N的值为1000005 h = [-1] * N # 初始化h数组为-1 e = [0] * N # 初始化e数组 ne = [0] * N # 初始化ne数组 idx = 0 # 初始化idx为0 # 向哈希表中插入一个数 def insert(x): k = (x % N + N) % N e[idx] = x ne[idx] = h[k] h[k] = idx idx += 1 # 在哈希表中查询某个数是否存在 def find(x): k = (x % N + N) % N i = h[k] while i != -1: if e[i] == x: return True i = ne[i] return False (2) 开放寻址法 N = 1000005 # 假设N的值为1000005 h = [0] * N # 初始化h数组 # 如果x在哈希表中，返回x的下标；如果x不在哈希表中，返回x应该插入的位置 def find(x): t = (x % N + N) % N while h[t] != 0 and h[t] != x: t += 1 if t == N: t = 0 return t 字符串哈希 N = 1000005 # 假设N的值为1000005 P = 131 # 或者可以设置为13331 h = [0] * N # 初始化h数组 p = [0] * N # 初始化p数组 # 初始化 p[0] = 1 for i in range(1, n + 1): h[i] = h[i - 1] * P + ord(str[i]) p[i] = p[i - 1] * P # 计算子串 str[l ~ r] 的哈希值 def get(l, r): return h[r] - h[l - 1] * p[r - l + 1] 图论 树的存储 邻接矩阵 # 创建一个二维列表表示邻接矩阵 n = 10 # 顶点数量 g = [[0] * n for _ in range(n)] # 添加一条边a-\u003eb def add_edge(a, b): g[a][b] = 1 # 初始化 g = [[0] * n for _ in range(n)] 邻接表 # 创建一个列表表示邻接表 n = 10 # 顶点数量 h = [-1] * n e = [0] * n ne = [0] * n idx = 0 # 添加一条边a-\u003eb def add_edge(a, b): global idx e[idx] = b ne[idx] = h[a] h[a] = idx idx += 1 # 初始化 idx = 0 h = [-1] * n 树和图的存储 # 邻接表表示的图 N = 100010 # 根据具体需求设置合适的最大节点数量 # 对于每个点k，开一个单链表，存储k所有可以走到的点。h[k]存储这个单链表的头结点 h = [-1] * N # 存储边的目标节点 e = [0] * N # 存储下一条边的索引 ne = [0] * N # 边的索引 idx = 0 # 添加一条边a-\u003eb def add(a, b): global idx e[idx] = b ne[idx] = h[a] h[a] = idx idx += 1 # 初始化 idx = 0 for i in range(N): h[i] = -1 树和图的遍历 DFS def dfs(u): st[u] = True # st[u] 表示点u已经被遍历过 for i in range(h[u], -1, -1): j = e[i] if not st[j]: dfs(j) BFS from queue import Queue q = Queue() st[1] = True # 表示1号点已经被遍历过 q.put(1) while not q.empty(): t = q.get() for i in range(h[t], -1, -1): j = e[i] if not st[j]: st[j] = True # 表示点j已经被遍历过 q.put(j) 拓扑排序 def topsort(): hh = 0 tt = -1 # d[i] 存储点i的入度 for i in range(1, n + 1): if d[i] == 0: q.append(i) tt += 1 while hh \u003c= tt: t = q[hh] hh += 1 for i in range(h[t], -1, -1): j = e[i] d[j] -= 1 if d[j] == 0: q.append(j) tt += 1 # 如果所有点都入队了，说明存在拓扑序列；否则不存在拓扑序列。 return tt == n - 1 LCA def lca(x,y): if dep[x] \u003c dep[y]: x,y = y,x d = dep[x]-dep[y] while d: # 循环直到深度差为 0 v = d \u0026 -d # 获取 d 的最低位的 1 所在的位置 i = v.bit_length() - 1 # 计算最低位的位置索引 x = fa[i][x] # 将节点 x 上移到和节点 y 同一深度 d -= v # 更新深度差 if x==y: return x for k in range(K-1, -1, -1): if fa[k][x] != fa[k][y]: x = fa[k][x] y = fa[k][y] return fa[0][x] 最短路 单元最短路\n​\t所有边权为正：\n​\t朴素版Dijkstra $O(n^2)$,堆优化版的Dijkstra $O(mlogn)$,\n​\t存在负权边\n​\tBellman-Ford $O(nm)$, SPFA 队列优化的Bellman-Ford, 一般情况：$O(m)$ 最坏情况：$O(nm)$\n多元汇最短路：\n​\tFloyed $O(n^3)$\n朴素Dijkstra N = int(5e2)+10 INF = 0x3f3f3f3f g = [[INF]*N for _ in range(N)] #g = defaultdict(lambda:defaultdict(lambda:INF)) 同样的效果 dis = [INF]*N st = [False]*N def dijkstra(): dis[1]=0 for i in range(n-1): t=-1 for j in range(1,n+1): if not st[j] and (t==-1 or dis[j]\u003cdis[t]): t=j for j in range(1,n+1): dis[j]=min(dis[j], dis[t] + g[t][j]) st[t]=True if dis[n]==INF: return -1 return dis[n] n, m = map(int, input().split()) for _ in range(m): x, y, z = map(int ,input().split()) g[x][y] = min(g[x][y], z) print(dijkstra()) 堆优化版Dijkstra from heapq import * import sys input = lambda:sys.stdin.readline().strip() N = 150010 INF = 0x3f3f3f3f e, ne, head, w, dis= [0]*N, [0]*N, [-1]*N, [0]*N, [INF]*N st = [False]*N idx=0 def add(a, b, x): global idx e[idx]=b w[idx]=x ne[idx]=head[a] head[a]=idx idx+=1 def dijkstra(): dis[1]=0 h=[] heappush(h, (0,1)) while h: dist, ver = heappop(h) if st[ver]: continue st[ver]=True i=head[ver] while i!=-1: j=e[i] if not st[j] and dis[j]\u003edist+w[i]: dis[j]=dist+w[i] heappush(h, (dis[j], j)) i=ne[i] if dis[n]==INF: print(-1) else: print(dis[n]) n, m = map(int, input().split()) for _ in range(m): x, y, z = map(int, input().split()) add(x,y,z) dijkstra() 另一种写法 from heapq import * from collections import defaultdict import sys input=lambda:sys.stdin.readline().strip() N, INF = 150010, 0x3f3f3f3f dis, st = [INF]*N, [False]*N g=defaultdict(list) def dijkstra(): dis[1]=0 h=[] heappush(h, (0, 1)) while h: dist, ver = heappop(h) if st[ver]: continue st[ver]=True for y, z in g[ver]: if dis[y]\u003edis[ver]+z: dis[y]=dis[ver]+z heappush(h, (dis[y], y)) if dis[n]==INF: print(-1) else: print(dis[n]) n, m = map(int, input().split()) for _ in range(m): x,y,z = map(int, input().split()) g[x].append((y, z)) dijkstra() Bellman-Ford # n表示点数，m表示边数 dist = [float('inf')] * (n + 1) # dist[x]存储1到x的最短路距离 # 边，a表示出点，b表示入点，w表示边的权重 edges = [] # 求1到n的最短路距离，如果无法从1走到n，则返回-1。 def bellman_ford(): dist[1] = 0 # 如果第n次迭代仍然会松弛三角不等式，就说明存在一条长度是n+1的最短路径，由抽屉原理，路径中至少存在两个相同的点，说明图中存在负权回路。 for i in range(n): for j in range(m): a, b, w = edges[j]['a'], edges[j]['b'], edges[j]['w'] if dist[b] \u003e dist[a] + w: dist[b] = dist[a] + w if dist[n] \u003e float('inf') / 2: return -1 return dist[n] SPFA from collections import defaultdict, deque import sys input = lambda:sys.stdin.readline().strip() N, INF = int(1e5+10), 0x3f3f3f3f dis, st = [INF]*N, [False]*N g=defaultdict(list) def spfa(): q=deque() q.append(1) st[1]=True dis[1]=0 while q: x=q.popleft() st[x]=False for y, z in g[x]: if dis[y]\u003edis[x]+z: dis[y]=dis[x]+z if not st[y]: st[y]=True q.append(y) if dis[n]==INF: print('impossible') else: print(dis[n]) n, m = map(int, input().split()) for _ in range(m): x, y, z = map(int, input().split()) g[x].append((y, z)) spfa() 判断负环 from collections import deque N = int(1e5+10) INF = 0x3f3f3f3f n = 0 # 总点数 h = [-1] * N # 邻接表存储所有边 e, ne, w = [0] * N, [0] * N, [0] * N idx = 0 dist, cnt = [INF] * N, [0] * N # dist[x]存储1号点到x的最短距离，cnt[x]存储1到x的最短路中经过的点数 st = [False] * N # 存储每个点是否在队列中 # 如果存在负环，则返回True，否则返回False。 def spfa(): # 不需要初始化dist数组 # 原理：如果某条最短路径上有n个点（除了自己），那么加上自己之后一共有n+1个点，由抽屉原理一定有两个点相同，所以存在环 q = deque() for i in range(1, n + 1): q.append(i) st[i] = True while q: t = q.popleft() st[t] = False i = h[t] while i != -1: j = e[i] if dist[j] \u003e dist[t] + w[i]: dist[j] = dist[t] + w[i] cnt[j] = cnt[t] + 1 if cnt[j] \u003e= n: return True # 如果从1号点到x的最短路中包含至少n个点（不包括自己），则说明存在环 if not st[j]: q.append(j) st[j] = True i = ne[i] return False # Example usage: # n = 5 # h = [-1, 2, 1, 4, 3, -1] # e = [0, 2, 1, 4, 3, 0] # ne = [1, -1, 3, -1, -1, 2] # w = [0, 1, 2, 3, 4, 5] # if spfa(): # print(\"Exist negative cycle\") # else: # print(\"No negative cycle\") floyd INF = float('inf') # 初始化距离矩阵d，d[a][b]表示a到b的最短距离 def initialize(n): d = [[0 if i == j else INF for j in range(n)] for i in range(n)] return d # Floyd算法求解最短路径 def floyd(d, n): for k in range(n): for i in range(n): for j in range(n): d[i][j] = min(d[i][j], d[i][k] + d[k][j]) return d # Example usage: # n = 5 # d = initialize(n) # d = floyd(d, n) # print(d) Prim INF = float('inf') # Prim算法求解最小生成树的权重之和 def prim(n, g): dist = [INF] * (n + 1) st = [False] * (n + 1) res = 0 for i in range(n): t = -1 for j in range(1, n + 1): if not st[j] and (t == -1 or dist[t] \u003e dist[j]): t = j if i and dist[t] == INF: return INF if i: res += dist[t] st[t] = True for j in range(1, n + 1): dist[j] = min(dist[j], g[t][j]) return res # Example usage: # n = 5 # g = [[0] * (n + 1) for _ in range(n + 1)] # dist = prim(n, g) # print(dist) Kruskal INF = float('inf') # 并查集的查找操作 def find(x, p): if p[x] != x: p[x] = find(p[x], p) return p[x] # Kruskal算法求解最小生成树的权重之和 def kruskal(n, m, edges): edges.sort(key=lambda x: x[2]) # 按照边权重对边进行排序 p = [i for i in range(n + 1)] # 初始化并查集的父节点数组 res = 0 cnt = 0 for edge in edges: a, b, w = edge a = find(a, p) b = find(b, p) if a != b: # 如果两个连通块不连通，则将这两个连通块合并 p[a] = b res += w cnt += 1 if cnt \u003c n - 1: return INF return res # Example usage: # n, m = 5, 7 # edges = [(1, 2, 2), (1, 3, 5), (1, 4, 6), (2, 3, 1), (2, 4, 3), (3, 4, 4), (4, 5, 7)] # min_spanning_tree_weight = kruskal(n, m, edges) # print(min_spanning_tree_weight) 染色法 # 定义全局变量 N = 10005 # 根据需要修改 M = 20005 # 根据需要修改 h = [-1] * N # 邻接表头 e, ne = [0] * M, [0] * M # 邻接表存储图 idx = 0 # 邻接表索引 color = [-1] * N # 表示每个点的颜色，-1表示未染色，0表示白色，1表示黑色 # 深度优先搜索进行着色 def dfs(u, c): color[u] = c i = h[u] while i != -1: j = e[i] if color[j] == -1: if not dfs(j, 1 - c): return False elif color[j] == c: return False i = ne[i] return True # 检查图是否是二分图 def check(n): flag = True for i in range(1, n + 1): if color[i] == -1: if not dfs(i, 0): flag = False break return flag # Example usage: # n = 5 # h = [-1, 2, -1, 4, -1, 4] # 邻接表头 # e = [0, 3, 0, 1, 0, 4] # 邻接表存储图 # ne = [1, -1, -1, 2, 5, -1] # 邻接表存储图 # if check(n): # print(\"Graph is a bipartite graph.\") # else: # print(\"Graph is not a bipartite graph.\") 匈牙利算法 N = 1005 # 根据需要修改 M = 100005 # 根据需要修改 h = [-1] * N # 邻接表头 e, ne = [0] * M, [0] * M # 邻接表存储所有边，只存储从第二个集合指向第一个集合的边 idx = 0 # 邻接表索引 match = [0] * N # 存储第二个集合中的每个点当前匹配的第一个集合中的点是哪个 st = [False] * N # 表示第二个集合中的每个点是否已经被遍历过 # 匈牙利算法中的深度优先搜索寻找增广路 def find(x): for i in range(h[x]): j = e[i] if not st[j]: st[j] = True if match[j] == 0 or find(match[j]): match[j] = x return True return False # 求最大匹配数 def hungarian(n1, n2): res = 0 for i in range(1, n1 + 1): st = [False] * N # 重置st数组 if find(i): res += 1 return res # Example usage: # n1, n2 = 5, 5 # h = [-1, 2, 3, 4, 0, 0] # 邻接表头 # e = [1, 2, 3, 4, 0, 0] # 邻接表存储所有边，只存储从第二个集合指向第一个集合的边 # ne = [1, 2, 3, 4, -1, -1] # 邻接表存储所有边，只存储从第二个集合指向第一个集合的边 # max_matching = hungarian(n1, n2) # print(max_matching) 数学 试除法判定质数 # 判断一个数是否是素数 def is_prime(x): if x \u003c 2: return False for i in range(2, int(x ** 0.5) + 1): if x % i == 0: return False return True # Example usage: # result = is_prime(17) # print(result) # Output: True 试除法分解质因数 # 因数分解函数 def divide(x): i = 2 while i \u003c= x ** 0.5: if x % i == 0: s = 0 while x % i == 0: x //= i s += 1 print(i, s) i += 1 if x \u003e 1: print(x, 1) print() # Example usage: # divide(36) 朴素筛法求素数 N = 1000005 # 根据需要修改 primes = [] # 存储所有素数 st = [False] * N # st[x]存储x是否被筛掉 # 筛素数函数 def get_primes(n): global primes global st for i in range(2, n + 1): if not st[i]: primes.append(i) for j in range(i, n + 1, i): st[j] = True # Example usage: # get_primes(100) # print(primes) 线性筛法求素数 N = 1000005 # 根据需要修改 primes = [] # 存储所有素数 st = [False] * N # st[x]存储x是否被筛掉 # 筛素数函数 def get_primes(n): global primes global st for i in range(2, n + 1): if not st[i]: primes.append(i) for j in range(len(primes)): if primes[j] * i \u003e n: break st[primes[j] * i] = True if i % primes[j] == 0: break # Example usage: # get_primes(100) # print(primes) 试除法求所有约数 # 获取因数函数 def get_divisors(x): res = [] i = 1 while i \u003c= x ** 0.5: if x % i == 0: res.append(i) if i != x // i: res.append(x // i) i += 1 res.sort() return res # Example usage: # divisors = get_divisors(36) # print(divisors) 约数个数和约数之和 如果 N = p1^c1 * p2^c2 * ... *pk^ck\r约数个数： (c1 + 1) * (c2 + 1) * ... * (ck + 1)\r约数之和： (p1^0 + p1^1 + ... + p1^c1) * ... * (pk^0 + pk^1 + ... + pk^ck) gcd def gcd(a, b): return gcd(b, a % b) if b else a 求欧拉函数 # 计算欧拉函数 def phi(x): res = x i = 2 while i \u003c= x ** 0.5: if x % i == 0: res = res // i * (i - 1) while x % i == 0: x //= i i += 1 if x \u003e 1: res = res // x * (x - 1) return res # Example usage: # result = phi(36) # print(result) 筛法求欧拉函数 N = 1000005 # 根据需要修改 primes = [] # 存储所有素数 euler = [0] * N # 存储每个数的欧拉函数 st = [False] * N # st[x]存储x是否被筛掉 # 获取欧拉函数数组 def get_eulers(n): global primes global euler global st euler[1] = 1 for i in range(2, n + 1): if not st[i]: primes.append(i) euler[i] = i - 1 for j in range(len(primes)): if primes[j] * i \u003e n: break t = primes[j] * i st[t] = True if i % primes[j] == 0: euler[t] = euler[i] * primes[j] break euler[t] = euler[i] * (primes[j] - 1) # Example usage: # get_eulers(100) # print(euler) 快速幂 # 快速幂函数 def qmi(m, k, p): res, t = 1 % p, m while k: if k \u0026 1: res = res * t % p t = t * t % p k \u003e\u003e= 1 return res # Example usage: # result = qmi(2, 10, 1000000007) # print(result) 拓展欧几里得 # 求 x, y，使得 ax + by = gcd(a, b) def exgcd(a, b, x, y): if b == 0: x[0], y[0] = 1, 0 return a d = exgcd(b, a % b, y, x) y[0] -= (a // b) * x[0] return d # Example usage: # x = [0] # y = [0] # gcd = exgcd(30, 20, x, y) # print(\"x:\", x[0], \"y:\", y[0], \"gcd:\", gcd) 高斯消元 eps = 1e-8 # 根据需要调整 # a 是增广矩阵，n 是矩阵维度 def gauss(a, n): c, r = 0, 0 for c in range(n): t = r for i in range(r, n): if abs(a[i][c]) \u003e abs(a[t][c]): t = i if abs(a[t][c]) \u003c eps: continue for i in range(c, n + 1): a[r][i], a[t][i] = a[t][i], a[r][i] for i in range(n, c - 1, -1): a[r][i] //= a[r][c] for i in range(r + 1, n): if abs(a[i][c]) \u003e eps: for j in range(n, c - 1, -1): a[i][j] -= a[r][j] * a[i][c] r += 1 if r \u003c n: for i in range(r, n): if abs(a[i][n]) \u003e eps: return 2 # 无解 return 1 # 有无穷多组解 for i in range(n - 1, -1, -1): for j in range(i + 1, n): a[i][n] -= a[i][j] * a[j][n] return 0 # 有唯一解 # Example usage: # a = [[2, 1, -1, 8], [-3, -1, 2, -11], [-2, 1, 2, -3]] # n = 3 # result = gauss(a, n) # print(result) 递归法求组合数 N = 1005 # 根据需要调整 mod = 1000000007 # 根据需要调整 c = [[0] * N for _ in range(N)] # 初始化二维数组 # 计算组合数 for i in range(N): for j in range(i + 1): if j == 0: c[i][j] = 1 else: c[i][j] = (c[i - 1][j] + c[i - 1][j - 1]) % mod # Example usage: # result = c[5][2] # 获取从5个苹果中选2个的方案数 # print(result) 通过预处理逆元的方式求组合数 mod = 1000000007 # 根据需要调整 N = 1005 # 根据需要调整 fact = [0] * N # 存储阶乘的余数 infact = [0] * N # 存储阶乘逆元的余数 # 快速幂模板 def qmi(a, k, p): res = 1 while k: if k \u0026 1: res = (res * a) % p a = (a * a) % p k \u003e\u003e= 1 return res # 预处理阶乘的余数和阶乘逆元的余数 fact[0] = infact[0] = 1 for i in range(1, N): fact[i] = (fact[i - 1] * i) % mod infact[i] = (infact[i - 1] * qmi(i, mod - 2, mod)) % mod # 计算组合数 def C(n, m): if m \u003e n: return 0 return (fact[n] * infact[m] % mod * infact[n - m] % mod) # Example usage: # result = C(5, 2) # 获取组合数 C(5, 2) # print(result) Lucas定理 p = 1000000007 # 根据需要调整 # 快速幂模板 def qmi(a, k): res = 1 while k: if k \u0026 1: res = (res * a) % p a = (a * a) % p k \u003e\u003e= 1 return res # 通过定理求组合数C(a, b) def C(a, b): res = 1 for i in range(1, b + 1): res = (res * (a - i + 1)) % p res = (res * qmi(i, p - 2)) % p return res # Lucas定理计算组合数 def lucas(a, b): if a \u003c p and b \u003c p: return C(a, b) return (C(a % p, b % p) * lucas(a // p, b // p)) % p # Example usage: # result = lucas(10, 5) # 计算组合数 C(10, 5) # print(result) 分解质因数法求组合数 # 获取素数列表 def get_primes(n): primes = [] st = [False] * (n + 1) for i in range(2, n + 1): if not st[i]: primes.append(i) for j in range(len(primes)): if primes[j] * i \u003e n: break st[primes[j] * i] = True if i % primes[j] == 0: break return primes # 获取n!中p的次数 def get(n, p): res = 0 while n: res += n // p n //= p return res # 高精度乘法 def mul(a, b): res = [0] * (len(a) + len(b)) for i in range(len(a)): t = 0 for j in range(len(b)): t += res[i + j] + a[i] * b[j] res[i + j] = t % 10 t //= 10 res[i + len(b)] += t while len(res) \u003e 1 and res[-1] == 0: res.pop() return res # 计算组合数 def calc_combination(a, b): primes = get_primes(a) sum = [0] * len(primes) for i in range(len(primes)): p = primes[i] sum[i] = get(a, p) - get(b, p) - get(a - b, p) res = [1] for i in range(len(primes)): for j in range(sum[i]): res = mul(res, [primes[i]]) return res # Example usage: # result = calc_combination(10, 5) # 计算组合数 C(10, 5) # print(''.join(map(str, result[::-1]))) 题目 日期差值 mm = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30,31, 30, 31] def day(x): y = int(x/10000) m = int((x/100)%100) d = x%100 mm[2]=29 if (y%4==0 and y%100!=0) or y%400==0 else 28 for i in range(1, m): d+=mm[i] for i in range(1, y): d+=366 if (i%4==0 and i%100!=0) or i%400==0 else 365 return d while True: try: x=int(input()) y=int(input()) print( abs(day(x)-day(y))+1 ) except: break 特殊排序 # Forward declaration of compare API. # def compare(a, b): # @param a, b int # @return bool # return bool means whether a is less than b. class Solution(object): def specialSort(self, N): \"\"\" :type N: int :rtype: List[int] \"\"\" a = [1] for i in range(2, N+1): l, r = 0, len(a)-1 while l\u003cr: mid = (l+r)\u003e\u003e1 if compare(i, a[mid]): r=mid else: l=mid+1 a[r+1:]=a[r:] a[r]=i if compare(a[r+1],a[r]): a[r], a[r+1] = a[r+1], a[r] return a 单链表 N = int(1e5+10) h, idx, e, ne = -1, 1, [0]*N, [0]*N def insert(x): global h, idx e[idx]=x ne[idx]=h h=idx idx+=1 def add(k, x): global h,idx e[idx]=x ne[idx]=ne[k] ne[k]=idx idx+=1 def remove(k): global h if k==0: h = ne[h] else: ne[k]=ne[ne[k]] n=int(input()) for _ in range(n): op = input().split() if op[0]=='H': insert(int(op[1])) elif op[0]=='D': remove(int(op[1])) elif op[0]=='I': add(int(op[1]), int(op[2])) i=h while i!=-1: print(e[i], end=\" \") i=ne[i] DP 数字三角形 f=[] n=int(input()) for _ in range(n): f.append([int(x) for x in input().split()]) for i in range(n-2,-1,-1): for j in range(i+1): f[i][j]=max(f[i+1][j], f[i+1][j+1])+f[i][j] print(f[0][0]) 背包 空间优化成1维之后，只有完全背包问题的体积是从小到大循环的\n01背包 N = int(1e3+10) f=[ 0 for _ in range(N) ] n,v=map(int,input().split()) for i in range(n): vi,wi=map(int,input().split()) for j in range(v, vi-1,-1): f[j]=max(f[j],f[j-vi]+wi) print(f[v]) 多重背包 单调队列 MN = int(2e4+10) f=[0 for _ in range(MN)] q=[0 for _ in range(MN)] g=[0 for _ in range(MN)] N,V = map(int, input().split()) for i in range(N): v,w,s=map(int, input().split()) g=f[:] for j in range(v): hh,tt=0,-1 for k in range(j,V+1,v): while hh\u003c=tt and q[hh]\u003ck-s*v: hh+=1 while hh\u003c=tt and g[q[tt]]+(k-q[tt])//v*w \u003c= g[k]: tt-=1 tt+=1 q[tt]=k f[k]=g[q[hh]]+(k-q[hh])//v*w print(f[V]) 二维费用背包 N = int(1e2+10) f=[[0]*N for _ in range(N)] n,V,M = map(int , input().split()) for i in range(n): v,m,w=map(int , input().split()) for j in range(V,v-1,-1): for k in range(M, m-1, -1): f[j][k]=max(f[j][k], f[j-v][k-m]+w) print(f[V][M]) 宠物小精灵 N = int(1e3+10) M = int(5e2+10) f=[[0]*M for _ in range(N)] n,m,kk = map(int, input().split()) for i in range(kk): v1,v2=map(int, input().split()) for j in range(n, v1-1, -1): for k in range(m-1,v2-1,-1): f[j][k]=max(f[j][k], f[j-v1][k-v2]+1) print(f[n][m-1], end=\" \") t=m-1 while t\u003e0 and f[n][m-1]==f[n][t-1]: t-=1 print(m-t) 潜水 最多\n恰好\n最少\nN = int(1e2+10) INF = 0x3f3f3f3f f=[ [INF]*N for _ in range(N) ] f[0][0]=0 m,n=map(int, input().split()) k=int(input()) for i in range(k): a,b,c=map(int, input().split()) for j in range(m,-1,-1): for k in range(n,-1,-1): f[j][k]=min(f[j][k], f[max(j-a, 0)][max(k-b, 0)]+c) print(f[m][n]) 庆功会 N = int(6e3+10) f=[0 for _ in range(N)] n,m = map(int, input().split()) for i in range(n): v,w,s=map(int, input().split()) for j in range(1,s+1): for k in range(m, v-1, -1): f[k]=max(f[k], f[k-v]+w) print(f[m]) 分组背包 分组背包的顺序：\n物品组 体积 决策 N = int(1e2+10) f=[0 for _ in range(N)] v=[0 for _ in range(N)] w=[0 for _ in range(N)] N,V = map(int, input().split()) for i in range(N): # 物品组 s=int(input()) for j in range(s): v[j],w[j]=map(int, input().split()) for j in range(V,-1,-1): #体积 for k in range(s): #决策 if j\u003e=v[k]: f[j]=max(f[j], f[j-v[k]]+w[k]) print(f[V]) 机器分配 多重背包变种\nN = 100 f=[0 for _ in range(N)] w=[[0]*N for _ in range(N)] c=[[0]*N for _ in range(N)] n,m=map(int, input().split()) for i in range(n): w[i]=[0]+[int(x) for x in input().split()] for i in range(n): for j in range(m,-1,-1): for k in range(1,j+1): if f[j-k]+w[i][k] \u003e f[j]: f[j]=f[j-k]+w[i][k] c[i][j]=k print(f[m]) t=m for i in range(n-1,-1,-1): print(i+1, c[i][t]) t-=c[i][t] 金明的预算方案 N = 80 M = 32010 f=[0 for _ in range(M)] mas=[[0,0] for _ in range(N)] ser=[[] for _ in range(N)] n,m=map(int,input().split()) for i in range(1,m+1): v,p,q=map(int, input().split()) if q==0: mas[i]=[v,v*p] else: ser[q].append((v, v*p)) for i in range(1,m+1): for j in range(n, -1, -1): for k in range( (1 \u003c\u003c len(ser[i]) )): v,p=mas[i] for l in range(len(ser[i])): if k\u003e\u003el \u0026 1: v+=ser[i][l][0] p+=ser[i][l][1] if j\u003e=v: f[j]=max(f[j], f[j-v]+p) print(f[n]) 摘花生 N = 105 f=[ [0]*N for _ in range(N)] t=int(input()) for _ in range(t): r,c=map(int, input().split()) for i in range(1,r+1): f[i] = [0] + [int(x) for x in input().split()] for j in range(1,c+1): f[i][j]+=max(f[i-1][j], f[i][j-1]) print(f[r][c]) 最小通行费 N = int(1e3+10) INF = 0x3f3f3f3f f = [[INF]*N for _ in range(N)] f[1][0]=f[0][1]=0 n=int(input()) for i in range(1,n+1): f[i]=[INF]+[int(x) for x in input().split()] for i in range(1,n+1): for j in range(1,n+1): f[i][j]+=min(f[i-1][j],f[i][j-1]) print(f[n][n]) 方格 N = 15 g = [[0]*N for _ in range(N)] f = [[[[0]*N for _ in range(N)] for _ in range(N)] for _ in range(N)] n=int(input()) while True: r,c,x=map(int,input().split()) if r==0 and c==0 and x==0: break g[r][c]=x for i in range(1,n+1): for j in range(1,n+1): for k in range(1,n+1): for l in range(1,n+1): if i==k and j==l: f[i][j][k][l] = max(f[i-1][j][k-1][l], f[i-1][j][k][l-1], f[i][j-1][k-1][l], f[i][j-1][k][l-1]) + g[i][j] else: f[i][j][k][l] = max(f[i-1][j][k-1][l], f[i-1][j][k][l-1], f[i][j-1][k-1][l], f[i][j-1][k][l-1]) + g[i][j] + g[k][l] print(f[n][n][n][n]) N = 55 g=[[0]*N for _ in range(N)] f=[[[[0]*N for _ in range(N)] for _ in range(N)] for _ in range(N)] m,n=map(int, input().split()) for i in range(1,m+1): g[i]=[0]+[int(x) for x in input().split()] for i in range(1,m+1): for j in range(1,n+1): for k in range(1,m+1): for l in range(1,n+1): if i==k and j==l: f[i][j][k][l]=max(f[i-1][j][k-1][l], f[i-1][j][k][l-1], f[i][j-1][k-1][l], f[i][j-1][k][l-1])+g[i][j] else: f[i][j][k][l]=max(f[i-1][j][k-1][l], f[i-1][j][k][l-1], f[i][j-1][k-1][l], f[i][j-1][k][l-1])+g[i][j]+g[k][l] print(f[m][n][m][n]) LIS N=int(1e3+10) f=[1 for _ in range(N)] a=[] n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): for j in range(1,i): if a[i]\u003ea[j]: f[i]=max(f[i],f[j]+1) ans = 0 for i in range(1,n+1): ans = max(ans, f[i]) print(ans) LCS N = int(1e3+10) f=[[0]*N for _ in range(N)] a=\"\" b=\"\" n,m=map(int, input().split()) a=input() b=input() for i in range(n): for j in range(m): f[i][j]=max(f[i-1][j], f[i][j-1]) if a[i]==b[j]: f[i][j]=f[i-1][j-1]+1 print(f[n-1][m-1]) 最大上升子序列和 import copy a=[] f=[] ans=0 n=int(input()) a=[int(x) for x in input().split()] f=copy.deepcopy(a) for i in range(n): for j in range(i): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+a[i]) for i in range(n): ans = max(ans, f[i]) print(ans) N = int(1e3+10) f=[0 for _ in range(N)] ans = 0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): f[i]=a[i] for j in range(1,i): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+a[i]) ans = max(ans, f[i]) print(ans) 最大上升子序列II N = int(1e5+10) INF = 0x3f3f3f3f q=[INF for _ in range(N)] ans=0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): l,r=0,i while l\u003cr: mid = (l+r+1)\u003e\u003e1 if q[mid]\u003ca[i]: l=mid else: r=mid-1 ans = max(ans, l+1) q[l+1]=min(q[l+1], a[i]) print(ans) N = int(1e5+10) q=[0 for _ in range(N)] len = 0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1, n+1): l,r=0,len while l\u003cr: mid = (l+r+1)\u003e\u003e1 if q[mid]\u003ca[i]: l=mid else: r=mid-1 len=max(len, l+1) q[l+1]=a[i] print(len) N = int(1e5+10) q=[0 for _ in range(N)] len = 0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): l,r=0,len while l\u003cr: mid = (l+r+1)\u003e\u003e1 if q[mid]\u003e=a[i]: r=mid-1 else: l=mid len = max(len, l+1) q[l+1]=a[i] print(len) 二分原则：\n有单调性，并且二分之后能保持单调性\n怪盗基德的滑翔翼 N = int(1e3+10) f=[0 for _ in range(N)] t=int(input()) while t: t-=1 ans=0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): f[i]=1 for j in range(1,i): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+1) ans = max(ans, f[i]) for i in range(n,0,-1): f[i]=1 for j in range(n,i,-1): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+1) ans = max(ans, f[i]) print(ans) 登山 N = int(1e3+10) f=[1 for _ in range(N)] g=[1 for _ in range(N)] ans = 0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): for j in range(1,i): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+1) for i in range(n,0,-1): for j in range(n,i,-1): if a[i]\u003ea[j]: g[i]=max(g[i], g[j]+1) for i in range(1,n+1): ans = max(ans, f[i]+g[i]-1) print(ans) 合唱队形 N = int(1e3+10) f=[1 for _ in range(N)] g=[1 for _ in range(N)] ans = 0 n=int(input()) a=[0]+[int(x) for x in input().split()] for i in range(1,n+1): for j in range(1,i): if a[i]\u003ea[j]: f[i]=max(f[i], f[j]+1) for i in range(n,0,-1): for j in range(n,i,-1): if a[i]\u003ea[j]: g[i]=max(g[i], g[j]+1) for i in range(1,n+1): ans = max(ans, f[i]+g[i]-1) print(n-ans) 友好城市 N = int(5e3+10) a=[(-1,-1)] f=[1 for _ in range(N)] ans = 0 n=int(input()) for i in range(n): x,y=map(int, input().split()) a.append((x,y)) a.sort(key=lambda x:x[0]) for i in range(1,n+1): for j in range(1,i): if a[i][1]\u003ea[j][1]: f[i]=max(f[i], f[j]+1) ans = max(f[i], ans) print(ans) 拦截导弹 贪心证明\nN = int(1e3+10) f=[1 for _ in range(N)] g=[0 for _ in range(N)] ans = 0 cnt = 0 a=[0]+[int(x) for x in input().split()] n=len(a) for i in range(n-1,0,-1): for j in range(n-1,i,-1): if a[i]\u003e=a[j]: f[i]=max(f[i], f[j]+1) ans = max(ans, f[i]) print(ans) for i in range(1, n): k=0 while k\u003ccnt and g[k]\u003ca[i]: k+=1 if k\u003e=cnt: cnt+=1 g[k]=a[i] print(cnt) 导弹防御系统 N = int(1e2+10) up=[0 for _ in range(N)] down=[0 for _ in range(N)] ans=0 def dfs(u, su, sd): global ans if su + sd\u003e=ans: return if u==n: ans=su+sd return k=0 while k\u003csu and up[k]\u003e=a[u]: k+=1 t=up[k] up[k]=a[u] if k\u003e=su: dfs(u+1, su+1, sd) else: dfs(u+1, su, sd) up[k]=t k=0 while k\u003csd and down[k]\u003c=a[u]: k+=1 t=down[k] down[k]=a[u] if k\u003e=sd: dfs(u+1, su, sd+1) else: dfs(u+1, su, sd) down[k]=t while True: n=int(input()) ans = n if n==0: break a=[int(x) for x in input().split()] dfs(0,0,0) print(ans) 最长公共上升子序列 N = int(3e3+10) f=[[0]*N for _ in range(N)] ans=0 n=int(input()) a=[0]+[int(x) for x in input().split()] b=[0]+[int(x) for x in input().split()] for i in range(1,n+1): maxv=1 for j in range(1,n+1): f[i][j]=f[i-1][j] if a[i]==b[j]: f[i][j]=max(f[i][j], maxv) if a[i]\u003eb[j]: maxv=max(maxv, f[i][j]+1) for i in range(1,n+1): ans = max(ans, f[n][i]) print(ans) 状态机模型 闫氏DP分析法——状态机分析法\nN = int(1e5+10) t=int(input()) while t: t-=1 f=[[0]*2 for _ in range(N)] n=int(input()) a=[0]+[int(x) for x in input().split()] f[1][0]=0 f[1][1]=a[1] for i in range(2,n+1): f[i][0]=max(f[i-1][1],f[i-1][0]) f[i][1]=max(f[i-1][0], f[i-2][1])+a[i] print(max(f[n][0], f[n][1])) 买卖股票 IV K = 110 INF = 0x3f3f3f3f f=[[[-INF]*2 for _ in range(K)] for _ in range(2)] n,k = map(int ,input().split()) w=[0]+[int(x) for x in input().split()] f[1][0][0]=0 t=0 for i in range(1,n+1): for j in range(k+1): f[t][j][0]=max(f[t^1][j][0], f[t^1][j][1]+w[i]) f[t][j][1]=max(f[t^1][j][1], f[t^1][j-1][0]-w[i]) t^=1 res =max(f[t^1][i][0] for i in range(k+1)) print(res) 股票交易V N = int(1e5+10) INF = 0x3f3f3f3f f=[[-INF]*3 for _ in range(N)] n=int(input()) w=[0]+[int(x) for x in input().split()] f[0][2]=0 for i in range(1,n+1): f[i][0]=max(f[i-1][0], f[i-1][2]-w[i]) f[i][1]=f[i-1][0]+w[i] f[i][2]=max(f[i-1][1], f[i-1][2]) print(max(f[n][1], f[n][2])) 状态压缩DP 小国王 N = 13 M = 1\u003c\u003cN K = 110 state=[] h=[[] for _ in range(M)] cnt = [0]*M f=[[[0]*M for _ in range(K)] for _ in range(N)] def check(x): global n for i in range(n): if (x\u003e\u003ei)\u00261 and (x\u003e\u003ei+1)\u00261: return False return True def count(x): global n cnt=0 for i in range(n): if (x\u003e\u003ei)\u00261: cnt+=1 return cnt n,m = map(int, input().split()) for i in range(1\u003c\u003cn): if check(i): state.append(i) cnt[i]=count(i) for i in range(len(state)): for j in range(len(state)): a = state[i] b = state[j] if (a\u0026b)==0 and check(a|b): h[i].append(j) f[0][0][0]=1 for i in range(1,n+2): for j in range(m+1): for k in range(len(state)): for t in h[k]: c = cnt[state[k]] if j\u003e=c: f[i][j][state[k]]+=f[i-1][j-c][state[t]] print(f[n+1][m][0]) 愤怒的小鸟 eps = 1e-6 N = 18 M = 1\u003c\u003c18 INF = 0x3f3f3f3f def cmp(a,b): if abs(a-b)\u003ceps: return 0 if a\u003eb: return 1 return -1 t = int(input()) for _ in range(t): f = [INF]*M path = [[0]*N for _ in range(N)] q = [0]*N n,m = map(int, input().split()) for i in range(n): x,y = map(float, input().split()) q[i]=(x,y) for i in range(n): path[i][i]=1\u003c\u003ci #关键点：与其他点的抛物线可能都不合法，所以需要独立出一条抛物线 for j in range(n): x1,y1 = q[i] x2,y2 = q[j] if cmp(x1,x2)==0: continue a = (y1/x1-y2/x2)/(x1-x2) if cmp(a,0)\u003e=0: continue b = y1/x1-a*x1 state=0 for k in range(n): x3,y3 = q[k] if cmp(a*x3*x3+b*x3, y3) == 0: state+=(1\u003c\u003ck) path[i][j]=state f[0]=0 for i in range(1\u003c\u003cn): for j in range(n): if not (i\u003e\u003ej)\u00261: x=j break for j in range(n): f[i | path[x][j]] = min(f[i | path[x][j]], f[i]+1) print(f[(1\u003c\u003cn)-1]) 集合类状态压缩DP 最短Hamilton距离 N = 22 M = 1\u003c\u003c20 INF = 0x3f3f3f3f f=[[INF]*N for _ in range(M)] w=[[]*N for _ in range(N)] n=int(input()) for i in range(n): w[i]=[int(_) for _ in input().split()] f[1][0]=0 for i in range(1\u003c\u003cn): for j in range(n): if i\u003e\u003ej\u00261: for k in range(n): if i\u003e\u003ek\u00261: f[i][j]=min(f[i][j], f[i-(1\u003c\u003cj)][k]+w[k][j]) print(f[(1\u003c\u003cn)-1][n-1]) 区间DP 石子合并\nN = 1010 INF = 0x3f3f3f3f f=[[INF]*N for _ in range(N)] s=[0]*N n = int(input()) a=[0]+[int(_) for _ in input().split()] for i in range(1,n+1): f[i][i]=0 s[i]=s[i-1]+a[i] for l in range(2,n+1): for i in range(1,n-l+2): j=i+l-1 for k in range(i,j): f[i][j] = min(f[i][j], f[i][k] + f[k+1][j] + s[j]-s[i-1]) print(f[1][n]) 环形石子合并 N = 410 w=[0]*N s=[0]*N INF = 0x3f3f3f3f f=[[-INF]*N for _ in range(N)] g=[[INF]*N for _ in range(N)] n=int(input()) a= [0]+[int(_) for _ in input().split()] for i in range(1,n+1): w[i] = w[i+n] = a[i] for i in range(1,n*2+1): s[i]=s[i-1]+w[i] for l in range(1,n+1): for i in range(1,n*2-l+2): j=i+l-1 if l==1: f[i][j]=g[i][j]=0 for k in range(i,j): f[i][j] = max(f[i][j], f[i][k]+f[k+1][j]+s[j]-s[i-1]) g[i][j] = min(g[i][j], g[i][k]+g[k+1][j]+s[j]-s[i-1]) minv, maxv = INF, -INF for i in range(1,n+1): minv = min(minv, g[i][i+n-1]) maxv = max(maxv, f[i][i+n-1]) print(minv, maxv, sep='\\n') 能量项链 N = 210 w=[0]*N f=[[0]*N for _ in range(N)] n = int(input()) a=[0]+[int(_) for _ in input().split()] for i in range(1,n+1): w[i]=w[i+n]=a[i] for l in range(3,n+2): for i in range(1,n*2-l+2): j=i+l-1 for k in range(i+1,j): f[i][j] = max(f[i][j], f[i][k]+f[k][j]+w[i]*w[k]*w[j]) maxv = -1 for i in range(1,n+1): maxv = max(maxv, f[i][i+n]) print(maxv) 凸多边形的划分 N = 55 INF = 1e30 f=[[INF]*N for _ in range(N)] n = int(input()) w=[0]+[int(_) for _ in input().split()] for i in range(1,n+1): f[i][i+1]=0 for l in range(3,n+1): for i in range(1, n-l+2): j=i+l-1 for k in range(i+1,j): f[i][j] = min(f[i][j], f[i][k]+f[k][j]+w[i]*w[k]*w[j]) print(f[1][n]) 加分二叉树 N = 50 def dfs(l, r): if l\u003er: return k=root[l][r] print(k,end=' ') dfs(l,k-1) dfs(k+1,r) n = int(input()) w = [0]+[int(_) for _ in input().split()] f=[[0]*N for _ in range(N)] root=[[0]*N for _ in range(N)] for l in range(1,n+1): for i in range(1,n-l+2): j=i+l-1 for k in range(i,j+1): left = 1 if k==i else f[i][k-1] right = 1 if k==j else f[k+1][j] s = left*right+w[k] if i==j: s=w[k] if f[i][j]\u003cs: f[i][j]=s root[i][j]=k print(f[1][n]) dfs(1,n) 树形DP 树的最长路径 注意注意再注意，while循环链不符合要求是需要 i=ne[i]\nimport sys sys.setrecursionlimit(int(1e5+10)) N = 10010*2 e = [0]*N ne = [0]*N w = [0]*N h = [-1]*N idx = 1 ans = -1 def add(a, b, c): global idx e[idx]=b w[idx]=c ne[idx]=h[a] h[a]=idx idx+=1 def dfs(root, father): global ans dis, d1, d2 = 0,0,0 i=h[root] while i!=-1: j = e[i] if j==father: i=ne[i] # 重点 continue d = dfs(j, root)+w[i] dis = max(dis, d) if d\u003ed1: d2=d1 d1=d else: d2 = max(d2, d) i=ne[i] ans = max(ans, d1+d2) return dis n = int(input()) for i in range(n-1): a,b,c = map(int, input().split()) add(a,b,c) add(b,a,c) dfs(1,-1) print(ans) 树的中心 N = 10010*2 e = [0]*N ne=[0]*N h=[-1]*N w=[0]*N d1=[0]*N d2=[0]*N s1=[0]*N up=[0]*N idx = 1 def add(a,b,c): global idx e[idx]=b w[idx]=c ne[idx]=h[a] h[a]=idx idx+=1 def dfs1(u, father): i=h[u] while i!=-1: j=e[i] if j==father: i=ne[i] continue dfs1(j,u) dis = d1[j]+w[i] if dis\u003ed1[u]: d2[u]=d1[u] d1[u], s1[u]=dis, j elif dis\u003ed2[u]: d2[u]=dis i=ne[i] def dfs2(u, father): i=h[u] while i!=-1: j=e[i] if j==father: i=ne[i] continue if s1[u]==j: up[j]=max(up[u], d2[u])+w[i] else: up[j]=max(up[u], d1[u])+w[i] i=ne[i] dfs2(j, u) n = int(input()) for i in range(n-1): a,b,c = map(int ,input().split()) add(a,b,c) add(b,a,c) dfs1(1,-1) dfs2(1,-1) ans = 1e10 for i in range(1,n+1): ans = min(ans, max(up[i], d1[i])) print(ans) 数字转换 N = int(5e4+10) s=[0]*N st=[False]*N e=[0]*N ne=[0]*N h=[-1]*N idx=1 ans = -1 def add(a,b): global idx e[idx]=b ne[idx]=h[a] h[a]=idx idx+=1 def dfs(u): global ans d1,d2=0,0 i=h[u] while i!=-1: j=e[i] dis = dfs(j)+1 if dis\u003ed1: d2,d1=d1,dis elif dis\u003ed2: d2=dis i=ne[i] ans = max(ans, d1+d2) return d1 n = int(input()) for i in range(1,n+1): for j in range(2,n+1): if i\u003en//j: break s[i*j]+=i for i in range(2,n+1): if s[i]\u003ci: add(s[i], i) st[i]=True # for i in range(1,n+1): # if not st[i]: # dfs(i) dfs(1) print(ans) 没有上司的舞会 import sys sys.setrecursionlimit(int(1e4)) N = int(7e3) v=[[] for _ in range(N)] f=[[0]*2 for _ in range(N)] st=[False]*N h=[0]*N root=0 def dfs(u): f[u][1]+=h[u] for i in v[u]: dfs(i) f[u][1]+=f[i][0] f[u][0]+=max(f[i][0], f[i][1]) n = int(input()) for i in range(1,n+1): h[i]=int(input()) for i in range(n-1): l,k = map(int, input().split()) v[k].append(l) st[l]=True for i in range(1,n+1): if not st[i]: root=i dfs(root) print(max(f[root][0], f[root][1])) 单调队列优化的DP 最大子序和 N = 300010 q, s = [0]*N, [0]*N ans = -2**33 hh, tt = 0, 0 n,m = map(int, input().split()) s = [0]+list(map(int, input().split())) for i in range(1,n+1): s[i]+=s[i-1] for i in range(1,n+1): if q[hh]\u003ci-m: hh+=1 ans = max(ans, s[i]-s[q[hh]]) while hh\u003c=tt and s[q[tt]]\u003e=s[i]: tt-=1 tt+=1 q[tt]=i print(ans) 数位DP 1081\nfrom typing import List N = 35 def init() -\u003e List[List[int]]: f = [[0] * N for _ in range(N)] for i in range(N): for j in range(i + 1): if j == 0: f[i][j] = 1 else: f[i][j] = f[i - 1][j] + f[i - 1][j - 1] return f def dp(n: int, k: int, b: int, f: List[List[int]]) -\u003e int: if n == 0: return 0 nums = [] while n: nums.append(n % b) n //= b res = 0 last = 0 for i in range(len(nums) - 1, -1, -1): x = nums[i] if x \u003e 0: res += f[i][k - last] if x \u003e 1: if k - last - 1 \u003e= 0: res += f[i][k - last - 1] break else: last += 1 if last \u003e k: break if i == 0 and last == k: res += 1 return res def solve(l: int, r: int, k: int, b: int) -\u003e int: f = init() return dp(r, k, b, f) - dp(l - 1, k, b, f) if __name__ == \"__main__\": l, r, k, b = map(int, input().split()) print(solve(l, r, k, b)) 记忆化 import heapq class Node: def __init__(self, i, j, num): self.i = i self.j = j self.num = num def main(): n, m = map(int, input().split()) f = [[1] * (m + 2) for _ in range(n + 2)] # distance g = [[0] * (m + 2) for _ in range(n + 2)] # store heights pq = [] for i in range(1, n + 1): nums = list(map(int, input().split())) for j, num in enumerate(nums, 1): g[i][j] = num heapq.heappush(pq, Node(i, j, num)) ma = -1 while pq: t = heapq.heappop(pq) i, j, nu = t.i, t.j, t.num if g[i - 1][j] \u003c nu: f[i][j] = max(f[i][j], f[i - 1][j] + 1) if g[i + 1][j] \u003c nu: f[i][j] = max(f[i][j], f[i + 1][j] + 1) if g[i][j - 1] \u003c nu: f[i][j] = max(f[i][j], f[i][j - 1] + 1) if g[i][j + 1] \u003c nu: f[i][j] = max(f[i][j], f[i][j + 1] + 1) ma = max(ma, f[i][j]) print(ma) if __name__ == \"__main__\": main() 数论 试除法求约数\ndef get(x): ans = [] for i in range(1,x+1): if i\u003ex//i: break if x%i==0: ans.append(i) if i!=x//i: ans.append(x//i) ans.sort() return ans n = int(input()) for i in range(n): x = int(input()) ans = get(x) for i in ans : print(i, end=' ') print() 树状数组 楼兰图腾\nimport sys input=lambda:sys.stdin.readline() M = 200010 suml, sumg = 0, 0 tr = [0]*M n = int(input()) a = [0]+[int(_) for _ in input().split()] def lowbit(x): return x\u0026-x def add(x,v): while x\u003cM: tr[x]+=v x+=lowbit(x) def query(x): res = 0 while x: res+=tr[x] x-=lowbit(x) return res for i in range(1,n+1): y=a[i] lw = query(y-1) lwr = y-1-lw # the lower element on the right side gr = query(n)-query(y) grr = (n-y) - gr suml += (lw*lwr) sumg += (gr*grr) add(y,1) print(sumg, suml) 线段树 # 定义树节点，l,r, val表示该节点记录的是区间[l, r]的最大值是val class Tree(): def __init__(self): self.l = 0 self.r = 0 self.lazy = 0 self.val = 0 # 二叉树是堆形式，可以用一维数组存储，注意数组长度要开4倍空间 tree = [Tree() for i in range(10*4)] # 建树，用cur\u003c\u003c1访问左子树，cur\u003c\u003c1|1访问右子树，位运算操作很方便 def build(cur, l, r): tree[cur].l, tree[cur].r, tree[cur].lazy, tree[cur].val = l, r, 0, 0 # 当l==r的时候结束递归 if l \u003c r: mid = l + r \u003e\u003e 1 build(cur\u003c\u003c1, l, mid) build(cur\u003c\u003c1|1, mid+1, r) # 当子节点计算完成后，用子节点的值来更新自己的值 def pushup(cur): tree[cur].val = max(tree[cur\u003c\u003c1].val, tree[cur\u003c\u003c1|1].val) # 单点更新 def add(cur, x, v): if tree[cur].l == tree[cur].r: tree[cur].val += v else: mid = tree[cur].r + tree[cur].l \u003e\u003e 1 if x \u003e mid: add(cur\u003e\u003e1|1, x, v) else: add(cur\u003c\u003c1, x, v) pushup(cur) # 将lazy标记向下传递一层 def pushdown(cur): if tree[cur].lazy: lazy = tree[cur].lazy tree[cur\u003c\u003c1].lazy += lazy tree[cur\u003c\u003c1|1].lazy += lazy tree[cur\u003c\u003c1].val += lazy tree[cur\u003c\u003c1|1].val += lazy tree[cur].lazy = 0 # 区间更新 def update(cur, l, r, v): if l \u003c= tree[cur].l and tree[cur].r \u003c= r: tree[cur].lazy += v tree[cur].val += v return if r \u003c tree[cur].l or l \u003e tree[cur].r: return if tree[cur].lazy: pushdown(cur) update(cur\u003c\u003c1, l, r, v) update(cur\u003c\u003c1|1, l, r, v) pushup(cur) # 区间查询 def query(cur, l, r): if l \u003c= tree[cur].l and tree[cur].r \u003c= r: return tree[cur].val if tree[cur].l \u003e r or tree[cur].r \u003c l: return 0 if tree[cur].lazy: pushdown(cur) return max(query(cur\u003c\u003c1, l, r), query(cur\u003c\u003c1|1)) # 测试 # ----- # --- # ------- # -- # -- build(1, 1, 10) update(1, 1, 5, 1) update(1, 7, 10, 1) update(1, 2, 8, 1) update(1, 3, 4, 1) update(1, 9, 10, 1) print(query(1, 1, 10)) def pushup(u): tr[u] = tr[u \u003c\u003c 1] + tr[u \u003c\u003c 1 | 1] def build(u, l, r): if l == r: tr[u] = 0 else: mid = (l + r) \u003e\u003e 1 build(u \u003c\u003c 1, l, mid) build(u \u003c\u003c 1 | 1, mid + 1, r) pushup(u) def query(u, l, r, ql, qr): if l \u003e= ql and r \u003c= qr: return tr[u] mid = (l + r) \u003e\u003e 1 if mid==l and mid==r: return 0 res = 0 if ql \u003c= mid: res = query(u \u003c\u003c 1, l, mid, ql, qr) if qr \u003e mid: res += query(u \u003c\u003c 1 | 1, mid + 1, r, ql, qr) return res def modify(u, x, l, r, val): if l == r: tr[u] += val else: mid = (l + r) \u003e\u003e 1 if x \u003c= mid: modify(u \u003c\u003c 1, x, l, mid, val) else: modify(u \u003c\u003c 1 | 1, x, mid + 1, r, val) pushup(u) 搜索深入 池塘计数 import sys from collections import deque input = lambda:sys.stdin.readline().strip() N = int(1e3+10) M = N*N g = [0]*N cnt=0 vis = [ [False]*N for _ in range(N) ] def bfs(x, y): q=deque() q.append( (x,y) ) while q: tx, ty = q[0] q.popleft() for i in range(-1, 2): for j in range(-1, 2): if i==0 and j==0: continue xx, yy = tx+i, ty+j if xx\u003c0 or xx\u003e=n or yy\u003c0 or yy\u003e=m or vis[xx][yy] or g[xx][yy]=='.': continue vis[xx][yy]=True q.append( (xx,yy) ) n, m = map(int, input().split()) for i in range(n): g[i]=input() for i in range(n): for j in range(m): if g[i][j]!='W' or vis[i][j]: continue bfs(i, j) cnt+=1 print(cnt) 城堡问题 import sys from collections import deque input = lambda:sys.stdin.readline().strip() N = 55 g = [] vis = [[False]*N for _ in range(N)] area = 0 cnt=0 def bfs(x, y): vis[x][y]=True q = deque() q.append((x, y)) dx, dy = [0, -1, 0, 1], [-1, 0, 1, 0] ans=1 while q: tx, ty = q.popleft() for i in range(4): xx = tx+dx[i] yy = ty+dy[i] if xx\u003c0 or xx\u003e=n or yy\u003c0 or yy\u003e=m or vis[xx][yy]: continue if (g[tx][ty]\u003e\u003ei)\u00261: continue ans+=1 vis[xx][yy]=True q.append((xx,yy)) return ans n, m = map(int, input().split()) for _ in range(n): g.append(list(map(int, input().split()))) for i in range(n): for j in range(m): if vis[i][j]: continue area = max(area, bfs(i, j)) cnt+=1 print(cnt) print(area) 山峰和山谷 import sys from collections import deque N = 1010 g = [] vis = [[0]*N for _ in range(N)] pek, val = 0, 0 def bfs(x, y): global higher, lower vis[x][y]=True q = deque() q.append((x,y)) while q: tx,ty = q.popleft() for i in range(-1, 2): for j in range(-1, 2): if i==0 and j==0: continue xx, yy = tx+i, ty+j if xx\u003c0 or xx\u003e=n or yy\u003c0 or yy\u003e=n: continue if g[xx][yy]!=g[tx][ty]: if g[xx][yy]\u003eg[tx][ty]: higher=True elif g[xx][yy]\u003cg[tx][ty]: lower=True elif not vis[xx][yy]: vis[xx][yy]=True q.append((xx,yy)) higher, lower = False, False n = int(input()) for _ in range(n): g.append(list(map(int, input().split()))) # print(g) for i in range(n): for j in range(n): if vis[i][j]: continue higher, lower = False, False bfs(i, j) if not higher:pek+=1 if not lower:val+=1 print(pek, val) Python特点 IDLE 使用 输入输出 输出列表：\nprint（*a） # 输出列表中的所有数，用空格分隔 print（*a，sep=\"\\n\"） #每个数单独放一行 *运算符 解包运算符： 当*运算符用于可迭代对象（如列表、元组、集合等）前面时，它可以将可迭代对象解包为多个元素。例如：\na = [1, 2, 3] print(*a) # 解包并打印出每个元素：1 2 3 可变参数： 当*运算符用于函数定义时，它表示接受任意数量的参数，并将它们作为元组传递给函数。这种用法通常称为可变参数。例如：\ndef my_func(*args): for arg in args: print(arg) my_func(1, 2, 3) # 打印出每个参数：1 2 3 扩展运算符： 当*运算符用于可迭代对象前面时，它可以将可迭代对象的元素扩展到另一个可迭代对象中。这种用法通常称为扩展运算符。例如：\na = [1, 2, 3] b = [4, 5, 6 c = [*a, *b] # 扩展a和b的元素到c中 print(c) # 输出：[1, 2, 3, 4, 5, 6] 乘法运算符： 当*运算符用于数字和可迭代对象之间时，它表示重复该可迭代对象的元素。例如：\na = [1, 2, 3] b = a * 3 # 重复a的元素3次 print(b) # 输出：[1, 2, 3, 1, 2, 3, 1, 2, 3] 和* *和**在函数定义中的使用： *args用于接收任意数量的位置参数，并将它们作为元组传递给函数。 **kwargs用于接收任意数量的关键字参数，并将它们作为字典传递给函数。 *和**在函数调用中的使用： 在函数调用时，*用于解包可迭代对象，并将其作为位置参数传递给函数。 在函数调用时，**用于解包字典，并将其作为关键字参数传递给函数。 栈模拟递归 from collections import deque def dfs(idx,p): q = deque() q.append((idx,p)) while q: idx,p = q.pop() D[idx] = D[p] + V[idx] for u in A[idx]: if u == p: continue q.append((u,idx)) 引用赋值、浅拷贝和深拷贝 Python赋值、浅拷贝、深拷贝的区别 [:]和.copy()都属于“浅拷贝”，只拷贝最外层元素，外层元素是独立内存；内层嵌套元素则通过引用方式共享，而非独立分配内存。使用 copy 模块的 copy.copy（ 浅拷贝 ）和 copy.deepcopy（深拷贝），其中deepcopy是构建了一个完全独立的对象。\n1、b = a: 赋值引用，a 和 b 都指向同一个对象。\n2、b = a.copy(): 浅拷贝, a 和 b 是一个独立的对象，但他们的子对象（内层嵌套对象）还是指向统一对象（是引用）。\n3、b = copy.deepcopy(a): 深度拷贝, a 和 b 完全拷贝了父对象及其子对象，两者是完全独立的。\n例子：\n引用赋值 \u003e\u003e\u003ea = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003eb = a[:] \u003e\u003e\u003eprint(b) [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003eprint(id(a)) #41946376 \u003e\u003e\u003eprint(id(b)) #41921864 或 \u003e\u003e\u003eb = a.copy() \u003e\u003e\u003eprint(b) [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] \u003e\u003e\u003eprint(id(a)) #39783752 \u003e\u003e\u003eprint(id(b)) #39759176 浅拷贝 \u003e\u003e\u003ea = [1,2,['A','B']] \u003e\u003e\u003eprint('a={}'.format(a)) \u003e\u003e\u003eb = a[:] \u003e\u003e\u003eb[0] = 9 #修改b的最外层元素，将1变成9 \u003e\u003e\u003eb[2][0] = 'D' #修改b的内嵌层元素 \u003e\u003e\u003eprint('a={}'.format(a)) \u003e\u003e\u003eprint('b={}'.format(b)) \u003e\u003e\u003eprint('id(a)={}'.format(id(a))) \u003e\u003e\u003eprint('id(b)={}'.format(id(b))) a=[1, 2, ['A', 'B']] #原始a a=[1, 2, ['D', 'B']] #b修改内部元素A为D后，a中的A也变成了D，说明共享内部嵌套元素，但外部元素1没变。 b=[9, 2, ['D', 'B']] #修改后的b id(a)=38669128 id(b)=38669192 深拷贝 import copy a = [1, 2, 3, 4, ['a', 'b']] #原始对象 b = a #赋值，传对象的引用 c = copy.copy(a) #对象拷贝，浅拷贝 d = copy.deepcopy(a) #对象拷贝，深拷贝 a.append(5) #修改对象a a[4].append('c') #修改对象a中的['a', 'b']数组对象 print( 'a = ', a ) print( 'b = ', b ) print( 'c = ', c ) print( 'd = ', d ) #输出： 'a = ', [1, 2, 3, 4, ['a', 'b', 'c'], 5] 'b = ', [1, 2, 3, 4, ['a', 'b', 'c'], 5] 'c = ', [1, 2, 3, 4, ['a', 'b', 'c']] 'd = ', [1, 2, 3, 4, ['a', 'b']] 栈代替递归 增加递归深度 import sys sys.setrecursionlimit(150000000) print(sys.getrecursionlimit()) 迭代加深搜索 s = input() l = len(s) s = \"0\" + s # 1~l ans = set() st = {} def dfs(curlen, last): global ans, st stack = [(curlen, last)] while stack: curlen, last = stack.pop() if curlen - 2 \u003e 4 and last != s[curlen - 1:curlen + 1]: if (curlen - 1, curlen) not in st: st[(curlen - 1, curlen)] = 1 ans.add(s[curlen - 1:curlen + 1]) stack.append((curlen - 2, s[curlen - 1:curlen + 1])) if curlen - 3 \u003e 4 and last != s[curlen - 2:curlen + 1]: if (curlen - 2, curlen) not in st: st[(curlen - 2, curlen)] = 1 ans.add(s[curlen - 2:curlen + 1]) stack.append((curlen - 3, s[curlen - 2:curlen + 1])) dfs(l, \"\") ans = sorted(ans) # 将集合转换为列表并排序 print(len(ans)) for si in ans: print(si) 加速读入 import sys print('Plase input your name: ') name = sys.stdin.readline() print(name) 队列 Queue中有FIFO（先入先出）队列Queue，LIFO（后入先出）栈LifoQueue，和优先级队列PriorityQueue，但速度较慢，且不能不出栈地访问头部元素，想要访问头部元素，只能用get方法出栈首部获取方法返回值的来进行访问，非常不方便。\n可以用deque()模拟\nimport collections q=collections.deque() m=int(input()) for i in range(m): s = input().split() if s[0]=='push': q.append(s[1]) elif s[0]=='pop': q.popleft() elif s[0]=='empty': if len(q)==0: print('YES') else: print('NO') else: print(q[0]) 栈 列表模拟\nm=int(input()) stk=[] for i in range(m): s = input().split() if s[0]=='push': stk.append(int(s[1])) elif s[0]=='pop': stk.pop() elif s[0]=='empty': if len(stk)==0: print('YES') else: print('NO') else: print(stk[-1]) deque模拟\nimport collections stk = collections.deque() m=int(input()) for i in range(m): s = input().split() if s[0]=='push': stk.appendleft( int(s[1]) ) elif s[0]=='pop': stk.popleft() elif s[0]=='empty': if len(stk)==0: print('YES') else: print('NO') else: print(stk[0]) Python 常用内置库 array 定长数组 argparse 命令行参数处理 bisect 二分查找 collections 有序字典、双端队列等数据结构 fractions 有理数 heapq 基于堆的优先级队列 io 文件流、内存流 itertools 迭代器 math 数学函数 os.path 系统路径等 random 随机数 re 正则表达式 struct 转换结构体和二进制数据 sys 系统信息 defaultdict() from collections import defaultdict # 创建一个 defaultdict，指定默认值为 int 类型的 0 d = defaultdict() # 修改默认值为 100 d.default_factory = lambda: (1,2) Counter() from collections import Counter # 定义一个列表 lst = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4] s = 'abcdgsaa' # 使用 Counter 统计列表中元素的出现次数 c1 = Counter(lst) c2 = Counter(s) print(c1,c2, sep='\\n') # 使用 most_common() 方法按照元素的出现次数进行排序 sorted_items = c1.most_common() for x,y in enumerate(sorted_items): print(y[0]) heapq 建堆 ( 小根堆 )\na = [1, 5, 20, 18, 10, 200] heapq.heapify(a) print(a) 建大根堆\na = [] for i in [1, 5, 20, 18, 10, 200]: heapq.heappush(a,-i) print( list( map(lambda x:-x,a) ) ) heap_sort(heappush)\nimport heapq def heap_sort(arr): if not arr: return [] h = [] #建立空堆 for i in arr: heapq.heappush(h,i) #heappush自动建立小根堆 return [heapq.heappop(h) for i in range(len(h))] #heappop每次删除并返回列表中最小的值 # 堆排序取最小的m个数字 import heapq def heap_sort(arr, k): if not arr: return [] h=[] for i in arr: heapq.heappush(h, i) return [heapq.heappop(h) for _ in range(k)] n,m = map(int, input().split()) arr = list(map(int, input().split())) ans = heap_sort(arr, m) print(' '.join(map(str, ans))) heappushpop\n先push再pop\n[1, 18, 5, 20, 90, 10, 200] h [1, 18, 5, 20, 90, 10, 200] heapq.heappushpop(h, 300) 1 h [5, 18, 10, 20, 90, 300, 200] heapreplace\n先pop再push\nh [5, 18, 10, 20, 90, 300, 200] heapq.heapreplace(h, -1) 5 h [-1, 18, 10, 20, 90, 300, 200] heapq.merge\nimport heapq h1 = [90, 1, 5, 20, 18, 10, 200] h2 = [4,2,3,4,1000] heapq.heapify(h1) heapq.heapify(h2) print(list(heapq.merge(h1, h2))) heap.nlargest\nh1 [1, 18, 5, 20, 90, 10, 200] heapq.nlargest(2,h1,key=lambda x:-x) [1, 5] List() del list[1] 删除列表元素 列表比较 import operator operator.eq(a,b) len(list) max(list) min(list) list(seq) 将元组转换为列表 list.append(obj) list.count(obj) list.extend(seq) list.index(obj) list.insert(index, obj) list.pop([index=-1]) 删除列表中一个元素 list.remove(obj) 删除第一个匹配项 list.reverse() list.sort(key=None, reverse=False) list.clear() list.copy() tuple() 元素组合 类似list\nSortedList() from sortedcontainers import SortedList sl = SortedList() sl.add(1) print(sl[-1]) print(sl[0]) sl.update([3,2,1]) print(sl) sl.update([9,8,7]) print(sl) ##sl.clear() sl.discard(5) sl.remove(9) print(sl) sl.pop() print(sl) sl.pop(-2) print(sl) print(sl.bisect_left(12)) #返回需要插入的位置，如有存在则返回左侧的位置 print(sl.bisect_right(2)) print(sl.count(1)) print(sl.index(1)) it = sl.islice(2,4) print(list(it)) dict() 键值必须不可变\nd = {'1':'a', '2':'b', '99':'xycz'} print(d) if '0' in d :del d['0'] del d['1'] print(d) {'1': 'a', '2': 'b', '99': 'xycz'} {'2': 'b', '99': 'xycz'} 内置方法 len str type dict.clear() dict.copy() dict.fromkeys(seq) 将seq作为字典的键值， 字典中val为默认 dict.get(key, default=None) key in dict dict.items() dict.keys() dict.setdefault(key, default = None) dict.update(dict2) 把dict2添加到dict中 dict.values() 返回值 pop(key[,default]) 删除字典中key所对应的值并返回 popitem() 返回并删除字典中最后一对键值 set() 空集合用set() 支持 -, |, \u0026, ^(不同时包含于两个集合) difference() 在原集合上修改，无返回值, difference_update() 返回新集合 union() 并集 intersection() intersection_update() 返回交集 isdisjoint() 判断两个集合是否包含相同的元素 issubset() 判断指定参数的集合是否为该调用方法的集合的子集 issuperset() 判断该方法是否为指定参数的子集 symmetric_difference() 返回两个集合中不重复的元素集合 symmetric_difference_update() 移除相同的元素，并插入没有的元素 s.add(x) 添加元素 s.update(x) 可以添加多个元素，并且可以是列表元组字典 s.remove(x) 将元素从集合中移除， 如果不存在则报错 s.discard(x) 移除元素，但是不报错 s.pop() 设置随机删除结合中的一个元素（无序集合的第一个元素） len(s) s.clear() x in s s.copy() 自定义比较参数 from functools import cmp_to_key def compare(s1, s2): if len(s1) == len(s2): for c1, c2 in zip(s1, s2): if c1 \u003e c2: return 1 elif c1 \u003c c2: return -1 return 0 else: if len(s1) \u003e len(s2): return 1 else: return -1 things = input().split() # 使用 cmp_to_key 将比较函数转换为 key 函数 things.sort(key=cmp_to_key(compare)) print(things) __init__魔术方法 class Fib(object): def __init__(self): pass def __call__(self, num): # 将对象作为函数调用时触发 a, b = 0, 1 self.l = [] for i in range(num): self.l.append(a) a, b = b, a+b return self.l def __str__(self): # 使用print(对象）或者str (对象)的时候触发 return str(self.l) # 必须返回字符串类型 __rept__=__str__ # 使用repr(对象) f = Fib() print(f(10)) ",
  "wordCount" : "9842",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://showguan.github.io/posts/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%AC%94%E8%AE%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Guan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://showguan.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://showguan.github.io/" accesskey="h" title="Guan (Alt + H)">Guan</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      
    </h1>
    <div class="post-meta">

</div>
  </header> 
  <div class="post-content"><h1 id="蓝桥杯笔记">蓝桥杯笔记<a hidden class="anchor" aria-hidden="true" href="#蓝桥杯笔记">#</a></h1>
<p>以后做事：切记切记切记，不要一直做新题，及时复习是最重要的。</p>
<p>一定一定拿一个国奖，6~7月准备两个项目，八月开始投简历。</p>
<p><strong>真题一定要全部过一遍</strong></p>
<p>一、基础复习阶段 3.4~3.10</p>
<p>二、刷题 3.10~3.20</p>
<p>三、刷真题，搞懂每一道真题 3.20~4.10</p>
<p>程序易错点 ：</p>
<ol>
<li>变量未声明</li>
<li>i,j,k变量写错了</li>
<li></li>
</ol>
<p>11+12+16+15+12+12 = 78</p>
<h2 id="七夕祭">七夕祭<a hidden class="anchor" aria-hidden="true" href="#七夕祭">#</a></h2>
<p>$$
p[i] : i给i+1 \enspace p[i]个糖果 \
则 ans = \sum_{i=1}^n|p[i]|  \
p[1]=a[1]-avg \
递推 \enspace p[2]=p[1]+a[2]-avg \
p[3]=p[2]+a[3]-avg = p[1]+a[2]-avg+a[3]-avg \
p[4]=p[3]+a[4]-avg = p[2]+p[3]-avg+a[4]-avg = p[1]+a[2]-avg+a[3]-avg+a[4]-avg \
=\sum_{i=2}^4{(a[i]-avg)}  - p[1] \
ans =
$$</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>r <span style="color:#f92672">=</span> defaultdict(int)
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> defaultdict(int)
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> defaultdict(int)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_ans</span>(a, n):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    avg <span style="color:#f92672">=</span> sum(a<span style="color:#f92672">.</span>values()) <span style="color:#f92672">//</span> n
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> a:
</span></span><span style="display:flex;"><span>        a[i] <span style="color:#f92672">-=</span> avg
</span></span><span style="display:flex;"><span>    s[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    prev_sum <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    sorted_values <span style="color:#f92672">=</span> sorted(a<span style="color:#f92672">.</span>values())
</span></span><span style="display:flex;"><span>    mid <span style="color:#f92672">=</span> sorted_values[n <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        prev_sum <span style="color:#f92672">+=</span> a[i]
</span></span><span style="display:flex;"><span>        s[i] <span style="color:#f92672">=</span> prev_sum
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> s<span style="color:#f92672">.</span>values():
</span></span><span style="display:flex;"><span>        ans <span style="color:#f92672">+=</span> abs(i <span style="color:#f92672">-</span> mid)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> ans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m, t <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(t):
</span></span><span style="display:flex;"><span>    x, y <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    r[x] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    c[y] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> t <span style="color:#f92672">%</span> n <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> t <span style="color:#f92672">%</span> m <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;impossible&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> t <span style="color:#f92672">%</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> t <span style="color:#f92672">%</span> m <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;both&#34;</span>, get_ans(r, n) <span style="color:#f92672">+</span> get_ans(c, m))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> t <span style="color:#f92672">%</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;row&#34;</span>, get_ans(r, n))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;column&#34;</span>, get_ans(c, m))
</span></span></code></pre></div><h1 id="模板">模板<a hidden class="anchor" aria-hidden="true" href="#模板">#</a></h1>
<h2 id="基础杂项">基础+杂项<a hidden class="anchor" aria-hidden="true" href="#基础杂项">#</a></h2>
<h3 id="快速排序">快速排序<a hidden class="anchor" aria-hidden="true" href="#快速排序">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">quick_sort</span>(q, l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l<span style="color:#f92672">&gt;=</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> 
</span></span><span style="display:flex;"><span>    i,j,x<span style="color:#f92672">=</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,q[(l<span style="color:#f92672">+</span>r)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">&lt;</span>j:
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> q[i]<span style="color:#f92672">&lt;</span>x:
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> q[j]<span style="color:#f92672">&gt;</span>x:
</span></span><span style="display:flex;"><span>            j<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&lt;</span>j:
</span></span><span style="display:flex;"><span>            q[i], q[j] <span style="color:#f92672">=</span> q[j], q[i]
</span></span><span style="display:flex;"><span>    quick_sort(q, l, j)
</span></span><span style="display:flex;"><span>    quick_sort(q, j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, r)
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>arr<span style="color:#f92672">=</span>list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span>quick_sort(arr,<span style="color:#ae81ff">0</span>,n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">.</span>join(map(str, arr)))
</span></span></code></pre></div><h3 id="归并排序">归并排序<a hidden class="anchor" aria-hidden="true" href="#归并排序">#</a></h3>
<p>j = mid+1 !!!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">merge_sort</span>(q,l,r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l<span style="color:#f92672">&gt;=</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    merge_sort(q, l, mid)
</span></span><span style="display:flex;"><span>    merge_sort(q, mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, r)
</span></span><span style="display:flex;"><span>    i,j,k <span style="color:#f92672">=</span> l, mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>(r<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">&lt;=</span>mid <span style="color:#f92672">and</span> j<span style="color:#f92672">&lt;=</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> q[i]<span style="color:#f92672">&lt;</span>q[j]:
</span></span><span style="display:flex;"><span>            tmp[k]<span style="color:#f92672">=</span>q[i]
</span></span><span style="display:flex;"><span>            k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            tmp[k]<span style="color:#f92672">=</span>q[j]
</span></span><span style="display:flex;"><span>            k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            j<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">&lt;=</span>mid:
</span></span><span style="display:flex;"><span>        tmp[k]<span style="color:#f92672">=</span>q[i]
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> j<span style="color:#f92672">&lt;=</span>r:
</span></span><span style="display:flex;"><span>        tmp[k]<span style="color:#f92672">=</span>q[j]
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(l, r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        q[i]<span style="color:#f92672">=</span>tmp[i<span style="color:#f92672">-</span>l]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>arr<span style="color:#f92672">=</span>list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span>merge_sort(arr, <span style="color:#ae81ff">0</span>, n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">.</span>join(map(str, arr)))
</span></span></code></pre></div><h3 id="二分">二分<a hidden class="anchor" aria-hidden="true" href="#二分">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 检查 x 是否满足某种性质</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>  <span style="color:#75715e"># 这里需要根据具体的情况实现</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bsearch_1</span>(l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l <span style="color:#f92672">&lt;</span> r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> check(mid):
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            l <span style="color:#f92672">=</span> mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> l
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bsearch_2</span>(l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l <span style="color:#f92672">&lt;</span> r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> check(mid):
</span></span><span style="display:flex;"><span>            l <span style="color:#f92672">=</span> mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> mid <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> l
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 示例用法</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 首先定义 check 函数来检查性质</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 然后使用 bsearch_1 或 bsearch_2 来进行二分搜索</span>
</span></span></code></pre></div><h3 id="浮点数二分">浮点数二分<a hidden class="anchor" aria-hidden="true" href="#浮点数二分">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 检查x是否满足某种性质</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>  <span style="color:#75715e"># 这里需要根据具体情况实现check函数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bsearch_3</span>(l, r):
</span></span><span style="display:flex;"><span>    eps <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e-6</span>  <span style="color:#75715e"># eps 表示精度，取决于题目对精度的要求</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> r <span style="color:#f92672">-</span> l <span style="color:#f92672">&gt;</span> eps:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> check(mid):
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            l <span style="color:#f92672">=</span> mid
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> l
</span></span></code></pre></div><h3 id="一维前缀和">一维前缀和<a hidden class="anchor" aria-hidden="true" href="#一维前缀和">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">prefixSum</span>(arr):
</span></span><span style="display:flex;"><span>    n <span style="color:#f92672">=</span> len(arr)
</span></span><span style="display:flex;"><span>    prefixSum <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n
</span></span><span style="display:flex;"><span>    prefixSum[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> arr[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>        prefixSum[i] <span style="color:#f92672">=</span> prefixSum[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> arr[i]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        print(prefixSum[i], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>arr <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span>prefixSum(arr)
</span></span></code></pre></div><h3 id="二维前缀和">二维前缀和<a hidden class="anchor" aria-hidden="true" href="#二维前缀和">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">prefixSum2D</span>(arr):
</span></span><span style="display:flex;"><span>    n <span style="color:#f92672">=</span> len(arr)
</span></span><span style="display:flex;"><span>    m <span style="color:#f92672">=</span> len(arr[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    prefixSum <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> m <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 计算第一行的前缀和</span>
</span></span><span style="display:flex;"><span>    prefixSum[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> arr[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, m):
</span></span><span style="display:flex;"><span>        prefixSum[<span style="color:#ae81ff">0</span>][j] <span style="color:#f92672">=</span> prefixSum[<span style="color:#ae81ff">0</span>][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> arr[<span style="color:#ae81ff">0</span>][j]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 计算第一列的前缀和</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>        prefixSum[i][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> prefixSum[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> arr[i][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 计算其他部分的前缀和</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, m):
</span></span><span style="display:flex;"><span>            prefixSum[i][j] <span style="color:#f92672">=</span> prefixSum[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> prefixSum[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> prefixSum[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> arr[i][j]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> prefixSum
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">submatrixSum</span>(prefixSum, x1, y1, x2, y2):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> prefixSum[x2][y2] <span style="color:#f92672">-</span> prefixSum[x1<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][y2] <span style="color:#f92672">-</span> prefixSum[x2][y1<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> prefixSum[x1<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][y1<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>arr <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>],
</span></span><span style="display:flex;"><span>       [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>],
</span></span><span style="display:flex;"><span>       [<span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>prefixSum <span style="color:#f92672">=</span> prefixSum2D(arr)
</span></span><span style="display:flex;"><span>print(prefixSum)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x1, y1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>x2, y2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>submatrixSum <span style="color:#f92672">=</span> submatrixSum(prefixSum, x1, y1, x2, y2)
</span></span><span style="display:flex;"><span>print(submatrixSum)
</span></span></code></pre></div><h3 id="一维差分">一维差分<a hidden class="anchor" aria-hidden="true" href="#一维差分">#</a></h3>
<p>差分和前缀和是逆运算。</p>
<p>需要计算某一段区间$+-$操作时，运用差分操作 <code>updateRange</code> 需要先构造差分数组</p>
<p>$s[i] = s[i-1]+a[i]$ 逆运算 $d[i]=a[i]-a[i-1]$ （原数组看作为前缀和数组）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">updateRange</span>(B, l, r, c):
</span></span><span style="display:flex;"><span>    B[l] <span style="color:#f92672">+=</span> c
</span></span><span style="display:flex;"><span>    B[r <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">-=</span> c
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">printArray</span>(arr):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(arr)):
</span></span><span style="display:flex;"><span>        print(arr[i], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    print()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>B <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>updateRange(B, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>updateRange(B, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>printArray(B)
</span></span></code></pre></div><h3 id="二维差分">二维差分<a hidden class="anchor" aria-hidden="true" href="#二维差分">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">updateSubmatrix</span>(S, x1, y1, x2, y2, c):
</span></span><span style="display:flex;"><span>    S[x1][y1] <span style="color:#f92672">+=</span> c
</span></span><span style="display:flex;"><span>    S[x2 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][y1] <span style="color:#f92672">-=</span> c
</span></span><span style="display:flex;"><span>    S[x1][y2 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">-=</span> c
</span></span><span style="display:flex;"><span>    S[x2 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][y2 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">+=</span> c
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">printMatrix</span>(S):
</span></span><span style="display:flex;"><span>    rows <span style="color:#f92672">=</span> len(S)
</span></span><span style="display:flex;"><span>    cols <span style="color:#f92672">=</span> len(S[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(rows):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(cols):
</span></span><span style="display:flex;"><span>            print(S[i][j], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>        print()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rows <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>cols <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>S <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> cols <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(rows <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>updateSubmatrix(S, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>updateSubmatrix(S, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>printMatrix(S)
</span></span></code></pre></div><h3 id="双指针">双指针<a hidden class="anchor" aria-hidden="true" href="#双指针">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> j <span style="color:#f92672">&lt;</span> i <span style="color:#f92672">and</span> check(j, i):
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 具体问题的逻辑</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 常见问题分类： </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (1) 对于一个序列，用两个指针维护一段区间</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (2) 对于两个序列，维护某种次序，比如归并排序中合并两个有序序列的操作</span>
</span></span></code></pre></div><h3 id="位运算">位运算<a hidden class="anchor" aria-hidden="true" href="#位运算">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>原码<span style="color:#960050;background-color:#1e0010">，</span>反码<span style="color:#960050;background-color:#1e0010">，</span>补码
</span></span><span style="display:flex;"><span>求n二进制表示中第k位数字: n <span style="color:#f92672">&gt;&gt;</span> k <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span> 
</span></span><span style="display:flex;"><span>返回n的最后一位1<span style="color:#960050;background-color:#1e0010">：</span>lowbit(n) <span style="color:#f92672">=</span> n <span style="color:#f92672">&amp;</span> <span style="color:#f92672">-</span>n 树状数组基本操作
</span></span></code></pre></div><h3 id="离散化">离散化<a hidden class="anchor" aria-hidden="true" href="#离散化">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>alls <span style="color:#f92672">=</span> []  <span style="color:#75715e"># 存储所有待离散化的值</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 将所有值排序</span>
</span></span><span style="display:flex;"><span>alls<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 去掉重复元素</span>
</span></span><span style="display:flex;"><span>alls <span style="color:#f92672">=</span> list(set(alls))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 二分求出x对应的离散化的值</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    l, r <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, len(alls) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l <span style="color:#f92672">&lt;</span> r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> alls[mid] <span style="color:#f92672">&gt;=</span> x:
</span></span><span style="display:flex;"><span>            r <span style="color:#f92672">=</span> mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            l <span style="color:#f92672">=</span> mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> r <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e"># 映射到1, 2, ...n</span>
</span></span></code></pre></div><h3 id="区间合并">区间合并<a hidden class="anchor" aria-hidden="true" href="#区间合并">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">merge</span>(segs):
</span></span><span style="display:flex;"><span>    segs<span style="color:#f92672">.</span>sort()  <span style="color:#75715e"># 区间左端点排序</span>
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    st, ed <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2e9</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">2e9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> seg <span style="color:#f92672">in</span> segs:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ed <span style="color:#f92672">&lt;</span> seg[<span style="color:#ae81ff">0</span>]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> st <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2e9</span>:
</span></span><span style="display:flex;"><span>                res<span style="color:#f92672">.</span>append((st, ed))
</span></span><span style="display:flex;"><span>            st, ed <span style="color:#f92672">=</span> seg[<span style="color:#ae81ff">0</span>], seg[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            ed <span style="color:#f92672">=</span> max(ed, seg[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> st <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2e9</span>:
</span></span><span style="display:flex;"><span>        res<span style="color:#f92672">.</span>append((st, ed))
</span></span><span style="display:flex;"><span>    segs[:] <span style="color:#f92672">=</span> res
</span></span></code></pre></div><h2 id="数据结构">数据结构<a hidden class="anchor" aria-hidden="true" href="#数据结构">#</a></h2>
<h3 id="单链表">单链表<a hidden class="anchor" aria-hidden="true" href="#单链表">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>e<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>ne<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>head<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>idx<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx, head
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>head
</span></span><span style="display:flex;"><span>    head<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(k, x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>ne[k]
</span></span><span style="display:flex;"><span>    ne[k]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">remove</span>(k):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx, head
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> k<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        head <span style="color:#f92672">=</span> ne[head]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        ne[k]<span style="color:#f92672">=</span>ne[ne[k]]
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    op<span style="color:#f92672">=</span>s[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> op<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;H&#39;</span>:
</span></span><span style="display:flex;"><span>        insert(int(s[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> op<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;I&#39;</span>:
</span></span><span style="display:flex;"><span>        add(int(s[<span style="color:#ae81ff">1</span>]), int(s[<span style="color:#ae81ff">2</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        remove(int(s[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>i<span style="color:#f92672">=</span>head
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>    print(e[i], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>ne[i]
</span></span></code></pre></div><h3 id="双链表">双链表<a hidden class="anchor" aria-hidden="true" href="#双链表">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>e<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>l<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>r<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>idx<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">init</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    r[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    l[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(k, x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    l[idx]<span style="color:#f92672">=</span>k
</span></span><span style="display:flex;"><span>    r[idx]<span style="color:#f92672">=</span>r[k]
</span></span><span style="display:flex;"><span>    l[r[k]]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    r[k]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">remove</span>(k):
</span></span><span style="display:flex;"><span>    l[r[k]]<span style="color:#f92672">=</span>l[k]
</span></span><span style="display:flex;"><span>    r[l[k]]<span style="color:#f92672">=</span>r[k]
</span></span><span style="display:flex;"><span>init()
</span></span><span style="display:flex;"><span>m<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    s<span style="color:#f92672">=</span>input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;L&#39;</span>:
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        insert(<span style="color:#ae81ff">2</span>,x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;R&#39;</span>:
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        insert(l[<span style="color:#ae81ff">1</span>],x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;D&#39;</span>:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        remove(k)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;IL&#39;</span>:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span>        insert(l[k],x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;IR&#39;</span>:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>int(s[<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span>        insert(k,x)
</span></span><span style="display:flex;"><span>i<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">or</span> i<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>r[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>    print(e[i],end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>r[i]
</span></span></code></pre></div><h3 id="栈">栈<a hidden class="anchor" aria-hidden="true" href="#栈">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)  <span style="color:#75715e"># 假设N的值为100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stk <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 向栈顶插入一个数</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>stk[tt] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 从栈顶弹出一个数</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 栈顶的值</span>
</span></span><span style="display:flex;"><span>stk[tt]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 判断栈是否为空</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> tt <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><h3 id="队列">队列<a hidden class="anchor" aria-hidden="true" href="#队列">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>  <span style="color:#75715e"># 假设N的值为100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>hh <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 向队尾插入一个数</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>q[tt] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 从队头弹出一个数</span>
</span></span><span style="display:flex;"><span>hh <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 队头的值</span>
</span></span><span style="display:flex;"><span>q[hh]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 判断队列是否为空</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> hh <span style="color:#f92672">&lt;=</span> tt:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>  <span style="color:#75715e"># 假设N的值为100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>hh <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 向队尾插入一个数</span>
</span></span><span style="display:flex;"><span>q[tt] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> tt <span style="color:#f92672">==</span> N:
</span></span><span style="display:flex;"><span>    tt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 从队头弹出一个数</span>
</span></span><span style="display:flex;"><span>hh <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> hh <span style="color:#f92672">==</span> N:
</span></span><span style="display:flex;"><span>    hh <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 队头的值</span>
</span></span><span style="display:flex;"><span>q[hh]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 判断队列是否为空</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> hh <span style="color:#f92672">!=</span> tt:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><h3 id="单调栈">单调栈<a hidden class="anchor" aria-hidden="true" href="#单调栈">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>tt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>stk <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> tt <span style="color:#f92672">and</span> check(stk[tt], i):
</span></span><span style="display:flex;"><span>        tt <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    stk[tt <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>    tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="单调队列">单调队列<a hidden class="anchor" aria-hidden="true" href="#单调队列">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>n <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>  <span style="color:#75715e"># 假设n的值为10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>hh <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>tt <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh <span style="color:#f92672">&lt;=</span> tt <span style="color:#f92672">and</span> check_out(q[hh]):
</span></span><span style="display:flex;"><span>        hh <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh <span style="color:#f92672">&lt;=</span> tt <span style="color:#f92672">and</span> check(q[tt], i):
</span></span><span style="display:flex;"><span>        tt <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    q[tt <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>    tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e6</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>n,k<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>hh,tt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> i<span style="color:#f92672">-</span>q[hh]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span>k:
</span></span><span style="display:flex;"><span>        hh<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> a[q[tt]] <span style="color:#f92672">&gt;=</span> a[i]:
</span></span><span style="display:flex;"><span>        tt<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    tt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    q[tt]<span style="color:#f92672">=</span>i
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&gt;=</span> k:
</span></span><span style="display:flex;"><span>        print(a[q[hh]], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print()
</span></span><span style="display:flex;"><span>hh,tt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> i<span style="color:#f92672">-</span>q[hh]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span>k:
</span></span><span style="display:flex;"><span>        hh<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> a[q[tt]] <span style="color:#f92672">&lt;=</span> a[i]:
</span></span><span style="display:flex;"><span>        tt<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    tt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    q[tt]<span style="color:#f92672">=</span>i
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;=</span>k:
</span></span><span style="display:flex;"><span>        print(a[q[hh]], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span></code></pre></div><h3 id="kmp">KMP<a hidden class="anchor" aria-hidden="true" href="#kmp">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>m <span style="color:#f92672">=</span> len(p)  <span style="color:#75715e"># 假设p为模板串，长度为m</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> len(s)  <span style="color:#75715e"># 假设s为模式串，长度为n</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> (m <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)  <span style="color:#75715e"># 初始化ne数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 求Next数组</span>
</span></span><span style="display:flex;"><span>j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, m <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> j <span style="color:#f92672">and</span> p[i] <span style="color:#f92672">!=</span> p[j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> ne[j]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> p[i] <span style="color:#f92672">==</span> p[j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    ne[i] <span style="color:#f92672">=</span> j
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 匹配</span>
</span></span><span style="display:flex;"><span>j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> j <span style="color:#f92672">and</span> s[i] <span style="color:#f92672">!=</span> p[j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> ne[j]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[i] <span style="color:#f92672">==</span> p[j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> j <span style="color:#f92672">==</span> m:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> ne[j]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 匹配成功后的逻辑</span>
</span></span></code></pre></div><h3 id="tire">Tire<a hidden class="anchor" aria-hidden="true" href="#tire">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">100010</span>
</span></span><span style="display:flex;"><span>son <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> <span style="color:#ae81ff">26</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>cnt <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0号点既是根节点，又是空节点</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># son[][]存储树中每个节点的子节点</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># cnt[]存储以每个节点结尾的单词数量</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 插入一个字符串</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(s):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(s)):
</span></span><span style="display:flex;"><span>        u <span style="color:#f92672">=</span> ord(s[i]) <span style="color:#f92672">-</span> ord(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> son[p][u]:
</span></span><span style="display:flex;"><span>            idx <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            son[p][u] <span style="color:#f92672">=</span> idx
</span></span><span style="display:flex;"><span>        p <span style="color:#f92672">=</span> son[p][u]
</span></span><span style="display:flex;"><span>    cnt[p] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 查询字符串出现的次数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query</span>(s):
</span></span><span style="display:flex;"><span>    p <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(s)):
</span></span><span style="display:flex;"><span>        u <span style="color:#f92672">=</span> ord(s[i]) <span style="color:#f92672">-</span> ord(<span style="color:#e6db74">&#39;a&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> son[p][u]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        p <span style="color:#f92672">=</span> son[p][u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> cnt[p]
</span></span></code></pre></div><h3 id="并查集">并查集<a hidden class="anchor" aria-hidden="true" href="#并查集">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-PY" data-lang="PY"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 假设N的值为1000005</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化p数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 返回x的祖宗节点</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> p[x] <span style="color:#f92672">!=</span> x:
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#f92672">=</span> find(p[x])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p[x]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化，假定节点编号是1~n</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 合并a和b所在的两个集合</span>
</span></span><span style="display:flex;"><span>p[find(a)] <span style="color:#f92672">=</span> find(b)
</span></span></code></pre></div><p>维护size信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># Python中没有类似于C++的数组声明方式，我们直接使用列表来代替</span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>size <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 返回x的祖宗节点</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> p[x] <span style="color:#f92672">!=</span> x:
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#f92672">=</span> find(p[x])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p[x]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化，假定节点编号是1~n</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> N <span style="color:#75715e"># 假设n是提前定义好的</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>    size[i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 合并a和b所在的两个集合</span>
</span></span><span style="display:flex;"><span>p[find(a)] <span style="color:#f92672">=</span> find(b)
</span></span><span style="display:flex;"><span>size[b] <span style="color:#f92672">+=</span> size[a]
</span></span></code></pre></div><p>维护到祖宗节点距离的并查集</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># Python中没有类似于C++的数组声明方式，我们直接使用列表来代替</span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 返回x的祖宗节点</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> p[x] <span style="color:#f92672">!=</span> x:
</span></span><span style="display:flex;"><span>        u <span style="color:#f92672">=</span> find(p[x])
</span></span><span style="display:flex;"><span>        d[x] <span style="color:#f92672">+=</span> d[p[x]]
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#f92672">=</span> u
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p[x]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化，假定节点编号是1~n</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> N <span style="color:#75715e"># 假设n是提前定义好的</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>    d[i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 合并a和b所在的两个集合</span>
</span></span><span style="display:flex;"><span>p[find(a)] <span style="color:#f92672">=</span> find(b)
</span></span><span style="display:flex;"><span>d[find(a)] <span style="color:#f92672">=</span> distance  <span style="color:#75715e"># 根据具体问题，初始化find(a)的偏移量</span>
</span></span></code></pre></div><h3 id="堆">堆<a hidden class="anchor" aria-hidden="true" href="#堆">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># h[N] 存储堆中的值, h[1]是堆顶，x的左儿子是2x, 右儿子是2x + 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ph pos[k] 存储第k个插入的点在堆中的位置</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># hp ord[k] 存储堆中下标是k的点是第几个插入的</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 假设N的值为1000005</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化h数组</span>
</span></span><span style="display:flex;"><span>ph <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化ph数组</span>
</span></span><span style="display:flex;"><span>hp <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化hp数组</span>
</span></span><span style="display:flex;"><span>size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 初始化size为0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 交换两个点，及其映射关系</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">heap_swap</span>(a, b):
</span></span><span style="display:flex;"><span>    ph[hp[a]], ph[hp[b]] <span style="color:#f92672">=</span> ph[hp[b]], ph[hp[a]]
</span></span><span style="display:flex;"><span>    hp[a], hp[b] <span style="color:#f92672">=</span> hp[b], hp[a]
</span></span><span style="display:flex;"><span>    h[a], h[b] <span style="color:#f92672">=</span> h[b], h[a]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">down</span>(u):
</span></span><span style="display:flex;"><span>    t <span style="color:#f92672">=</span> u
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&lt;=</span> size <span style="color:#f92672">and</span> h[u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>] <span style="color:#f92672">&lt;</span> h[t]:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;=</span> size <span style="color:#f92672">and</span> h[u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> h[t]:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> u <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> u <span style="color:#f92672">!=</span> t:
</span></span><span style="display:flex;"><span>        heap_swap(u, t)
</span></span><span style="display:flex;"><span>        down(t)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">up</span>(u):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> u <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">and</span> h[u] <span style="color:#f92672">&lt;</span> h[u <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>]:
</span></span><span style="display:flex;"><span>        heap_swap(u, u <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        u <span style="color:#f92672">&gt;&gt;=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># O(n)建堆</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    down(i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_element</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> size
</span></span><span style="display:flex;"><span>    size <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    h[size] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>    ph[size] <span style="color:#f92672">=</span> size
</span></span><span style="display:flex;"><span>    hp[size] <span style="color:#f92672">=</span> size
</span></span><span style="display:flex;"><span>    up(size)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_heap_top</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> h[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delete_element</span>(k):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> size
</span></span><span style="display:flex;"><span>    heap_swap(k, size)
</span></span><span style="display:flex;"><span>    size <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    down(k)
</span></span><span style="display:flex;"><span>    up(k)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update_element</span>(k, x):
</span></span><span style="display:flex;"><span>    h[k] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>    down(k)
</span></span><span style="display:flex;"><span>    up(k)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加元素</span>
</span></span><span style="display:flex;"><span>add_element(x)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 堆顶元素</span>
</span></span><span style="display:flex;"><span>heap_top <span style="color:#f92672">=</span> get_heap_top()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除第size个节点</span>
</span></span><span style="display:flex;"><span>delete_element(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除第k个节点</span>
</span></span><span style="display:flex;"><span>delete_element(k)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 将第k个元素赋值为x</span>
</span></span><span style="display:flex;"><span>update_element(k, x)
</span></span></code></pre></div><h3 id="哈希">哈希<a hidden class="anchor" aria-hidden="true" href="#哈希">#</a></h3>
<h4 id="1拉链法">(1)拉链法<a hidden class="anchor" aria-hidden="true" href="#1拉链法">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 假设N的值为1000005</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化h数组为-1</span>
</span></span><span style="display:flex;"><span>e <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化e数组</span>
</span></span><span style="display:flex;"><span>ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化ne数组</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 初始化idx为0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 向哈希表中插入一个数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(x):
</span></span><span style="display:flex;"><span>    k <span style="color:#f92672">=</span> (x <span style="color:#f92672">%</span> N <span style="color:#f92672">+</span> N) <span style="color:#f92672">%</span> N
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>    ne[idx] <span style="color:#f92672">=</span> h[k]
</span></span><span style="display:flex;"><span>    h[k] <span style="color:#f92672">=</span> idx
</span></span><span style="display:flex;"><span>    idx <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在哈希表中查询某个数是否存在</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    k <span style="color:#f92672">=</span> (x <span style="color:#f92672">%</span> N <span style="color:#f92672">+</span> N) <span style="color:#f92672">%</span> N
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> h[k]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> e[i] <span style="color:#f92672">==</span> x:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">=</span> ne[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span></code></pre></div><h4 id="2-开放寻址法">(2) 开放寻址法<a hidden class="anchor" aria-hidden="true" href="#2-开放寻址法">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 假设N的值为1000005</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化h数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果x在哈希表中，返回x的下标；如果x不在哈希表中，返回x应该插入的位置</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    t <span style="color:#f92672">=</span> (x <span style="color:#f92672">%</span> N <span style="color:#f92672">+</span> N) <span style="color:#f92672">%</span> N
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> h[t] <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> h[t] <span style="color:#f92672">!=</span> x:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> t <span style="color:#f92672">==</span> N:
</span></span><span style="display:flex;"><span>            t <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> t
</span></span></code></pre></div><h3 id="字符串哈希">字符串哈希<a hidden class="anchor" aria-hidden="true" href="#字符串哈希">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 假设N的值为1000005</span>
</span></span><span style="display:flex;"><span>P <span style="color:#f92672">=</span> <span style="color:#ae81ff">131</span>  <span style="color:#75715e"># 或者可以设置为13331</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化h数组</span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 初始化p数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化</span>
</span></span><span style="display:flex;"><span>p[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    h[i] <span style="color:#f92672">=</span> h[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> P <span style="color:#f92672">+</span> ord(str[i])
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> p[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> P
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 计算子串 str[l ~ r] 的哈希值</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get</span>(l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> h[r] <span style="color:#f92672">-</span> h[l <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> p[r <span style="color:#f92672">-</span> l <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><h2 id="图论">图论<a hidden class="anchor" aria-hidden="true" href="#图论">#</a></h2>
<h3 id="树的存储">树的存储<a hidden class="anchor" aria-hidden="true" href="#树的存储">#</a></h3>
<h4 id="邻接矩阵">邻接矩阵<a hidden class="anchor" aria-hidden="true" href="#邻接矩阵">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 创建一个二维列表表示邻接矩阵</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>  <span style="color:#75715e"># 顶点数量</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加一条边a-&gt;b</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_edge</span>(a, b):
</span></span><span style="display:flex;"><span>    g[a][b] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n)]
</span></span></code></pre></div><h4 id="邻接表">邻接表<a hidden class="anchor" aria-hidden="true" href="#邻接表">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 创建一个列表表示邻接表</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>  <span style="color:#75715e"># 顶点数量</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> n
</span></span><span style="display:flex;"><span>e <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n
</span></span><span style="display:flex;"><span>ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> n
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加一条边a-&gt;b</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_edge</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#f92672">=</span> b
</span></span><span style="display:flex;"><span>    ne[idx] <span style="color:#f92672">=</span> h[a]
</span></span><span style="display:flex;"><span>    h[a] <span style="color:#f92672">=</span> idx
</span></span><span style="display:flex;"><span>    idx <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> n
</span></span></code></pre></div><h3 id="树和图的存储">树和图的存储<a hidden class="anchor" aria-hidden="true" href="#树和图的存储">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 邻接表表示的图</span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">100010</span>  <span style="color:#75715e"># 根据具体需求设置合适的最大节点数量</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 对于每个点k，开一个单链表，存储k所有可以走到的点。h[k]存储这个单链表的头结点</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 存储边的目标节点</span>
</span></span><span style="display:flex;"><span>e <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 存储下一条边的索引</span>
</span></span><span style="display:flex;"><span>ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 边的索引</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加一条边a-&gt;b</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#f92672">=</span> b
</span></span><span style="display:flex;"><span>    ne[idx] <span style="color:#f92672">=</span> h[a]
</span></span><span style="display:flex;"><span>    h[a] <span style="color:#f92672">=</span> idx
</span></span><span style="display:flex;"><span>    idx <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N):
</span></span><span style="display:flex;"><span>    h[i] <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="树和图的遍历">树和图的遍历<a hidden class="anchor" aria-hidden="true" href="#树和图的遍历">#</a></h3>
<h4 id="dfs">DFS<a hidden class="anchor" aria-hidden="true" href="#dfs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(u):
</span></span><span style="display:flex;"><span>    st[u] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>  <span style="color:#75715e"># st[u] 表示点u已经被遍历过</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(h[u], <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j]:
</span></span><span style="display:flex;"><span>            dfs(j)
</span></span></code></pre></div><h4 id="bfs">BFS<a hidden class="anchor" aria-hidden="true" href="#bfs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> queue <span style="color:#f92672">import</span> Queue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q <span style="color:#f92672">=</span> Queue()
</span></span><span style="display:flex;"><span>st[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>  <span style="color:#75715e"># 表示1号点已经被遍历过</span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">.</span>put(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#f92672">not</span> q<span style="color:#f92672">.</span>empty():
</span></span><span style="display:flex;"><span>    t <span style="color:#f92672">=</span> q<span style="color:#f92672">.</span>get()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(h[t], <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j]:
</span></span><span style="display:flex;"><span>            st[j] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>  <span style="color:#75715e"># 表示点j已经被遍历过</span>
</span></span><span style="display:flex;"><span>            q<span style="color:#f92672">.</span>put(j)
</span></span></code></pre></div><h3 id="拓扑排序">拓扑排序<a hidden class="anchor" aria-hidden="true" href="#拓扑排序">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">topsort</span>():
</span></span><span style="display:flex;"><span>    hh <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    tt <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># d[i] 存储点i的入度</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> d[i] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            q<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh <span style="color:#f92672">&lt;=</span> tt:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> q[hh]
</span></span><span style="display:flex;"><span>        hh <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(h[t], <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>            d[j] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> d[j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                q<span style="color:#f92672">.</span>append(j)
</span></span><span style="display:flex;"><span>                tt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 如果所有点都入队了，说明存在拓扑序列；否则不存在拓扑序列。</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> tt <span style="color:#f92672">==</span> n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="lca">LCA<a hidden class="anchor" aria-hidden="true" href="#lca">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lca</span>(x,y):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dep[x] <span style="color:#f92672">&lt;</span> dep[y]:
</span></span><span style="display:flex;"><span>        x,y <span style="color:#f92672">=</span> y,x
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> dep[x]<span style="color:#f92672">-</span>dep[y]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> d:  <span style="color:#75715e"># 循环直到深度差为 0</span>
</span></span><span style="display:flex;"><span>        v <span style="color:#f92672">=</span> d <span style="color:#f92672">&amp;</span> <span style="color:#f92672">-</span>d  <span style="color:#75715e"># 获取 d 的最低位的 1 所在的位置</span>
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">=</span> v<span style="color:#f92672">.</span>bit_length() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e"># 计算最低位的位置索引</span>
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">=</span> fa[i][x]  <span style="color:#75715e"># 将节点 x 上移到和节点 y 同一深度</span>
</span></span><span style="display:flex;"><span>        d <span style="color:#f92672">-=</span> v  <span style="color:#75715e"># 更新深度差</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x<span style="color:#f92672">==</span>y:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> x
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(K<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> fa[k][x] <span style="color:#f92672">!=</span> fa[k][y]:
</span></span><span style="display:flex;"><span>            x <span style="color:#f92672">=</span> fa[k][x]
</span></span><span style="display:flex;"><span>            y <span style="color:#f92672">=</span> fa[k][y]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> fa[<span style="color:#ae81ff">0</span>][x]
</span></span></code></pre></div><h3 id="最短路">最短路<a hidden class="anchor" aria-hidden="true" href="#最短路">#</a></h3>
<p>单元最短路</p>
<p>​	所有边权为正：</p>
<p>​		朴素版Dijkstra $O(n^2)$,堆优化版的Dijkstra $O(mlogn)$,</p>
<p>​	存在负权边</p>
<p>​		Bellman-Ford $O(nm)$, SPFA 队列优化的Bellman-Ford, 一般情况：$O(m)$ 最坏情况：$O(nm)$</p>
<p>多元汇最短路：</p>
<p>​	Floyed $O(n^3)$</p>
<h4 id="朴素dijkstra">朴素Dijkstra<a hidden class="anchor" aria-hidden="true" href="#朴素dijkstra">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">5e2</span>)<span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> [[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span><span style="color:#75715e">#g = defaultdict(lambda:defaultdict(lambda:INF)) 同样的效果</span>
</span></span><span style="display:flex;"><span>dis <span style="color:#f92672">=</span> [INF]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dijkstra</span>():
</span></span><span style="display:flex;"><span>    dis[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        t<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j] <span style="color:#f92672">and</span> (t<span style="color:#f92672">==-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">or</span> dis[j]<span style="color:#f92672">&lt;</span>dis[t]):
</span></span><span style="display:flex;"><span>                t<span style="color:#f92672">=</span>j
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            dis[j]<span style="color:#f92672">=</span>min(dis[j], dis[t] <span style="color:#f92672">+</span> g[t][j])
</span></span><span style="display:flex;"><span>        st[t]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dis[n]<span style="color:#f92672">==</span>INF:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> dis[n]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    x, y, z <span style="color:#f92672">=</span> map(int ,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    g[x][y] <span style="color:#f92672">=</span> min(g[x][y], z)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(dijkstra())
</span></span></code></pre></div><h4 id="堆优化版dijkstra">堆优化版Dijkstra<a hidden class="anchor" aria-hidden="true" href="#堆优化版dijkstra">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> heapq <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>input <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">150010</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>e, ne, head, w, dis<span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N, [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N, [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>N, [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N, [INF]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>idx<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b, x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>b
</span></span><span style="display:flex;"><span>    w[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>head[a]
</span></span><span style="display:flex;"><span>    head[a]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dijkstra</span>():
</span></span><span style="display:flex;"><span>    dis[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    h<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>    heappush(h, (<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> h:
</span></span><span style="display:flex;"><span>        dist, ver <span style="color:#f92672">=</span> heappop(h)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> st[ver]: <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        st[ver]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>head[ver]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            j<span style="color:#f92672">=</span>e[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j] <span style="color:#f92672">and</span> dis[j]<span style="color:#f92672">&gt;</span>dist<span style="color:#f92672">+</span>w[i]:
</span></span><span style="display:flex;"><span>                dis[j]<span style="color:#f92672">=</span>dist<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>                heappush(h, (dis[j], j))
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dis[n]<span style="color:#f92672">==</span>INF:
</span></span><span style="display:flex;"><span>        print(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(dis[n])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    x, y, z <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    add(x,y,z)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>dijkstra()
</span></span></code></pre></div><h6 id="另一种写法">另一种写法<a hidden class="anchor" aria-hidden="true" href="#另一种写法">#</a></h6>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> heapq <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>input<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>N, INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">150010</span>, <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>dis, st <span style="color:#f92672">=</span> [INF]<span style="color:#f92672">*</span>N, [<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>defaultdict(list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dijkstra</span>():
</span></span><span style="display:flex;"><span>    dis[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    h<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>    heappush(h, (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> h:
</span></span><span style="display:flex;"><span>        dist, ver <span style="color:#f92672">=</span> heappop(h)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> st[ver]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        st[ver]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> y, z <span style="color:#f92672">in</span> g[ver]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> dis[y]<span style="color:#f92672">&gt;</span>dis[ver]<span style="color:#f92672">+</span>z:
</span></span><span style="display:flex;"><span>                dis[y]<span style="color:#f92672">=</span>dis[ver]<span style="color:#f92672">+</span>z
</span></span><span style="display:flex;"><span>                heappush(h, (dis[y], y))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dis[n]<span style="color:#f92672">==</span>INF:
</span></span><span style="display:flex;"><span>        print(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(dis[n])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    x,y,z <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    g[x]<span style="color:#f92672">.</span>append((y, z))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>dijkstra()
</span></span></code></pre></div><h3 id="bellman-ford">Bellman-Ford<a hidden class="anchor" aria-hidden="true" href="#bellman-ford">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># n表示点数，m表示边数</span>
</span></span><span style="display:flex;"><span>dist <span style="color:#f92672">=</span> [float(<span style="color:#e6db74">&#39;inf&#39;</span>)] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)  <span style="color:#75715e"># dist[x]存储1到x的最短路距离</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 边，a表示出点，b表示入点，w表示边的权重</span>
</span></span><span style="display:flex;"><span>edges <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 求1到n的最短路距离，如果无法从1走到n，则返回-1。</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bellman_ford</span>():
</span></span><span style="display:flex;"><span>    dist[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 如果第n次迭代仍然会松弛三角不等式，就说明存在一条长度是n+1的最短路径，由抽屉原理，路径中至少存在两个相同的点，说明图中存在负权回路。</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>            a, b, w <span style="color:#f92672">=</span> edges[j][<span style="color:#e6db74">&#39;a&#39;</span>], edges[j][<span style="color:#e6db74">&#39;b&#39;</span>], edges[j][<span style="color:#e6db74">&#39;w&#39;</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> dist[b] <span style="color:#f92672">&gt;</span> dist[a] <span style="color:#f92672">+</span> w:
</span></span><span style="display:flex;"><span>                dist[b] <span style="color:#f92672">=</span> dist[a] <span style="color:#f92672">+</span> w
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dist[n] <span style="color:#f92672">&gt;</span> float(<span style="color:#e6db74">&#39;inf&#39;</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> dist[n]
</span></span></code></pre></div><h3 id="spfa">SPFA<a hidden class="anchor" aria-hidden="true" href="#spfa">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict, deque
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>input <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N, INF <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>), <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dis, st <span style="color:#f92672">=</span> [INF]<span style="color:#f92672">*</span>N, [<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>defaultdict(list)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">spfa</span>():
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">=</span>deque()
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    st[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    dis[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>        st[x]<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> y, z <span style="color:#f92672">in</span> g[x]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> dis[y]<span style="color:#f92672">&gt;</span>dis[x]<span style="color:#f92672">+</span>z:
</span></span><span style="display:flex;"><span>                dis[y]<span style="color:#f92672">=</span>dis[x]<span style="color:#f92672">+</span>z
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[y]:
</span></span><span style="display:flex;"><span>                    st[y]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>                    q<span style="color:#f92672">.</span>append(y)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> dis[n]<span style="color:#f92672">==</span>INF:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;impossible&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(dis[n])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    x, y, z <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    g[x]<span style="color:#f92672">.</span>append((y, z))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>spfa()
</span></span></code></pre></div><h4 id="判断负环">判断负环<a hidden class="anchor" aria-hidden="true" href="#判断负环">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 总点数</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 邻接表存储所有边</span>
</span></span><span style="display:flex;"><span>e, ne, w <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N, [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N, [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>dist, cnt <span style="color:#f92672">=</span> [INF] <span style="color:#f92672">*</span> N, [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># dist[x]存储1号点到x的最短距离，cnt[x]存储1到x的最短路中经过的点数</span>
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 存储每个点是否在队列中</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果存在负环，则返回True，否则返回False。</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">spfa</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 不需要初始化dist数组</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 原理：如果某条最短路径上有n个点（除了自己），那么加上自己之后一共有n+1个点，由抽屉原理一定有两个点相同，所以存在环</span>
</span></span><span style="display:flex;"><span>    q <span style="color:#f92672">=</span> deque()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        q<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>        st[i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">=</span> h[t]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> i <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> dist[j] <span style="color:#f92672">&gt;</span> dist[t] <span style="color:#f92672">+</span> w[i]:
</span></span><span style="display:flex;"><span>                dist[j] <span style="color:#f92672">=</span> dist[t] <span style="color:#f92672">+</span> w[i]
</span></span><span style="display:flex;"><span>                cnt[j] <span style="color:#f92672">=</span> cnt[t] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> cnt[j] <span style="color:#f92672">&gt;=</span> n:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>  <span style="color:#75715e"># 如果从1号点到x的最短路中包含至少n个点（不包括自己），则说明存在环</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j]:
</span></span><span style="display:flex;"><span>                    q<span style="color:#f92672">.</span>append(j)
</span></span><span style="display:flex;"><span>                    st[j] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            i <span style="color:#f92672">=</span> ne[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n = 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># h = [-1, 2, 1, 4, 3, -1]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e = [0, 2, 1, 4, 3, 0]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ne = [1, -1, 3, -1, -1, 2]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># w = [0, 1, 2, 3, 4, 5]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># if spfa():</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     print(&#34;Exist negative cycle&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># else:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     print(&#34;No negative cycle&#34;)</span>
</span></span></code></pre></div><h3 id="floyd">floyd<a hidden class="anchor" aria-hidden="true" href="#floyd">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> float(<span style="color:#e6db74">&#39;inf&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 初始化距离矩阵d，d[a][b]表示a到b的最短距离</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">initialize</span>(n):
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> j <span style="color:#66d9ef">else</span> INF <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n)] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Floyd算法求解最短路径</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">floyd</span>(d, n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>                d[i][j] <span style="color:#f92672">=</span> min(d[i][j], d[i][k] <span style="color:#f92672">+</span> d[k][j])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n = 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># d = initialize(n)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># d = floyd(d, n)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(d)</span>
</span></span></code></pre></div><h3 id="prim">Prim<a hidden class="anchor" aria-hidden="true" href="#prim">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> float(<span style="color:#e6db74">&#39;inf&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Prim算法求解最小生成树的权重之和</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">prim</span>(n, g):
</span></span><span style="display:flex;"><span>    dist <span style="color:#f92672">=</span> [INF] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j] <span style="color:#f92672">and</span> (t <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">or</span> dist[t] <span style="color:#f92672">&gt;</span> dist[j]):
</span></span><span style="display:flex;"><span>                t <span style="color:#f92672">=</span> j
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">and</span> dist[t] <span style="color:#f92672">==</span> INF:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> INF
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">+=</span> dist[t]
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            dist[j] <span style="color:#f92672">=</span> min(dist[j], g[t][j])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n = 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># g = [[0] * (n + 1) for _ in range(n + 1)]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dist = prim(n, g)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(dist)</span>
</span></span></code></pre></div><h3 id="kruskal">Kruskal<a hidden class="anchor" aria-hidden="true" href="#kruskal">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> float(<span style="color:#e6db74">&#39;inf&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 并查集的查找操作</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x, p):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> p[x] <span style="color:#f92672">!=</span> x:
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#f92672">=</span> find(p[x], p)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p[x]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Kruskal算法求解最小生成树的权重之和</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">kruskal</span>(n, m, edges):
</span></span><span style="display:flex;"><span>    edges<span style="color:#f92672">.</span>sort(key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: x[<span style="color:#ae81ff">2</span>])  <span style="color:#75715e"># 按照边权重对边进行排序</span>
</span></span><span style="display:flex;"><span>    p <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)]   <span style="color:#75715e"># 初始化并查集的父节点数组</span>
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> edge <span style="color:#f92672">in</span> edges:
</span></span><span style="display:flex;"><span>        a, b, w <span style="color:#f92672">=</span> edge
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> find(a, p)
</span></span><span style="display:flex;"><span>        b <span style="color:#f92672">=</span> find(b, p)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a <span style="color:#f92672">!=</span> b:  <span style="color:#75715e"># 如果两个连通块不连通，则将这两个连通块合并</span>
</span></span><span style="display:flex;"><span>            p[a] <span style="color:#f92672">=</span> b
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">+=</span> w
</span></span><span style="display:flex;"><span>            cnt <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> cnt <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> INF
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n, m = 5, 7</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># edges = [(1, 2, 2), (1, 3, 5), (1, 4, 6), (2, 3, 1), (2, 4, 3), (3, 4, 4), (4, 5, 7)]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># min_spanning_tree_weight = kruskal(n, m, edges)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(min_spanning_tree_weight)</span>
</span></span></code></pre></div><h3 id="染色法">染色法<a hidden class="anchor" aria-hidden="true" href="#染色法">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 定义全局变量</span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">10005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">20005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 邻接表头</span>
</span></span><span style="display:flex;"><span>e, ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> M, [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> M  <span style="color:#75715e"># 邻接表存储图</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 邻接表索引</span>
</span></span><span style="display:flex;"><span>color <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 表示每个点的颜色，-1表示未染色，0表示白色，1表示黑色</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 深度优先搜索进行着色</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(u, c):
</span></span><span style="display:flex;"><span>    color[u] <span style="color:#f92672">=</span> c
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> h[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> color[j] <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> dfs(j, <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> c):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> color[j] <span style="color:#f92672">==</span> c:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">=</span> ne[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 检查图是否是二分图</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check</span>(n):
</span></span><span style="display:flex;"><span>    flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> color[i] <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> dfs(i, <span style="color:#ae81ff">0</span>):
</span></span><span style="display:flex;"><span>                flag <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> flag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n = 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># h = [-1, 2, -1, 4, -1, 4]  # 邻接表头</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e = [0, 3, 0, 1, 0, 4]  # 邻接表存储图</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ne = [1, -1, -1, 2, 5, -1]  # 邻接表存储图</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># if check(n):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     print(&#34;Graph is a bipartite graph.&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># else:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     print(&#34;Graph is not a bipartite graph.&#34;)</span>
</span></span></code></pre></div><h3 id="匈牙利算法">匈牙利算法<a hidden class="anchor" aria-hidden="true" href="#匈牙利算法">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">100005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 邻接表头</span>
</span></span><span style="display:flex;"><span>e, ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> M, [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> M  <span style="color:#75715e"># 邻接表存储所有边，只存储从第二个集合指向第一个集合的边</span>
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 邻接表索引</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">match</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 存储第二个集合中的每个点当前匹配的第一个集合中的点是哪个</span>
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 表示第二个集合中的每个点是否已经被遍历过</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 匈牙利算法中的深度优先搜索寻找增广路</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">find</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(h[x]):
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[j]:
</span></span><span style="display:flex;"><span>            st[j] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">match</span>[j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> find(<span style="color:#66d9ef">match</span>[j]):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">match</span>[j] <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 求最大匹配数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">hungarian</span>(n1, n2):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n1 <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 重置st数组</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> find(i):
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n1, n2 = 5, 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># h = [-1, 2, 3, 4, 0, 0]  # 邻接表头</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e = [1, 2, 3, 4, 0, 0]  # 邻接表存储所有边，只存储从第二个集合指向第一个集合的边</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ne = [1, 2, 3, 4, -1, -1]  # 邻接表存储所有边，只存储从第二个集合指向第一个集合的边</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># max_matching = hungarian(n1, n2)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(max_matching)</span>
</span></span></code></pre></div><h2 id="数学">数学<a hidden class="anchor" aria-hidden="true" href="#数学">#</a></h2>
<h3 id="试除法判定质数">试除法判定质数<a hidden class="anchor" aria-hidden="true" href="#试除法判定质数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 判断一个数是否是素数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">is_prime</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, int(x <span style="color:#f92672">**</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = is_prime(17)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)  # Output: True</span>
</span></span></code></pre></div><h3 id="试除法分解质因数">试除法分解质因数<a hidden class="anchor" aria-hidden="true" href="#试除法分解质因数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 因数分解函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">divide</span>(x):
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">&lt;=</span> x <span style="color:#f92672">**</span> <span style="color:#ae81ff">0.5</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            s <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                x <span style="color:#f92672">//=</span> i
</span></span><span style="display:flex;"><span>                s <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            print(i, s)
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        print(x, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    print()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># divide(36)</span>
</span></span></code></pre></div><h3 id="朴素筛法求素数">朴素筛法求素数<a hidden class="anchor" aria-hidden="true" href="#朴素筛法求素数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>primes <span style="color:#f92672">=</span> []  <span style="color:#75715e"># 存储所有素数</span>
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># st[x]存储x是否被筛掉</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 筛素数函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_primes</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> primes
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> st
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[i]:
</span></span><span style="display:flex;"><span>            primes<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, i):
</span></span><span style="display:flex;"><span>                st[j] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get_primes(100)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(primes)</span>
</span></span></code></pre></div><h3 id="线性筛法求素数">线性筛法求素数<a hidden class="anchor" aria-hidden="true" href="#线性筛法求素数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>primes <span style="color:#f92672">=</span> []  <span style="color:#75715e"># 存储所有素数</span>
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># st[x]存储x是否被筛掉</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 筛素数函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_primes</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> primes
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> st
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[i]:
</span></span><span style="display:flex;"><span>            primes<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(primes)):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> primes[j] <span style="color:#f92672">*</span> i <span style="color:#f92672">&gt;</span> n:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            st[primes[j] <span style="color:#f92672">*</span> i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> primes[j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get_primes(100)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(primes)</span>
</span></span></code></pre></div><h3 id="试除法求所有约数">试除法求所有约数<a hidden class="anchor" aria-hidden="true" href="#试除法求所有约数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 获取因数函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_divisors</span>(x):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">&lt;=</span> x <span style="color:#f92672">**</span> <span style="color:#ae81ff">0.5</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            res<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i <span style="color:#f92672">!=</span> x <span style="color:#f92672">//</span> i:
</span></span><span style="display:flex;"><span>                res<span style="color:#f92672">.</span>append(x <span style="color:#f92672">//</span> i)
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    res<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># divisors = get_divisors(36)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(divisors)</span>
</span></span></code></pre></div><h3 id="约数个数和约数之和">约数个数和约数之和<a hidden class="anchor" aria-hidden="true" href="#约数个数和约数之和">#</a></h3>
<pre tabindex="0"><code>如果 N = p1^c1 * p2^c2 * ... *pk^ck
约数个数： (c1 + 1) * (c2 + 1) * ... * (ck + 1)
约数之和： (p1^0 + p1^1 + ... + p1^c1) * ... * (pk^0 + pk^1 + ... + pk^ck)
</code></pre><h3 id="gcd">gcd<a hidden class="anchor" aria-hidden="true" href="#gcd">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">gcd</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> gcd(b, a <span style="color:#f92672">%</span> b) <span style="color:#66d9ef">if</span> b <span style="color:#66d9ef">else</span> a
</span></span></code></pre></div><h3 id="求欧拉函数">求欧拉函数<a hidden class="anchor" aria-hidden="true" href="#求欧拉函数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 计算欧拉函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">phi</span>(x):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i <span style="color:#f92672">&lt;=</span> x <span style="color:#f92672">**</span> <span style="color:#ae81ff">0.5</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> res <span style="color:#f92672">//</span> i <span style="color:#f92672">*</span> (i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> x <span style="color:#f92672">%</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                x <span style="color:#f92672">//=</span> i
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">=</span> res <span style="color:#f92672">//</span> x <span style="color:#f92672">*</span> (x <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = phi(36)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="筛法求欧拉函数">筛法求欧拉函数<a hidden class="anchor" aria-hidden="true" href="#筛法求欧拉函数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000005</span>  <span style="color:#75715e"># 根据需要修改</span>
</span></span><span style="display:flex;"><span>primes <span style="color:#f92672">=</span> []  <span style="color:#75715e"># 存储所有素数</span>
</span></span><span style="display:flex;"><span>euler <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 存储每个数的欧拉函数</span>
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># st[x]存储x是否被筛掉</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 获取欧拉函数数组</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_eulers</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> primes
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> euler
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> st
</span></span><span style="display:flex;"><span>    euler[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[i]:
</span></span><span style="display:flex;"><span>            primes<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            euler[i] <span style="color:#f92672">=</span> i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(primes)):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> primes[j] <span style="color:#f92672">*</span> i <span style="color:#f92672">&gt;</span> n:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            t <span style="color:#f92672">=</span> primes[j] <span style="color:#f92672">*</span> i
</span></span><span style="display:flex;"><span>            st[t] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> primes[j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                euler[t] <span style="color:#f92672">=</span> euler[i] <span style="color:#f92672">*</span> primes[j]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            euler[t] <span style="color:#f92672">=</span> euler[i] <span style="color:#f92672">*</span> (primes[j] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get_eulers(100)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(euler)</span>
</span></span></code></pre></div><h3 id="快速幂">快速幂<a hidden class="anchor" aria-hidden="true" href="#快速幂">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 快速幂函数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">qmi</span>(m, k, p):
</span></span><span style="display:flex;"><span>    res, t <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">%</span> p, m
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> k <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> res <span style="color:#f92672">*</span> t <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> t <span style="color:#f92672">*</span> t <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        k <span style="color:#f92672">&gt;&gt;=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = qmi(2, 10, 1000000007)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="拓展欧几里得">拓展欧几里得<a hidden class="anchor" aria-hidden="true" href="#拓展欧几里得">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 求 x, y，使得 ax + by = gcd(a, b)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exgcd</span>(a, b, x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> b <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        x[<span style="color:#ae81ff">0</span>], y[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> exgcd(b, a <span style="color:#f92672">%</span> b, y, x)
</span></span><span style="display:flex;"><span>    y[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-=</span> (a <span style="color:#f92672">//</span> b) <span style="color:#f92672">*</span> x[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># x = [0]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># y = [0]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gcd = exgcd(30, 20, x, y)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(&#34;x:&#34;, x[0], &#34;y:&#34;, y[0], &#34;gcd:&#34;, gcd)</span>
</span></span></code></pre></div><h3 id="高斯消元">高斯消元<a hidden class="anchor" aria-hidden="true" href="#高斯消元">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>eps <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e-8</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a 是增广矩阵，n 是矩阵维度</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">gauss</span>(a, n):
</span></span><span style="display:flex;"><span>    c, r <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> r
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(r, n):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> abs(a[i][c]) <span style="color:#f92672">&gt;</span> abs(a[t][c]):
</span></span><span style="display:flex;"><span>                t <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> abs(a[t][c]) <span style="color:#f92672">&lt;</span> eps:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(c, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            a[r][i], a[t][i] <span style="color:#f92672">=</span> a[t][i], a[r][i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n, c <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            a[r][i] <span style="color:#f92672">//=</span> a[r][c]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(r <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> abs(a[i][c]) <span style="color:#f92672">&gt;</span> eps:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n, c <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>                    a[i][j] <span style="color:#f92672">-=</span> a[r][j] <span style="color:#f92672">*</span> a[i][c]
</span></span><span style="display:flex;"><span>        r <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> r <span style="color:#f92672">&lt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(r, n):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> abs(a[i][n]) <span style="color:#f92672">&gt;</span> eps:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>  <span style="color:#75715e"># 无解</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e"># 有无穷多组解</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>            a[i][n] <span style="color:#f92672">-=</span> a[i][j] <span style="color:#f92672">*</span> a[j][n]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 有唯一解</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a = [[2, 1, -1, 8], [-3, -1, 2, -11], [-2, 1, 2, -3]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># n = 3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = gauss(a, n)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="递归法求组合数">递归法求组合数<a hidden class="anchor" aria-hidden="true" href="#递归法求组合数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1005</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>mod <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000000007</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]  <span style="color:#75715e"># 初始化二维数组</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 计算组合数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> j <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            c[i][j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            c[i][j] <span style="color:#f92672">=</span> (c[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> c[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]) <span style="color:#f92672">%</span> mod
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = c[5][2]  # 获取从5个苹果中选2个的方案数</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="通过预处理逆元的方式求组合数">通过预处理逆元的方式求组合数<a hidden class="anchor" aria-hidden="true" href="#通过预处理逆元的方式求组合数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>mod <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000000007</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1005</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>fact <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 存储阶乘的余数</span>
</span></span><span style="display:flex;"><span>infact <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N  <span style="color:#75715e"># 存储阶乘逆元的余数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 快速幂模板</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">qmi</span>(a, k, p):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> k <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> (res <span style="color:#f92672">*</span> a) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> (a <span style="color:#f92672">*</span> a) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        k <span style="color:#f92672">&gt;&gt;=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 预处理阶乘的余数和阶乘逆元的余数</span>
</span></span><span style="display:flex;"><span>fact[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> infact[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, N):
</span></span><span style="display:flex;"><span>    fact[i] <span style="color:#f92672">=</span> (fact[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> i) <span style="color:#f92672">%</span> mod
</span></span><span style="display:flex;"><span>    infact[i] <span style="color:#f92672">=</span> (infact[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> qmi(i, mod <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>, mod)) <span style="color:#f92672">%</span> mod
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 计算组合数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">C</span>(n, m):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> m <span style="color:#f92672">&gt;</span> n:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (fact[n] <span style="color:#f92672">*</span> infact[m] <span style="color:#f92672">%</span> mod <span style="color:#f92672">*</span> infact[n <span style="color:#f92672">-</span> m] <span style="color:#f92672">%</span> mod)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = C(5, 2)  # 获取组合数 C(5, 2)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="lucas定理">Lucas定理<a hidden class="anchor" aria-hidden="true" href="#lucas定理">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>p <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000000007</span>  <span style="color:#75715e"># 根据需要调整</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 快速幂模板</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">qmi</span>(a, k):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> k <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> (res <span style="color:#f92672">*</span> a) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> (a <span style="color:#f92672">*</span> a) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        k <span style="color:#f92672">&gt;&gt;=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 通过定理求组合数C(a, b)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">C</span>(a, b):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, b <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">=</span> (res <span style="color:#f92672">*</span> (a <span style="color:#f92672">-</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">=</span> (res <span style="color:#f92672">*</span> qmi(i, p <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Lucas定理计算组合数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lucas</span>(a, b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> a <span style="color:#f92672">&lt;</span> p <span style="color:#f92672">and</span> b <span style="color:#f92672">&lt;</span> p:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> C(a, b)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (C(a <span style="color:#f92672">%</span> p, b <span style="color:#f92672">%</span> p) <span style="color:#f92672">*</span> lucas(a <span style="color:#f92672">//</span> p, b <span style="color:#f92672">//</span> p)) <span style="color:#f92672">%</span> p
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = lucas(10, 5)  # 计算组合数 C(10, 5)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(result)</span>
</span></span></code></pre></div><h3 id="分解质因数法求组合数">分解质因数法求组合数<a hidden class="anchor" aria-hidden="true" href="#分解质因数法求组合数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 获取素数列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_primes</span>(n):
</span></span><span style="display:flex;"><span>    primes <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    st <span style="color:#f92672">=</span> [<span style="color:#66d9ef">False</span>] <span style="color:#f92672">*</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[i]:
</span></span><span style="display:flex;"><span>            primes<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(primes)):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> primes[j] <span style="color:#f92672">*</span> i <span style="color:#f92672">&gt;</span> n:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            st[primes[j] <span style="color:#f92672">*</span> i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> primes[j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> primes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 获取n!中p的次数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get</span>(n, p):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> n:
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">+=</span> n <span style="color:#f92672">//</span> p
</span></span><span style="display:flex;"><span>        n <span style="color:#f92672">//=</span> p
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 高精度乘法</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">mul</span>(a, b):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> (len(a) <span style="color:#f92672">+</span> len(b))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(a)):
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(b)):
</span></span><span style="display:flex;"><span>            t <span style="color:#f92672">+=</span> res[i <span style="color:#f92672">+</span> j] <span style="color:#f92672">+</span> a[i] <span style="color:#f92672">*</span> b[j]
</span></span><span style="display:flex;"><span>            res[i <span style="color:#f92672">+</span> j] <span style="color:#f92672">=</span> t <span style="color:#f92672">%</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>            t <span style="color:#f92672">//=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        res[i <span style="color:#f92672">+</span> len(b)] <span style="color:#f92672">+=</span> t
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(res) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">and</span> res[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        res<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 计算组合数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calc_combination</span>(a, b):
</span></span><span style="display:flex;"><span>    primes <span style="color:#f92672">=</span> get_primes(a)
</span></span><span style="display:flex;"><span>    sum <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> len(primes)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(primes)):
</span></span><span style="display:flex;"><span>        p <span style="color:#f92672">=</span> primes[i]
</span></span><span style="display:flex;"><span>        sum[i] <span style="color:#f92672">=</span> get(a, p) <span style="color:#f92672">-</span> get(b, p) <span style="color:#f92672">-</span> get(a <span style="color:#f92672">-</span> b, p)
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(primes)):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(sum[i]):
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">=</span> mul(res, [primes[i]])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># result = calc_combination(10, 5)  # 计算组合数 C(10, 5)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(&#39;&#39;.join(map(str, result[::-1])))</span>
</span></span></code></pre></div><h2 id="题目">题目<a hidden class="anchor" aria-hidden="true" href="#题目">#</a></h2>
<h3 id="日期差值">日期差值<a hidden class="anchor" aria-hidden="true" href="#日期差值">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>mm <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">28</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">31</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">day</span>(x):
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> int(x<span style="color:#f92672">/</span><span style="color:#ae81ff">10000</span>)
</span></span><span style="display:flex;"><span>    m <span style="color:#f92672">=</span> int((x<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>)<span style="color:#f92672">%</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> x<span style="color:#f92672">%</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>    mm[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">29</span> <span style="color:#66d9ef">if</span> (y<span style="color:#f92672">%</span><span style="color:#ae81ff">4</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> y<span style="color:#f92672">%</span><span style="color:#ae81ff">100</span><span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>) <span style="color:#f92672">or</span> y<span style="color:#f92672">%</span><span style="color:#ae81ff">400</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">28</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, m):
</span></span><span style="display:flex;"><span>        d<span style="color:#f92672">+=</span>mm[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, y):
</span></span><span style="display:flex;"><span>        d<span style="color:#f92672">+=</span><span style="color:#ae81ff">366</span> <span style="color:#66d9ef">if</span> (i<span style="color:#f92672">%</span><span style="color:#ae81ff">4</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> i<span style="color:#f92672">%</span><span style="color:#ae81ff">100</span><span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>) <span style="color:#f92672">or</span> i<span style="color:#f92672">%</span><span style="color:#ae81ff">400</span><span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">365</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>        y<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>        print( abs(day(x)<span style="color:#f92672">-</span>day(y))<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span></code></pre></div><h3 id="特殊排序">特殊排序<a hidden class="anchor" aria-hidden="true" href="#特殊排序">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># Forward declaration of compare API.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># def compare(a, b):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># @param a, b int</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># @return bool</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># return bool means whether a is less than b.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">specialSort</span>(self, N):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        :type N: int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        :rtype: List[int]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>, N<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            l, r <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, len(a)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>                mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> compare(i, a[mid]):
</span></span><span style="display:flex;"><span>                    r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    l<span style="color:#f92672">=</span>mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            a[r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:]<span style="color:#f92672">=</span>a[r:]
</span></span><span style="display:flex;"><span>            a[r]<span style="color:#f92672">=</span>i
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> compare(a[r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>],a[r]):
</span></span><span style="display:flex;"><span>                a[r], a[r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> a[r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>], a[r]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a
</span></span></code></pre></div><h3 id="单链表-1">单链表<a hidden class="anchor" aria-hidden="true" href="#单链表-1">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>h, idx, e, ne <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N, [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> h, idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>h
</span></span><span style="display:flex;"><span>    h<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(k, x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> h,idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>ne[k]
</span></span><span style="display:flex;"><span>    ne[k]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">remove</span>(k):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> h
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> k<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        h <span style="color:#f92672">=</span> ne[h]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        ne[k]<span style="color:#f92672">=</span>ne[ne[k]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    op <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> op[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;H&#39;</span>:
</span></span><span style="display:flex;"><span>        insert(int(op[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> op[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;D&#39;</span>:
</span></span><span style="display:flex;"><span>        remove(int(op[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> op[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;I&#39;</span>:
</span></span><span style="display:flex;"><span>        add(int(op[<span style="color:#ae81ff">1</span>]), int(op[<span style="color:#ae81ff">2</span>]))
</span></span><span style="display:flex;"><span>i<span style="color:#f92672">=</span>h
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>    print(e[i], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>ne[i]
</span></span></code></pre></div><h3 id="dp">DP<a hidden class="anchor" aria-hidden="true" href="#dp">#</a></h3>
<h4 id="数字三角形">数字三角形<a hidden class="anchor" aria-hidden="true" href="#数字三角形">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">.</span>append([int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i][j]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j], f[i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span>f[i][j]
</span></span><span style="display:flex;"><span>print(f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>])
</span></span></code></pre></div><h3 id="背包">背包<a hidden class="anchor" aria-hidden="true" href="#背包">#</a></h3>
<p>空间优化成1维之后，只有完全背包问题的体积是从小到大循环的</p>
<h4 id="01背包">01背包<a hidden class="anchor" aria-hidden="true" href="#01背包">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[ <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N) ]
</span></span><span style="display:flex;"><span>n,v<span style="color:#f92672">=</span>map(int,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    vi,wi<span style="color:#f92672">=</span>map(int,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(v, vi<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[j]<span style="color:#f92672">=</span>max(f[j],f[j<span style="color:#f92672">-</span>vi]<span style="color:#f92672">+</span>wi)
</span></span><span style="display:flex;"><span>print(f[v])
</span></span></code></pre></div><h4 id="多重背包">多重背包<a hidden class="anchor" aria-hidden="true" href="#多重背包">#</a></h4>
<h5 id="单调队列-1">单调队列<a hidden class="anchor" aria-hidden="true" href="#单调队列-1">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>MN <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">2e4</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(MN)]
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(MN)]
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(MN)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N,V <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N):
</span></span><span style="display:flex;"><span>    v,w,s<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    g<span style="color:#f92672">=</span>f[:]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(v):
</span></span><span style="display:flex;"><span>        hh,tt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(j,V<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,v):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> q[hh]<span style="color:#f92672">&lt;</span>k<span style="color:#f92672">-</span>s<span style="color:#f92672">*</span>v:
</span></span><span style="display:flex;"><span>                hh<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> g[q[tt]]<span style="color:#f92672">+</span>(k<span style="color:#f92672">-</span>q[tt])<span style="color:#f92672">//</span>v<span style="color:#f92672">*</span>w <span style="color:#f92672">&lt;=</span> g[k]:
</span></span><span style="display:flex;"><span>                tt<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            tt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            q[tt]<span style="color:#f92672">=</span>k
</span></span><span style="display:flex;"><span>            f[k]<span style="color:#f92672">=</span>g[q[hh]]<span style="color:#f92672">+</span>(k<span style="color:#f92672">-</span>q[hh])<span style="color:#f92672">//</span>v<span style="color:#f92672">*</span>w
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>print(f[V])
</span></span></code></pre></div><h4 id="二维费用背包">二维费用背包<a hidden class="anchor" aria-hidden="true" href="#二维费用背包">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,V,M <span style="color:#f92672">=</span> map(int , input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    v,m,w<span style="color:#f92672">=</span>map(int , input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(V,v<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(M, m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            f[j][k]<span style="color:#f92672">=</span>max(f[j][k], f[j<span style="color:#f92672">-</span>v][k<span style="color:#f92672">-</span>m]<span style="color:#f92672">+</span>w)
</span></span><span style="display:flex;"><span>             
</span></span><span style="display:flex;"><span>print(f[V][M])
</span></span></code></pre></div><h4 id="宠物小精灵">宠物小精灵<a hidden class="anchor" aria-hidden="true" href="#宠物小精灵">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">5e2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>M <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,m,kk <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(kk):
</span></span><span style="display:flex;"><span>    v1,v2<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n, v1<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,v2<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            f[j][k]<span style="color:#f92672">=</span>max(f[j][k], f[j<span style="color:#f92672">-</span>v1][k<span style="color:#f92672">-</span>v2]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>print(f[n][m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>)
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span>m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> t<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> f[n][m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">==</span>f[n][t<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(m<span style="color:#f92672">-</span>t)
</span></span></code></pre></div><h4 id="潜水">潜水<a hidden class="anchor" aria-hidden="true" href="#潜水">#</a></h4>
<p>最多</p>
<p>恰好</p>
<p>最少</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[ [INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N) ]
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>m,n<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>k<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(k):
</span></span><span style="display:flex;"><span>    a,b,c<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(n,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            f[j][k]<span style="color:#f92672">=</span>min(f[j][k], f[max(j<span style="color:#f92672">-</span>a, <span style="color:#ae81ff">0</span>)][max(k<span style="color:#f92672">-</span>b, <span style="color:#ae81ff">0</span>)]<span style="color:#f92672">+</span>c)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>print(f[m][n])
</span></span></code></pre></div><h4 id="庆功会">庆功会<a hidden class="anchor" aria-hidden="true" href="#庆功会">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">6e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>n,m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    v,w,s<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,s<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(m, v<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            f[k]<span style="color:#f92672">=</span>max(f[k], f[k<span style="color:#f92672">-</span>v]<span style="color:#f92672">+</span>w)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>print(f[m])
</span></span></code></pre></div><h4 id="分组背包">分组背包<a hidden class="anchor" aria-hidden="true" href="#分组背包">#</a></h4>
<p>分组背包的顺序：</p>
<ol>
<li><strong>物品组</strong></li>
<li><strong>体积</strong></li>
<li><strong>决策</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>v<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N,V <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N): <span style="color:#75715e"># 物品组</span>
</span></span><span style="display:flex;"><span>    s<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(s):
</span></span><span style="display:flex;"><span>        v[j],w[j]<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(V,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>): <span style="color:#75715e">#体积</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(s): <span style="color:#75715e">#决策</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> j<span style="color:#f92672">&gt;=</span>v[k]:
</span></span><span style="display:flex;"><span>                f[j]<span style="color:#f92672">=</span>max(f[j], f[j<span style="color:#f92672">-</span>v[k]]<span style="color:#f92672">+</span>w[k])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(f[V])
</span></span></code></pre></div><h4 id="机器分配">机器分配<a hidden class="anchor" aria-hidden="true" href="#机器分配">#</a></h4>
<p>多重背包变种</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>c<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,m<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    w[i]<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> f[j<span style="color:#f92672">-</span>k]<span style="color:#f92672">+</span>w[i][k] <span style="color:#f92672">&gt;</span> f[j]:
</span></span><span style="display:flex;"><span>                f[j]<span style="color:#f92672">=</span>f[j<span style="color:#f92672">-</span>k]<span style="color:#f92672">+</span>w[i][k]
</span></span><span style="display:flex;"><span>                c[i][j]<span style="color:#f92672">=</span>k
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>print(f[m])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span>m
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    print(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, c[i][t])
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">-=</span>c[i][t]
</span></span></code></pre></div><h4 id="金明的预算方案">金明的预算方案<a hidden class="anchor" aria-hidden="true" href="#金明的预算方案">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">32010</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(M)]
</span></span><span style="display:flex;"><span>mas<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ser<span style="color:#f92672">=</span>[[] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,m<span style="color:#f92672">=</span>map(int,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    v,p,q<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> q<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        mas[i]<span style="color:#f92672">=</span>[v,v<span style="color:#f92672">*</span>p]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        ser[q]<span style="color:#f92672">.</span>append((v, v<span style="color:#f92672">*</span>p))
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range( (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> len(ser[i]) )):
</span></span><span style="display:flex;"><span>            v,p<span style="color:#f92672">=</span>mas[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(len(ser[i])):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> k<span style="color:#f92672">&gt;&gt;</span>l <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>                    v<span style="color:#f92672">+=</span>ser[i][l][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>                    p<span style="color:#f92672">+=</span>ser[i][l][<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> j<span style="color:#f92672">&gt;=</span>v:
</span></span><span style="display:flex;"><span>                f[j]<span style="color:#f92672">=</span>max(f[j], f[j<span style="color:#f92672">-</span>v]<span style="color:#f92672">+</span>p)
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>print(f[n])
</span></span></code></pre></div><h4 id="摘花生">摘花生<a hidden class="anchor" aria-hidden="true" href="#摘花生">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">105</span>    
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[ [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(t):
</span></span><span style="display:flex;"><span>    r,c<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> [int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,c<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            f[i][j]<span style="color:#f92672">+=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    print(f[r][c])
</span></span></code></pre></div><h4 id="最小通行费">最小通行费<a hidden class="anchor" aria-hidden="true" href="#最小通行费">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">=</span> [[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span>f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    f[i]<span style="color:#f92672">=</span>[INF]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i][j]<span style="color:#f92672">+=</span>min(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j],f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>print(f[n][n])
</span></span></code></pre></div><h4 id="方格">方格<a hidden class="anchor" aria-hidden="true" href="#方格">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">=</span> [[[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    r,c,x<span style="color:#f92672">=</span>map(int,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> r<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> c<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> x<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    g[r][c]<span style="color:#f92672">=</span>x
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span>k <span style="color:#f92672">and</span> j<span style="color:#f92672">==</span>l:
</span></span><span style="display:flex;"><span>                    f[i][j][k][l] <span style="color:#f92672">=</span> max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]) <span style="color:#f92672">+</span> g[i][j]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    f[i][j][k][l] <span style="color:#f92672">=</span> max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]) <span style="color:#f92672">+</span> g[i][j] <span style="color:#f92672">+</span> g[k][l]
</span></span><span style="display:flex;"><span>print(f[n][n][n][n])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">55</span>
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>m,n<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    g[i]<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span>k <span style="color:#f92672">and</span> j<span style="color:#f92672">==</span>l:
</span></span><span style="display:flex;"><span>                    f[i][j][k][l]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span>g[i][j]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    f[i][j][k][l]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][l], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][k][l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span>g[i][j]<span style="color:#f92672">+</span>g[k][l]
</span></span><span style="display:flex;"><span>print(f[m][n][m][n])
</span></span></code></pre></div><h4 id="lis">LIS<a hidden class="anchor" aria-hidden="true" href="#lis">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N<span style="color:#f92672">=</span>int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i],f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="lcs">LCS<a hidden class="anchor" aria-hidden="true" href="#lcs">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>b<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>n,m<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>input()
</span></span><span style="display:flex;"><span>b<span style="color:#f92672">=</span>input()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>        f[i][j]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j], f[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">==</span>b[j]:
</span></span><span style="display:flex;"><span>            f[i][j]<span style="color:#f92672">=</span>f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(f[n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><h4 id="最大上升子序列和">最大上升子序列和<a hidden class="anchor" aria-hidden="true" href="#最大上升子序列和">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> copy
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>ans<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>copy<span style="color:#f92672">.</span>deepcopy(a)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span>a[i])
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>print(ans)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    f[i]<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span>a[i])
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="最大上升子序列ii">最大上升子序列II<a hidden class="anchor" aria-hidden="true" href="#最大上升子序列ii">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>[INF <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,i
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> q[mid]<span style="color:#f92672">&lt;</span>a[i]:
</span></span><span style="display:flex;"><span>            l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            r<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    q[l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>min(q[l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>], a[i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(ans)
</span></span><span style="display:flex;"><span>    
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>len <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,len
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> q[mid]<span style="color:#f92672">&lt;</span>a[i]:
</span></span><span style="display:flex;"><span>            l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            r<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    len<span style="color:#f92672">=</span>max(len, l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    q[l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(len)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>len <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,len
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> q[mid]<span style="color:#f92672">&gt;=</span>a[i]:
</span></span><span style="display:flex;"><span>            r<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>    len <span style="color:#f92672">=</span> max(len, l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    q[l<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(len)
</span></span></code></pre></div><p>二分原则：</p>
<p>有单调性，并且二分之后能保持单调性</p>
<h4 id="怪盗基德的滑翔翼">怪盗基德的滑翔翼<a hidden class="anchor" aria-hidden="true" href="#怪盗基德的滑翔翼">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> t:
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    ans<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>    a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>                f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n,i,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>                f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>    print(ans)
</span></span></code></pre></div><h4 id="登山">登山<a hidden class="anchor" aria-hidden="true" href="#登山">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n,i,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            g[i]<span style="color:#f92672">=</span>max(g[i], g[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i]<span style="color:#f92672">+</span>g[i]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="合唱队形">合唱队形<a hidden class="anchor" aria-hidden="true" href="#合唱队形">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n,i,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>a[j]:
</span></span><span style="display:flex;"><span>            g[i]<span style="color:#f92672">=</span>max(g[i], g[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i]<span style="color:#f92672">+</span>g[i]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(n<span style="color:#f92672">-</span>ans)
</span></span></code></pre></div><h4 id="友好城市">友好城市<a hidden class="anchor" aria-hidden="true" href="#友好城市">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">5e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    x,y<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    a<span style="color:#f92672">.</span>append((x,y))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>sort(key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x:x[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,i):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">&gt;</span>a[j][<span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(f[i], ans)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="拦截导弹">拦截导弹<a hidden class="anchor" aria-hidden="true" href="#拦截导弹">#</a></h4>
<p>贪心证明</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>len(a)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,i,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;=</span>a[j]:
</span></span><span style="display:flex;"><span>            f[i]<span style="color:#f92672">=</span>max(f[i], f[j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[i])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(ans)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n):
</span></span><span style="display:flex;"><span>    k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k<span style="color:#f92672">&lt;</span>cnt <span style="color:#f92672">and</span> g[k]<span style="color:#f92672">&lt;</span>a[i]:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> k<span style="color:#f92672">&gt;=</span>cnt:
</span></span><span style="display:flex;"><span>        cnt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    g[k]<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(cnt)
</span></span></code></pre></div><h4 id="导弹防御系统">导弹防御系统<a hidden class="anchor" aria-hidden="true" href="#导弹防御系统">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>up<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>down<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(u, su, sd):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> ans
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> su <span style="color:#f92672">+</span> sd<span style="color:#f92672">&gt;=</span>ans:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> u<span style="color:#f92672">==</span>n:
</span></span><span style="display:flex;"><span>        ans<span style="color:#f92672">=</span>su<span style="color:#f92672">+</span>sd
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k<span style="color:#f92672">&lt;</span>su <span style="color:#f92672">and</span> up[k]<span style="color:#f92672">&gt;=</span>a[u]:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">=</span>up[k]
</span></span><span style="display:flex;"><span>    up[k]<span style="color:#f92672">=</span>a[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> k<span style="color:#f92672">&gt;=</span>su:
</span></span><span style="display:flex;"><span>        dfs(u<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, su<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, sd)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        dfs(u<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, su, sd)
</span></span><span style="display:flex;"><span>    up[k]<span style="color:#f92672">=</span>t
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> k<span style="color:#f92672">&lt;</span>sd <span style="color:#f92672">and</span> down[k]<span style="color:#f92672">&lt;=</span>a[u]:
</span></span><span style="display:flex;"><span>        k<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">=</span>down[k]
</span></span><span style="display:flex;"><span>    down[k]<span style="color:#f92672">=</span>a[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> k<span style="color:#f92672">&gt;=</span>sd:
</span></span><span style="display:flex;"><span>        dfs(u<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, su, sd<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        dfs(u<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, su, sd)
</span></span><span style="display:flex;"><span>    down[k]<span style="color:#f92672">=</span>t
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>    n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> n
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> n<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    a<span style="color:#f92672">=</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    print(ans)
</span></span></code></pre></div><h4 id="最长公共上升子序列">最长公共上升子序列<a hidden class="anchor" aria-hidden="true" href="#最长公共上升子序列">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">3e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>ans<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>b<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    maxv<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i][j]<span style="color:#f92672">=</span>f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">==</span>b[j]:
</span></span><span style="display:flex;"><span>            f[i][j]<span style="color:#f92672">=</span>max(f[i][j], maxv)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> a[i]<span style="color:#f92672">&gt;</span>b[j]:
</span></span><span style="display:flex;"><span>            maxv<span style="color:#f92672">=</span>max(maxv, f[i][j]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, f[n][i])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h3 id="状态机模型">状态机模型<a hidden class="anchor" aria-hidden="true" href="#状态机模型">#</a></h3>
<p>闫氏DP分析法——状态机分析法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> t:
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>    n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>    a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>    f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>    f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>a[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[i][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>],f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>        f[i][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">1</span>])<span style="color:#f92672">+</span>a[i]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(max(f[n][<span style="color:#ae81ff">0</span>], f[n][<span style="color:#ae81ff">1</span>]))
</span></span></code></pre></div><h4 id="买卖股票-iv">买卖股票 IV<a hidden class="anchor" aria-hidden="true" href="#买卖股票-iv">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>K <span style="color:#f92672">=</span> <span style="color:#ae81ff">110</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[[<span style="color:#f92672">-</span>INF]<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(K)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,k <span style="color:#f92672">=</span> map(int ,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>t<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        f[t][j][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span>max(f[t<span style="color:#f92672">^</span><span style="color:#ae81ff">1</span>][j][<span style="color:#ae81ff">0</span>], f[t<span style="color:#f92672">^</span><span style="color:#ae81ff">1</span>][j][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>w[i])
</span></span><span style="display:flex;"><span>        f[t][j][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>max(f[t<span style="color:#f92672">^</span><span style="color:#ae81ff">1</span>][j][<span style="color:#ae81ff">1</span>], f[t<span style="color:#f92672">^</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-</span>w[i])
</span></span><span style="display:flex;"><span>        t<span style="color:#f92672">^=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span>max(f[t<span style="color:#f92672">^</span><span style="color:#ae81ff">1</span>][i][<span style="color:#ae81ff">0</span>] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>print(res)
</span></span></code></pre></div><h4 id="股票交易v">股票交易V<a hidden class="anchor" aria-hidden="true" href="#股票交易v">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#f92672">-</span>INF]<span style="color:#f92672">*</span><span style="color:#ae81ff">3</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">2</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    f[i][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>]<span style="color:#f92672">-</span>w[i])
</span></span><span style="display:flex;"><span>    f[i][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>    f[i][<span style="color:#ae81ff">2</span>]<span style="color:#f92672">=</span>max(f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">1</span>], f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">2</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(max(f[n][<span style="color:#ae81ff">1</span>], f[n][<span style="color:#ae81ff">2</span>]))
</span></span></code></pre></div><h3 id="状态压缩dp">状态压缩DP<a hidden class="anchor" aria-hidden="true" href="#状态压缩dp">#</a></h3>
<h4 id="小国王">小国王<a hidden class="anchor" aria-hidden="true" href="#小国王">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">13</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>N 
</span></span><span style="display:flex;"><span>K <span style="color:#f92672">=</span> <span style="color:#ae81ff">110</span>
</span></span><span style="display:flex;"><span>state<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>h<span style="color:#f92672">=</span>[[] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(M)]
</span></span><span style="display:flex;"><span>cnt <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>M
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>M <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(K)] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> n
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (x<span style="color:#f92672">&gt;&gt;</span>i)<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">and</span> (x<span style="color:#f92672">&gt;&gt;</span>i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">count</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> n
</span></span><span style="display:flex;"><span>    cnt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (x<span style="color:#f92672">&gt;&gt;</span>i)<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            cnt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> cnt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> check(i):
</span></span><span style="display:flex;"><span>        state<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>        cnt[i]<span style="color:#f92672">=</span>count(i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(state)):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(state)):
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> state[i]
</span></span><span style="display:flex;"><span>        b <span style="color:#f92672">=</span> state[j]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (a<span style="color:#f92672">&amp;</span>b)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> check(a<span style="color:#f92672">|</span>b):
</span></span><span style="display:flex;"><span>            h[i]<span style="color:#f92672">.</span>append(j)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(len(state)):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> h[k]:
</span></span><span style="display:flex;"><span>                c <span style="color:#f92672">=</span> cnt[state[k]]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> j<span style="color:#f92672">&gt;=</span>c:
</span></span><span style="display:flex;"><span>                    f[i][j][state[k]]<span style="color:#f92672">+=</span>f[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][j<span style="color:#f92672">-</span>c][state[t]]
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>print(f[n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][m][<span style="color:#ae81ff">0</span>])
</span></span></code></pre></div><h4 id="愤怒的小鸟">愤怒的小鸟<a hidden class="anchor" aria-hidden="true" href="#愤怒的小鸟">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>eps <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e-6</span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cmp</span>(a,b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> abs(a<span style="color:#f92672">-</span>b)<span style="color:#f92672">&lt;</span>eps:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> a<span style="color:#f92672">&gt;</span>b:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>t <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(t):
</span></span><span style="display:flex;"><span>    f <span style="color:#f92672">=</span> [INF]<span style="color:#f92672">*</span>M
</span></span><span style="display:flex;"><span>    path <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>    q <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    n,m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        x,y <span style="color:#f92672">=</span> map(float, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>        q[i]<span style="color:#f92672">=</span>(x,y)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        path[i][i]<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>i <span style="color:#75715e">#关键点：与其他点的抛物线可能都不合法，所以需要独立出一条抛物线</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>            x1,y1 <span style="color:#f92672">=</span> q[i]
</span></span><span style="display:flex;"><span>            x2,y2 <span style="color:#f92672">=</span> q[j]
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> cmp(x1,x2)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            a <span style="color:#f92672">=</span> (y1<span style="color:#f92672">/</span>x1<span style="color:#f92672">-</span>y2<span style="color:#f92672">/</span>x2)<span style="color:#f92672">/</span>(x1<span style="color:#f92672">-</span>x2)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> cmp(a,<span style="color:#ae81ff">0</span>)<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            b <span style="color:#f92672">=</span> y1<span style="color:#f92672">/</span>x1<span style="color:#f92672">-</span>a<span style="color:#f92672">*</span>x1
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            state<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>                x3,y3 <span style="color:#f92672">=</span> q[k]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> cmp(a<span style="color:#f92672">*</span>x3<span style="color:#f92672">*</span>x3<span style="color:#f92672">+</span>b<span style="color:#f92672">*</span>x3, y3) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                    state<span style="color:#f92672">+=</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>k)
</span></span><span style="display:flex;"><span>            path[i][j]<span style="color:#f92672">=</span>state
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    f[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> (i<span style="color:#f92672">&gt;&gt;</span>j)<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>                x<span style="color:#f92672">=</span>j
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>            f[i <span style="color:#f92672">|</span> path[x][j]] <span style="color:#f92672">=</span> min(f[i <span style="color:#f92672">|</span> path[x][j]], f[i]<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>    print(f[(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><h3 id="集合类状态压缩dp">集合类状态压缩DP<a hidden class="anchor" aria-hidden="true" href="#集合类状态压缩dp">#</a></h3>
<h4 id="最短hamilton距离">最短Hamilton距离<a hidden class="anchor" aria-hidden="true" href="#最短hamilton距离">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">22</span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(M)]
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[[]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    w[i]<span style="color:#f92672">=</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>f[<span style="color:#ae81ff">1</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;&gt;</span>j<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;&gt;</span>k<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>                    f[i][j]<span style="color:#f92672">=</span>min(f[i][j], f[i<span style="color:#f92672">-</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>j)][k]<span style="color:#f92672">+</span>w[k][j])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(f[(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><h3 id="区间dp">区间DP<a hidden class="anchor" aria-hidden="true" href="#区间dp">#</a></h3>
<p>石子合并</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1010</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    f[i][i]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    s[i]<span style="color:#f92672">=</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>a[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(i,j):
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> min(f[i][j], f[i][k] <span style="color:#f92672">+</span> f[k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> s[j]<span style="color:#f92672">-</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>print(f[<span style="color:#ae81ff">1</span>][n])
</span></span></code></pre></div><h4 id="环形石子合并">环形石子合并<a hidden class="anchor" aria-hidden="true" href="#环形石子合并">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">410</span>
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x3f3f3f3f</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#f92672">-</span>INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>g<span style="color:#f92672">=</span>[[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    w[i] <span style="color:#f92672">=</span> w[i<span style="color:#f92672">+</span>n] <span style="color:#f92672">=</span> a[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    s[i]<span style="color:#f92672">=</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> l<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            f[i][j]<span style="color:#f92672">=</span>g[i][j]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(i,j):
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i][k]<span style="color:#f92672">+</span>f[k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j]<span style="color:#f92672">+</span>s[j]<span style="color:#f92672">-</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>            g[i][j] <span style="color:#f92672">=</span> min(g[i][j], g[i][k]<span style="color:#f92672">+</span>g[k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j]<span style="color:#f92672">+</span>s[j]<span style="color:#f92672">-</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>minv, maxv <span style="color:#f92672">=</span> INF, <span style="color:#f92672">-</span>INF
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    minv <span style="color:#f92672">=</span> min(minv, g[i][i<span style="color:#f92672">+</span>n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    maxv <span style="color:#f92672">=</span> max(maxv, f[i][i<span style="color:#f92672">+</span>n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(minv, maxv, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</span></span></code></pre></div><h4 id="能量项链">能量项链<a hidden class="anchor" aria-hidden="true" href="#能量项链">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">210</span>
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    w[i]<span style="color:#f92672">=</span>w[i<span style="color:#f92672">+</span>n]<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,j):
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i][k]<span style="color:#f92672">+</span>f[k][j]<span style="color:#f92672">+</span>w[i]<span style="color:#f92672">*</span>w[k]<span style="color:#f92672">*</span>w[j])
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>maxv <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    maxv <span style="color:#f92672">=</span> max(maxv, f[i][i<span style="color:#f92672">+</span>n])
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(maxv)
</span></span></code></pre></div><h4 id="凸多边形的划分">凸多边形的划分<a hidden class="anchor" aria-hidden="true" href="#凸多边形的划分">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">55</span>
</span></span><span style="display:flex;"><span>INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e30</span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[INF]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    f[i][i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">3</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,j):
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> min(f[i][j], f[i][k]<span style="color:#f92672">+</span>f[k][j]<span style="color:#f92672">+</span>w[i]<span style="color:#f92672">*</span>w[k]<span style="color:#f92672">*</span>w[j])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(f[<span style="color:#ae81ff">1</span>][n])
</span></span></code></pre></div><h4 id="加分二叉树">加分二叉树<a hidden class="anchor" aria-hidden="true" href="#加分二叉树">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l<span style="color:#f92672">&gt;</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    k<span style="color:#f92672">=</span>root[l][r]
</span></span><span style="display:flex;"><span>    print(k,end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>    dfs(l,k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    dfs(k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,r)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>w <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>root<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">-</span>l<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>i<span style="color:#f92672">+</span>l<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(i,j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            left <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> k<span style="color:#f92672">==</span>i <span style="color:#66d9ef">else</span> f[i][k<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>            right <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> k<span style="color:#f92672">==</span>j <span style="color:#66d9ef">else</span> f[k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][j]
</span></span><span style="display:flex;"><span>            s <span style="color:#f92672">=</span> left<span style="color:#f92672">*</span>right<span style="color:#f92672">+</span>w[k]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span>j:
</span></span><span style="display:flex;"><span>                s<span style="color:#f92672">=</span>w[k]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> f[i][j]<span style="color:#f92672">&lt;</span>s:
</span></span><span style="display:flex;"><span>                f[i][j]<span style="color:#f92672">=</span>s
</span></span><span style="display:flex;"><span>                root[i][j]<span style="color:#f92672">=</span>k
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(f[<span style="color:#ae81ff">1</span>][n])
</span></span><span style="display:flex;"><span>dfs(<span style="color:#ae81ff">1</span>,n)
</span></span></code></pre></div><h3 id="树形dp">树形DP<a hidden class="anchor" aria-hidden="true" href="#树形dp">#</a></h3>
<h4 id="树的最长路径">树的最长路径<a hidden class="anchor" aria-hidden="true" href="#树的最长路径">#</a></h4>
<p>注意注意再注意，while循环链不符合要求是需要 i=ne[i]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>setrecursionlimit(int(<span style="color:#ae81ff">1e5</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">10010</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>e <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>ne <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>w <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>h <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>N 
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a, b, c):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>b
</span></span><span style="display:flex;"><span>    w[idx]<span style="color:#f92672">=</span>c
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>h[a]
</span></span><span style="display:flex;"><span>    h[a]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(root, father):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> ans
</span></span><span style="display:flex;"><span>    dis, d1, d2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>h[root]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        j <span style="color:#f92672">=</span> e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> j<span style="color:#f92672">==</span>father:
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">=</span>ne[i] <span style="color:#75715e"># 重点</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        d <span style="color:#f92672">=</span> dfs(j, root)<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>        dis <span style="color:#f92672">=</span> max(dis, d)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> d<span style="color:#f92672">&gt;</span>d1:
</span></span><span style="display:flex;"><span>            d2<span style="color:#f92672">=</span>d1
</span></span><span style="display:flex;"><span>            d1<span style="color:#f92672">=</span>d
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            d2 <span style="color:#f92672">=</span> max(d2, d)
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, d1<span style="color:#f92672">+</span>d2)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> dis
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    a,b,c <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    add(a,b,c)
</span></span><span style="display:flex;"><span>    add(b,a,c)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>dfs(<span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="树的中心">树的中心<a hidden class="anchor" aria-hidden="true" href="#树的中心">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">10010</span><span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>e <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>ne<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>h<span style="color:#f92672">=</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>w<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>d1<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>d2<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>s1<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>up<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a,b,c):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>b
</span></span><span style="display:flex;"><span>    w[idx]<span style="color:#f92672">=</span>c
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>h[a]
</span></span><span style="display:flex;"><span>    h[a]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs1</span>(u, father):
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>h[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> j<span style="color:#f92672">==</span>father:
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        dfs1(j,u)
</span></span><span style="display:flex;"><span>        dis <span style="color:#f92672">=</span> d1[j]<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> dis<span style="color:#f92672">&gt;</span>d1[u]:
</span></span><span style="display:flex;"><span>            d2[u]<span style="color:#f92672">=</span>d1[u]
</span></span><span style="display:flex;"><span>            d1[u], s1[u]<span style="color:#f92672">=</span>dis, j
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> dis<span style="color:#f92672">&gt;</span>d2[u]:
</span></span><span style="display:flex;"><span>            d2[u]<span style="color:#f92672">=</span>dis
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs2</span>(u, father):
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>h[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>e[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> j<span style="color:#f92672">==</span>father:
</span></span><span style="display:flex;"><span>            i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> s1[u]<span style="color:#f92672">==</span>j:
</span></span><span style="display:flex;"><span>            up[j]<span style="color:#f92672">=</span>max(up[u], d2[u])<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            up[j]<span style="color:#f92672">=</span>max(up[u], d1[u])<span style="color:#f92672">+</span>w[i]
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>        dfs2(j, u)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    a,b,c <span style="color:#f92672">=</span> map(int ,input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    add(a,b,c)
</span></span><span style="display:flex;"><span>    add(b,a,c)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>dfs1(<span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>dfs2(<span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e10</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> min(ans, max(up[i], d1[i]))
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="数字转换">数字转换<a hidden class="anchor" aria-hidden="true" href="#数字转换">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">5e4</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>st<span style="color:#f92672">=</span>[<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>e<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>ne<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>h<span style="color:#f92672">=</span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>idx<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(a,b):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> idx
</span></span><span style="display:flex;"><span>    e[idx]<span style="color:#f92672">=</span>b
</span></span><span style="display:flex;"><span>    ne[idx]<span style="color:#f92672">=</span>h[a]
</span></span><span style="display:flex;"><span>    h[a]<span style="color:#f92672">=</span>idx
</span></span><span style="display:flex;"><span>    idx<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(u):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> ans
</span></span><span style="display:flex;"><span>    d1,d2<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    i<span style="color:#f92672">=</span>h[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> i<span style="color:#f92672">!=-</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        j<span style="color:#f92672">=</span>e[i]
</span></span><span style="display:flex;"><span>        dis <span style="color:#f92672">=</span> dfs(j)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> dis<span style="color:#f92672">&gt;</span>d1:
</span></span><span style="display:flex;"><span>            d2,d1<span style="color:#f92672">=</span>d1,dis
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> dis<span style="color:#f92672">&gt;</span>d2:
</span></span><span style="display:flex;"><span>            d2<span style="color:#f92672">=</span>dis
</span></span><span style="display:flex;"><span>        i<span style="color:#f92672">=</span>ne[i]
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, d1<span style="color:#f92672">+</span>d2)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> d1
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;</span>n<span style="color:#f92672">//</span>j:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        s[i<span style="color:#f92672">*</span>j]<span style="color:#f92672">+=</span>i
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">2</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[i]<span style="color:#f92672">&lt;</span>i:
</span></span><span style="display:flex;"><span>        add(s[i], i)
</span></span><span style="display:flex;"><span>        st[i]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for i in range(1,n+1):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     if not st[i]:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#         dfs(i)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>dfs(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h4 id="没有上司的舞会">没有上司的舞会<a hidden class="anchor" aria-hidden="true" href="#没有上司的舞会">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>setrecursionlimit(int(<span style="color:#ae81ff">1e4</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">7e3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>v<span style="color:#f92672">=</span>[[] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">=</span>[[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>st<span style="color:#f92672">=</span>[<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>h<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>root<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(u):
</span></span><span style="display:flex;"><span>    f[u][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">+=</span>h[u]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> v[u]:
</span></span><span style="display:flex;"><span>        dfs(i)
</span></span><span style="display:flex;"><span>        f[u][<span style="color:#ae81ff">1</span>]<span style="color:#f92672">+=</span>f[i][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        f[u][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+=</span>max(f[i][<span style="color:#ae81ff">0</span>], f[i][<span style="color:#ae81ff">1</span>])        
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    h[i]<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    l,k <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    v[k]<span style="color:#f92672">.</span>append(l)
</span></span><span style="display:flex;"><span>    st[l]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> st[i]:
</span></span><span style="display:flex;"><span>        root<span style="color:#f92672">=</span>i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dfs(root)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>print(max(f[root][<span style="color:#ae81ff">0</span>], f[root][<span style="color:#ae81ff">1</span>]))
</span></span></code></pre></div><h3 id="单调队列优化的dp">单调队列优化的DP<a hidden class="anchor" aria-hidden="true" href="#单调队列优化的dp">#</a></h3>
<h4 id="最大子序和">最大子序和<a hidden class="anchor" aria-hidden="true" href="#最大子序和">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">300010</span>
</span></span><span style="display:flex;"><span>q, s <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N, [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">**</span><span style="color:#ae81ff">33</span>
</span></span><span style="display:flex;"><span>hh, tt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n,m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    s[i]<span style="color:#f92672">+=</span>s[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> q[hh]<span style="color:#f92672">&lt;</span>i<span style="color:#f92672">-</span>m:
</span></span><span style="display:flex;"><span>        hh<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>    
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> max(ans, s[i]<span style="color:#f92672">-</span>s[q[hh]])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> hh<span style="color:#f92672">&lt;=</span>tt <span style="color:#f92672">and</span> s[q[tt]]<span style="color:#f92672">&gt;=</span>s[i]:
</span></span><span style="display:flex;"><span>        tt<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    tt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    q[tt]<span style="color:#f92672">=</span>i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(ans)
</span></span></code></pre></div><h3 id="数位dp">数位DP<a hidden class="anchor" aria-hidden="true" href="#数位dp">#</a></h3>
<p>1081</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> typing <span style="color:#f92672">import</span> List
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">init</span>() <span style="color:#f92672">-&gt;</span> List[List[int]]:
</span></span><span style="display:flex;"><span>    f <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(N):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> j <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                f[i][j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                f[i][j] <span style="color:#f92672">=</span> f[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> f[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dp</span>(n: int, k: int, b: int, f: List[List[int]]) <span style="color:#f92672">-&gt;</span> int:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    nums <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> n:
</span></span><span style="display:flex;"><span>        nums<span style="color:#f92672">.</span>append(n <span style="color:#f92672">%</span> b)
</span></span><span style="display:flex;"><span>        n <span style="color:#f92672">//=</span> b
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    last <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(nums) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">=</span> nums[i]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">+=</span> f[i][k <span style="color:#f92672">-</span> last]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> k <span style="color:#f92672">-</span> last <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                    res <span style="color:#f92672">+=</span> f[i][k <span style="color:#f92672">-</span> last <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                last <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> last <span style="color:#f92672">&gt;</span> k:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> last <span style="color:#f92672">==</span> k:
</span></span><span style="display:flex;"><span>            res <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">solve</span>(l: int, r: int, k: int, b: int) <span style="color:#f92672">-&gt;</span> int:
</span></span><span style="display:flex;"><span>    f <span style="color:#f92672">=</span> init()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> dp(r, k, b, f) <span style="color:#f92672">-</span> dp(l <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, k, b, f)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    l, r, k, b <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    print(solve(l, r, k, b))
</span></span></code></pre></div><h3 id="记忆化">记忆化<a hidden class="anchor" aria-hidden="true" href="#记忆化">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> heapq
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, i, j, num):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>i <span style="color:#f92672">=</span> i
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>j <span style="color:#f92672">=</span> j
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>num <span style="color:#f92672">=</span> num
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>    f <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> (m <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>)]  <span style="color:#75715e"># distance</span>
</span></span><span style="display:flex;"><span>    g <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">*</span> (m <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>)]  <span style="color:#75715e"># store heights</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    pq <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        nums <span style="color:#f92672">=</span> list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> j, num <span style="color:#f92672">in</span> enumerate(nums, <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            g[i][j] <span style="color:#f92672">=</span> num
</span></span><span style="display:flex;"><span>            heapq<span style="color:#f92672">.</span>heappush(pq, Node(i, j, num))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ma <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> pq:
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> heapq<span style="color:#f92672">.</span>heappop(pq)
</span></span><span style="display:flex;"><span>        i, j, nu <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>i, t<span style="color:#f92672">.</span>j, t<span style="color:#f92672">.</span>num
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> g[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">&lt;</span> nu:
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> g[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">&lt;</span> nu:
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>][j] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> g[i][j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> nu:
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i][j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> g[i][j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;</span> nu:
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#f92672">=</span> max(f[i][j], f[i][j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        ma <span style="color:#f92672">=</span> max(ma, f[i][j])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(ma)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><h3 id="数论">数论<a hidden class="anchor" aria-hidden="true" href="#数论">#</a></h3>
<p>试除法求约数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get</span>(x):
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,x<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;</span>x<span style="color:#f92672">//</span>i:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x<span style="color:#f92672">%</span>i<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            ans<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> i<span style="color:#f92672">!=</span>x<span style="color:#f92672">//</span>i:
</span></span><span style="display:flex;"><span>                ans<span style="color:#f92672">.</span>append(x<span style="color:#f92672">//</span>i)
</span></span><span style="display:flex;"><span>    ans<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> ans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>    ans <span style="color:#f92672">=</span> get(x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> ans :
</span></span><span style="display:flex;"><span>        print(i, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>    print()
</span></span></code></pre></div><h3 id="树状数组">树状数组<a hidden class="anchor" aria-hidden="true" href="#树状数组">#</a></h3>
<p>楼兰图腾</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>input<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> <span style="color:#ae81ff">200010</span>
</span></span><span style="display:flex;"><span>suml, sumg <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>tr <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>M
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">+</span>[int(_) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> input()<span style="color:#f92672">.</span>split()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lowbit</span>(x):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> x<span style="color:#f92672">&amp;-</span>x
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(x,v):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> x<span style="color:#f92672">&lt;</span>M:
</span></span><span style="display:flex;"><span>        tr[x]<span style="color:#f92672">+=</span>v
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">+=</span>lowbit(x)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query</span>(x):
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> x:
</span></span><span style="display:flex;"><span>        res<span style="color:#f92672">+=</span>tr[x]
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">-=</span>lowbit(x)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    y<span style="color:#f92672">=</span>a[i]
</span></span><span style="display:flex;"><span>    lw <span style="color:#f92672">=</span> query(y<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    lwr <span style="color:#f92672">=</span> y<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">-</span>lw <span style="color:#75715e"># the lower element on the right side</span>
</span></span><span style="display:flex;"><span>    gr <span style="color:#f92672">=</span> query(n)<span style="color:#f92672">-</span>query(y)
</span></span><span style="display:flex;"><span>    grr <span style="color:#f92672">=</span> (n<span style="color:#f92672">-</span>y) <span style="color:#f92672">-</span> gr
</span></span><span style="display:flex;"><span>    suml <span style="color:#f92672">+=</span> (lw<span style="color:#f92672">*</span>lwr)
</span></span><span style="display:flex;"><span>    sumg <span style="color:#f92672">+=</span> (gr<span style="color:#f92672">*</span>grr)
</span></span><span style="display:flex;"><span>    add(y,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(sumg, suml)
</span></span></code></pre></div><h3 id="线段树">线段树<a hidden class="anchor" aria-hidden="true" href="#线段树">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 定义树节点，l,r, val表示该节点记录的是区间[l, r]的最大值是val</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Tree</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>l <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>r <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>lazy <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 二叉树是堆形式，可以用一维数组存储，注意数组长度要开4倍空间</span>
</span></span><span style="display:flex;"><span>tree <span style="color:#f92672">=</span> [Tree() <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span><span style="color:#f92672">*</span><span style="color:#ae81ff">4</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 建树，用cur&lt;&lt;1访问左子树，cur&lt;&lt;1|1访问右子树，位运算操作很方便</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build</span>(cur, l, r):
</span></span><span style="display:flex;"><span>    tree[cur]<span style="color:#f92672">.</span>l, tree[cur]<span style="color:#f92672">.</span>r, tree[cur]<span style="color:#f92672">.</span>lazy, tree[cur]<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> l, r, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 当l==r的时候结束递归</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">&lt;</span> r:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> l <span style="color:#f92672">+</span> r <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        build(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>, l, mid)
</span></span><span style="display:flex;"><span>        build(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>, mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, r)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 当子节点计算完成后，用子节点的值来更新自己的值</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pushup</span>(cur):
</span></span><span style="display:flex;"><span>    tree[cur]<span style="color:#f92672">.</span>val <span style="color:#f92672">=</span> max(tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>val, tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>val)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 单点更新</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(cur, x, v):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">==</span> tree[cur]<span style="color:#f92672">.</span>r:
</span></span><span style="display:flex;"><span>        tree[cur]<span style="color:#f92672">.</span>val <span style="color:#f92672">+=</span> v
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> tree[cur]<span style="color:#f92672">.</span>r <span style="color:#f92672">+</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> mid:
</span></span><span style="display:flex;"><span>            add(cur<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>, x, v)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            add(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>, x, v)
</span></span><span style="display:flex;"><span>        pushup(cur)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 将lazy标记向下传递一层</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pushdown</span>(cur):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tree[cur]<span style="color:#f92672">.</span>lazy:
</span></span><span style="display:flex;"><span>        lazy <span style="color:#f92672">=</span> tree[cur]<span style="color:#f92672">.</span>lazy
</span></span><span style="display:flex;"><span>        tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>lazy <span style="color:#f92672">+=</span> lazy
</span></span><span style="display:flex;"><span>        tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>lazy <span style="color:#f92672">+=</span> lazy
</span></span><span style="display:flex;"><span>        tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>val <span style="color:#f92672">+=</span> lazy
</span></span><span style="display:flex;"><span>        tree[cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>val <span style="color:#f92672">+=</span> lazy
</span></span><span style="display:flex;"><span>        tree[cur]<span style="color:#f92672">.</span>lazy <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 区间更新</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update</span>(cur, l, r, v):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">&lt;=</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">and</span> tree[cur]<span style="color:#f92672">.</span>r <span style="color:#f92672">&lt;=</span> r:
</span></span><span style="display:flex;"><span>        tree[cur]<span style="color:#f92672">.</span>lazy <span style="color:#f92672">+=</span> v
</span></span><span style="display:flex;"><span>        tree[cur]<span style="color:#f92672">.</span>val <span style="color:#f92672">+=</span> v
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> r <span style="color:#f92672">&lt;</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">or</span> l <span style="color:#f92672">&gt;</span> tree[cur]<span style="color:#f92672">.</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tree[cur]<span style="color:#f92672">.</span>lazy:
</span></span><span style="display:flex;"><span>        pushdown(cur)
</span></span><span style="display:flex;"><span>    update(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>, l, r, v)
</span></span><span style="display:flex;"><span>    update(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>, l, r, v)
</span></span><span style="display:flex;"><span>    pushup(cur)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 区间查询</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query</span>(cur, l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">&lt;=</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">and</span> tree[cur]<span style="color:#f92672">.</span>r <span style="color:#f92672">&lt;=</span> r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> tree[cur]<span style="color:#f92672">.</span>val
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tree[cur]<span style="color:#f92672">.</span>l <span style="color:#f92672">&gt;</span> r <span style="color:#f92672">or</span> tree[cur]<span style="color:#f92672">.</span>r <span style="color:#f92672">&lt;</span> l:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tree[cur]<span style="color:#f92672">.</span>lazy:
</span></span><span style="display:flex;"><span>        pushdown(cur)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> max(query(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span>, l, r), query(cur<span style="color:#f92672">&lt;&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">|</span><span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 测试</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -----</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#        ---</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  -------</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   --</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#         --</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>build(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>update(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>update(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>update(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>update(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>update(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(query(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">pushup</span>(u):
</span></span><span style="display:flex;"><span>    tr[u] <span style="color:#f92672">=</span> tr[u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> tr[u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build</span>(u, l, r):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">==</span> r:
</span></span><span style="display:flex;"><span>        tr[u] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        build(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>, l, mid)
</span></span><span style="display:flex;"><span>        build(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>, mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, r)
</span></span><span style="display:flex;"><span>        pushup(u)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query</span>(u, l, r, ql, qr):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">&gt;=</span> ql <span style="color:#f92672">and</span> r <span style="color:#f92672">&lt;=</span> qr:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> tr[u]
</span></span><span style="display:flex;"><span>    mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> mid<span style="color:#f92672">==</span>l <span style="color:#f92672">and</span> mid<span style="color:#f92672">==</span>r:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ql <span style="color:#f92672">&lt;=</span> mid:
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">=</span> query(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>, l, mid, ql, qr)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> qr <span style="color:#f92672">&gt;</span> mid:
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">+=</span> query(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>, mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, r, ql, qr)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">modify</span>(u, x, l, r, val):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> l <span style="color:#f92672">==</span> r:
</span></span><span style="display:flex;"><span>        tr[u] <span style="color:#f92672">+=</span> val
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        mid <span style="color:#f92672">=</span> (l <span style="color:#f92672">+</span> r) <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;=</span> mid:
</span></span><span style="display:flex;"><span>            modify(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>, x, l, mid, val)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            modify(u <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>, x, mid <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, r, val)
</span></span><span style="display:flex;"><span>        pushup(u)
</span></span></code></pre></div><h2 id="搜索深入">搜索深入<a hidden class="anchor" aria-hidden="true" href="#搜索深入">#</a></h2>
<h3 id="池塘计数">池塘计数<a hidden class="anchor" aria-hidden="true" href="#池塘计数">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span>input <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">1e3</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>M <span style="color:#f92672">=</span> N<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N
</span></span><span style="display:flex;"><span>cnt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>vis <span style="color:#f92672">=</span> [ [<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N) ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bfs</span>(x, y):
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">=</span>deque()
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">.</span>append( (x,y) )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        tx, ty <span style="color:#f92672">=</span> q[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> j<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>: 
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>                xx, yy <span style="color:#f92672">=</span> tx<span style="color:#f92672">+</span>i, ty<span style="color:#f92672">+</span>j
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> xx<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> xx<span style="color:#f92672">&gt;=</span>n <span style="color:#f92672">or</span> yy<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> yy<span style="color:#f92672">&gt;=</span>m <span style="color:#f92672">or</span> vis[xx][yy] <span style="color:#f92672">or</span> g[xx][yy]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;.&#39;</span>: 
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>                vis[xx][yy]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>                q<span style="color:#f92672">.</span>append( (xx,yy) )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    g[i]<span style="color:#f92672">=</span>input()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> g[i][j]<span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;W&#39;</span> <span style="color:#f92672">or</span> vis[i][j]: 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        bfs(i, j)
</span></span><span style="display:flex;"><span>        cnt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(cnt)
</span></span></code></pre></div><h3 id="城堡问题">城堡问题<a hidden class="anchor" aria-hidden="true" href="#城堡问题">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span>input <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>:sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()<span style="color:#f92672">.</span>strip()
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">55</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>vis <span style="color:#f92672">=</span> [[<span style="color:#66d9ef">False</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>area <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>cnt<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bfs</span>(x, y):
</span></span><span style="display:flex;"><span>    vis[x][y]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    q <span style="color:#f92672">=</span> deque()
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">.</span>append((x, y))
</span></span><span style="display:flex;"><span>    dx, dy <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>], [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    ans<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        tx, ty <span style="color:#f92672">=</span> q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">4</span>):
</span></span><span style="display:flex;"><span>            xx <span style="color:#f92672">=</span> tx<span style="color:#f92672">+</span>dx[i]
</span></span><span style="display:flex;"><span>            yy <span style="color:#f92672">=</span> ty<span style="color:#f92672">+</span>dy[i]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> xx<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> xx<span style="color:#f92672">&gt;=</span>n <span style="color:#f92672">or</span> yy<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> yy<span style="color:#f92672">&gt;=</span>m <span style="color:#f92672">or</span> vis[xx][yy]:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (g[tx][ty]<span style="color:#f92672">&gt;&gt;</span>i)<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            ans<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            vis[xx][yy]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>            q<span style="color:#f92672">.</span>append((xx,yy))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> ans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>n, m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    g<span style="color:#f92672">.</span>append(list(map(int, input()<span style="color:#f92672">.</span>split())))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> vis[i][j]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        area <span style="color:#f92672">=</span> max(area, bfs(i, j))
</span></span><span style="display:flex;"><span>        cnt<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(cnt)
</span></span><span style="display:flex;"><span>print(area)
</span></span></code></pre></div><h3 id="山峰和山谷">山峰和山谷<a hidden class="anchor" aria-hidden="true" href="#山峰和山谷">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">1010</span>
</span></span><span style="display:flex;"><span>g <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>vis <span style="color:#f92672">=</span> [[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span>N <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(N)]
</span></span><span style="display:flex;"><span>pek, val <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bfs</span>(x, y):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> higher, lower
</span></span><span style="display:flex;"><span>    vis[x][y]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    q <span style="color:#f92672">=</span> deque()
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">.</span>append((x,y))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        tx,ty <span style="color:#f92672">=</span> q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> i<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> j<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>                xx, yy <span style="color:#f92672">=</span> tx<span style="color:#f92672">+</span>i, ty<span style="color:#f92672">+</span>j
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> xx<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> xx<span style="color:#f92672">&gt;=</span>n <span style="color:#f92672">or</span> yy<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> yy<span style="color:#f92672">&gt;=</span>n:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> g[xx][yy]<span style="color:#f92672">!=</span>g[tx][ty]:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> g[xx][yy]<span style="color:#f92672">&gt;</span>g[tx][ty]:
</span></span><span style="display:flex;"><span>                        higher<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">elif</span> g[xx][yy]<span style="color:#f92672">&lt;</span>g[tx][ty]:
</span></span><span style="display:flex;"><span>                        lower<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">elif</span> <span style="color:#f92672">not</span> vis[xx][yy]:
</span></span><span style="display:flex;"><span>                    vis[xx][yy]<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>                    q<span style="color:#f92672">.</span>append((xx,yy))
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>higher, lower <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>, <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    g<span style="color:#f92672">.</span>append(list(map(int, input()<span style="color:#f92672">.</span>split())))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(g)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> vis[i][j]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        higher, lower <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>, <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>        bfs(i, j)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> higher:pek<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> lower:val<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(pek, val)
</span></span></code></pre></div><h1 id="python特点">Python特点<a hidden class="anchor" aria-hidden="true" href="#python特点">#</a></h1>
<h2 id="idle-使用">IDLE 使用<a hidden class="anchor" aria-hidden="true" href="#idle-使用">#</a></h2>
<h2 id="输入输出">输入输出<a hidden class="anchor" aria-hidden="true" href="#输入输出">#</a></h2>
<p>输出列表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>print<span style="color:#960050;background-color:#1e0010">（</span><span style="color:#f92672">*</span>a<span style="color:#960050;background-color:#1e0010">）</span> <span style="color:#75715e"># 输出列表中的所有数，用空格分隔</span>
</span></span><span style="display:flex;"><span>print<span style="color:#960050;background-color:#1e0010">（</span><span style="color:#f92672">*</span>a<span style="color:#960050;background-color:#1e0010">，</span>sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span><span style="color:#960050;background-color:#1e0010">）</span> <span style="color:#75715e">#每个数单独放一行</span>
</span></span></code></pre></div><h2 id="运算符">*运算符<a hidden class="anchor" aria-hidden="true" href="#运算符">#</a></h2>
<ol>
<li>
<p>解包运算符：
当<code>*</code>运算符用于可迭代对象（如列表、元组、集合等）前面时，它可以将可迭代对象解包为多个元素。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>print(<span style="color:#f92672">*</span>a)  <span style="color:#75715e"># 解包并打印出每个元素：1 2 3</span>
</span></span></code></pre></div></li>
<li>
<p>可变参数：
当<code>*</code>运算符用于函数定义时，它表示接受任意数量的参数，并将它们作为元组传递给函数。这种用法通常称为可变参数。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">my_func</span>(<span style="color:#f92672">*</span>args):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> arg <span style="color:#f92672">in</span> args:
</span></span><span style="display:flex;"><span>        print(arg)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>my_func(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)  <span style="color:#75715e"># 打印出每个参数：1 2 3</span>
</span></span></code></pre></div></li>
<li>
<p>扩展运算符：
当<code>*</code>运算符用于可迭代对象前面时，它可以将可迭代对象的元素扩展到另一个可迭代对象中。这种用法通常称为扩展运算符。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> [<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> [<span style="color:#f92672">*</span>a, <span style="color:#f92672">*</span>b]  <span style="color:#75715e"># 扩展a和b的元素到c中</span>
</span></span><span style="display:flex;"><span>print(c)  <span style="color:#75715e"># 输出：[1, 2, 3, 4, 5, 6]</span>
</span></span></code></pre></div></li>
<li>
<p>乘法运算符：
当<code>*</code>运算符用于数字和可迭代对象之间时，它表示重复该可迭代对象的元素。例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> a <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span>  <span style="color:#75715e"># 重复a的元素3次</span>
</span></span><span style="display:flex;"><span>print(b)  <span style="color:#75715e"># 输出：[1, 2, 3, 1, 2, 3, 1, 2, 3]</span>
</span></span></code></pre></div></li>
</ol>
<h2 id="和"><em>和</em>*<a hidden class="anchor" aria-hidden="true" href="#和">#</a></h2>
<ol>
<li><code>*</code>和<code>**</code>在函数定义中的使用：
<ul>
<li><code>*args</code>用于接收任意数量的位置参数，并将它们作为元组传递给函数。</li>
<li><code>**kwargs</code>用于接收任意数量的关键字参数，并将它们作为字典传递给函数。</li>
</ul>
</li>
<li><code>*</code>和<code>**</code>在函数调用中的使用：
<ul>
<li>在函数调用时，<code>*</code>用于解包可迭代对象，并将其作为位置参数传递给函数。</li>
<li>在函数调用时，<code>**</code>用于解包字典，并将其作为关键字参数传递给函数。</li>
</ul>
</li>
</ol>
<h3 id="栈模拟递归">栈模拟递归<a hidden class="anchor" aria-hidden="true" href="#栈模拟递归">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> deque
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(idx,p):
</span></span><span style="display:flex;"><span>    q <span style="color:#f92672">=</span> deque()
</span></span><span style="display:flex;"><span>    q<span style="color:#f92672">.</span>append((idx,p))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>        idx,p <span style="color:#f92672">=</span> q<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        D[idx] <span style="color:#f92672">=</span> D[p] <span style="color:#f92672">+</span> V[idx]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> u <span style="color:#f92672">in</span> A[idx]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> u <span style="color:#f92672">==</span> p: <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            q<span style="color:#f92672">.</span>append((u,idx))
</span></span></code></pre></div><h2 id="引用赋值浅拷贝和深拷贝">引用赋值、浅拷贝和深拷贝<a hidden class="anchor" aria-hidden="true" href="#引用赋值浅拷贝和深拷贝">#</a></h2>
<p>Python赋值、浅拷贝、深拷贝的区别
[:]和.copy()都属于“浅拷贝”，只拷贝最外层元素，外层元素是独立内存；内层嵌套元素则通过引用方式共享，而非独立分配内存。使用 copy 模块的 copy.copy（ 浅拷贝 ）和 copy.deepcopy（深拷贝），其中deepcopy是构建了一个完全独立的对象。</p>
<p>1、b = a: 赋值引用，a 和 b 都指向同一个对象。</p>
<p><img loading="lazy" src="https://img-blog.csdnimg.cn/20200220212029408.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hiaW53b3JsZA==,size_16,color_FFFFFF,t_70" alt=""  />
</p>
<p>2、b = a.copy(): 浅拷贝, a 和 b 是一个独立的对象，但他们的子对象（内层嵌套对象）还是指向统一对象（是引用）。</p>
<p><img loading="lazy" src="https://img-blog.csdnimg.cn/2020022021203829.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hiaW53b3JsZA==,size_16,color_FFFFFF,t_70" alt=""  />
</p>
<p>3、b = copy.deepcopy(a): 深度拷贝, a 和 b 完全拷贝了父对象及其子对象，两者是完全独立的。</p>
<p><img loading="lazy" src="https://img-blog.csdnimg.cn/20200220212045154.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hiaW53b3JsZA==,size_16,color_FFFFFF,t_70" alt=""  />
</p>
<p>例子：</p>
<h4 id="引用赋值">引用赋值<a hidden class="anchor" aria-hidden="true" href="#引用赋值">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>b <span style="color:#f92672">=</span> a[:]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(b)
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(id(a)) <span style="color:#75715e">#41946376</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(id(b)) <span style="color:#75715e">#41921864</span>
</span></span><span style="display:flex;"><span>或
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>b <span style="color:#f92672">=</span> a<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(b) 
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(id(a)) <span style="color:#75715e">#39783752</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(id(b)) <span style="color:#75715e">#39759176</span>
</span></span></code></pre></div><h4 id="浅拷贝">浅拷贝<a hidden class="anchor" aria-hidden="true" href="#浅拷贝">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,[<span style="color:#e6db74">&#39;A&#39;</span>,<span style="color:#e6db74">&#39;B&#39;</span>]]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(<span style="color:#e6db74">&#39;a=</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(a))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>b <span style="color:#f92672">=</span> a[:]
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>b[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span> <span style="color:#75715e">#修改b的最外层元素，将1变成9</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>b[<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;D&#39;</span> <span style="color:#75715e">#修改b的内嵌层元素</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(<span style="color:#e6db74">&#39;a=</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(a))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(<span style="color:#e6db74">&#39;b=</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(b))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(<span style="color:#e6db74">&#39;id(a)=</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(id(a)))
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span>print(<span style="color:#e6db74">&#39;id(b)=</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(id(b)))
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, [<span style="color:#e6db74">&#39;A&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>]] <span style="color:#75715e">#原始a</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, [<span style="color:#e6db74">&#39;D&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>]] <span style="color:#75715e">#b修改内部元素A为D后，a中的A也变成了D，说明共享内部嵌套元素，但外部元素1没变。</span>
</span></span><span style="display:flex;"><span>b<span style="color:#f92672">=</span>[<span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">2</span>, [<span style="color:#e6db74">&#39;D&#39;</span>, <span style="color:#e6db74">&#39;B&#39;</span>]] <span style="color:#75715e">#修改后的b</span>
</span></span><span style="display:flex;"><span>id(a)<span style="color:#f92672">=</span><span style="color:#ae81ff">38669128</span>
</span></span><span style="display:flex;"><span>id(b)<span style="color:#f92672">=</span><span style="color:#ae81ff">38669192</span>
</span></span></code></pre></div><h4 id="深拷贝">深拷贝<a hidden class="anchor" aria-hidden="true" href="#深拷贝">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> copy
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>]] <span style="color:#75715e">#原始对象</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">=</span> a                       <span style="color:#75715e">#赋值，传对象的引用</span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> copy<span style="color:#f92672">.</span>copy(a)            <span style="color:#75715e">#对象拷贝，浅拷贝</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> copy<span style="color:#f92672">.</span>deepcopy(a)        <span style="color:#75715e">#对象拷贝，深拷贝</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">5</span>)                 <span style="color:#75715e">#修改对象a</span>
</span></span><span style="display:flex;"><span>a[<span style="color:#ae81ff">4</span>]<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;c&#39;</span>)            <span style="color:#75715e">#修改对象a中的[&#39;a&#39;, &#39;b&#39;]数组对象</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>print( <span style="color:#e6db74">&#39;a = &#39;</span>, a )
</span></span><span style="display:flex;"><span>print( <span style="color:#e6db74">&#39;b = &#39;</span>, b )
</span></span><span style="display:flex;"><span>print( <span style="color:#e6db74">&#39;c = &#39;</span>, c )
</span></span><span style="display:flex;"><span>print( <span style="color:#e6db74">&#39;d = &#39;</span>, d )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#输出：</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;a = &#39;</span>, [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>], <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;b = &#39;</span>, [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>], <span style="color:#ae81ff">5</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;c = &#39;</span>, [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;c&#39;</span>]]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;d = &#39;</span>, [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, [<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;b&#39;</span>]]
</span></span></code></pre></div><h2 id="栈代替递归">栈代替递归<a hidden class="anchor" aria-hidden="true" href="#栈代替递归">#</a></h2>
<h4 id="增加递归深度">增加递归深度<a hidden class="anchor" aria-hidden="true" href="#增加递归深度">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>sys<span style="color:#f92672">.</span>setrecursionlimit(<span style="color:#ae81ff">150000000</span>)
</span></span><span style="display:flex;"><span>print(sys<span style="color:#f92672">.</span>getrecursionlimit())
</span></span></code></pre></div><h4 id="迭代加深搜索">迭代加深搜索<a hidden class="anchor" aria-hidden="true" href="#迭代加深搜索">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>s <span style="color:#f92672">=</span> input()
</span></span><span style="display:flex;"><span>l <span style="color:#f92672">=</span> len(s)
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;0&#34;</span> <span style="color:#f92672">+</span> s  <span style="color:#75715e"># 1~l</span>
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> set()
</span></span><span style="display:flex;"><span>st <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(curlen, last):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">global</span> ans, st
</span></span><span style="display:flex;"><span>    stack <span style="color:#f92672">=</span> [(curlen, last)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> stack:
</span></span><span style="display:flex;"><span>        curlen, last <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">and</span> last <span style="color:#f92672">!=</span> s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, curlen) <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> st:
</span></span><span style="display:flex;"><span>                st[(curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, curlen)] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                ans<span style="color:#f92672">.</span>add(s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>                stack<span style="color:#f92672">.</span>append((curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>, s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">and</span> last <span style="color:#f92672">!=</span> s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>, curlen) <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> st:
</span></span><span style="display:flex;"><span>                st[(curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>, curlen)] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                ans<span style="color:#f92672">.</span>add(s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>                stack<span style="color:#f92672">.</span>append((curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">3</span>, s[curlen <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>:curlen <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dfs(l, <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> sorted(ans)  <span style="color:#75715e"># 将集合转换为列表并排序</span>
</span></span><span style="display:flex;"><span>print(len(ans))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> si <span style="color:#f92672">in</span> ans:
</span></span><span style="display:flex;"><span>    print(si)
</span></span></code></pre></div><h3 id="加速读入">加速读入<a hidden class="anchor" aria-hidden="true" href="#加速读入">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> sys
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;Plase input your name: &#39;</span>)
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>stdin<span style="color:#f92672">.</span>readline()
</span></span><span style="display:flex;"><span>print(name)
</span></span></code></pre></div><h2 id="队列-1">队列<a hidden class="anchor" aria-hidden="true" href="#队列-1">#</a></h2>
<p>Queue中有FIFO（先入先出）队列Queue，LIFO（后入先出）栈LifoQueue，和优先级队列PriorityQueue，但速度较慢，且不能不出栈地访问头部元素，想要访问头部元素，只能用get方法出栈首部获取方法返回值的来进行访问，非常不方便。</p>
<p>可以用deque()模拟</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> collections
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>q<span style="color:#f92672">=</span>collections<span style="color:#f92672">.</span>deque()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>m<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;push&#39;</span>:
</span></span><span style="display:flex;"><span>        q<span style="color:#f92672">.</span>append(s[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;pop&#39;</span>:
</span></span><span style="display:flex;"><span>        q<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;empty&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(q)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;YES&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;NO&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(q[<span style="color:#ae81ff">0</span>])
</span></span></code></pre></div><h2 id="栈-1">栈<a hidden class="anchor" aria-hidden="true" href="#栈-1">#</a></h2>
<p>列表模拟</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>m<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stk<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;push&#39;</span>:
</span></span><span style="display:flex;"><span>        stk<span style="color:#f92672">.</span>append(int(s[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;pop&#39;</span>:
</span></span><span style="display:flex;"><span>        stk<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;empty&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(stk)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;YES&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;NO&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(stk[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><p><strong>deque</strong>模拟</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> collections
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stk <span style="color:#f92672">=</span> collections<span style="color:#f92672">.</span>deque()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>m<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(m):
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;push&#39;</span>:
</span></span><span style="display:flex;"><span>        stk<span style="color:#f92672">.</span>appendleft( int(s[<span style="color:#ae81ff">1</span>]) )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;pop&#39;</span>:
</span></span><span style="display:flex;"><span>        stk<span style="color:#f92672">.</span>popleft()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> s[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;empty&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(stk)<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;YES&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">&#39;NO&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(stk[<span style="color:#ae81ff">0</span>])
</span></span></code></pre></div><h2 id="python-常用内置库">Python 常用内置库<a hidden class="anchor" aria-hidden="true" href="#python-常用内置库">#</a></h2>
<table>
<thead>
<tr>
<th><a href="https://docs.python.org/3/library/array.html"><code>array</code></a></th>
<th>定长数组</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.python.org/3/library/argparse.html"><code>argparse</code></a></td>
<td>命令行参数处理</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/bisect.html"><code>bisect</code></a></td>
<td>二分查找</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/collections.html"><code>collections</code></a></td>
<td>有序字典、双端队列等数据结构</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/fractions.html"><code>fractions</code></a></td>
<td>有理数</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/heapq.html"><code>heapq</code></a></td>
<td>基于堆的优先级队列</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/io.html"><code>io</code></a></td>
<td>文件流、内存流</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/itertools.html"><code>itertools</code></a></td>
<td>迭代器</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/math.html"><code>math</code></a></td>
<td>数学函数</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/os.html"><code>os.path</code></a></td>
<td>系统路径等</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/random.html"><code>random</code></a></td>
<td>随机数</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/re.html"><code>re</code></a></td>
<td>正则表达式</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/struct.html"><code>struct</code></a></td>
<td>转换结构体和二进制数据</td>
</tr>
<tr>
<td><a href="https://docs.python.org/3/library/sys.html"><code>sys</code></a></td>
<td>系统信息</td>
</tr>
</tbody>
</table>
<h3 id="defaultdict">defaultdict()<a hidden class="anchor" aria-hidden="true" href="#defaultdict">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> defaultdict
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 创建一个 defaultdict，指定默认值为 int 类型的 0</span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> defaultdict()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修改默认值为 100</span>
</span></span><span style="display:flex;"><span>d<span style="color:#f92672">.</span>default_factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span>: (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><h3 id="counter">Counter()<a hidden class="anchor" aria-hidden="true" href="#counter">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> collections <span style="color:#f92672">import</span> Counter
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 定义一个列表</span>
</span></span><span style="display:flex;"><span>lst <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;abcdgsaa&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用 Counter 统计列表中元素的出现次数</span>
</span></span><span style="display:flex;"><span>c1 <span style="color:#f92672">=</span> Counter(lst)
</span></span><span style="display:flex;"><span>c2 <span style="color:#f92672">=</span> Counter(s)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(c1,c2, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用 most_common() 方法按照元素的出现次数进行排序</span>
</span></span><span style="display:flex;"><span>sorted_items <span style="color:#f92672">=</span> c1<span style="color:#f92672">.</span>most_common()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x,y <span style="color:#f92672">in</span> enumerate(sorted_items):
</span></span><span style="display:flex;"><span>    print(y[<span style="color:#ae81ff">0</span>])
</span></span></code></pre></div><h3 id="heapq">heapq<a hidden class="anchor" aria-hidden="true" href="#heapq">#</a></h3>
<p>建堆 ( 小根堆 )</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>heapify(a)
</span></span><span style="display:flex;"><span>print(a)
</span></span></code></pre></div><p>建大根堆</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>a <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]:
</span></span><span style="display:flex;"><span>    heapq<span style="color:#f92672">.</span>heappush(a,<span style="color:#f92672">-</span>i)
</span></span><span style="display:flex;"><span>print( list( map(<span style="color:#66d9ef">lambda</span> x:<span style="color:#f92672">-</span>x,a) ) )
</span></span></code></pre></div><p><strong>heap_sort</strong>(<strong>heappush</strong>)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> heapq
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">heap_sort</span>(arr):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> arr:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> []
</span></span><span style="display:flex;"><span>    h <span style="color:#f92672">=</span> []  <span style="color:#75715e">#建立空堆</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> arr:
</span></span><span style="display:flex;"><span>        heapq<span style="color:#f92672">.</span>heappush(h,i) <span style="color:#75715e">#heappush自动建立小根堆</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [heapq<span style="color:#f92672">.</span>heappop(h) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(h))]  <span style="color:#75715e">#heappop每次删除并返回列表中最小的值</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e"># 堆排序取最小的m个数字</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> heapq
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">heap_sort</span>(arr, k):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> arr:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> []
</span></span><span style="display:flex;"><span>    h<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> arr:
</span></span><span style="display:flex;"><span>        heapq<span style="color:#f92672">.</span>heappush(h, i)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [heapq<span style="color:#f92672">.</span>heappop(h) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(k)]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>n,m <span style="color:#f92672">=</span> map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>arr <span style="color:#f92672">=</span> list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span>ans <span style="color:#f92672">=</span> heap_sort(arr, m)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39; &#39;</span><span style="color:#f92672">.</span>join(map(str, ans)))
</span></span></code></pre></div><p><strong>heappushpop</strong></p>
<p>先push再pop</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>h
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>heappushpop(h, <span style="color:#ae81ff">300</span>)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>h
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">200</span>]
</span></span></code></pre></div><p><strong><code>heapreplace</code></strong></p>
<p>先pop再push</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>heapreplace(h, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>h
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">200</span>]
</span></span></code></pre></div><p><strong>heapq.merge</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">import</span> heapq
</span></span><span style="display:flex;"><span>h1 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>h2 <span style="color:#f92672">=</span> [<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1000</span>]
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>heapify(h1)
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>heapify(h2)
</span></span><span style="display:flex;"><span>print(list(heapq<span style="color:#f92672">.</span>merge(h1, h2)))
</span></span></code></pre></div><p><strong>heap.nlargest</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>h1
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">90</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">200</span>]
</span></span><span style="display:flex;"><span>heapq<span style="color:#f92672">.</span>nlargest(<span style="color:#ae81ff">2</span>,h1,key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x:<span style="color:#f92672">-</span>x)
</span></span><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>]
</span></span></code></pre></div><h3 id="list">List()<a hidden class="anchor" aria-hidden="true" href="#list">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">del</span> list[<span style="color:#ae81ff">1</span>] 删除列表元素
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>列表比较
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">import</span> operator
</span></span><span style="display:flex;"><span>    operator<span style="color:#f92672">.</span>eq(a,b)
</span></span><span style="display:flex;"><span>len(list)
</span></span><span style="display:flex;"><span>max(list)
</span></span><span style="display:flex;"><span>min(list)
</span></span><span style="display:flex;"><span>list(seq) 将元组转换为列表
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>append(obj)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>count(obj)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>extend(seq)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>index(obj)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>insert(index, obj)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>pop([index<span style="color:#f92672">=-</span><span style="color:#ae81ff">1</span>]) 删除列表中一个元素
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>remove(obj) 删除第一个匹配项
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>reverse()
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>sort(key<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, reverse<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span>list<span style="color:#f92672">.</span>copy()
</span></span></code></pre></div><h3 id="tuple-元素组合">tuple() 元素组合<a hidden class="anchor" aria-hidden="true" href="#tuple-元素组合">#</a></h3>
<p>类似list</p>
<h3 id="sortedlist">SortedList()<a hidden class="anchor" aria-hidden="true" href="#sortedlist">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> sortedcontainers <span style="color:#f92672">import</span> SortedList
</span></span><span style="display:flex;"><span>sl <span style="color:#f92672">=</span> SortedList()
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>add(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(sl[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>print(sl[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>update([<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>print(sl)
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>update([<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">7</span>])
</span></span><span style="display:flex;"><span>print(sl)
</span></span><span style="display:flex;"><span><span style="color:#75715e">##sl.clear()</span>
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>discard(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>remove(<span style="color:#ae81ff">9</span>)
</span></span><span style="display:flex;"><span>print(sl)
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>pop()
</span></span><span style="display:flex;"><span>print(sl)
</span></span><span style="display:flex;"><span>sl<span style="color:#f92672">.</span>pop(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>print(sl)
</span></span><span style="display:flex;"><span>print(sl<span style="color:#f92672">.</span>bisect_left(<span style="color:#ae81ff">12</span>)) <span style="color:#75715e">#返回需要插入的位置，如有存在则返回左侧的位置</span>
</span></span><span style="display:flex;"><span>print(sl<span style="color:#f92672">.</span>bisect_right(<span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span>print(sl<span style="color:#f92672">.</span>count(<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>print(sl<span style="color:#f92672">.</span>index(<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>it <span style="color:#f92672">=</span> sl<span style="color:#f92672">.</span>islice(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>print(list(it))
</span></span></code></pre></div><h3 id="dict">dict()<a hidden class="anchor" aria-hidden="true" href="#dict">#</a></h3>
<p>键值必须不可变</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>d <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;1&#39;</span>:<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;2&#39;</span>:<span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;99&#39;</span>:<span style="color:#e6db74">&#39;xycz&#39;</span>}
</span></span><span style="display:flex;"><span>print(d)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;0&#39;</span> <span style="color:#f92672">in</span> d :<span style="color:#66d9ef">del</span> d[<span style="color:#e6db74">&#39;0&#39;</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">del</span> d[<span style="color:#e6db74">&#39;1&#39;</span>]
</span></span><span style="display:flex;"><span>print(d)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#39;1&#39;</span>: <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;2&#39;</span>: <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;99&#39;</span>: <span style="color:#e6db74">&#39;xycz&#39;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#39;2&#39;</span>: <span style="color:#e6db74">&#39;b&#39;</span>, <span style="color:#e6db74">&#39;99&#39;</span>: <span style="color:#e6db74">&#39;xycz&#39;</span>}
</span></span></code></pre></div><h4 id="内置方法">内置方法<a hidden class="anchor" aria-hidden="true" href="#内置方法">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>len str type
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>fromkeys(seq) 将seq作为字典的键值<span style="color:#960050;background-color:#1e0010">，</span> 字典中val为默认
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>get(key, default<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>) 
</span></span><span style="display:flex;"><span>key <span style="color:#f92672">in</span> dict
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>items() 
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>keys() 
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>setdefault(key, default <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>update(dict2) 把dict2添加到dict中
</span></span><span style="display:flex;"><span>dict<span style="color:#f92672">.</span>values() 返回值
</span></span><span style="display:flex;"><span>pop(key[,default]) 删除字典中key所对应的值并返回
</span></span><span style="display:flex;"><span>popitem() 返回并删除字典中最后一对键值
</span></span></code></pre></div><h3 id="set">set()<a hidden class="anchor" aria-hidden="true" href="#set">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>空集合用set()
</span></span><span style="display:flex;"><span>支持 <span style="color:#f92672">-</span>, <span style="color:#f92672">|</span>, <span style="color:#f92672">&amp;</span>, <span style="color:#f92672">^</span>(不同时包含于两个集合)
</span></span><span style="display:flex;"><span>	difference() 在原集合上修改<span style="color:#960050;background-color:#1e0010">，</span>无返回值, difference_update() 返回新集合 
</span></span><span style="display:flex;"><span>    union() 并集
</span></span><span style="display:flex;"><span>    intersection() intersection_update() 返回交集
</span></span><span style="display:flex;"><span>    isdisjoint() 判断两个集合是否包含相同的元素
</span></span><span style="display:flex;"><span>    issubset() 判断指定参数的集合是否为该调用方法的集合的子集
</span></span><span style="display:flex;"><span>    issuperset() 判断该方法是否为指定参数的子集
</span></span><span style="display:flex;"><span>    symmetric_difference() 返回两个集合中不重复的元素集合
</span></span><span style="display:flex;"><span>    symmetric_difference_update() 移除相同的元素<span style="color:#960050;background-color:#1e0010">，</span>并插入没有的元素
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>add(x) 添加元素
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>update(x) 可以添加多个元素<span style="color:#960050;background-color:#1e0010">，</span>并且可以是列表元组字典
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>remove(x) 将元素从集合中移除<span style="color:#960050;background-color:#1e0010">，</span> 如果不存在则报错
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>discard(x) 移除元素<span style="color:#960050;background-color:#1e0010">，</span>但是不报错
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>pop() 设置随机删除结合中的一个元素<span style="color:#960050;background-color:#1e0010">（</span>无序集合的第一个元素<span style="color:#960050;background-color:#1e0010">）</span>
</span></span><span style="display:flex;"><span>len(s) s<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">in</span> s
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">.</span>copy()
</span></span></code></pre></div><h2 id="自定义比较参数">自定义比较参数<a hidden class="anchor" aria-hidden="true" href="#自定义比较参数">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> cmp_to_key
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">compare</span>(s1, s2):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(s1) <span style="color:#f92672">==</span> len(s2):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> c1, c2 <span style="color:#f92672">in</span> zip(s1, s2):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> c1 <span style="color:#f92672">&gt;</span> c2:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">elif</span> c1 <span style="color:#f92672">&lt;</span> c2:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> len(s1) <span style="color:#f92672">&gt;</span> len(s2):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>things <span style="color:#f92672">=</span> input()<span style="color:#f92672">.</span>split()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用 cmp_to_key 将比较函数转换为 key 函数</span>
</span></span><span style="display:flex;"><span>things<span style="color:#f92672">.</span>sort(key<span style="color:#f92672">=</span>cmp_to_key(compare))
</span></span><span style="display:flex;"><span>print(things)
</span></span></code></pre></div><h2 id="__init__魔术方法"><code>__init__</code>魔术方法<a hidden class="anchor" aria-hidden="true" href="#__init__魔术方法">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fib</span>(object):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __call__(self, num): <span style="color:#75715e"># 将对象作为函数调用时触发</span>
</span></span><span style="display:flex;"><span>        a, b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>l <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(num):
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>l<span style="color:#f92672">.</span>append(a)
</span></span><span style="display:flex;"><span>            a, b <span style="color:#f92672">=</span> b, a<span style="color:#f92672">+</span>b
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>l
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __str__(self): <span style="color:#75715e"># 使用print(对象）或者str (对象)的时候触发</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> str(self<span style="color:#f92672">.</span>l) <span style="color:#75715e"># 必须返回字符串类型</span>
</span></span><span style="display:flex;"><span>    __rept__<span style="color:#f92672">=</span>__str__ <span style="color:#75715e"># 使用repr(对象)</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">=</span> Fib()
</span></span><span style="display:flex;"><span>print(f(<span style="color:#ae81ff">10</span>))
</span></span></code></pre></div><ul>
<li></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://showguan.github.io/">Guan</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
